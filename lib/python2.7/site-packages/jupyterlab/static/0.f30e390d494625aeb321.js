webpackJsonp([0],{"+5nH":function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva"),o=n("LHV8"),s=o.render,u=o.bound,l=n("J731"),f=a.Dependencies,c=n("6gf1"),h=n("XVii"),d=n("Lp/H");function p(e,t,n){this._el=null;this._model=null;this._width=this.__width=t||500;this._height=this.__height=n||300;this._bgcolor=null;this._cursor=true;this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._viewport=null;this._renderer=null;this._handler=null;this._streamer=null;this._skipSignals=false;this._changeset=null;this._repaint=true;this._renderers=s;this._io=null;this._api={}}var g=p.prototype;g.model=function(e){if(!arguments.length)return this._model;if(this._model!==e){this._model=e;this._streamer=new a.Node(e);this._streamer._rank=-1;this._changeset=a.ChangeSet.create();if(this._handler)this._handler.model(e)}return this};function m(e){var t=this,n=this._model.data(e);if(!n)return l.error('Data source "'+e+'" is not defined.');var r=n.pipeline()[0],a=this._streamer,o={};if(this._api[e])return this._api[e];o.insert=function(s){n.insert(i.duplicate(s));a.addListener(r);t._changeset.data[e]=1;return o};o.update=function(){a.addListener(r);t._changeset.data[e]=1;return n.update.apply(n,arguments),o};o.remove=function(){a.addListener(r);t._changeset.data[e]=1;return n.remove.apply(n,arguments),o};o.values=function(){return n.values()};return this._api[e]=o}g.data=function(e){var t=this;if(!arguments.length)return t._model.values();else if(i.isString(e))return m.call(t,e);else if(i.isObject(e)){i.keys(e).forEach(function(n){var r=m.call(t,n);e[n](r)})}return this};var v=i.toMap(["width","height","padding"]);g.signal=function(e,t,n){var r=this._model,a,o;if(!arguments.length){return r.values(f.SIGNALS)}else if(arguments.length===1&&i.isString(e)){return r.values(f.SIGNALS,e)}if(i.isObject(e)){o=e;n=t}else{o={};o[e]=t}for(a in o){if(v[a]){this[a](o[a])}else{y.call(this,a,o[a])}}return this._skipSignals=n,this};function y(e,t){var n=this._changeset,r=this._model.signal(e);if(!r)return l.error('Signal "'+e+'" is not defined.');this._streamer.addListener(r.value(t));n.signals[e]=1;n.reflow=true}g.width=function(e){if(!arguments.length)return this.__width;if(this.__width!==e){this._width=this.__width=e;this.model().width(e);this.initialize();if(this._strict)this._autopad=1;y.call(this,"width",e)}return this};g.height=function(e){if(!arguments.length)return this.__height;if(this.__height!==e){this._height=this.__height=e;this.model().height(e);this.initialize();if(this._strict)this._autopad=1;y.call(this,"height",e)}return this};g.background=function(e){if(!arguments.length)return this._bgcolor;if(this._bgcolor!==e){this._bgcolor=e;this.initialize()}return this};g.padding=function(e){if(!arguments.length)return this._padding;if(this._padding!==e){if(i.isString(e)){this._autopad=1;this._padding={top:0,left:0,bottom:0,right:0};this._strict=e==="strict"}else{this._autopad=0;this._padding=e;this._strict=false}if(this._renderer)this._renderer.resize(this._width,this._height,this._padding);if(this._handler)this._handler.padding(this._padding);y.call(this,"padding",this._padding)}return this._repaint=true,this};function _(){var e=this.model().scene(),t=e.items[0].legendItems,n=0,r=t.length,i,a;if(this._strict){i=u.mark(e,null,false);for(;n<r;++n){a=t[n].bounds;i.add(a.x1,0).add(a.x2,0)}return i}return e.bounds}g.autopad=function(e){if(this._autopad<1)return this;else this._autopad=0;var t=_.call(this),n=this._padding,r=this.model().config(),i=r.autopadInset,a=t.x1<0?Math.ceil(-t.x1)+i:0,o=t.y1<0?Math.ceil(-t.y1)+i:0,s=t.x2>this._width?Math.ceil(+t.x2-this._width)+i:0;t=t.y2>this._height?Math.ceil(+t.y2-this._height)+i:0;n={left:a,top:o,right:s,bottom:t};if(this._strict){this._autopad=0;this._padding=n;this._width=Math.max(0,this.__width-(a+s));this._height=Math.max(0,this.__height-(o+t));this._model.width(this._width).height(this._height).reset();y.call(this,"width",this._width);y.call(this,"height",this._height);y.call(this,"padding",n);this.initialize().update({props:"enter"}).update({props:"update"})}else{this.padding(n).update(e)}return this};g.viewport=function(e){if(!arguments.length)return this._viewport;if(this._viewport!==e){this._viewport=e;this.initialize()}return this};g.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else if(i.isString(e))throw new Error("Unknown renderer: "+e);else if(!e)throw new Error("No renderer specified");if(this._io!==e){this._io=e;this._renderer=null;this.initialize();if(this._build)this.render()}return this};g.initialize=function(e){var t=this,n,i=t._width,a=t._height,o=t._padding,u=t._bgcolor,l=this.model().config();if(!arguments.length||e===null){e=this._el?this._el.parentNode:null;if(!e)return this}r.select(e).select("div.vega").remove();this._el=e=r.select(e).append("div").attr("class","vega").style("position","relative").node();if(t._viewport){r.select(e).style("width",(t._viewport[0]||i)+"px").style("height",(t._viewport[1]||a)+"px").style("overflow","auto")}s.canvas.Renderer.RETINA=l.render.retina;t._renderer=(t._renderer||new this._io.Renderer(l.load)).initialize(e,i,a,o).background(u);n=t._handler;t._handler=(new this._io.Handler).initialize(e,o,t);if(n){n.handlers().forEach(function(e){t._handler.on(e.type,e.handler)})}else{t._detach=c(this)}return this._repaint=true,this};g.destroy=function(){if(this._detach)this._detach()};function x(){var e=this;e._renderNode=new a.Node(e._model).router(true);e._renderNode.evaluate=function(t){l.debug(t,["rendering"]);var n=e._model.scene(),r=e._handler;if(r&&r.scene)r.scene(n);if(t.trans){t.trans.start(function(t){e._renderer.render(n,t)})}else if(e._repaint){e._renderer.render(n)}else if(t.dirty.length){e._renderer.render(n,t.dirty)}if(t.dirty.length){t.dirty.forEach(function(e){e._dirty=false});n.items[0]._dirty=false}e._repaint=e._skipSignals=false;return t};return e._model.scene(e._renderNode),true}g.update=function(e){e=e||{};var t=this,n=this._model,r=this._streamer,o=this._changeset,s=e.duration?new d(e.duration,e.ease):null;if(s)o.trans=s;if(e.props!==undefined){if(i.keys(o.data).length>0){throw Error("New data values are not reflected in the visualization."+" Please call view.update() before updating a specified property set.")}o.reflow=true;o.request=e.props}var u=t._build;t._build=t._build||x.call(this);if(e.items&&u){h.update(n,e.trans,e.props,e.items,o.dirty);t._renderNode.evaluate(o)}else if(r.listeners().length&&u){if(this._repaint)r.addListener(n.node());n.propagate(o,r,null,this._skipSignals);r.disconnect()}else{n.fire(o)}t._changeset=a.ChangeSet.create();return t.autopad(e)};g.toImageURL=function(e){var t=this,n;switch(e||"png"){case"canvas":case"png":n=s.canvas.Renderer;break;case"svg":n=s.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var r=s.canvas.Renderer.RETINA;s.canvas.Renderer.RETINA=false;var i=new n(t._model.config.load).initialize(null,t._width,t._height,t._padding).background(t._bgcolor).render(t._model.scene());s.canvas.Renderer.RETINA=r;if(e==="svg"){var a=new Blob([i.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(a)}else{return i.canvas().toDataURL("image/png")}};g.render=function(e){this._renderer.render(this._model.scene(),e);return this};g.on=function(){this._handler.on.apply(this._handler,arguments);return this};g.onSignal=function(e,t){var n=this._model.signal(e);return n?n.on(t):l.error('Signal "'+e+'" is not defined.'),this};g.off=function(){this._handler.off.apply(this._handler,arguments);return this};g.offSignal=function(e,t){var n=this._model.signal(e);return n?n.off(t):l.error('Signal "'+e+'" is not defined.'),this};p.factory=function(e){var t=n("oCPx");return function(n){n=n||{};var a=e.defs();var o=(n.el?new p:new t).model(e).renderer(n.renderer||"canvas").width(a.width).height(a.height).background(a.background).padding(a.padding).viewport(a.viewport).initialize(n.el);if(n.data)o.data(n.data);if(n.el){if(n.hover!==false){o.on("mouseover",function(e,t){if(t&&t.hasPropertySet("hover")){this.update({props:"hover",items:t})}}).on("mouseout",function(e,t){if(t&&t.hasPropertySet("hover")){this.update({props:"update",items:t})}})}if(n.cursor!==false){o.onSignal("cursor",function(e,t){var n=r.select("body");if(i.isString(t)){o._cursor=t==="default";n.style("cursor",t)}else if(i.isObject(t)&&o._cursor){n.style("cursor",t.default)}})}}return o}};e.exports=p},"/2vj":function(e,t,n){var r=n("zF6n");var i=n("uHQN");var a="__dl_rem__";function o(e){this._add=[];this._rem=[];this._key=e||null;this._last=null}var s=o.prototype;s.add=function(e){this._add.push(e)};s.rem=function(e){this._rem.push(e)};s.values=function(){this._get=null;if(this._rem.length===0)return this._add;var e=this._add,t=this._rem,n=this._key,o=Array(e.length-t.length),s,u,l,f;if(!r.isObject(t[0])){f=i.count.map(t);for(s=0,u=0,l=e.length;s<l;++s){if(f[e[s]]>0){f[e[s]]-=1}else{o[u++]=e[s]}}}else if(n){f=r.toMap(t,n);for(s=0,u=0,l=e.length;s<l;++s){if(!f.hasOwnProperty(n(e[s]))){o[u++]=e[s]}}}else{for(s=0,l=t.length;s<l;++s){t[s][a]=1}for(s=0,u=0,l=e.length;s<l;++s){if(!e[s][a]){o[u++]=e[s]}}for(s=0,l=t.length;s<l;++s){delete t[s][a]}}this._rem=[];return this._add=o};s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=i.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]];this._get=e}return this._ext};s.argmin=function(e){return this.extent(e)[0]};s.argmax=function(e){return this.extent(e)[1]};s.min=function(e){var t=this.extent(e)[0];return t!=null?e(t):+Infinity};s.max=function(e){var t=this.extent(e)[1];return t!=null?e(t):-Infinity};s.quartile=function(e){if(this._get!==e||!this._q){this._q=i.quartile(this.values(),e);this._get=e}return this._q};s.q1=function(e){return this.quartile(e)[0]};s.q2=function(e){return this.quartile(e)[1]};s.q3=function(e){return this.quartile(e)[2]};e.exports=o},"/7Ur":function(e,t,n){"use strict";var r=n("h/tW");var i=n("z5TJ");var a=n("WJ2w");var o=n("QSMf");var s=n("j8cM");t.DELIM="|";t.ASSIGN="=";t.TYPE=",";t.FUNC="_";function u(e){return"mark"+t.ASSIGN+e.mark+t.DELIM+f(e.encoding)}t.shorten=u;function l(e,n,r){var i=e.split(t.DELIM),a=i.shift().split(t.ASSIGN)[1].trim(),o=c(i.join(t.DELIM));var u={mark:s.Mark[a],encoding:o};if(n!==undefined){u.data=n}if(r!==undefined){u.config=r}return u}t.parse=l;function f(e){return o.map(e,function(e,n){return n+t.ASSIGN+h(e)}).join(t.DELIM)}t.shortenEncoding=f;function c(e){return e.split(t.DELIM).reduce(function(e,n){var r=n.split(t.ASSIGN),i=r[0].trim(),a=r[1];e[i]=p(a);return e},{})}t.parseEncoding=c;function h(e){return(e.aggregate?e.aggregate+t.FUNC:"")+(e.timeUnit?e.timeUnit+t.FUNC:"")+(e.bin?"bin"+t.FUNC:"")+(e.field||"")+t.TYPE+a.SHORT_TYPE[e.type]}t.shortenFieldDef=h;function d(e,n){if(n===void 0){n=t.DELIM}return e.map(h).join(n)}t.shortenFieldDefs=d;function p(e){var n=e.split(t.TYPE);var o={field:n[0].trim(),type:a.TYPE_FROM_SHORT_TYPE[n[1].trim()]};for(var s=0;s<r.AGGREGATE_OPS.length;s++){var u=r.AGGREGATE_OPS[s];if(o.field.indexOf(u+"_")===0){o.field=o.field.substr(u.toString().length+1);if(u===r.AggregateOp.COUNT&&o.field.length===0){o.field="*"}o.aggregate=u;break}}for(var s=0;s<i.TIMEUNITS.length;s++){var l=i.TIMEUNITS[s];if(o.field&&o.field.indexOf(l+"_")===0){o.field=o.field.substr(o.field.length+1);o.timeUnit=l;break}}if(o.field&&o.field.indexOf("bin_")===0){o.field=o.field.substr(4);o.bin=true}return o}t.parseFieldDef=p},"/MHv":function(e,t){var n={},r={},i=[].join;function a(e,t,r,a,o,s,u,l,f){var c=i.call(arguments);if(n[c]){return n[c]}var h=u*(Math.PI/180);var d=Math.sin(h);var p=Math.cos(h);r=Math.abs(r);a=Math.abs(a);var g=p*(l-e)*.5+d*(f-t)*.5;var m=p*(f-t)*.5-d*(l-e)*.5;var v=g*g/(r*r)+m*m/(a*a);if(v>1){v=Math.sqrt(v);r*=v;a*=v}var y=p/r;var _=d/r;var x=-d/a;var b=p/a;var M=y*l+_*f;var k=x*l+b*f;var w=y*e+_*t;var S=x*e+b*t;var E=(w-M)*(w-M)+(S-k)*(S-k);var A=1/E-.25;if(A<0)A=0;var T=Math.sqrt(A);if(s==o)T=-T;var O=.5*(M+w)-T*(S-k);var N=.5*(k+S)+T*(w-M);var L=Math.atan2(k-N,M-O);var C=Math.atan2(S-N,w-O);var R=C-L;if(R<0&&s===1){R+=2*Math.PI}else if(R>0&&s===0){R-=2*Math.PI}var I=Math.ceil(Math.abs(R/(Math.PI*.5+.001)));var D=[];for(var U=0;U<I;++U){var P=L+U*R/I;var z=L+(U+1)*R/I;D[U]=[O,N,P,z,r,a,d,p]}return n[c]=D}function o(e){var t=i.call(e);if(r[t]){return r[t]}var n=e[0],a=e[1],o=e[2],s=e[3],u=e[4],l=e[5],f=e[6],c=e[7];var h=c*u;var d=-f*l;var p=f*u;var g=c*l;var m=Math.cos(o);var v=Math.sin(o);var y=Math.cos(s);var _=Math.sin(s);var x=.5*(s-o);var b=Math.sin(x*.5);var M=8/3*b*b/Math.sin(x);var k=n+m-M*v;var w=a+v+M*m;var S=n+y;var E=a+_;var A=S+M*_;var T=E-M*y;return r[t]=[h*k+d*w,p*k+g*w,h*A+d*T,p*A+g*T,h*S+d*E,p*S+g*E]}e.exports={segments:a,bezier:o,cache:{segments:n,bezier:r}}},"/lc5":function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("4JPs");function o(e){a.prototype.init.call(this,e);a.addParameters(this,{by:{type:"array<field>"}});this.router(true)}var s=o.prototype=Object.create(a.prototype);s.constructor=o;s.transform=function(e){i.debug(e,["sorting"]);if(e.add.length||e.mod.length||e.rem.length){e.sort=r.comparator(this.param("by").field)}return e};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Sort transform",description:"Sorts the values of a data set.",type:"object",properties:{type:{enum:["sort"]},by:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"A list of fields to use as sort criteria."}},required:["type","by"]}},"0ZZw":function(e,t,n){"use strict";var r=n("P/aK");var i=n("QSMf");var a=n("o+e1");var o=n("j8cM");var s=n("Fw/k");var u=n("ZAUf");var l=n("k2D6");var f=n("SIx5");var c=n("MtYt");var h=n("HES2");var d=n("rKP5");var p=n("8lgt");var g=n("G+HP");var m=n("XL1Y");var v={area:l.area,bar:f.bar,line:h.line,point:d.point,text:g.text,tick:m.tick,rule:p.rule,circle:d.circle,square:d.square};function y(e){if(u.contains([o.LINE,o.AREA],e.mark())){return _(e)}else{return x(e)}}t.parseMark=y;function _(e){var t=e.mark();var n=e.parent()&&e.parent().isFacet();var i={data:e.dataTable()};var a=k(e);var s=[{name:e.name("marks"),type:v[t].markType(),from:u.extend(n||a.length>0?{}:i,{transform:[{type:"sort",by:M(e)}]}),properties:{update:v[t].properties(e)}}];if(a.length>0){var l={type:"facet",groupby:a};var f=t===o.AREA&&e.stack()?w(e,true).concat(l):[].concat(l,e.has(r.ORDER)?[{type:"sort",by:b(e)}]:[]);return[{name:e.name("pathgroup"),type:"group",from:u.extend(n?{}:i,{transform:f}),properties:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:s}]}else{return s}}function x(e){var t=e.mark();var n=e.parent()&&e.parent().isFacet();var i={data:e.dataTable()};var a=[];if(t===o.TEXT&&e.has(r.COLOR)&&e.config().mark.applyColorToBackground&&!e.has(r.X)&&!e.has(r.Y)){a.push(u.extend({name:e.name("background"),type:"rect"},n?{}:{from:i},{properties:{update:g.text.background(e)}}))}a.push(u.extend({name:e.name("marks"),type:v[t].markType()},!n||e.stack()||e.has(r.ORDER)?{from:u.extend(n?{}:i,e.stack()?{transform:w(e,false)}:e.has(r.ORDER)?{transform:[{type:"sort",by:b(e)}]}:{})}:{},{properties:{update:v[t].properties(e)}}));if(e.has(r.LABEL)&&v[t].labels){var s=v[t].labels(e);if(s!==undefined){a.push(u.extend({name:e.name("label"),type:"text"},n?{}:{from:i},{properties:{update:s}}))}}return a}function b(e){if(e.has(r.ORDER)){var t=e.encoding().order;if(t instanceof Array){return t.map(c.sortField)}else{return c.sortField(t)}}return null}function M(e){if(e.mark()===o.LINE&&e.has(r.PATH)){var t=e.encoding().path;if(t instanceof Array){return t.map(c.sortField)}else{return c.sortField(t)}}else{return"-"+e.field(e.config().mark.orient==="horizontal"?r.Y:r.X,{binSuffix:"_mid"})}}function k(e){return[r.COLOR,r.DETAIL,r.OPACITY,r.SHAPE].reduce(function(t,n){if(e.has(n)&&!e.fieldDef(n).aggregate){t.push(e.field(n))}return t},[])}function w(e,t){var n=S(e);if(t){return[E(e,n),A(e,n)]}return[A(e,n)]}function S(e){var t=e.encoding();return r.STACK_GROUP_CHANNELS.reduce(function(n,r){var o=t[r];if(i.has(t,r)){if(u.isArray(o)){o.forEach(function(e){n.push(a.field(e))})}else{var l=o;var f=e.scale(r);n.push(a.field(l,{binSuffix:f&&f.type===s.ScaleType.ORDINAL?"_range":"_start"}))}}return n},[])}function E(e,t){var n=e.stack();return{type:"impute",field:e.field(n.fieldChannel),groupby:t,orderby:[e.field(n.groupbyChannel,{binSuffix:"_mid"})],method:"value",value:0}}function A(e,t){var n=e.stack();var i=e.encoding();var a=e.has(r.ORDER)?(u.isArray(i[r.ORDER])?i[r.ORDER]:[i[r.ORDER]]).map(c.sortField):t.map(function(e){return"-"+e});var o=e.field(n.fieldChannel);var s={type:"stack",groupby:[e.field(n.groupbyChannel,{binSuffix:"_mid"})],field:e.field(n.fieldChannel),sortby:a,output:{start:o+"_start",end:o+"_end"}};if(n.offset){s.offset=n.offset}return s}},"1/F5":function(e,t,n){(function(e,n){true?n(t):typeof define==="function"&&define.amd?define("d3-format",["exports"],n):n(e.d3_format={})})(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:NaN}function r(e,t){return function(n,r){var i=n.length,a=[],o=0,s=e[0],u=0;while(i>0&&s>0){if(u+s+1>r)s=Math.max(1,r-u);a.push(n.substring(i-=s,i+s));if((u+=s+1)>r)break;s=e[o=(o+1)%e.length]}return a.reverse().join(t)}}var i;function a(e,n){var r=t(e,n);if(!r)return e+"";var a=r[0],o=r[1],s=o-(i=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,u=a.length;return s===u?a:s>u?a+new Array(s-u+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+t(e,Math.max(0,n+s-1))[0]}function o(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function s(e,t){e=e.toPrecision(t);e:for(var n=e.length,r=1,i=-1,a;r<n;++r){switch(e[r]){case".":i=a=r;break;case"0":if(i===0)i=r;a=r;break;case"e":break e;default:if(i>0)i=0;break}}return i>0?e.slice(0,i)+e.slice(a+1):e}var u={"":s,"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return o(e*100,t)},r:o,s:a,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};var l=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function f(e){return new c(e)}function c(e){if(!(t=l.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],f=!!t[7],c=t[8]&&+t[8].slice(1),h=t[9]||"";if(h==="n")f=true,h="g";else if(!u[h])h="";if(o||n==="0"&&r==="=")o=true,n="0",r="=";this.fill=n;this.align=r;this.sign=i;this.symbol=a;this.zero=o;this.width=s;this.comma=f;this.precision=c;this.type=h}c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var h=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function d(e){return e}function p(e){var t=e.grouping&&e.thousands?r(e.grouping,e.thousands):d,a=e.currency,o=e.decimal;function s(e){e=f(e);var n=e.fill,r=e.align,s=e.sign,l=e.symbol,c=e.zero,d=e.width,p=e.comma,g=e.precision,m=e.type;var v=l==="$"?a[0]:l==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",y=l==="$"?a[1]:/[%p]/.test(m)?"%":"";var _=u[m],x=!m||/[defgprs%]/.test(m);g=g==null?m?6:12:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));return function(e){var a=v,u=y;if(m==="c"){u=_(e)+u;e=""}else{e=+e;var l=(e<0||1/e<0)&&(e*=-1,true);e=_(e,g);if(l){var f=-1,b=e.length,M;l=false;while(++f<b){if(M=e.charCodeAt(f),48<M&&M<58||m==="x"&&96<M&&M<103||m==="X"&&64<M&&M<71){l=true;break}}}a=(l?s==="("?s:"-":s==="-"||s==="("?"":s)+a;u=u+(m==="s"?h[8+i/3]:"")+(l&&s==="("?")":"");if(x){var f=-1,b=e.length,M;while(++f<b){if(M=e.charCodeAt(f),48>M||M>57){u=(M===46?o+e.slice(f+1):e.slice(f))+u;e=e.slice(0,f);break}}}}if(p&&!c)e=t(e,Infinity);var k=a.length+e.length+u.length,w=k<d?new Array(d-k+1).join(n):"";if(p&&c)e=t(w+e,w.length?d-u.length:Infinity),w="";switch(r){case"<":return a+e+u+w;case"=":return a+w+e+u;case"^":return w.slice(0,k=w.length>>1)+a+e+u+w.slice(k)}return w+a+e+u}}function l(e,t){var r=s((e=f(e),e.type="f",e)),i=Math.max(-8,Math.min(8,Math.floor(n(t)/3)))*3,a=Math.pow(10,-i),o=h[8+i/3];return function(e){return r(a*e)+o}}return{format:s,formatPrefix:l}}var g=p({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var m=p({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var v=p({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]});var y=p({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]});var _=p({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var x=p({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var b=p({decimal:".",thousands:",",grouping:[3],currency:["£",""]});var M=p({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var k=p({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]});var w=p({decimal:",",thousands:" ",grouping:[3],currency:["","$"]});var S=p({decimal:",",thousands:".",grouping:[3],currency:[""," €"]});var E=p({decimal:".",thousands:",",grouping:[3],currency:["₪",""]});var A=p({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]});var T=p({decimal:",",thousands:".",grouping:[3],currency:["€",""]});var O=p({decimal:".",thousands:",",grouping:[3],currency:["","円"]});var N=p({decimal:".",thousands:",",grouping:[3],currency:["₩",""]});var L=p({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]});var C=p({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]});var R=p({decimal:",",thousands:".",grouping:[3],currency:["","zł"]});var I=p({decimal:",",thousands:".",grouping:[3],currency:["R$",""]});var D=p({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]});var U=p({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]});var P=p({decimal:".",thousands:",",grouping:[3],currency:["¥",""]});function z(e){return Math.max(0,-n(Math.abs(e)))}function F(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(n(t)/3)))*3-n(Math.abs(e)))}function j(e,t){e=Math.abs(e),t=Math.abs(t)-e;return Math.max(0,n(t)-n(e))+1}var q=g.format;var Y=g.formatPrefix;var $="0.4.2";e.version=$;e.format=q;e.formatPrefix=Y;e.locale=p;e.localeCaEs=m;e.localeCsCz=v;e.localeDeCh=y;e.localeDeDe=_;e.localeEnCa=x;e.localeEnGb=b;e.localeEnUs=g;e.localeEsEs=M;e.localeFiFi=k;e.localeFrCa=w;e.localeFrFr=S;e.localeHeIl=E;e.localeHuHu=A;e.localeItIt=T;e.localeJaJp=O;e.localeKoKr=N;e.localeMkMk=L;e.localeNlNl=C;e.localePlPl=R;e.localePtBr=I;e.localeRuRu=D;e.localeSvSe=U;e.localeZhCn=P;e.formatSpecifier=f;e.precisionFixed=z;e.precisionPrefix=F;e.precisionRound=j})},10:function(e,t){},11:function(e,t){},"1C2Q":function(e,t){var n=0;function r(e){this.id="gradient_"+n++;this.type=e||"linear";this.stops=[];this.x1=0;this.x2=1;this.y1=0;this.y2=0}var i=r.prototype;i.stop=function(e,t){this.stops.push({offset:e,color:t});return this};e.exports=r},"1PdY":function(e,t,n){"use strict";var r;(function(e){function t(e){return e.transform().filter}e.parseUnit=t;function n(e){var n=t(e);var r=e.child().component.data;if(!r.source&&r.filter){n=(n?n+" && ":"")+r.filter;delete r.filter}return n}e.parseFacet=n;function r(e){var n=t(e);e.children().forEach(function(t){var r=t.component.data;if(e.compatibleSource(t)&&r.filter&&r.filter===n){delete r.filter}});return n}e.parseLayer=r;function i(e){var t=e.filter;return t?[{type:"filter",test:t}]:[]}e.assemble=i})(r=t.filter||(t.filter={}))},"2I0S":function(e,t,n){var r=n("zF6n");var i={values:a({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:a({name:"count",set:"cell.num"}),missing:a({name:"missing",set:"this.missing"}),valid:a({name:"valid",set:"this.valid"}),sum:a({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:a({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:a({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:a({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:a({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:a({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:a({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:a({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:a({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:a({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:a({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:a({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:a({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:a({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:a({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:a({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:a({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};function a(e){return function(t){var n=r.extend({init:"",add:"",rem:"",idx:0},e);n.out=t||e.name;return n}}function o(e,t){function n(e,r){function a(t){if(!e[t])n(e,e[t]=i[t]())}if(r.req)r.req.forEach(a);if(t&&r.str)r.str.forEach(a);return e}var a=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return r.vals(a).sort(function(e,t){return e.idx-t.idx})}function s(e,t,i,a){var s=o(e,t),u="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",f="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",c="var t = this.tuple; var cell = this.cell;";s.forEach(function(e){if(e.idx<0){u=e.init+u;l=e.add+l;f=e.rem+f}else{u+=e.init;l+=e.add;f+=e.rem}});e.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){c+="this.assign(t,'"+e.out+"',"+e.set+");"});c+="return t;";u=Function("cell","t",u);u.prototype.assign=a;u.prototype.add=Function("t","var v = this.get(t);"+l);u.prototype.rem=Function("t","var v = this.get(t);"+f);u.prototype.set=Function(c);u.prototype.get=i;u.prototype.distinct=n("uHQN").count.distinct;u.prototype.isValid=r.isValid;u.fields=e.map(r.$("out"));return u}i.create=s;e.exports=i},"2zc7":function(e,t,n){var r=n("sV93"),i=n("VeBo"),a=n("kC7m");function o(){i.call(this);this._down=null;this._touch=null;this._first=true}var s=i.prototype;var u=o.prototype=Object.create(s);u.constructor=o;u.initialize=function(e,t,n){var i=this._canvas=r.find(e,"canvas");if(i){var a=this;this.events.forEach(function(e){i.addEventListener(e,function(t){if(u[e]){u[e].call(a,t)}else{a.fire(e,t)}})})}return s.initialize.call(this,e,t,n)};u.canvas=function(){return this._canvas};u.context=function(){return this._canvas.getContext("2d")};u.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"];u.DOMMouseScroll=function(e){this.fire("mousewheel",e)};function l(e,t,n){return function(r){var i=this._active,a=this.pickEvent(r);if(a===i){this.fire(e,r)}else{this.fire(n,r);this._active=a;this.fire(t,r);this.fire(e,r)}}}function f(e){return function(t){this.fire(e,t);this._active=null}}u.mousemove=l("mousemove","mouseover","mouseout");u.dragover=l("dragover","dragenter","dragleave");u.mouseout=f("mouseout");u.dragleave=f("dragleave");u.mousedown=function(e){this._down=this._active;this.fire("mousedown",e)};u.click=function(e){if(this._down===this._active){this.fire("click",e);this._down=null}};u.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]);if(this._first){this._active=this._touch;this._first=false}this.fire("touchstart",e,true)};u.touchmove=function(e){this.fire("touchmove",e,true)};u.touchend=function(e){this.fire("touchend",e,true);this._touch=null};u.fire=function(e,t,n){var r=n?this._touch:this._active,i=this._handlers[e],a,o;if(i){t.vegaType=e;for(a=0,o=i.length;a<o;++a){i[a].handler.call(this._obj,t,r)}}};u.on=function(e,t){var n=this.eventName(e),r=this._handlers;(r[n]||(r[n]=[])).push({type:e,handler:t});return this};u.off=function(e,t){var n=this.eventName(e),r=this._handlers[n],i;if(!r)return;for(i=r.length;--i>=0;){if(r[i].type!==e)continue;if(!t||r[i].handler===t)r.splice(i,1)}return this};u.pickEvent=function(e){var t=this._canvas.getBoundingClientRect(),n=this._padding,r,i;return this.pick(this._scene,r=e.clientX-t.left,i=e.clientY-t.top,r-n.left,i-n.top)};u.pick=function(e,t,n,r,i){var o=this.context(),s=a[e.marktype];return s.pick.call(this,o,e,t,n,r,i)};e.exports=o},"3C/O":function(e,t,n){var r=n("Za4h"),i=n("gtuQ"),a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){s.prototype.init.call(this,e);o.addParameters(this,{clipExtent:{type:"array<value>",default:n("MRce").extent},x:{type:"field",default:"layout_x"},y:{type:"field",default:"layout_y"}});this._layout=r.geom.voronoi();this._output={path:"layout_path"};return this.mutates(true)}var l=u.prototype=Object.create(s.prototype);l.constructor=u;l.batchTransform=function(e,t){a.debug(e,["voronoi"]);var n=this._output.path;var r=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t);for(var o=0;o<t.length;++o){if(r[o])i.set(t[o],n,"M"+r[o].join("L")+"Z")}e.fields[n]=1;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Voronoi transform",type:"object",properties:{type:{enum:["voronoi"]},clipExtent:{description:"The min and max points at which to clip the voronoi diagram.",oneOf:[{type:"array",items:{oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[[-1e5,-1e5],[1e5,1e5]]},x:{description:"The input x coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},y:{description:"The input y coordinates.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},"3FFs":function(e,t,n){var r=n("D3vM").ALL,i=0;function a(e){if(e)this.init(e)}var o=a.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32};var s=a.prototype;s.init=function(e){this._id=++i;this._graph=e;this._rank=e.rank();this._qrank=null;this._stamp=0;this._listeners=[];this._listeners._ids={};this._deps={};for(var t=0,n=r.length;t<n;++t){this._deps[r[t]]=[]}this._flags=0;return this};s.rank=function(){return this._rank};s.rerank=function(){var e=this._graph,t=[this],n;while(t.length){n=t.shift();n._rank=e.rank();t.unshift.apply(t,n.listeners())}return this};s.qrank=function(){if(!arguments.length)return this._qrank;return this._qrank=this._rank,this};s.last=function(e){if(!arguments.length)return this._stamp;return this._stamp=e,this};s._setf=function(e,t){if(t){this._flags|=e}else{this._flags&=~e}return this};s.router=function(e){if(!arguments.length)return this._flags&o.Router;return this._setf(o.Router,e)};s.collector=function(e){if(!arguments.length)return this._flags&o.Collector;return this._setf(o.Collector,e)};s.produces=function(e){if(!arguments.length)return this._flags&o.Produces;return this._setf(o.Produces,e)};s.mutates=function(e){if(!arguments.length)return this._flags&o.Mutates;return this._setf(o.Mutates,e)};s.reflows=function(e){if(!arguments.length)return this._flags&o.Reflows;return this._setf(o.Reflows,e)};s.batch=function(e){if(!arguments.length)return this._flags&o.Batch;return this._setf(o.Batch,e)};s.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(arguments.length===1){return n}if(t===null){n.splice(0,n.length);n._names={}}else if(!Array.isArray(t)){if(r[t])return this;n.push(t);r[t]=1}else{for(var i=0,a=t.length,o;i<a;++i){o=t[i];if(r[o])continue;n.push(o);r[o]=1}}return this};s.listeners=function(){return this._listeners};s.addListener=function(e){if(!(e instanceof a)){throw Error("Listener is not a Node")}if(this._listeners._ids[e._id])return this;this._listeners.push(e);this._listeners._ids[e._id]=1;if(this._rank>e._rank){e.rerank()}return this};s.removeListener=function(e){if(!this._listeners._ids[e._id])return false;var t=this._listeners.indexOf(e),n=t>=0;if(n){this._listeners.splice(t,1);this._listeners._ids[e._id]=null}return n};s.disconnect=function(){this._listeners=[];this._listeners._ids={}};s.evaluate=function(e){return e};s.reevaluate=function(e){var t,n,i,a,o,s;for(i=0,a=r.length;i<a;++i){t=r[i];n=this._deps[t];for(o=0,s=n.length;o<s;++o){if(e[t][n[o]])return true}}return false};a.reset=function(){i=0};e.exports=a},"3Gpk":function(e,t,n){var r=n("BONk");var i=["items","axisItems","legendItems"];var a=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];function o(e,t){return JSON.stringify(e,a,t)}function s(e){var t=typeof e==="string"?JSON.parse(e):e;return u(t)}function u(e){var t=e.marktype,n,a,o,s,l;for(o=0,s=i.length;o<s;++o){if(l=e[i[o]]){for(n=0,a=l.length;n<a;++n){l[n][t?"mark":"group"]=e;if(!t||t==="group"){u(l[n])}}}}if(t)r.mark(e);return e}e.exports={toJSON:o,fromJSON:s}},"3Scv":function(e,t){function n(e){return e.fontSize!=null?e.fontSize:11}e.exports={size:n,value:function(e){return e!=null?String(e):""},font:function(e,t){var r=e.font;if(t&&r){r=String(r).replace(/\"/g,"'")}return""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+n(e)+"px "+(r||"sans-serif")},offset:function(e){var t=e.baseline,r=n(e);return Math.round(t==="top"?.93*r:t==="middle"?.3*r:t==="bottom"?-.21*r:0)}}},"3Y21":function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=n("J731"),o=i.ChangeSet,s=i.Tuple,u=i.Dependencies,l=n("4JPs"),f=n("QvNu");function c(e){l.prototype.init.call(this,e);l.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){var t={},n=this._transform,i,a,o,s,l,f;if(!r.isArray(s=e)){s=[];for(l in e){f=r.array(e[l]);s.push({field:l,ops:f})}}function c(e){if(e.signal)t[e.signal]=1}for(i=0,a=s.length;i<a;++i){o=s[i];if(o.field.signal){t[o.field.signal]=1}r.array(o.ops).forEach(c);r.array(o.as).forEach(c)}n._fields=s;n._aggr=null;n.dependency(u.SIGNALS,r.keys(t));return n}}});this._aggr=null;this._input=null;this._args=null;this._fields=[];this._out=[];this._type=d.TUPLE;this._acc={groupby:r.true,value:r.true};return this.router(true).produces(true)}var h=c.prototype=Object.create(l.prototype);h.constructor=c;var d=c.TYPES={VALUE:1,TUPLE:2,MULTI:3};c.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"];h.type=function(e){return this._type=e,this};h.accessors=function(e,t){var n=this._acc;n.groupby=r.$(e)||r.true;n.value=r.$(t)||r.true};h.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=false,n=[],i=this.param("groupby").field,a=function(t){return t.signal?e.signalRef(t.signal):t};var o=this._fields.map(function(e){var i={name:a(e.field),as:r.array(e.as),ops:r.array(a(e.ops)).map(a),get:e.get};t=t||i.get!=null;n.push(i.name);return i});i.forEach(function(e){if(e.get)t=true;n.push(e.name||e)});this._args=t||!o.length?null:n;if(!o.length)o={"*":"values"};var s=this._aggr=(new f).groupby(i).stream(true).summarize(o);this._out=p(s);if(this._type!==d.VALUE){s.key("_id")}return s};function p(e){var t=[],n,r,i,a,o,s,u;o=e._dims;for(n=0,r=o.length;n<r;++n){t.push(o[n].name)}s=e._aggr;for(n=0,r=s.length;n<r;++n){u=s[n].measures.fields;for(i=0,a=u.length;i<a;++i){t.push(u[i])}}return t}h.transform=function(e,t){a.debug(e,["aggregate"]);var n=o.create(e),r=this.aggr(),i=this._out,u=this._args,l=true,f=s.prev,c,h,p,g,m;if(t){n.rem.push.apply(n.rem,r.result());r.clear();this._aggr=null;r=this.aggr()}if(this._type===d.TUPLE){c=function(e){r._add(e);s.prev_init(e)};h=function(e){r._rem(f(e))};p=function(e){r._mod(e,f(e))};g=function(e){r._markMod(e,f(e))}}else{var v=this._acc.groupby,y=this._acc.value,_=this._type===d.VALUE?y:function(e){return{_id:e._id,groupby:v(e),value:y(e)}};c=function(e){r._add(_(e));s.prev_init(e)};h=function(e){r._rem(_(f(e)))};p=function(e){r._mod(_(e),_(f(e)))};g=function(e){r._mark(_(e),_(f(e)))}}e.add.forEach(c);if(t){e.mod.forEach(c)}else{e.rem.forEach(h);if(u)for(m=0,l=false;m<u.length;++m){if(e.fields[u[m]]){l=true;break}}e.mod.forEach(l?p:g)}for(m=0;m<i.length;++m){n.fields[i[m]]=1}return r._input=e,r.changes(n)};e.exports=c;var g=c.VALID_OPS;c.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Aggregate transform",description:"Compute summary aggregate statistics",type:"object",properties:{type:{enum:["aggregate"]},groupby:{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},description:"A list of fields to split the data into groups."},summarize:{oneOf:[{type:"object",additionalProperties:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{enum:g},{$ref:"#/refs/signal"}]}}},{type:"array",items:{type:"object",properties:{field:{description:"The name of the field to aggregate.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},ops:{type:"array",description:"An array of aggregate functions.",items:{oneOf:[{enum:g},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"An optional array of names to use for the output fields.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}}},additionalProperties:false,required:["field","ops"]}}]}},additionalProperties:false,required:["type"]}},"3bKu":function(e,t,n){var r=n("zF6n"),i=n("mgrV"),a=i.utc;var o=e.exports;o.$year=r.$func("year",i.year.unit);o.$month=r.$func("month",i.months.unit);o.$date=r.$func("date",i.dates.unit);o.$day=r.$func("day",i.weekdays.unit);o.$hour=r.$func("hour",i.hours.unit);o.$minute=r.$func("minute",i.minutes.unit);o.$second=r.$func("second",i.seconds.unit);o.$utcYear=r.$func("utcYear",a.year.unit);o.$utcMonth=r.$func("utcMonth",a.months.unit);o.$utcDate=r.$func("utcDate",a.dates.unit);o.$utcDay=r.$func("utcDay",a.weekdays.unit);o.$utcHour=r.$func("utcHour",a.hours.unit);o.$utcMinute=r.$func("utcMinute",a.minutes.unit);o.$utcSecond=r.$func("utcSecond",a.seconds.unit)},"4JPs":function(e,t,n){var r=n("Hqva"),i=r.Node.prototype,a=r.Dependencies,o=n("fRRI");function s(e){if(e)i.init.call(this,e)}s.addParameters=function(e,t){e._parameters=e._parameters||{};for(var n in t){var r=t[n],i=new o(n,r.type,e);e._parameters[n]=i;if(r.type==="custom"){if(r.set)i.set=r.set.bind(i);if(r.get)i.get=r.get.bind(i)}if(r.hasOwnProperty("default"))i.set(r.default)}};var u=s.prototype=Object.create(i);u.constructor=s;u.param=function(e,t){var n=this._parameters[e];return n===undefined?this:arguments.length===1?n.get():n.set(t)};u.transform=function(e){return e};u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(a.SIGNALS).reduce(function(t,n){return t+=e.signals[n]?1:0},0);return this.transform(e,t)};u.output=function(e){for(var t in this._output){if(e[t]!==undefined){this._output[t]=e[t]}}return this};e.exports=s},"4XOj":function(e,t,n){function r(e){var t={},n,r;for(n=0,r=e.length;n<r;++n)t[e[n]]=1;return t}function i(e){var t=[],n;for(n in e)t.push(n);return t}e.exports=function(e){e=e||{};var t=e.constants||n("MSrK"),a=(e.functions||n("nj7R"))(v),o=e.functionDefs?e.functionDefs(v):{},s=e.idWhiteList?r(e.idWhiteList):null,u=e.idBlackList?r(e.idBlackList):null,l=0,f=e.fieldVar||"datum",c=e.globalVar||"signals",h={},d={},p={};function g(e){var t={code:v(e),globals:i(h),fields:i(d),dataSources:i(p),defs:o};h={};d={};p={};return t}var m=typeof c==="function"?c:function(e){return c+'["'+e+'"]'};function v(e){if(typeof e==="string")return e;var t=y[e.type];if(t==null){throw new Error("Unsupported type: "+e.type)}return t(e)}var y={Literal:function(e){return e.raw},Identifier:function(e){var n=e.name;if(l>0){return n}if(t.hasOwnProperty(n)){return t[n]}if(s){if(s.hasOwnProperty(n)){return n}else{h[n]=1;return m(n)}}if(u&&u.hasOwnProperty(n)){throw new Error("Illegal identifier: "+n)}return n},Program:function(e){return e.body.map(v).join("\n")},MemberExpression:function(e){var t=!e.computed;var n=v(e.object);if(t)l+=1;var r=v(e.property);if(n===f){d[r]=1}if(t)l-=1;return n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if(e.callee.type!=="Identifier"){throw new Error("Illegal callee type: "+e.callee.type)}var t=e.callee.name;var n=e.arguments;var r=a.hasOwnProperty(t)&&a[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,h,d,p):r+"("+n.map(v).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(v).join(",")+"]"},BinaryExpression:function(e){return"("+v(e.left)+e.operator+v(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+v(e.argument)+")"},ConditionalExpression:function(e){return"("+v(e.test)+"?"+v(e.consequent)+":"+v(e.alternate)+")"},LogicalExpression:function(e){return"("+v(e.left)+e.operator+v(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(v).join(",")+"}"},Property:function(e){l+=1;var t=v(e.key);l-=1;return t+":"+v(e.value)},ExpressionStatement:function(e){return v(e.expression)}};g.functions=a;g.functionDefs=o;g.constants=t;return g}},"58eP":function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){s.prototype.init.call(this,e);o.addParameters(this,{field:{type:"field",default:null},startAngle:{type:"value",default:0},endAngle:{type:"value",default:2*Math.PI},sort:{type:"value",default:false}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var l=u.prototype=Object.create(s.prototype);l.constructor=u;function f(){return 1}l.batchTransform=function(e,t){a.debug(e,["pie"]);var n=this._output,o=this.param("field").accessor||f,s=this.param("startAngle"),u=this.param("endAngle"),l=this.param("sort");var c=t.map(o),h=s,d=(u-s)/r.sum(c),p=r.range(t.length),g,m,v;if(l){p.sort(function(e,t){return c[e]-c[t]})}for(g=0;g<p.length;++g){m=t[p[g]];v=c[p[g]];i.set(m,n.start,h);i.set(m,n.mid,h+.5*v*d);i.set(m,n.end,h+=v*d)}e.fields[n.start]=1;e.fields[n.end]=1;e.fields[n.mid]=1;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Pie transform",description:"Computes a pie chart layout.",type:"object",properties:{type:{enum:["pie"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The data values to encode as angular spans. "+"If this property is omitted, all pie slices will have equal spans."},startAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],default:0},endAngle:{oneOf:[{type:"number",minimum:0,maximum:2*Math.PI},{$ref:"#/refs/signal"}],default:2*Math.PI},sort:{description:" If true, will sort the data prior to computing angles.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"layout_start"},end:{type:"string",default:"layout_end"},mid:{type:"string",default:"layout_mid"}}}},required:["type"]}},"5AQc":function(e,t,n){var r=n("zF6n");var i=/^([A-Za-z]+:)?\/\//;var a="file://";function o(e){var t=e.url;if(!t&&e.file){return a+e.file}if(e.baseURL&&!i.test(t)){if(!d(t,"/")&&e.baseURL[e.baseURL.length-1]!=="/"){t="/"+t}t=e.baseURL+t}if(!s.useXHR&&d(t,"//")){t=(e.defaultProtocol||"http")+":"+t}if(e.domainWhiteList){var r,o;if(s.useXHR){var u=document.createElement("a");u.href=t;if(u.host===""){u.href=u.href}r=u.hostname.toLowerCase();o=window.location.hostname}else{var l=n(11).parse(t);r=l.hostname;o=null}if(o!==r){var f=e.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&r[t-1]==="."&&r.lastIndexOf(e)===t});if(!f){throw"URL is not whitelisted: "+t}}}return t}function s(e,t){return s.loader(e,t)}function u(e,t){var n=t||function(e){throw e},r;try{r=s.sanitizeUrl(e)}catch(e){n(e);return}if(!r){n("Invalid URL: "+e.url)}else if(s.useXHR){return s.xhr(r,e,t)}else if(d(r,a)){return s.file(r.slice(a.length),e,t)}else if(r.indexOf("://")<0){return s.file(r,e,t)}else{return s.http(r,e,t)}}function l(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function f(e,t,n){var i=!!n;var a=new XMLHttpRequest;if(typeof XDomainRequest!=="undefined"&&!("withCredentials"in a)&&/^(http(s)?:)?\/\//.test(e))a=new XDomainRequest;function o(){var e=a.status;if(!e&&l(a)||e>=200&&e<300||e===304){n(null,a.responseText)}else{n(a,null)}}if(i){if("onload"in a){a.onload=a.onerror=o}else{a.onreadystatechange=function(){if(a.readyState>3)o()}}}a.open("GET",e,i);if(a.setRequestHeader){var u=r.extend({},s.headers,t.headers);for(var f in u){a.setRequestHeader(f,u[f])}}a.send();if(!i&&l(a)){return a.responseText}}function c(e,t,r){var i=n(8);if(!r){return i.readFileSync(e,"utf8")}i.readFile(e,r)}function h(e,t,i){var a=r.extend({},s.headers,t.headers);var o={url:e,encoding:null,gzip:true,headers:a};if(!i){return n(10)("GET",e,o).getBody()}n(9)(o,function(e,t,n){if(!e&&t.statusCode===200){i(null,n)}else{e=e||"Load failed with response code "+t.statusCode+".";i(e,null)}})}function d(e,t){return e==null?false:e.lastIndexOf(t,0)===0}s.loader=u;s.sanitizeUrl=o;s.xhr=f;s.file=c;s.http=h;s.useXHR=typeof XMLHttpRequest!=="undefined";s.headers={};e.exports=s},"6+LD":function(e,t,n){var r=n("Hqva"),i=r.Tuple,a=n("J731"),o=n("4JPs");function s(e){o.prototype.init.call(this,e);o.addParameters(this,{field:{type:"field",default:"data"},pattern:{type:"value",default:"[\\w']+"},case:{type:"value",default:"lower"},stopwords:{type:"value",default:""}});this._output={text:"text",count:"count"};return this.router(true).produces(true)}var u=s.prototype=Object.create(o.prototype);u.constructor=s;u.transform=function(e,t){a.debug(e,["countpattern"]);var n=this.param("field").accessor,r=this.param("pattern"),o=this.param("stopwords"),s=false;if(this._stop!==o){this._stop=o;this._stop_re=new RegExp("^"+o+"$","i");t=true}if(this._pattern!==r){this._pattern=r;this._match=new RegExp(this._pattern,"g");t=true}if(t)this._counts={};function u(e){return i.prev_init(e),n(e)}function l(e){return n(i.prev(e))}this._add(e.add,u);if(!t)this._rem(e.rem,l);if(t||(s=e.fields[n.field])){if(s)this._rem(e.mod,l);this._add(e.mod,u)}return this._changeset(e)};u._changeset=function(e){var t=this._counts,n=this._tuples||(this._tuples={}),a=r.ChangeSet.create(e),o=this._output,s,u,l;for(s in t){u=n[s];l=t[s]||0;if(!u&&l){n[s]=u=i.ingest({});u[o.text]=s;u[o.count]=l;a.add.push(u)}else if(l===0){if(u)a.rem.push(u);delete t[s];delete n[s]}else if(u[o.count]!==l){i.set(u,o.count,l);a.mod.push(u)}}return a};u._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(this._match)};u._add=function(e,t){var n=this._counts,r=this._stop_re,i,a,o,s;for(o=0;o<e.length;++o){i=this._tokenize(t(e[o]));for(a=0;a<i.length;++a){if(!r.test(s=i[a])){n[s]=1+(n[s]||0)}}}};u._rem=function(e,t){var n=this._counts,r=this._stop_re,i,a,o,s;for(o=0;o<e.length;++o){i=this._tokenize(t(e[o]));for(a=0;a<i.length;++a){if(!r.test(s=i[a])){n[s]-=1}}}};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"CountPattern transform",type:"object",properties:{type:{enum:["countpattern"]},field:{description:"The field containing the text to analyze.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"data"},pattern:{description:"A regexp pattern for matching words in text.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"[\\w']+"},case:{description:"Text case transformation to apply.",oneOf:[{enum:["lower","upper","none"]},{$ref:"#/refs/signal"}],default:"lower"},stopwords:{description:"A regexp pattern for matching stopwords to omit.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:""},output:{type:"object",description:"Rename the output data fields",properties:{text:{type:"string",default:"text"},count:{type:"string",default:"count"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},"6gf1":function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva"),o=n("XSKZ"),s=n("S/OH");var u="_vgGATEKEEPER",l="_vgEVALUATOR";var f={getItem:function(){return this.item},getGroup:function(e){var t=e?this.name[e]:this.group,n=t&&t.mark,r=n&&(n.interactive||n.interactive===undefined);return r?t:{}},getXY:function(e){var t={x:this.x,y:this.y};if(typeof e==="string"){e=this.name[e]}for(;e;e=e.mark&&e.mark.group){t.x-=e.x||0;t.y-=e.y||0}return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};function c(e){var t=e.model(),n=t.expr("true"),c=t.expr("false"),h=t.defs().signals,d={handlers:{},nodes:{}},p=i.duplicate(d),g=i.duplicate(d);i.array(h).forEach(function(e){var n=t.signal(e.name);if(e.expr)return;i.array(e.streams).forEach(function(e){var r=o.parse(e.type),i=t.expr(e.expr);y(n,r,i,e)})});i.keys(p.handlers).forEach(function(t){e.on(t,function(e,n){e.preventDefault();m(e,n);v(p,t,n&&n.datum||{},n&&n.mark&&n.mark.group&&n.mark.group.datum||{},e)})});i.keys(g.handlers).forEach(function(e){if(typeof window==="undefined")return;var t=g.handlers[e],n=e.split(":"),i=n[0]==="window"?[window]:window.document.querySelectorAll(n[0]);function a(t){m(t);v(g,e,r.select(this).datum(),this.parentNode&&r.select(this.parentNode).datum(),t)}for(var o=0;o<i.length;++o){i[o].addEventListener(n[1],a)}t.elements=i;t.listener=a});g.detach=function(){i.keys(g.handlers).forEach(function(e){var t=g.handlers[e],n=e.split(":"),r=i.array(t.elements);for(var a=0;a<r.length;++a){r[a].removeEventListener(n[1],t.listener)}})};return g.detach;function m(t,n){var i=r.mouse((r.event=t,e.renderer().scene())),a=e.padding(),o={},s,u,l;if(n){s=n.mark;u=s.marktype==="group"?n:s.group;for(l=n;l!=null;l=l.mark.group){if(l.mark.def.name){o[l.mark.def.name]=l}}}o.root=e.model().scene().items[0];t.vg=Object.create(f);t.vg.group=u;t.vg.item=n||{};t.vg.name=o;t.vg.x=i[0]-a.left;t.vg.y=i[1]-a.top}function v(e,n,r,i,o){var u=e.handlers[n],l=e.nodes[n],f=a.ChangeSet.create(null,true),c=false,h,d,p,g;function m(e){return!e.fn(r,i,o)}for(d=0,p=u.length;d<p;++d){g=u[d];c=g.filters.some(m);if(c)continue;h=g.exp.fn(r,i,o);if(g.spec.scale){h=s.scale(t,g.spec,h,r,o)}if(h!==g.signal.value()||g.signal.verbose()){g.signal.value(h);f.signals[g.signal.name()]=1}}t.propagate(f,l)}function y(e,t,n,r){t.forEach(function(t){if(t.event)_(e,t,n,r);else if(t.signal)x(e,t,n,r);else if(t.start)b(e,t,n,r);else if(t.stream){if(t.filters)t.stream.forEach(function(e){e.filters=i.array(e.filters).concat(t.filters)});y(e,t.stream,n,r)}})}function _(e,n,r,o){var s=n.event,u=n.name,l=n.mark,f=n.target,c=i.array(n.filters),h=f?g:p,d=f?f+":"+s:s,m=h.nodes[d]||(h.nodes[d]=new a.Node(t)),v=h.handlers[d]||(h.handlers[d]=[]);if(u){c.push('!!event.vg.name["'+u+'"]')}else if(l){c.push("event.vg.item.mark && event.vg.item.mark.marktype==="+i.str(l))}v.push({signal:e,exp:r,spec:o,filters:c.map(function(e){return t.expr(e)})});m.addListener(e)}function x(e,n,r,i){var o=e.name(),u=t.signal(o+l,null);u.evaluate=function(a){if(!a.signals[n.signal])return t.doNotPropagate;var u=r.fn();if(i.scale){u=s.scale(t,i,u)}if(u!==e.value()||e.verbose()){e.value(u);a.signals[o]=1;a.reflow=true}return a};u.dependency(a.Dependencies.SIGNALS,n.signal);u.addListener(e);t.signal(n.signal).addListener(u)}function b(e,r,i,a){var o=e.name(),s=o+u,l=r.middle,f=l.filters||(l.filters=[]),h=t.signal(s)||t.signal(s,false);y(h,[r.start],n,{});y(h,[r.end],c,{});f.push(h.name());y(e,[r.middle],i,a)}}e.exports=c;c.schema={defs:{streams:{type:"array",items:{type:"object",properties:{type:{type:"string"},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"}},additionalProperties:false,required:["type","expr"]}}}}},7:function(e,t){},"736r":function(e,t,n){"use strict";var r=n("o+e1");var i=n("WJ2w");var a=n("ZAUf");var o=n("wKIX");var s;(function(e){function t(e){return e.reduce(function(e,t,n){var a=r.field(t,{nofn:true,datum:true});if(t.type===i.TEMPORAL&&t.timeUnit){var s=r.field(t);e[s]={type:"formula",field:r.field(t),expr:o.parseExpression(t.timeUnit,a)}}return e},{})}e.parseUnit=t;function n(e){var n=t(e);var r=e.child().component.data;if(!r.source){a.extend(n,r.timeUnit);delete r.timeUnit}return n}e.parseFacet=n;function s(e){var n=t(e);e.children().forEach(function(e){var t=e.component.data;if(!t.source){a.extend(n,t.timeUnit);delete t.timeUnit}});return n}e.parseLayer=s;function u(e){return a.vals(e.timeUnit)}e.assemble=u})(s=t.timeUnit||(t.timeUnit={}))},"7YRp":function(e,t,n){"use strict";var r=n("ZAUf");function i(e){if(!r.isArray(e)){return"fields"in e}return false}t.isUnionedDomain=i;function a(e){if(!r.isArray(e)){return"data"in e}return false}t.isDataRefDomain=a},"7Zus":function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/");function o(e,t){if(t.path==null)return true;var n=t.pathCache||(t.pathCache=i(t.path));a(e,n,t.x,t.y)}e.exports={draw:r.drawAll(o),pick:r.pickPath(o)}},"7rLc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n("jyAW");n.d(t,"dispatch",function(){return r["a"]})},8:function(e,t){},"81R7":function(e,t){e.exports=function(e){function t(){}function n(t,n){e.add(t,n)}return{bounds:function(t){if(!arguments.length)return e;return e=t,this},beginPath:t,closePath:t,moveTo:n,lineTo:n,quadraticCurveTo:function(t,n,r,i){e.add(t,n);e.add(r,i)},bezierCurveTo:function(t,n,r,i,a,o){e.add(t,n);e.add(r,i);e.add(a,o)}}}},"8NMF":function(e,t,n){var r=n("Za4h"),i={};i.load={baseURL:"",domainWhiteList:false};i.autopadInset=5;i.scale={time:r.time.scale,utc:r.time.scale.utc};i.render={retina:true};i.scene={fill:undefined,fillOpacity:undefined,stroke:undefined,strokeOpacity:undefined,strokeWidth:undefined,strokeDash:undefined,strokeDashOffset:undefined};i.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4};i.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"};i.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]};i.range={category10:r.scale.category10().range(),category20:r.scale.category20().range(),category20b:r.scale.category20b().range(),category20c:r.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]};e.exports=i},"8lgt":function(e,t,n){"use strict";var r=n("P/aK");var i=n("MtYt");var a;(function(e){function t(){return"rule"}e.markType=t;function n(e){var t={};if(e.config().mark.orient==="vertical"){if(e.has(r.X)){t.x={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_mid"})}}else{t.x={value:0}}if(e.has(r.Y)){t.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_mid"})}}else{t.y={field:{group:"height"}}}if(e.has(r.Y2)){t.y2={scale:e.scaleName(r.Y),field:e.field(r.Y2,{binSuffix:"_mid"})}}else{t.y2={value:0}}}else{if(e.has(r.Y)){t.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_mid"})}}else{t.y={value:0}}if(e.has(r.X)){t.x={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_mid"})}}else{t.x={value:0}}if(e.has(r.X2)){t.x2={scale:e.scaleName(r.X),field:e.field(r.X2,{binSuffix:"_mid"})}}else{t.x2={field:{group:"width"}}}}i.applyColorAndOpacity(t,e);if(e.has(r.SIZE)){t.strokeWidth={scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}}else{t.strokeWidth={value:a(e)}}return t}e.properties=n;function a(e){var t=e.fieldDef(r.SIZE);if(t&&t.value!==undefined){return t.value}return e.config().mark.ruleSize}function o(e){return undefined}e.labels=o})(a=t.rule||(t.rule={}))},9:function(e,t){},"9+55":function(e,t,n){var r=n("gWW/");function i(e,t,n){if(!t.items||!t.items.length)return;var r=this,i=t.items,a;for(var o=0,s=i.length;o<s;++o){a=i[o];if(n&&!n.intersects(a.bounds))continue;if(!(a.image&&a.image.url===a.url)){a.image=r.loadImage(a.url);a.image.url=a.url}var u=a.x||0,l=a.y||0,f=a.width||a.image&&a.image.width||0,c=a.height||a.image&&a.image.height||0,h;u=u-(a.align==="center"?f/2:a.align==="right"?f:0);l=l-(a.baseline==="middle"?c/2:a.baseline==="bottom"?c:0);if(a.image.loaded){e.globalAlpha=(h=a.opacity)!=null?h:1;e.drawImage(a.image,u,l,f,c)}}}e.exports={draw:i,pick:r.pick()}},"92+E":function(e,t,n){var r=n("SbOu"),i=n("h36N");function a(e,t,n,i){return{type:"group",width:n,height:i,properties:s(t.scene||{},e),scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map(function(t){return r(e,t,true)})}}var o=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];function s(e,t){var n=t.config().scene,r={},a,s,u,l,f;for(a=0,s=u=o.length;a<s;++a){l=o[a];if((f=e[l])!==undefined){r[l]=f.signal?f:{value:f}}else if(n[l]){r[l]={value:n[l]}}else{--u}}return u?{update:i(t,"group",r)}:{}}e.exports=a;a.schema={defs:{container:{type:"object",properties:{scene:{type:"object",properties:{fill:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},fillOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},stroke:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},strokeOpacity:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeWidth:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},strokeDash:{oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},strokeDashOffset:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}},scales:{type:"array",items:{$ref:"#/defs/scale"}},axes:{type:"array",items:{$ref:"#/defs/axis"}},legends:{type:"array",items:{$ref:"#/defs/legend"}},marks:{type:"array",items:{oneOf:[{$ref:"#/defs/groupMark"},{$ref:"#/defs/visualMark"}]}}}},groupMark:{allOf:[{properties:{type:{enum:["group"]}},required:["type"]},{$ref:"#/defs/mark"},{$ref:"#/defs/container"}]},visualMark:{allOf:[{not:{properties:{type:{enum:["group"]}}}},{$ref:"#/defs/mark"}]}}}},"95dH":function(e,t,n){e.exports={Handler:n("yszh"),Renderer:n("mP8n"),string:{Renderer:n("9eLo")}}},"9eLo":function(e,t,n){var r=n("ZyfV"),i=n("zLl/"),a=n("zhsD"),o=n("3Scv"),s=n("sV93"),u=s.openTag,l=s.closeTag,f=n("rfWk");function c(e){r.call(this);this._loader=new i(e);this._text={head:"",root:"",foot:"",defs:"",body:""};this._defs={clip_id:1,gradient:{},clipping:{}}}var h=r.prototype;var d=c.prototype=Object.create(h);d.constructor=c;d.resize=function(e,t,n){h.resize.call(this,e,t,n);var r=this._padding,i=this._text;var o={class:"marks",width:this._width+r.left+r.right,height:this._height+r.top+r.bottom};for(var s in a.metadata){o[s]=a.metadata[s]}i.head=u("svg",o);i.root=u("g",{transform:"translate("+r.left+","+r.top+")"});i.foot=l("g")+l("svg");return this};d.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot};d.render=function(e){this._text.body=this.mark(e);this._text.defs=this.buildDefs();return this};d.reset=function(){this._defs.clip_id=0;return this};d.buildDefs=function(){var e=this._defs,t="",n,r,i,a;for(r in e.gradient){i=e.gradient[r];a=i.stops;t+=u("linearGradient",{id:r,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(n=0;n<a.length;++n){t+=u("stop",{offset:a[n].offset,"stop-color":a[n].color})+l("stop")}t+=l("linearGradient")}for(r in e.clipping){i=e.clipping[r];t+=u("clipPath",{id:r});t+=u("rect",{x:0,y:0,width:i.width,height:i.height})+l("rect");t+=l("clipPath")}return t.length>0?u("defs")+t+l("defs"):""};d.imageURL=function(e){return this._loader.imageURL(e)};var p;function g(e,t,n,r){p[r||e]=t}d.attributes=function(e,t){p={};e(g,t,this);return p};d.mark=function(e){var t=f[e.marktype],n=t.tag,r=t.attr,i=t.nest||false,a=i?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],c=this._defs,h="",d,p,g;if(n!=="g"&&e.interactive===false){d='style="pointer-events: none;"'}h+=u("g",{class:s.cssClass(e)},d);for(p=0;p<a.length;++p){g=a[p];d=n!=="g"?m(g,e,n,c):null;h+=u(n,this.attributes(r,g),d);if(n==="text"){h+=v(o.value(g.text))}else if(n==="g"){h+=u("rect",this.attributes(t.background,g),m(g,e,"bgrect",c))+l("rect");h+=this.markGroup(g)}h+=l(n)}return h+l("g")};d.markGroup=function(e){var t="",n=e.axisItems||[],r=e.items||[],i=e.legendItems||[],a,o;for(a=0,o=n.length;a<o;++a){if(n[a].layer==="back"){t+=this.mark(n[a])}}for(a=0,o=r.length;a<o;++a){t+=this.mark(r[a])}for(a=0,o=n.length;a<o;++a){if(n[a].layer!=="back"){t+=this.mark(n[a])}}for(a=0,o=i.length;a<o;++a){t+=this.mark(i[a])}return t};function m(e,t,n,r){if(e==null)return"";var i,s,u,l,f,c="";if(n==="bgrect"&&t.interactive===false){c+="pointer-events: none;"}if(n==="text"){c+="font: "+o.font(e)+";"}for(i=0,s=a.styleProperties.length;i<s;++i){u=a.styleProperties[i];l=a.styles[u];f=e[u];if(f==null){if(l==="fill"){c+=(c.length?" ":"")+"fill: none;"}}else{if(f.id){r.gradient[f.id]=f;f="url(#"+f.id+")"}c+=(c.length?" ":"")+l+": "+f+";"}}return c?'style="'+c+'"':null}function v(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}e.exports=c},ARV7:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("KfF0"),o=n("ekYZ"),s=n("xZ2+"),u=n("B1p+"),l=n("gtuQ"),f=n("KMnl"),c=n("D3vM");function h(){}var d=h.prototype;d.init=function(){this._stamp=0;this._rank=0;this._data={};this._signals={};this._requestedIndexes={};this.doNotPropagate={}};d.rank=function(){return++this._rank};d.values=function(e,t,n){var i=e===c.SIGNALS?this._signals:this._data,a=t!==undefined?t:r.keys(i),o,s;if(Array.isArray(a)){o=n||{};for(s=0;s<a.length;++s){o[a[s]]=i[a[s]].values()}return o}else{return i[a].values()}};d.dataValues=function(e){return this.values(c.DATA,e)};d.signalValues=function(e){return this.values(c.SIGNALS,e)};d.data=function(e,t,n){var r=this._data;if(!arguments.length){var i=[],a;for(a in r){i.push(r[a])}return i}else if(arguments.length===1){return r[e]}else{return r[e]=new s(this,e,n).pipeline(t)}};d.signal=function(e,t){if(arguments.length===1){var n=this;return Array.isArray(e)?e.map(function(e){return n._signals[e]}):this._signals[e]}else{return this._signals[e]=new f(this,e,t)}};d.signalRef=function(e){if(!Array.isArray(e)){e=r.field(e)}var t=this.signal(e[0]).value();if(e.length>1){for(var n=1,i=e.length;n<i;++n){t=t[e[n]]}}return t};d.requestIndex=function(e,t){var n=this._requestedIndexes,r=n[e]||(n[e]={});return r[t]=true,this};d.buildIndexes=function(){var e=this._requestedIndexes,t=r.keys(e),n,i,a,o,s,u,l,f;for(n=0,i=t.length;n<i;++n){u=this.data(s=t[n]);if(!u)throw Error("Data source "+r.str(s)+" does not exist.");l=r.keys(e[s]);for(a=0,o=l.length;a<o;++a){if((f=l[a])===null)continue;u.getIndex(f);e[s][f]=null}}return this};d.propagate=function(e,t,n,r){var i={},s,u,l,c,h,d,p,g;var m=new a(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");e.stamp=n||++this._stamp;i[t._id]=e;m.push(t.qrank(true));while(m.size()>0){t=m.peek();g=t instanceof f;e=i[t._id];if(t.rank()!==t.qrank()){m.replace(t.qrank(true))}else{m.pop();i[t._id]=null;s=t._listeners;if(!g||g&&!r){e=this.evaluate(e,t)}if(e!==this.doNotPropagate){if(!e.reflow&&t.reflows()){e=o.create(e,true)}for(d=0,p=s.length;d<p;++d){u=s[d];if((l=i[u._id])!==undefined){if(l===null)throw Error("Already propagated to node.");if(l===e)continue;c=e.add.length||e.mod.length||e.rem.length;h=l.add.length||l.mod.length||l.rem.length;if(c&&h)throw Error("Multiple changeset pulses to same node");i[u._id]=c?e:l;i[u._id].reflow=e.reflow||l.reflow}else{m.push(u.qrank(true));i[u._id]=e}}}}}return this.done(e)};d.done=function(e){i.debug(e,["bookkeeping"]);for(var t in e.data){this.data(t).synchronize()}return this};d.preprocess=function(e){var t=this,n=0,r,i,a,o;for(var s=0;s<e.length;++s){r=e[s];if(r.batch()&&!r._collector){if(i||!a){r=new u(t);e.splice(s,0,r);i=false}else{r._collector=a}}if(o=r.collector())a=r;i=i||r.router()&&!o;n=n||r.mutates();if(r.produces()){e.splice(s+1,0,new u(t));i=false}}return{router:i,collector:a,mutates:n}};d.connect=function(e){var t,n,i,a,o,s,u,l,f,h;for(o=0,s=e.length;o<s;++o){n=e[o];if(n.collector())t=n;i=n.dependency(c.DATA);for(u=0,l=i.length;u<l;++u){if(!(f=this.data(h=i[u]))){throw new Error("Unknown data source "+r.str(h))}f.addListener(t)}a=n.dependency(c.SIGNALS);for(u=0,l=a.length;u<l;++u){if(!(f=this.signal(h=a[u]))){throw new Error("Unknown signal "+r.str(h))}f.addListener(t)}if(o>0)e[o-1].addListener(n)}return e};d.disconnect=function(e){var t,n,r,i,a,o,s,u;for(a=0,o=e.length;a<o;++a){n=e[a];if(n.collector())t=n;r=n.dependency(c.DATA);for(s=0,u=r.length;s<u;++s){this.data(r[s]).removeListener(t)}i=n.dependency(c.SIGNALS);for(s=0,u=i.length;s<u;++s){this.signal(i[s]).removeListener(t)}n.disconnect()}return e};d.synchronize=function(e){var t={},n,r,i,a,o,s,u,f;for(i=0,a=e.length;i<a;++i){n=e[i];if(!n.collector())continue;for(o=0,r=n.data(),s=r.length;o<s;++o){f=(u=r[o])._id;if(t[f])continue;l.prev_update(u);t[f]=1}}return this};d.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp,r=t.router()||e.add.length||e.rem.length;return r||!n||t.reevaluate(e)};d.evaluate=function(e,t){if(!this.reevaluate(e,t))return e;e=t.evaluate(e);t.last(e.stamp);return e};e.exports=h},"Aj/a":function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("4JPs"),u=n("acp7");var l=.5*(1+Math.sqrt(5));function f(e){u.prototype.init.call(this,e);s.addParameters(this,{sort:{type:"array<field>",default:["-value"]},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"field",default:"value"},size:{type:"array<value>",default:n("MRce").size},round:{type:"value",default:true},sticky:{type:"value",default:false},ratio:{type:"value",default:l},padding:{type:"value",default:null},mode:{type:"value",default:"squarify"}});this._layout=r.layout.treemap();this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var c=f.prototype=Object.create(u.prototype);c.constructor=f;c.batchTransform=function(e,t){o.debug(e,["treemap"]);var n=this._layout,r=this._output,s=this.param("sticky"),u=this.param("parent").accessor,l=t.filter(function(e){return u(e)===null})[0];if(n.sticky()!==s){n.sticky(s)}n.sort(i.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(l);t.forEach(function(e){a.set(e,r.x,e.x);a.set(e,r.y,e.y);a.set(e,r.width,e.dx);a.set(e,r.height,e.dy);a.set(e,r.depth,e.depth)});e.fields[r.x]=1;e.fields[r.y]=1;e.fields[r.width]=1;e.fields[r.height]=1;e.fields[r.depth]=1;return e};e.exports=f;f.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treemap transform",type:"object",properties:{type:{enum:["treemap"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:["-value"]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"parent"},field:{description:"The values to use to determine the area of each leaf-level treemap cell.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The treemap layout algorithm to use.",oneOf:[{enum:["squarify","slice","dice","slice-dice"]},{$ref:"#/refs/signal"}],default:"squarify"},size:{description:"The dimensions of the treemap layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[500,500]},round:{description:"If true, treemap cell dimensions will be rounded to integer pixels.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:true},sticky:{description:"If true, repeated runs of the treemap will use cached partition boundaries.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},ratio:{description:"The target aspect ratio for the layout to optimize.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:l},padding:{oneOf:[{type:"number"},{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:4,maxItems:4},{$ref:"#/refs/signal"}],description:"he padding (in pixels) to provide around internal nodes in the treemap."},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},width:{type:"string",default:"layout_width"},height:{type:"string",default:"layout_height"},depth:{type:"string",default:"layout_depth"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},"B1p+":function(e,t,n){var r=n("J731"),i=n("gtuQ"),a=n("3FFs").prototype,o=n("ekYZ");function s(e){a.init.call(this,e);this._data=[];this.router(true).collector(true)}var u=s.prototype=Object.create(a);u.constructor=s;u.data=function(){return this._data};u.evaluate=function(e){r.debug(e,["collecting"]);var t=o.create(e);if(e.rem.length){this._data=i.idFilter(this._data,e.rem);t.rem=e.rem.slice(0)}if(e.add.length){this._data=this._data.concat(e.add);t.add=e.add.slice(0)}if(e.mod.length){t.mod=e.mod.slice(0)}if(e.sort){this._data.sort(e.sort)}if(e.reflow){t.mod=t.mod.concat(i.idFilter(this._data,t.add,t.mod,t.rem));t.reflow=false}return t};e.exports=s},BB2X:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=i.Node,o=i.Dependencies,s=i.Tuple,u=i.Collector,l=n("J731"),f=n("Vp7n"),c=n("NNYs"),h=n("W+IH"),d=n("v4pi");function p(){this._children={};this._scaler=null;this._recursor=null;this._scales={};this.scale=y.bind(this);return arguments.length?this.init.apply(this,arguments):this}var g=p.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"};var m=p.prototype=new f;m.init=function(e,t){var n=this,i;this._scaler=new a(e);(t.scales||[]).forEach(function(t){t=n.scale(i=t.name,new c(e,t,n));n.scale(i+":prev",t);n._scaler.addListener(t)});this._recursor=new a(e);this._recursor.evaluate=v.bind(this);var s=(t.axes||[]).reduce(function(e,t){e[t.scale]=1;return e},{});s=(t.legends||[]).reduce(function(e,t){e[t.size||t.shape||t.fill||t.stroke||t.opacity]=1;return e},s);this._recursor.dependency(o.SCALES,r.keys(s));this._collector=new u(e);return f.prototype.init.apply(this,arguments)};m.evaluate=function(){var e=f.prototype.evaluate.apply(this,arguments),t=this._graph,n=this,i=this._scales,a=this._mark.items;if(e.mod.length<a.length){var o=r.keys(i).some(function(t){return i[t].reevaluate(e)});if(!o&&this._def.axes){o=this._def.axes.reduce(function(t,n){return t||e.scales[n.scale]},false)}if(!o&&this._def.legends){o=this._def.legends.reduce(function(t,n){return t||e.scales[n.size||n.shape||n.fill||n.stroke]},false)}if(o){e.mod=e.mod.concat(s.idFilter(a,e.mod,e.add,e.rem))}}e.add.forEach(function(t){_.call(n,e,t)});e.rem.forEach(function(e){t.group(e._id,null)});return e};m.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]};m.disconnect=function(){var e=this;r.keys(e._children).forEach(function(t){e._children[t].forEach(function(t){e._recursor.removeListener(t.builder);t.builder.disconnect()})});e._children={};return f.prototype.disconnect.call(this)};m.child=function(e,t){var n=this._children[t],r=0,i=n.length,a;for(;r<i;++r){a=n[r];if(a.type==g.MARK&&a.builder._def.name==e)break}return a.builder};function v(e){var t=this,n=r.array(this._def.marks).length>0,i=r.array(this._def.axes).length>0,a=r.array(this._def.legends).length>0,o,s,u,l,f,c,h,d=false;for(o=0,l=e.add.length;o<l;++o){f=e.add[o];if(n)x.call(this,e,f);if(i)b.call(this,e,f);if(a)M.call(this,e,f)}for(o=e.add.length-1;o>=0;--o){f=e.add[o];for(s=this._children[f._id].length-1;s>=0;--s){u=this._children[f._id][s];u.builder.connect();c=u.builder.pipeline();h=u.builder._def;d=h.type!==g.GROUP;d=d&&this._graph.data(u.from)!==undefined;d=d&&c[c.length-1].listeners().length===1;d=d&&(h.from&&!h.from.mark);u.inline=d;if(d)this._graph.evaluate(e,u.builder);else this._recursor.addListener(u.builder)}}function p(e){if(e.type==g.MARK&&!e.inline&&t._graph.data(e.from)!==undefined){t._recursor.removeListener(e.builder)}}function m(t){var n=t.scale();if(!e.scales[n.scaleName])return;t.reset().def()}function v(t){var n=t.size()||t.shape()||t.fill()||t.stroke()||t.opacity();if(!e.scales[n.scaleName])return;t.reset().def()}for(o=0,l=e.mod.length;o<l;++o){f=e.mod[o];if(n)t._children[f._id].forEach(p);if(i)f.axes.forEach(m);if(a)f.legends.forEach(v)}function y(e){t._recursor.removeListener(e.builder);e.builder.disconnect()}for(o=0,l=e.rem.length;o<l;++o){f=e.rem[o];t._children[f._id].forEach(y);delete t._children[f._id]}return e}function y(e,t){var n=this,r=null;if(arguments.length===2)return n._scales[e]=t,t;while(r==null){r=n._scales[e];n=n.mark?n.mark.group:n._parent;if(!n)break}return r}function _(e,t){l.debug(e,["building group",t._id]);t._scales=t._scales||{};t.scale=y.bind(t);t.items=t.items||[];this._children[t._id]=this._children[t._id]||[];t.axes=t.axes||[];t.axisItems=t.axisItems||[];t.legends=t.legends||[];t.legendItems=t.legendItems||[];this._graph.group(t._id,t)}function x(e,t){l.debug(e,["building children marks #"+t._id]);var n=this._def.marks,r,i,a,o,s,u;for(o=0,s=n.length;o<s;++o){r=n[o];i=r.from||{};a=t.datum._facetID;t.items[o]={group:t,_scaleRefs:{}};u=r.type===g.GROUP?new p:new f;u.init(this._graph,r,t.items[o],this,t._id,a);this._children[t._id].push({builder:u,from:i.data||(i.mark?"vg_"+t._id+"_"+i.mark:a),type:g.MARK})}}function b(e,t){var n=t.axes,r=t.axisItems,i=this;h(this._graph,this._def.axes,n,t);n.forEach(function(e,n){var a=i._def.axes[n].scale,s=e.def(),u=null;r[n]={group:t,axis:e,layer:s.layer};u=s.type===g.GROUP?new p:new f;u.init(i._graph,s,r[n],i).dependency(o.SCALES,a);i._children[t._id].push({builder:u,type:g.AXIS,scale:a})})}function M(e,t){var n=t.legends,r=t.legendItems,i=this;d(this._graph,this._def.legends,n,t);n.forEach(function(e,n){var a=e.size()||e.shape()||e.fill()||e.stroke()||e.opacity(),s=e.def(),u=null;r[n]={group:t,legend:e};u=s.type===g.GROUP?new p:new f;u.init(i._graph,s,r[n],i).dependency(o.SCALES,a);i._children[t._id].push({builder:u,type:g.LEGEND,scale:a})})}e.exports=p},BO8z:function(e,t,n){var r=n("Hqva"),i=n("J731"),a=n("4JPs");function o(e){a.prototype.init.call(this,e);a.addParameters(this,{test:{type:"expr"}});this._skip={};return this.router(true)}var s=o.prototype=Object.create(a.prototype);s.constructor=o;s.transform=function(e){i.debug(e,["filtering"]);var t=r.ChangeSet.create(e),n=this._skip,a=this.param("test");e.rem.forEach(function(e){if(n[e._id]!==1)t.rem.push(e);else n[e._id]=0});e.add.forEach(function(e){if(a(e))t.add.push(e);else n[e._id]=1});e.mod.forEach(function(e){var r=a(e),i=n[e._id]===1;if(r&&i){n[e._id]=0;t.add.push(e)}else if(r&&!i){t.mod.push(e)}else if(!r&&i){}else{t.rem.push(e);n[e._id]=1}});return t};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Filter transform",description:"Filters elements from a data set to remove unwanted items.",type:"object",properties:{type:{enum:["filter"]},test:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the filter predicate."}},additionalProperties:false,required:["type","test"]}},BONk:function(e,t,n){var r=n("81R7"),i=n("lnKO"),a=n("WFOa"),o=n("zhsD"),s=n("3Scv"),u=n("pfe9"),l=u.parse,f=u.render,c=o.path.area,h=o.path.line,d=Math.PI/2,p=Math.sqrt(3),g=Math.tan(30*Math.PI/180),m=null,v=r();function y(){return m||(m=a.instance(1,1).getContext("2d"))}function _(e,t){if(e.stroke&&e.opacity!==0&&e.stokeOpacity!==0){t.expand(e.strokeWidth!=null?e.strokeWidth:1)}return t}function x(e,t,n,r,i){if(t==null){n.set(0,0,0,0)}else{f(v.bounds(n),t,r,i);_(e,n)}return n}function b(e,t){var n=e.path?e.pathCache||(e.pathCache=l(e.path)):null;return x(e,n,t,e.x,e.y)}function M(e,t){if(e.items.length===0)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=l(c(n)));return x(r,i,t)}function k(e,t){if(e.items.length===0)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=l(h(n)));return x(r,i,t)}function w(e,t){var n,r;return _(e,t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0))}function S(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;n=n-(e.align==="center"?i/2:e.align==="right"?i:0);r=r-(e.baseline==="middle"?a/2:e.baseline==="bottom"?a:0);return t.set(n,r,n+i,r+a)}function E(e,t){var n,r;return _(e,t.set(n=e.x||0,r=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:r))}function A(e,t){var n=e.x||0,r=e.y||0,i=e.innerRadius||0,a=e.outerRadius||0,o=(e.startAngle||0)-d,s=(e.endAngle||0)-d,u=Infinity,l=-Infinity,f=Infinity,c=-Infinity,h,p,g,m,v,y,x,b,M;var k=[o,s],w=o-o%d;for(p=0;p<4&&w<s;++p,w+=d){k.push(w)}for(p=0,g=k.length;p<g;++p){h=k[p];m=Math.cos(h);y=i*m;b=a*m;v=Math.sin(h);x=i*v;M=a*v;u=Math.min(u,y,b);l=Math.max(l,y,b);f=Math.min(f,x,M);c=Math.max(c,x,M)}return _(e,t.set(n+u,r+f,n+l,r+c))}function T(e,t){var n=e.size!=null?e.size:100,r=e.x||0,i=e.y||0,a,o,s,u;switch(e.shape){case"cross":o=3*Math.sqrt(n/5)/2;t.set(r-o,i-o,r+o,i+o);break;case"diamond":u=Math.sqrt(n/(2*g));s=u*g;t.set(r-s,i-u,r+s,i+u);break;case"square":o=Math.sqrt(n);a=o/2;t.set(r-a,i-a,r+a,i+a);break;case"triangle-down":s=Math.sqrt(n/p);u=s*p/2;t.set(r-s,i-u,r+s,i+u);break;case"triangle-up":s=Math.sqrt(n/p);u=s*p/2;t.set(r-s,i-u,r+s,i+u);break;default:a=Math.sqrt(n/Math.PI);t.set(r-a,i-a,r+a,i+a)}return _(e,t)}function O(e,t,n){var r=y(),i=s.size(e),a=e.align,o=e.radius||0,u=e.x||0,l=e.y||0,f=e.dx||0,c=(e.dy||0)+s.offset(e)-Math.round(.8*i),h,d;if(o){d=(e.theta||0)-Math.PI/2;u+=o*Math.cos(d);l+=o*Math.sin(d)}r.font=s.font(e);h=r.measureText(s.value(e.text)).width;if(a==="center"){f-=h/2}else if(a==="right"){f-=h}else{}t.set(f+=u,c+=l,f+h,c+i);if(e.angle&&!n){t.rotate(e.angle*Math.PI/180,u,l)}return t.expand(n?0:1)}function N(e,t,n){var r=e.axisItems||[],i=e.items||[],a=e.legendItems||[],o,s;if(!e.clip){for(o=0,s=r.length;o<s;++o){t.union(r[o].bounds)}for(o=0,s=i.length;o<s;++o){if(i[o].bounds)t.union(i[o].bounds)}if(n){for(o=0,s=a.length;o<s;++o){t.union(a[o].bounds)}}}if(e.clip||e.width||e.height){_(e,t.add(0,0).add(e.width||0,e.height||0))}return t.translate(e.x||0,e.y||0)}var L={group:N,symbol:T,image:S,rect:w,rule:E,arc:A,text:O,path:b,area:M,line:k};L.area.nest=true;L.line.nest=true;function C(e,t,n){var r=e.mark.marktype;t=t||L[r];if(t.nest)e=e.mark;var a=e.bounds,o=e["bounds:prev"]||(e["bounds:prev"]=new i);if(a){o.clear().union(a);a.clear()}else{e.bounds=new i}t(e,e.bounds,n);if(!a)o.clear().union(e.bounds);return e.bounds}var R={mark:null};function I(e,t,n){var r=e.marktype,a=L[r],o=e.items,s=o&&o.length,u,l,f,c;if(a.nest){f=s?o[0]:(R.mark=e,R);c=C(f,a,n);t=t&&t.union(c)||c;return t}t=t||e.bounds&&e.bounds.clear()||new i;if(s){for(u=0,l=o.length;u<l;++u){t.union(C(o[u],a,n))}}return e.bounds=t}e.exports={mark:I,item:C,text:O,group:N}},C8zq:function(e,t,n){e.exports={aggregate:n("3Y21"),bin:n("RdYp"),cross:n("juLC"),countpattern:n("6+LD"),linkpath:n("rCVn"),facet:n("Uikm"),filter:n("BO8z"),fold:n("MZ+b"),force:n("pKLr"),formula:n("TXaq"),geo:n("ct8e"),geopath:n("snBf"),hierarchy:n("Sgrz"),impute:n("P7vC"),lookup:n("ec8D"),pie:n("58eP"),rank:n("yLCL"),sort:n("/lc5"),stack:n("wLy+"),treeify:n("ei6W"),treemap:n("Aj/a"),voronoi:n("3C/O"),wordcloud:n("GXXi")}},CXWl:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("LHV8").Gradient,o=n("h36N"),s=n("SbOu"),u=n("v0Fq");function l(e){var t=null,n=null,l=null,y=null,_=null,x=null,b=null,M=null,k=null,w=null,S=e.config().legend,E=S.orient,A=S.offset,T=S.padding,O=[5],N={},L={},C={},R={},I={},D={titles:{},symbols:{},labels:{},gradient:{}};var U={},P={};function z(){P.type=null}function F(e,t){return{data:e,index:t}}U.def=function(){var e=t||n||l||y||_;if(!P.type){P=(e===l||e===y)&&!j(e.type)?$(e):q(e)}P.orient=E;P.offset=A;P.padding=T;P.margin=S.margin;return P};function j(e){return e==="ordinal"||e==="quantize"||e==="quantile"||e==="threshold"}function q(e){var a=Y(t,n,l,y,_);var o=(b==null?e.ticks?e.ticks.apply(e,O):e.domain():b).map(F);var s=u.getTickFormat(e,o.length,k,M);var f,c,h,d=5,p=r.range(o.length);if(t){c=o.map(function(e){return Math.sqrt(t(e.data))});h=r.max(c);c=c.reduce(function(e,t,n,r){if(n>0)e[n]=e[n-1]+r[n-1]/2+d;return e[n]+=t/2,e},[0]).map(Math.round)}else{h=Math.round(Math.sqrt(S.symbolSize));c=x||(f=I.fontSize)&&f.value+d||S.labelFontSize+d;c=p.map(function(e,t){return Math.round(h/2+t*c)})}var g=T,m;if(w){m=R.fontSize;g+=5+(m&&m.value||S.titleFontSize)}for(var v=0,E=c.length;v<E;++v)c[v]+=g;a.scales=a.scales||[{}];i.extend(a.scales[0],{name:"legend",type:"ordinal",points:true,domain:p,range:c});var A=(w?[w]:[]).map(F);o.forEach(function(e){e.label=s(e.data);e.offset=h});a.marks[0].from=function(){return A};a.marks[1].from=function(){return o};a.marks[2].from=a.marks[1].from;return a}function Y(t,n,r,a,u){var l=i.extend(D.titles,d(S)),f=i.extend(D.symbols,p(S)),m=i.extend(D.labels,g(S));h(f,t,n,r,a,u);i.extend(l.properties.update,R);i.extend(f.properties.update,L);i.extend(m.properties.update,I);l.properties.enter.x.value+=T;l.properties.enter.y.value+=T;m.properties.enter.x.offset+=T+1;f.properties.enter.x.offset=T+1;m.properties.update.x.offset+=T+1;f.properties.update.x.offset=T+1;i.extend(P,{type:"group",interactive:false,properties:{enter:o(e,"group",N),legendPosition:{encode:c.bind(null,S),signals:[],scales:[],data:[],fields:[]}}});P.marks=[l,f,m].map(function(t){return s(e,t)});return P}function $(e){var t=H(e),n=e.domain(),r=(b==null?n:b).map(F),a=C.width&&C.width.value||S.gradientWidth,o=u.getTickFormat(e,r.length,k,M);t.scales=t.scales||[{}];var s=i.extend(t.scales[0],{name:"legend",type:e.type,round:true,zero:false,domain:[n[0],n[n.length-1]],range:[T,a+T]});if(e.type==="pow")s.exponent=e.exponent();var l=(w?[w]:[]).map(F);r.forEach(function(e,t){e.label=o(e.data);e.align=t==r.length-1?"right":t===0?"left":"center"});t.marks[0].from=function(){return l};t.marks[1].from=function(){return[1]};t.marks[2].from=function(){return r};return t}function H(t){var n=i.extend(D.titles,d(S)),r=i.extend(D.gradient,m(S)),u=i.extend(D.labels,v(S)),l=new a;var f=t.domain(),h=f[0],p=f[f.length-1],g=t.copy().domain([h,p]).range([0,1]);var y=t.type!=="linear"&&t.ticks?t.ticks.call(t,15):f;if(h!==y[0])y.unshift(h);if(p!==y[y.length-1])y.push(p);for(var _=0,x=y.length;_<x;++_){l.stop(g(y[_]),t(y[_]))}r.properties.enter.fill={value:l};i.extend(n.properties.update,R);i.extend(r.properties.update,C);i.extend(u.properties.update,I);var b=r.properties,M=C.height,k=M&&M.value||b.enter.height.value;u.properties.enter.y.value=k;u.properties.update.y.value=k;if(w){var E=n.properties,A=R.fontSize,O=4+(A&&A.value||E.enter.fontSize.value);r.properties.enter.y.value+=O;u.properties.enter.y.value+=O;r.properties.update.y.value+=O;u.properties.update.y.value+=O}n.properties.enter.x.value+=T;n.properties.enter.y.value+=T;r.properties.enter.x.value+=T;r.properties.enter.y.value+=T;u.properties.enter.y.value+=T;r.properties.update.x.value+=T;r.properties.update.y.value+=T;u.properties.update.y.value+=T;i.extend(P,{type:"group",interactive:false,properties:{enter:o(e,"group",N),legendPosition:{encode:c.bind(null,S),signals:[],scales:[],data:[],fields:[]}}});P.marks=[n,r,u].map(function(t){return s(e,t)});return P}U.size=function(e){if(!arguments.length)return t;if(t!==e){t=e;z()}return U};U.shape=function(e){if(!arguments.length)return n;if(n!==e){n=e;z()}return U};U.fill=function(e){if(!arguments.length)return l;if(l!==e){l=e;z()}return U};U.stroke=function(e){if(!arguments.length)return y;if(y!==e){y=e;z()}return U};U.opacity=function(e){if(!arguments.length)return _;if(_!==e){_=e;z()}return U};U.title=function(e){if(!arguments.length)return w;if(w!==e){w=e;z()}return U};U.format=function(e){if(!arguments.length)return M;if(M!==e){M=e;z()}return U};U.formatType=function(e){if(!arguments.length)return k;if(k!==e){k=e;z()}return U};U.spacing=function(e){if(!arguments.length)return x;if(x!==+e){x=+e;z()}return U};U.orient=function(e){if(!arguments.length)return E;E=e in f?e+"":S.orient;return U};U.offset=function(e){if(!arguments.length)return A;A=+e;return U};U.values=function(e){if(!arguments.length)return b;b=e;return U};U.legendProperties=function(e){if(!arguments.length)return N;N=e;return U};U.symbolProperties=function(e){if(!arguments.length)return L;L=e;return U};U.gradientProperties=function(e){if(!arguments.length)return C;C=e;return U};U.labelProperties=function(e){if(!arguments.length)return I;I=e;return U};U.titleProperties=function(e){if(!arguments.length)return R;R=e;return U};U.reset=function(){z();return U};return U}var f={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};function c(e,t,n,r,i,a,o){var s=r?{}:t,u,l=t.mark.def,c=l.offset,h=l.orient,d=l.padding*2,p=h==="left"?0:n.width,g=~~t.bounds.width()+(t.width?0:d),m=~~t.bounds.height()+(t.height?0:d),v=n._legendPositions||(n._legendPositions={right:.5,left:.5});s.x=.5;s.y=.5;s.width=g;s.height=m;if(h==="left"||h==="right"){s.y=v[h];v[h]+=m+l.margin;var y=n.axes,_=n.axisItems,x=f[h];for(u=0;u<y.length;++u){if(y[u].orient()===h){p=Math.max(p,Math.abs(_[u].bounds[x]))}}}switch(h){case"left":s.x-=p+c+g;break;case"right":s.x+=p+c;break;case"top-left":s.x+=c;s.y+=c;break;case"top-right":s.x+=n.width-g-c;s.y+=c;break;case"bottom-left":s.x+=c;s.y+=n.height-m-c;break;case"bottom-right":s.x+=n.width-g-c;s.y+=n.height-m-c;break}var b=e.baseline,M=0;for(u=0;u<n.legendItems.length;u++){var k=n.legendItems[u];M+=k.bounds.height()+(t.height?0:d)}if(b==="middle"){s.y+=c+n.height/2-M/2}else if(b==="bottom"){s.y+=c+n.height-M}if(r)r.interpolate(t,s);var w=t.mark.def.properties.enter.encode;w.call(w,t,n,r,i,a,o);return true}function h(e,t,n,r,i,a){var o=e.properties.enter,s=e.properties.update;if(t)o.size=s.size={scale:t.scaleName,field:"data"};if(n)o.shape=s.shape={scale:n.scaleName,field:"data"};if(r)o.fill=s.fill={scale:r.scaleName,field:"data"};if(i)o.stroke=s.stroke={scale:i.scaleName,field:"data"};if(a)s.opacity={scale:a.scaleName,field:"data"}}function d(e){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:e.titleColor},font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function p(e){return{type:"symbol",interactive:false,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:e.symbolShape},size:{value:e.symbolSize},stroke:{value:e.symbolColor},strokeWidth:{value:e.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function g(e){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{value:e.labelAlign},baseline:{value:e.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function m(e){return{type:"rect",interactive:false,properties:{enter:{x:{value:0},y:{value:0},width:{value:e.gradientWidth},height:{value:e.gradientHeight},stroke:{value:e.gradientStrokeColor},strokeWidth:{value:e.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function v(e){return{type:"text",interactive:false,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:e.labelColor},font:{value:e.labelFont},fontSize:{value:e.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}e.exports=l},CiyH:function(e,t,n){var r=n("zicW"),i=n("UaGl"),a=n("NNYs"),o=n("8NMF");function s(e,t,n){var i=e.schema;if(!i)return;if(i.refs)r.extend(n.refs,i.refs);if(i.defs)r.extend(n.defs,i.defs)}e.exports=function(e){var t=null;e=e||{};if(e.url){t=r.json(r.extend({url:e.url},o.load))}else{t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"};r.keys(i).forEach(function(n){s(i[n],e,t)});s(a,e,t)}if(e.properties)r.keys(e.properties).forEach(function(n){t.defs.propset.properties[n]={$ref:"#/refs/"+e.properties[n]+"Value"}});if(e.propertySets)r.keys(e.propertySets).forEach(function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}});return t}},D3vM:function(e,t){var n=e.exports={ALL:["data","fields","scales","signals"]};n.ALL.forEach(function(e){n[e.toUpperCase()]=e})},DUWk:function(e,t,n){var r=n("zicW"),i=n("C8zq");function a(e,t){var n=i[t.type],a;if(!n)throw new Error('"'+t.type+'" is not a valid transformation');a=new n(e);if(t.output)a.output(t.output);r.keys(t).forEach(function(e){if(e==="type"||e==="output")return;a.param(e,t[e])});return a}e.exports=a;var o=r.keys(i).filter(function(e){return i[e].schema});var s=o.reduce(function(e,t){return e[t+"Transform"]=i[t].schema,e},{});a.schema={defs:r.extend(s,{transform:{type:"array",items:{oneOf:o.map(function(e){return{$ref:"#/defs/"+e+"Transform"}})}}})}},F9eC:function(e,t,n){"use strict";var r=n("Py5Z");var i=n("QSMf");var a=n("j8cM");var o=n("f2i1");var s=n("P/aK");var u=n("QSMf");var l=n("ZAUf");function f(e){return e["facet"]!==undefined}t.isFacetSpec=f;function c(e){if(d(e)){var t=i.has(e.encoding,s.ROW);var n=i.has(e.encoding,s.COLUMN);return t||n}return false}t.isExtendedUnitSpec=c;function h(e){if(d(e)){return!c(e)}return false}t.isUnitSpec=h;function d(e){return e["mark"]!==undefined}t.isSomeUnitSpec=d;function p(e){return e["layers"]!==undefined}t.isLayerSpec=p;function g(e){if(c(e)){return m(e)}if(h(e)){return v(e)}return e}t.normalize=g;function m(e){var t=i.has(e.encoding,s.ROW);var n=i.has(e.encoding,s.COLUMN);var r=l.duplicate(e.encoding);delete r.column;delete r.row;return l.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},{data:e.data},e.transform?{transform:e.transform}:{},{facet:l.extend(t?{row:e.encoding.row}:{},n?{column:e.encoding.column}:{}),spec:v({mark:e.mark,encoding:r})},e.config?{config:e.config}:{})}t.normalizeExtendedUnitSpec=m;function v(e){var t=e.config;var n=t&&t.overlay;var o=n&&e.mark===a.AREA&&l.contains([r.AreaOverlay.LINEPOINT,r.AreaOverlay.LINE],n.area);var s=n&&(n.line&&e.mark===a.LINE||n.area===r.AreaOverlay.LINEPOINT&&e.mark===a.AREA);if(e.mark===a.ERRORBAR){return _(e)}if(i.isRanged(e.encoding)){return y(e)}if(w(e)){return e}if(s||o){return x(e,s,o)}return e}t.normalizeUnitSpec=v;function y(e){if(e.encoding){var t=i.has(e.encoding,s.X);var n=i.has(e.encoding,s.Y);var r=i.has(e.encoding,s.X2);var a=i.has(e.encoding,s.Y2);if(r&&!t||a&&!n){var o=l.duplicate(e);if(r&&!t){o.encoding.x=o.encoding.x2;delete o.encoding.x2}if(a&&!n){o.encoding.y=o.encoding.y2;delete o.encoding.y2}return o}}return e}t.normalizeRangedUnitSpec=y;function _(e){var t=l.extend(e.name?{name:e.name}:{},e.description?{description:e.description}:{},e.data?{data:e.data}:{},e.transform?{transform:e.transform}:{},e.config?{config:e.config}:{},{layers:[]});if(!e.encoding){return t}if(e.mark===a.ERRORBAR){var n={mark:a.RULE,encoding:l.extend(e.encoding.x?{x:l.duplicate(e.encoding.x)}:{},e.encoding.y?{y:l.duplicate(e.encoding.y)}:{},e.encoding.x2?{x2:l.duplicate(e.encoding.x2)}:{},e.encoding.y2?{y2:l.duplicate(e.encoding.y2)}:{},{})};var r={mark:a.TICK,encoding:l.extend(e.encoding.x?{x:l.duplicate(e.encoding.x)}:{},e.encoding.y?{y:l.duplicate(e.encoding.y)}:{},e.encoding.size?{size:l.duplicate(e.encoding.size)}:{},{})};var i={mark:a.TICK,encoding:l.extend({x:e.encoding.x2?l.duplicate(e.encoding.x2):l.duplicate(e.encoding.x),y:e.encoding.y2?l.duplicate(e.encoding.y2):l.duplicate(e.encoding.y)},e.encoding.size?{size:l.duplicate(e.encoding.size)}:{})};t.layers.push(v(n));t.layers.push(v(r));t.layers.push(v(i))}return t}t.normalizeErrorBarUnitSpec=_;function x(e,t,n){var i=["name","description","data","transform"];var o=l.omit(e,i.concat("config"));var s=l.duplicate(e.config);delete s.overlay;var u=l.extend(l.pick(e,i),{layers:[o]},l.keys(s).length>0?{config:s}:{});if(n){var f=l.duplicate(o);f.mark=a.LINE;var c=l.extend({},r.defaultOverlayConfig.lineStyle,e.config.overlay.lineStyle);if(l.keys(c).length>0){f.config={mark:c}}u.layers.push(f)}if(t){var h=l.duplicate(o);h.mark=a.POINT;var c=l.extend({},r.defaultOverlayConfig.pointStyle,e.config.overlay.pointStyle);if(l.keys(c).length>0){h.config={mark:c}}u.layers.push(h)}return u}t.normalizeOverlay=x;function b(e){return u.isAggregate(e.encoding)}t.alwaysNoOcclusion=b;function M(e){return u.fieldDefs(e.encoding)}t.fieldDefs=M;function k(e){return e}t.getCleanSpec=k;function w(e){return o.stack(e.mark,e.encoding,e.config)!==null}t.isStacked=w;function S(e){var t=e.encoding;var n=l.duplicate(e.encoding);n.x=t.y;n.y=t.x;n.row=t.column;n.column=t.row;e.encoding=n;return e}t.transpose=S},FmT5:function(e,t,n){"use strict";var r=n("P/aK");function i(e){switch(e){case r.ROW:case r.COLUMN:case r.SIZE:case r.SHAPE:return 6;default:return 10}}t.autoMaxBins=i},"Fw/k":function(e,t,n){"use strict";(function(e){e[e["LINEAR"]="linear"]="LINEAR";e[e["LOG"]="log"]="LOG";e[e["POW"]="pow"]="POW";e[e["SQRT"]="sqrt"]="SQRT";e[e["QUANTILE"]="quantile"]="QUANTILE";e[e["QUANTIZE"]="quantize"]="QUANTIZE";e[e["ORDINAL"]="ordinal"]="ORDINAL";e[e["TIME"]="time"]="TIME";e[e["UTC"]="utc"]="UTC"})(t.ScaleType||(t.ScaleType={}));var r=t.ScaleType;(function(e){e[e["SECOND"]="second"]="SECOND";e[e["MINUTE"]="minute"]="MINUTE";e[e["HOUR"]="hour"]="HOUR";e[e["DAY"]="day"]="DAY";e[e["WEEK"]="week"]="WEEK";e[e["MONTH"]="month"]="MONTH";e[e["YEAR"]="year"]="YEAR"})(t.NiceTime||(t.NiceTime={}));var i=t.NiceTime;t.defaultScaleConfig={round:true,textBandWidth:90,bandSize:21,padding:1,useRawDomain:false,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]};t.defaultFacetScaleConfig={round:true,padding:16}},"G+HP":function(e,t,n){"use strict";var r=n("P/aK");var i=n("MtYt");var a=n("o+e1");var o=n("WJ2w");var s;(function(e){function t(){return"text"}e.markType=t;function n(e){return{x:{value:0},y:{value:0},width:{field:{group:"width"}},height:{field:{group:"height"}},fill:{scale:e.scaleName(r.COLOR),field:e.field(r.COLOR,e.fieldDef(r.COLOR).type===o.ORDINAL?{prefn:"rank_"}:{})}}}e.background=n;function s(e){var t={};i.applyMarkConfig(t,e,["angle","align","baseline","dx","dy","font","fontWeight","fontStyle","radius","theta","text"]);var n=e.config();var a=e.fieldDef(r.TEXT);t.x=u(e.encoding().x,e.scaleName(r.X),n,a);t.y=l(e.encoding().y,e.scaleName(r.Y),n);t.fontSize=f(e.encoding().size,e.scaleName(r.SIZE),n);t.text=c(e.encoding().text,e.scaleName(r.TEXT),n);if(e.config().mark.applyColorToBackground&&!e.has(r.X)&&!e.has(r.Y)){t.fill={value:"black"};var o=e.config().mark.opacity;if(o){t.opacity={value:o}}}else{i.applyColorAndOpacity(t,e)}return t}e.properties=s;function u(e,t,n,r){if(e){if(e.field){return{scale:t,field:a.field(e,{binSuffix:"_mid"})}}}if(r&&r.type===o.QUANTITATIVE){return{field:{group:"width"},offset:-5}}else{return{value:n.scale.textBandWidth/2}}}function l(e,t,n){if(e){if(e.field){return{scale:t,field:a.field(e,{binSuffix:"_mid"})}}}return{value:n.scale.bandSize/2}}function f(e,t,n){if(e){if(e.field){return{scale:t,field:a.field(e)}}if(e.value){return{value:e.value}}}return{value:n.mark.fontSize}}function c(e,t,n){if(e){if(e.field){if(o.QUANTITATIVE===e.type){var r=i.numberFormat(e,n.mark.format,n);var s="number"+(r?":'"+r+"'":"");return{template:"{{"+a.field(e,{datum:true})+" | "+s+"}}"}}else if(o.TEMPORAL===e.type){return{template:i.timeTemplate(a.field(e,{datum:true}),e.timeUnit,n.mark.format,n.mark.shortTimeLabels,n)}}else{return{field:e.field}}}else if(e.value){return{value:e.value}}}return{value:n.mark.text}}})(s=t.text||(t.text={}))},GXXi:function(e,t,n){var r=n("zicW"),i=n("Za4h"),a=n("NobO"),o=n("LHV8").canvas,s=n("gtuQ"),u=n("J731"),l=n("4JPs"),f=n("acp7");function c(e){f.prototype.init.call(this,e);l.addParameters(this,{size:{type:"array<value>",default:n("MRce").size},text:{type:"field",default:"data"},rotate:{type:"field|value",default:0},font:{type:"field|value",default:{value:"sans-serif"}},fontSize:{type:"field|value",default:14},fontStyle:{type:"field|value",default:{value:"normal"}},fontWeight:{type:"field|value",default:{value:"normal"}},fontScale:{type:"array<value>",default:[10,50]},padding:{type:"value",default:1},spiral:{type:"value",default:"archimedean"}});this._layout=a().canvas(o.instance);this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"};return this.mutates(true)}var h=c.prototype=Object.create(f.prototype);h.constructor=c;function d(e){return e&&e.accessor||e}function p(e){var t=Object.create(e);t._tuple=e;return t}h.batchTransform=function(e,t){u.debug(e,["wordcloud"]);var n=this._layout,a=this._output,o=this.param("fontSize"),l=o.accessor&&this.param("fontScale"),f,c;o=o.accessor||i.functor(o);if(l.length){c=i.scale.sqrt().domain(r.extent(t,f=o)).range(l);o=function(e){return c(f(e))}}n.size(this.param("size")).text(d(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(d(this.param("rotate"))).font(d(this.param("font"))).fontStyle(d(this.param("fontStyle"))).fontWeight(d(this.param("fontWeight"))).fontSize(o).words(t.map(p)).on("end",function(e){var t=n.size(),r=t[0]>>1,i=t[1]>>1,o,u,l,f;for(l=0,f=e.length;l<f;++l){o=e[l];u=o._tuple;s.set(u,a.x,o.x+r);s.set(u,a.y,o.y+i);s.set(u,a.font,o.font);s.set(u,a.fontSize,o.size);s.set(u,a.fontStyle,o.style);s.set(u,a.fontWeight,o.weight);s.set(u,a.rotate,o.rotate)}}).start();for(var h in a)e.fields[a[h]]=1;return e};e.exports=c;var g=n("fRRI");c.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Wordcloud transform",type:"object",properties:{type:{enum:["wordcloud"]},size:{description:"The dimensions of the wordcloud layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[900,500]},font:{description:"The font face to use for a word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"sans-serif"},fontStyle:{description:"The font style to use for a word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"normal"},fontWeight:{description:"The font weight to use for a word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"normal"},fontSize:{description:"The font size to use for a word.",oneOf:[{type:"number"},g.schema,{type:"string"},{$ref:"#/refs/signal"}],default:14},fontScale:{description:"The minimum and maximum scaled font sizes, or null to prevent scaling.",oneOf:[{type:"null"},{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}}],default:[10,50]},rotate:{description:"The field or number to set the roration angle (in degrees).",oneOf:[{type:"number"},{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:0},text:{description:"The field containing the text to use for each word.",oneOf:[{type:"string"},g.schema,{$ref:"#/refs/signal"}],default:"data"},spiral:{description:"The type of spiral used for positioning words, either 'archimedean' or 'rectangular'.",oneOf:[{enum:["archimedean","rectangular"]},g.schema,{$ref:"#/refs/signal"}],default:"archimedean"},padding:{description:"The padding around each word.",oneOf:[{type:"number"},g.schema,{$ref:"#/refs/signal"}],default:1},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},font:{type:"string",default:"layout_font"},fontSize:{type:"string",default:"layout_fontSize"},fontStyle:{type:"string",default:"layout_fontStyle"},fontWeight:{type:"string",default:"layout_fontWeight"},rotate:{type:"string",default:"layout_rotate"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},GXhC:function(e,t,n){var r=n("zF6n"),i=n("aZ75"),a=n("bZsP"),o=n("1/F5"),s=o,u=a,l=new Date(2e3,0,1),f,c,h,d;e.exports={numberLocale:g,number:function(e){return s.format(e)},numberPrefix:function(e,t){return s.formatPrefix(e,t)},timeLocale:m,time:function(e){return u.format(e)},utc:function(e){return u.utcFormat(e)},locale:function(e){g(e);m(e)},auto:{number:k,linear:w,time:function(){return S()},utc:function(){return E()}},month:A,day:T,quarter:O,utcQuarter:N};function p(e){return e.length>4&&"locale"+(e[0].toUpperCase()+e[1].toLowerCase()+e[3].toUpperCase()+e[4].toLowerCase())}function g(e){var t=r.isString(e)?o[p(e)]:o.locale(e);if(t==null)throw Error("Unrecognized locale: "+e);s=t}function m(e){var t=r.isString(e)?a[p(e)]:a.locale(e);if(t==null)throw Error("Unrecognized locale: "+e);u=t;f=c=h=d=null}var v=Math.sqrt(50),y=Math.sqrt(10),_=Math.sqrt(2);function x(e,t){if(!e.length)e=[0];if(t==null)t=10;var n=e[0],r=e[e.length-1];if(r<n){o=r;r=n;n=o}var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;if(o>=v)a*=10;else if(o>=y)a*=5;else if(o>=_)a*=2;return[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}function b(e,t){return function(n){var r=e(n),i=r.indexOf(t);if(i<0)return r;var a=M(r,i),o=a<r.length?r.slice(a):"";while(--a>i){if(r[a]!=="0"){++a;break}}return r.slice(0,a)+o}}function M(e,t){var n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;){r=e.charCodeAt(n);if(r>=48&&r<=57)return n+1}}function k(e){var t=s.format(".1f")(1)[1];if(e==null)e=",";e=o.formatSpecifier(e);if(e.precision==null)e.precision=12;switch(e.type){case"%":e.precision-=2;break;case"e":e.precision-=1;break}return b(s.format(e),t)}function w(e,t,n){var r=x(e,t);if(n==null)n=",f";switch(n=o.formatSpecifier(n),n.type){case"s":{var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));if(n.precision==null)n.precision=o.precisionPrefix(r[2],i);return s.formatPrefix(n,i)}case"":case"e":case"g":case"p":case"r":{if(n.precision==null)n.precision=o.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-(n.type==="e");break}case"f":case"%":{if(n.precision==null)n.precision=o.precisionFixed(r[2])-2*(n.type==="%");break}}return s.format(n)}function S(){var e=u.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),a=e("%I %p"),o=e("%a %d"),s=e("%b %d"),l=e("%B"),f=e("%Y");return function(e){var u=+e;return(i.second(e)<u?t:i.minute(e)<u?n:i.hour(e)<u?r:i.day(e)<u?a:i.month(e)<u?i.week(e)<u?o:s:i.year(e)<u?l:f)(e)}}function E(){var e=u.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),a=e("%I %p"),o=e("%a %d"),s=e("%b %d"),l=e("%B"),f=e("%Y");return function(e){var u=+e;return(i.utcSecond(e)<u?t:i.utcMinute(e)<u?n:i.utcHour(e)<u?r:i.utcDay(e)<u?a:i.utcMonth(e)<u?i.utcWeek(e)<u?o:s:i.utcYear(e)<u?l:f)(e)}}function A(e,t){var n=t?c||(c=u.format("%b")):f||(f=u.format("%B"));return l.setMonth(e),n(l)}function T(e,t){var n=t?d||(d=u.format("%a")):h||(h=u.format("%A"));return l.setMonth(0),l.setDate(2+e),n(l)}function O(e){return Math.floor(e.getMonth()/3)+1}function N(e){return Math.floor(e.getUTCMonth()/3)+1}},H3bJ:function(e,t){e.exports=function(){"use strict";var e,t,n,r,i,a,o,s,u,l,f,c,h,d,p;e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};t={};t[e.BooleanLiteral]="Boolean";t[e.EOF]="<end>";t[e.Identifier]="Identifier";t[e.Keyword]="Keyword";t[e.NullLiteral]="Null";t[e.NumericLiteral]="Numeric";t[e.Punctuator]="Punctuator";t[e.StringLiteral]="String";t[e.RegularExpression]="RegularExpression";n={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"};r={Data:1,Get:2,Set:4};i={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};a={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function g(e,t){if(!e){throw new Error("ASSERT: "+t)}}function m(e){return e>=48&&e<=57}function v(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function y(e){return"01234567".indexOf(e)>=0}function _(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function x(e){return e===10||e===13||e===8232||e===8233}function b(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&a.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function M(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&a.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function k(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return true;default:return false}}function w(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function S(e){if(s&&w(e)){return true}switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return false}}function E(){var e,t;t=u===0;while(u<c){e=o.charCodeAt(u);if(_(e)){++u}else if(x(e)){++u;if(e===13&&o.charCodeAt(u)===10){++u}++l;f=u;t=true}else{break}}}function A(e){var t,n,r,i=0;n=e==="u"?4:2;for(t=0;t<n;++t){if(u<c&&v(o[u])){r=o[u++];i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())}else{return""}}return String.fromCharCode(i)}function T(){var e,t,n,r;e=o[u];t=0;if(e==="}"){ee({},i.UnexpectedToken,"ILLEGAL")}while(u<c){e=o[u++];if(!v(e)){break}t=t*16+"0123456789abcdef".indexOf(e.toLowerCase())}if(t>1114111||e!=="}"){ee({},i.UnexpectedToken,"ILLEGAL")}if(t<=65535){return String.fromCharCode(t)}n=(t-65536>>10)+55296;r=(t-65536&1023)+56320;return String.fromCharCode(n,r)}function O(){var e,t;e=o.charCodeAt(u++);t=String.fromCharCode(e);if(e===92){if(o.charCodeAt(u)!==117){ee({},i.UnexpectedToken,"ILLEGAL")}++u;e=A("u");if(!e||e==="\\"||!b(e.charCodeAt(0))){ee({},i.UnexpectedToken,"ILLEGAL")}t=e}while(u<c){e=o.charCodeAt(u);if(!M(e)){break}++u;t+=String.fromCharCode(e);if(e===92){t=t.substr(0,t.length-1);if(o.charCodeAt(u)!==117){ee({},i.UnexpectedToken,"ILLEGAL")}++u;e=A("u");if(!e||e==="\\"||!M(e.charCodeAt(0))){ee({},i.UnexpectedToken,"ILLEGAL")}t+=e}}return t}function N(){var e,t;e=u++;while(u<c){t=o.charCodeAt(u);if(t===92){u=e;return O()}if(M(t)){++u}else{break}}return o.slice(e,u)}function L(){var t,n,r;t=u;n=o.charCodeAt(u)===92?O():N();if(n.length===1){r=e.Identifier}else if(S(n)){r=e.Keyword}else if(n==="null"){r=e.NullLiteral}else if(n==="true"||n==="false"){r=e.BooleanLiteral}else{r=e.Identifier}return{type:r,value:n,lineNumber:l,lineStart:f,start:t,end:u}}function C(){var t=u,n=o.charCodeAt(u),r,a=o[u],s,c,h;switch(n){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:++u;if(p.tokenize){if(n===40){p.openParenToken=p.tokens.length}else if(n===123){p.openCurlyToken=p.tokens.length}}return{type:e.Punctuator,value:String.fromCharCode(n),lineNumber:l,lineStart:f,start:t,end:u};default:r=o.charCodeAt(u+1);if(r===61){switch(n){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:u+=2;return{type:e.Punctuator,value:String.fromCharCode(n)+String.fromCharCode(r),lineNumber:l,lineStart:f,start:t,end:u};case 33:case 61:u+=2;if(o.charCodeAt(u)===61){++u}return{type:e.Punctuator,value:o.slice(t,u),lineNumber:l,lineStart:f,start:t,end:u}}}}h=o.substr(u,4);if(h===">>>="){u+=4;return{type:e.Punctuator,value:h,lineNumber:l,lineStart:f,start:t,end:u}}c=h.substr(0,3);if(c===">>>"||c==="<<="||c===">>="){u+=3;return{type:e.Punctuator,value:c,lineNumber:l,lineStart:f,start:t,end:u}}s=c.substr(0,2);if(a===s[1]&&"+-<>&|".indexOf(a)>=0||s==="=>"){u+=2;return{type:e.Punctuator,value:s,lineNumber:l,lineStart:f,start:t,end:u}}if("<>=!+-*%&|^/".indexOf(a)>=0){++u;return{type:e.Punctuator,value:a,lineNumber:l,lineStart:f,start:t,end:u}}ee({},i.UnexpectedToken,"ILLEGAL")}function R(t){var n="";while(u<c){if(!v(o[u])){break}n+=o[u++]}if(n.length===0){ee({},i.UnexpectedToken,"ILLEGAL")}if(b(o.charCodeAt(u))){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:l,lineStart:f,start:t,end:u}}function I(t){var n="0"+o[u++];while(u<c){if(!y(o[u])){break}n+=o[u++]}if(b(o.charCodeAt(u))||m(o.charCodeAt(u))){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.NumericLiteral,value:parseInt(n,8),octal:true,lineNumber:l,lineStart:f,start:t,end:u}}function D(){var t,n,r;r=o[u];g(m(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point");n=u;t="";if(r!=="."){t=o[u++];r=o[u];if(t==="0"){if(r==="x"||r==="X"){++u;return R(n)}if(y(r)){return I(n)}if(r&&m(r.charCodeAt(0))){ee({},i.UnexpectedToken,"ILLEGAL")}}while(m(o.charCodeAt(u))){t+=o[u++]}r=o[u]}if(r==="."){t+=o[u++];while(m(o.charCodeAt(u))){t+=o[u++]}r=o[u]}if(r==="e"||r==="E"){t+=o[u++];r=o[u];if(r==="+"||r==="-"){t+=o[u++]}if(m(o.charCodeAt(u))){while(m(o.charCodeAt(u))){t+=o[u++]}}else{ee({},i.UnexpectedToken,"ILLEGAL")}}if(b(o.charCodeAt(u))){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.NumericLiteral,value:parseFloat(t),lineNumber:l,lineStart:f,start:n,end:u}}function U(){var t="",n,r,a,s,h,d,p=false,m,v;m=l;v=f;n=o[u];g(n==="'"||n==='"',"String literal must starts with a quote");r=u;++u;while(u<c){a=o[u++];if(a===n){n="";break}else if(a==="\\"){a=o[u++];if(!a||!x(a.charCodeAt(0))){switch(a){case"u":case"x":if(o[u]==="{"){++u;t+=T()}else{d=u;h=A(a);if(h){t+=h}else{u=d;t+=a}}break;case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:if(y(a)){s="01234567".indexOf(a);if(s!==0){p=true}if(u<c&&y(o[u])){p=true;s=s*8+"01234567".indexOf(o[u++]);if("0123".indexOf(a)>=0&&u<c&&y(o[u])){s=s*8+"01234567".indexOf(o[u++])}}t+=String.fromCharCode(s)}else{t+=a}break}}else{++l;if(a==="\r"&&o[u]==="\n"){++u}f=u}}else if(x(a.charCodeAt(0))){break}else{t+=a}}if(n!==""){ee({},i.UnexpectedToken,"ILLEGAL")}return{type:e.StringLiteral,value:t,octal:p,startLineNumber:m,startLineStart:v,lineNumber:l,lineStart:f,start:r,end:u}}function P(e,t){var n=e,r;if(t.indexOf("u")>=0){n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){if(parseInt(t,16)<=1114111){return"x"}ee({},i.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x")}try{r=new RegExp(n)}catch(e){ee({},i.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}}function z(){var e,t,n,r,a;e=o[u];g(e==="/","Regular expression literal must start with a slash");t=o[u++];n=false;r=false;while(u<c){e=o[u++];t+=e;if(e==="\\"){e=o[u++];if(x(e.charCodeAt(0))){ee({},i.UnterminatedRegExp)}t+=e}else if(x(e.charCodeAt(0))){ee({},i.UnterminatedRegExp)}else if(n){if(e==="]"){n=false}}else{if(e==="/"){r=true;break}else if(e==="["){n=true}}}if(!r){ee({},i.UnterminatedRegExp)}a=t.substr(1,t.length-2);return{value:a,literal:t}}function F(){var e,t,n,r;t="";n="";while(u<c){e=o[u];if(!M(e.charCodeAt(0))){break}++u;if(e==="\\"&&u<c){e=o[u];if(e==="u"){++u;r=u;e=A("u");if(e){n+=e;for(t+="\\u";r<u;++r){t+=o[r]}}else{u=r;n+="u";t+="\\u"}te({},i.UnexpectedToken,"ILLEGAL")}else{t+="\\";te({},i.UnexpectedToken,"ILLEGAL")}}else{n+=e;t+=e}}return{value:n,literal:t}}function j(){var t,n,r,i;h=null;E();t=u;n=z();r=F();i=P(n.value,r.value);if(p.tokenize){return{type:e.RegularExpression,value:i,regex:{pattern:n.value,flags:r.value},lineNumber:l,lineStart:f,start:t,end:u}}return{literal:n.literal+r.literal,value:i,regex:{pattern:n.value,flags:r.value},start:t,end:u}}function q(){var e,t,n,r;E();e=u;t={start:{line:l,column:u-f}};n=j();t.end={line:l,column:u-f};if(!p.tokenize){if(p.tokens.length>0){r=p.tokens[p.tokens.length-1];if(r.range[0]===e&&r.type==="Punctuator"){if(r.value==="/"||r.value==="/="){p.tokens.pop()}}}p.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,u],loc:t})}return n}function Y(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}function $(){var e,t;e=p.tokens[p.tokens.length-1];if(!e){return q()}if(e.type==="Punctuator"){if(e.value==="]"){return C()}if(e.value===")"){t=p.tokens[p.openParenToken-1];if(t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")){return q()}return C()}if(e.value==="}"){if(p.tokens[p.openCurlyToken-3]&&p.tokens[p.openCurlyToken-3].type==="Keyword"){t=p.tokens[p.openCurlyToken-4];if(!t){return C()}}else if(p.tokens[p.openCurlyToken-4]&&p.tokens[p.openCurlyToken-4].type==="Keyword"){t=p.tokens[p.openCurlyToken-5];if(!t){return q()}}else{return C()}return C()}return q()}if(e.type==="Keyword"&&e.value!=="this"){return q()}return C()}function H(){var t;E();if(u>=c){return{type:e.EOF,lineNumber:l,lineStart:f,start:u,end:u}}t=o.charCodeAt(u);if(b(t)){return L()}if(t===40||t===41||t===59){return C()}if(t===39||t===34){return U()}if(t===46){if(m(o.charCodeAt(u+1))){return D()}return C()}if(m(t)){return D()}if(p.tokenize&&t===47){return $()}return C()}function W(){var n,r,i,a;E();n={start:{line:l,column:u-f}};r=H();n.end={line:l,column:u-f};if(r.type!==e.EOF){i=o.slice(r.start,r.end);a={type:t[r.type],value:i,range:[r.start,r.end],loc:n};if(r.regex){a.regex={pattern:r.regex.pattern,flags:r.regex.flags}}p.tokens.push(a)}return r}function V(){var e;e=h;u=e.end;l=e.lineNumber;f=e.lineStart;h=typeof p.tokens!=="undefined"?W():H();u=e.end;l=e.lineNumber;f=e.lineStart;return e}function X(){var e,t,n;e=u;t=l;n=f;h=typeof p.tokens!=="undefined"?W():H();u=e;l=t;f=n}function G(){this.line=l;this.column=u-f}function Z(){this.start=new G;this.end=null}function B(t){if(t.type===e.StringLiteral){this.start={line:t.startLineNumber,column:t.start-t.startLineStart}}else{this.start={line:t.lineNumber,column:t.start-t.lineStart}}this.end=null}function J(){u=h.start;if(h.type===e.StringLiteral){l=h.startLineNumber;f=h.startLineStart}else{l=h.lineNumber;f=h.lineStart}if(p.range){this.range=[u,0]}if(p.loc){this.loc=new Z}}function Q(e){if(p.range){this.range=[e.start,0]}if(p.loc){this.loc=new B(e)}}Q.prototype=J.prototype={finish:function(){if(p.range){this.range[1]=u}if(p.loc){this.loc.end=new G;if(p.source){this.loc.source=p.source}}},finishArrayExpression:function(e){this.type=n.ArrayExpression;this.elements=e;this.finish();return this},finishAssignmentExpression:function(e,t,r){this.type=n.AssignmentExpression;this.operator=e;this.left=t;this.right=r;this.finish();return this},finishBinaryExpression:function(e,t,r){this.type=e==="||"||e==="&&"?n.LogicalExpression:n.BinaryExpression;this.operator=e;this.left=t;this.right=r;this.finish();return this},finishCallExpression:function(e,t){this.type=n.CallExpression;this.callee=e;this.arguments=t;this.finish();return this},finishConditionalExpression:function(e,t,r){this.type=n.ConditionalExpression;this.test=e;this.consequent=t;this.alternate=r;this.finish();return this},finishExpressionStatement:function(e){this.type=n.ExpressionStatement;this.expression=e;this.finish();return this},finishIdentifier:function(e){this.type=n.Identifier;this.name=e;this.finish();return this},finishLiteral:function(e){this.type=n.Literal;this.value=e.value;this.raw=o.slice(e.start,e.end);if(e.regex){if(this.raw=="//"){this.raw="/(?:)/"}this.regex=e.regex}this.finish();return this},finishMemberExpression:function(e,t,r){this.type=n.MemberExpression;this.computed=e==="[";this.object=t;this.property=r;this.finish();return this},finishObjectExpression:function(e){this.type=n.ObjectExpression;this.properties=e;this.finish();return this},finishProgram:function(e){this.type=n.Program;this.body=e;this.finish();return this},finishProperty:function(e,t,r){this.type=n.Property;this.key=t;this.value=r;this.kind=e;this.finish();return this},finishUnaryExpression:function(e,t){this.type=n.UnaryExpression;this.operator=e;this.argument=t;this.prefix=true;this.finish();return this}};function K(){var e,t,n,r;e=u;t=l;n=f;E();r=l!==t;u=e;l=t;f=n;return r}function ee(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){g(t<r.length,"Message reference must be in range");return r[t]});if(typeof e.lineNumber==="number"){n=new Error("Line "+e.lineNumber+": "+i);n.index=e.start;n.lineNumber=e.lineNumber;n.column=e.start-f+1}else{n=new Error("Line "+l+": "+i);n.index=u;n.lineNumber=l;n.column=u-f+1}n.description=i;throw n}function te(){try{ee.apply(null,arguments)}catch(e){if(p.errors){p.errors.push(e)}else{throw e}}}function ne(t){if(t.type===e.EOF){ee(t,i.UnexpectedEOS)}if(t.type===e.NumericLiteral){ee(t,i.UnexpectedNumber)}if(t.type===e.StringLiteral){ee(t,i.UnexpectedString)}if(t.type===e.Identifier){ee(t,i.UnexpectedIdentifier)}if(t.type===e.Keyword){if(k(t.value)){ee(t,i.UnexpectedReserved)}else if(s&&w(t.value)){te(t,i.StrictReservedWord);return}ee(t,i.UnexpectedToken,t.value)}ee(t,i.UnexpectedToken,t.value)}function re(t){var n=V();if(n.type!==e.Punctuator||n.value!==t){ne(n)}}function ie(t){if(p.errors){var n=h;if(n.type!==e.Punctuator&&n.value!==t){te(n,i.UnexpectedToken,n.value)}else{V()}}else{re(t)}}function ae(t){return h.type===e.Punctuator&&h.value===t}function oe(t){return h.type===e.Keyword&&h.value===t}function se(){var t;if(o.charCodeAt(u)===59||ae(";")){V();return}t=l;E();if(l!==t){return}if(h.type!==e.EOF&&!ae("}")){ne(h)}}function ue(){var e=[],t=new J;re("[");while(!ae("]")){if(ae(",")){V();e.push(null)}else{e.push(Se());if(!ae("]")){re(",")}}}V();return t.finishArrayExpression(e)}function le(){var t,n=new J;t=V();if(t.type===e.StringLiteral||t.type===e.NumericLiteral){if(s&&t.octal){te(t,i.StrictOctalLiteral)}return n.finishLiteral(t)}return n.finishIdentifier(t.value)}function fe(){var t,n,r,i,a=new J;t=h;if(t.type===e.Identifier){r=le();re(":");i=Se();return a.finishProperty("init",r,i)}if(t.type===e.EOF||t.type===e.Punctuator){ne(t)}else{n=le();re(":");i=Se();return a.finishProperty("init",n,i)}}function ce(){var e=[],t,a,o,u,l={},f=String,c=new J;re("{");while(!ae("}")){t=fe();if(t.key.type===n.Identifier){a=t.key.name}else{a=f(t.key.value)}u=t.kind==="init"?r.Data:t.kind==="get"?r.Get:r.Set;o="$"+a;if(Object.prototype.hasOwnProperty.call(l,o)){if(l[o]===r.Data){if(s&&u===r.Data){te({},i.StrictDuplicateProperty)}else if(u!==r.Data){te({},i.AccessorDataProperty)}}else{if(u===r.Data){te({},i.AccessorDataProperty)}else if(l[o]&u){te({},i.AccessorGetSet)}}l[o]|=u}else{l[o]=u}e.push(t);if(!ae("}")){ie(",")}}re("}");return c.finishObjectExpression(e)}function he(){var e;re("(");++d.parenthesisCount;e=Ee();re(")");return e}var de={if:1,this:1};function pe(){var t,n,r,a;if(ae("(")){return he()}if(ae("[")){return ue()}if(ae("{")){return ce()}t=h.type;a=new J;if(t===e.Identifier||de[h.value]){r=a.finishIdentifier(V().value)}else if(t===e.StringLiteral||t===e.NumericLiteral){if(s&&h.octal){te(h,i.StrictOctalLiteral)}r=a.finishLiteral(V())}else if(t===e.Keyword){throw new Error("Disabled.")}else if(t===e.BooleanLiteral){n=V();n.value=n.value==="true";r=a.finishLiteral(n)}else if(t===e.NullLiteral){n=V();n.value=null;r=a.finishLiteral(n)}else if(ae("/")||ae("/=")){if(typeof p.tokens!=="undefined"){r=a.finishLiteral(q())}else{r=a.finishLiteral(j())}X()}else{ne(V())}return r}function ge(){var e=[];re("(");if(!ae(")")){while(u<c){e.push(Se());if(ae(")")){break}ie(",")}}re(")");return e}function me(){var e,t=new J;e=V();if(!Y(e)){ne(e)}return t.finishIdentifier(e.value)}function ve(){re(".");return me()}function ye(){var e;re("[");e=Ee();re("]");return e}function _e(){var e,t,n,r,i=d.allowIn;r=h;d.allowIn=true;e=pe();for(;;){if(ae(".")){n=ve();e=new Q(r).finishMemberExpression(".",e,n)}else if(ae("(")){t=ge();e=new Q(r).finishCallExpression(e,t)}else if(ae("[")){n=ye();e=new Q(r).finishMemberExpression("[",e,n)}else{break}}d.allowIn=i;return e}function xe(){var t=_e();if(h.type===e.Punctuator){if((ae("++")||ae("--"))&&!K()){throw new Error("Disabled.")}}return t}function be(){var t,n,r;if(h.type!==e.Punctuator&&h.type!==e.Keyword){n=xe()}else if(ae("++")||ae("--")){throw new Error("Disabled.")}else if(ae("+")||ae("-")||ae("~")||ae("!")){r=h;t=V();n=be();n=new Q(r).finishUnaryExpression(t.value,n)}else if(oe("delete")||oe("void")||oe("typeof")){throw new Error("Disabled.")}else{n=xe()}return n}function Me(t,n){var r=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword){return 0}switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function ke(){var e,t,n,r,i,a,o,s,u,l;e=h;u=be();r=h;i=Me(r,d.allowIn);if(i===0){return u}r.prec=i;V();t=[e,h];o=be();a=[u,r,o];while((i=Me(h,d.allowIn))>0){while(a.length>2&&i<=a[a.length-2].prec){o=a.pop();s=a.pop().value;u=a.pop();t.pop();n=new Q(t[t.length-1]).finishBinaryExpression(s,u,o);a.push(n)}r=V();r.prec=i;a.push(r);t.push(h);n=be();a.push(n)}l=a.length-1;n=a[l];t.pop();while(l>1){n=new Q(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],n);l-=2}return n}function we(){var e,t,n,r,i;i=h;e=ke();if(ae("?")){V();t=d.allowIn;d.allowIn=true;n=Se();d.allowIn=t;re(":");r=Se();e=new Q(i).finishConditionalExpression(e,n,r)}return e}function Se(){var e,t,n,r;e=d.parenthesisCount;r=h;t=h;n=we();return n}function Ee(){var e=Se();if(ae(",")){throw new Error("Disabled.")}return e}function Ae(e){var t=Ee();se();return e.finishExpressionStatement(t)}function Te(){var t=h.type,n,r;if(t===e.EOF){ne(h)}if(t===e.Punctuator&&h.value==="{"){throw new Error("Disabled.")}r=new J;if(t===e.Punctuator){switch(h.value){case";":throw new Error("Disabled.");case"(":return Ae(r);default:break}}else if(t===e.Keyword){throw new Error("Disabled.")}n=Ee();se();return r.finishExpressionStatement(n)}function Oe(){if(h.type===e.Keyword){switch(h.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return Te()}}if(h.type!==e.EOF){return Te()}}function Ne(){var t,r=[],a,l,f;while(u<c){a=h;if(a.type!==e.StringLiteral){break}t=Oe();r.push(t);if(t.expression.type!==n.Literal){break}l=o.slice(a.start+1,a.end-1);if(l==="use strict"){s=true;if(f){te(f,i.StrictOctalLiteral)}}else{if(!f&&a.octal){f=a}}}while(u<c){t=Oe();if(typeof t==="undefined"){break}r.push(t)}return r}function Le(){var e,t;E();X();t=new J;s=true;e=Ne();return t.finishProgram(e)}function Ce(){var e,t,n,r=[];for(e=0;e<p.tokens.length;++e){t=p.tokens[e];n={type:t.type,value:t.value};if(t.regex){n.regex={pattern:t.regex.pattern,flags:t.regex.flags}}if(p.range){n.range=t.range}if(p.loc){n.loc=t.loc}r.push(n)}p.tokens=r}function Re(t,n){var r,i;r=String;if(typeof t!=="string"&&!(t instanceof String)){t=r(t)}o=t;u=0;l=o.length>0?1:0;f=0;c=o.length;h=null;d={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};p={};n=n||{};n.tokens=true;p.tokens=[];p.tokenize=true;p.openParenToken=-1;p.openCurlyToken=-1;p.range=typeof n.range==="boolean"&&n.range;p.loc=typeof n.loc==="boolean"&&n.loc;if(typeof n.tolerant==="boolean"&&n.tolerant){p.errors=[]}try{X();if(h.type===e.EOF){return p.tokens}V();while(h.type!==e.EOF){try{V()}catch(e){if(p.errors){p.errors.push(e);break}else{throw e}}}Ce();i=p.tokens;if(typeof p.errors!=="undefined"){i.errors=p.errors}}catch(e){throw e}finally{p={}}return i}function Ie(e,t){var n,r;r=String;if(typeof e!=="string"&&!(e instanceof String)){e=r(e)}o=e;u=0;l=o.length>0?1:0;f=0;c=o.length;h=null;d={allowIn:true,labelSet:{},parenthesisCount:0,inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1};p={};if(typeof t!=="undefined"){p.range=typeof t.range==="boolean"&&t.range;p.loc=typeof t.loc==="boolean"&&t.loc;if(p.loc&&t.source!==null&&t.source!==undefined){p.source=r(t.source)}if(typeof t.tokens==="boolean"&&t.tokens){p.tokens=[]}if(typeof t.tolerant==="boolean"&&t.tolerant){p.errors=[]}}try{n=Le();if(typeof p.tokens!=="undefined"){Ce();n.tokens=p.tokens}if(typeof p.errors!=="undefined"){n.errors=p.errors}}catch(e){throw e}finally{p={}}return n}return{tokenize:Re,parse:Ie}}()},HES2:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("MtYt");var o;(function(e){function t(){return"line"}e.markType=t;function n(e){var t={};var n=e.config();t.x=o(e.encoding().x,e.scaleName(r.X),n);t.y=s(e.encoding().y,e.scaleName(r.Y),n);var i=u(e.encoding().size,n);if(i){t.strokeWidth=i}a.applyColorAndOpacity(t,e);a.applyMarkConfig(t,e,["interpolate","tension"]);return t}e.properties=n;function o(e,t,n){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{value:0}}function s(e,t,n){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{field:{group:"height"}}}function u(e,t){if(e&&e.value!==undefined){return{value:e.value}}return{value:t.mark.lineSize}}function l(e){return undefined}e.labels=l})(o=t.line||(t.line={}))},HaGw:function(e,t,n){var r=n("gWW/");function i(e,t,n){if(!t.items||!t.items.length)return;var i=t.items,a,o,s,u,l,f;for(var c=0,h=i.length;c<h;++c){a=i[c];if(n&&!n.intersects(a.bounds))continue;o=a.opacity==null?1:a.opacity;if(o===0)continue;s=a.x||0;u=a.y||0;l=a.width||0;f=a.height||0;if(a.fill&&r.fill(e,a,o)){e.fillRect(s,u,l,f)}if(a.stroke&&r.stroke(e,a,o)){e.strokeRect(s,u,l,f)}}}e.exports={draw:i,pick:r.pick()}},HeGT:function(e,t,n){"use strict";var r=n("cihr");var i=n("P/aK");var a=n("o+e1");var o=n("WJ2w");var s=n("ZAUf");var u=n("MtYt");function l(e,t){return t.reduce(function(t,n){if(e.axis(n)){t[n]=c(n,e)}return t},{})}t.parseAxisComponent=l;function f(e,n){var r=e===i.COLUMN,a=e===i.ROW,o=r?"x":a?"y":e;var u={type:o,scale:n.scaleName(e),grid:true,tickSize:0,properties:{labels:{text:{value:""}},axis:{stroke:{value:"transparent"}}}};var l=n.axis(e);["layer","ticks","values","subdivide"].forEach(function(r){var i;var a=(i=t[r])?i(n,e,u):l[r];if(a!==undefined){u[r]=a}});var f=n.axis(e).properties||{};["grid"].forEach(function(t){var r=k[t]?k[t](n,e,f[t]||{},u):f[t];if(r!==undefined&&s.keys(r).length>0){u.properties=u.properties||{};u.properties[t]=r}});return u}t.parseInnerAxis=f;function c(e,n){var r=e===i.COLUMN,a=e===i.ROW,o=r?"x":a?"y":e;var u=n.axis(e);var l={type:o,scale:n.scaleName(e)};["format","grid","layer","offset","orient","tickSize","ticks","tickSizeEnd","title","titleOffset","tickPadding","tickSize","tickSizeMajor","tickSizeMinor","values","subdivide"].forEach(function(r){var i;var a=(i=t[r])?i(n,e,l):u[r];if(a!==undefined){l[r]=a}});var f=n.axis(e).properties||{};["axis","labels","grid","title","ticks","majorTicks","minorTicks"].forEach(function(t){var r=k[t]?k[t](n,e,f[t]||{},l):f[t];if(r!==undefined&&s.keys(r).length>0){l.properties=l.properties||{};l.properties[t]=r}});return l}t.parseAxis=c;function h(e,t){return u.numberFormat(e.fieldDef(t),e.axis(t).format,e.config())}t.format=h;function d(e,t){return e.axis(t).offset}t.offset=d;function p(e,t){var n=e.axis(t).grid;if(n!==undefined){return n}return!e.isOrdinalScale(t)&&!e.fieldDef(t).bin}t.gridShow=p;function g(e,t){if(t===i.ROW||t===i.COLUMN){return undefined}return p(e,t)&&((t===i.Y||t===i.X)&&!(e.parent()&&e.parent().isFacet()))}t.grid=g;function m(e,t,n){var r=e.axis(t).layer;if(r!==undefined){return r}if(n.grid){return"back"}return undefined}t.layer=m;function v(e,t){var n=e.axis(t).orient;if(n){return n}else if(t===i.COLUMN){return r.AxisOrient.TOP}return undefined}t.orient=v;function y(e,t){var n=e.axis(t).ticks;if(n!==undefined){return n}if(t===i.X&&!e.fieldDef(t).bin){return 5}return undefined}t.ticks=y;function _(e,t){var n=e.axis(t).tickSize;if(n!==undefined){return n}return undefined}t.tickSize=_;function x(e,t){var n=e.axis(t).tickSizeEnd;if(n!==undefined){return n}return undefined}t.tickSizeEnd=x;function b(e,t){var n=e.axis(t);if(n.title!==undefined){return n.title}var r=a.title(e.fieldDef(t),e.config());var o;if(n.titleMaxLength){o=n.titleMaxLength}else if(t===i.X&&!e.isOrdinalScale(i.X)){var u=e;o=u.config().cell.width/e.axis(i.X).characterWidth}else if(t===i.Y&&!e.isOrdinalScale(i.Y)){var u=e;o=u.config().cell.height/e.axis(i.Y).characterWidth}return o?s.truncate(r,o):r}t.title=b;function M(e,t){var n=e.axis(t).titleOffset;if(n!==undefined){return n}return undefined}t.titleOffset=M;var k;(function(e){function t(e,t,n){var r=e.axis(t);return s.extend(r.axisColor!==undefined?{stroke:{value:r.axisColor}}:{},r.axisWidth!==undefined?{strokeWidth:{value:r.axisWidth}}:{},n||{})}e.axis=t;function n(e,t,n){var r=e.axis(t);return s.extend(r.gridColor!==undefined?{stroke:{value:r.gridColor}}:{},r.gridOpacity!==undefined?{strokeOpacity:{value:r.gridOpacity}}:{},r.gridWidth!==undefined?{strokeWidth:{value:r.gridWidth}}:{},r.gridDash!==undefined?{strokeDashOffset:{value:r.gridDash}}:{},n||{})}e.grid=n;function r(e,t,n,r){var l=e.fieldDef(t);var f=e.axis(t);var c=e.config();if(!f.labels){return s.extend({text:""},n)}if(s.contains([o.NOMINAL,o.ORDINAL],l.type)&&f.labelMaxLength){n=s.extend({text:{template:"{{ datum.data | truncate:"+f.labelMaxLength+" }}"}},n||{})}else if(l.type===o.TEMPORAL){n=s.extend({text:{template:u.timeTemplate("datum.data",l.timeUnit,f.format,f.shortTimeLabels,c)}},n)}if(f.labelAngle!==undefined){n.angle={value:f.labelAngle}}else{if(t===i.X&&(a.isDimension(l)||l.type===o.TEMPORAL)){n.angle={value:270}}}if(f.labelAlign!==undefined){n.align={value:f.labelAlign}}else{if(n.angle){if(n.angle.value===270){n.align={value:r.orient==="top"?"left":r.type==="x"?"right":"center"}}else if(n.angle.value===90){n.align={value:"center"}}}}if(f.labelBaseline!==undefined){n.baseline={value:f.labelBaseline}}else{if(n.angle){if(n.angle.value===270){n.baseline={value:r.type==="x"?"middle":"bottom"}}else if(n.angle.value===90){n.baseline={value:"bottom"}}}}if(f.tickLabelColor!==undefined){n.stroke={value:f.tickLabelColor}}if(f.tickLabelFont!==undefined){n.font={value:f.tickLabelFont}}if(f.tickLabelFontSize!==undefined){n.fontSize={value:f.tickLabelFontSize}}return s.keys(n).length===0?undefined:n}e.labels=r;function l(e,t,n){var r=e.axis(t);return s.extend(r.tickColor!==undefined?{stroke:{value:r.tickColor}}:{},r.tickWidth!==undefined?{strokeWidth:{value:r.tickWidth}}:{},n||{})}e.ticks=l;function f(e,t,n){var r=e.axis(t);return s.extend(r.titleColor!==undefined?{stroke:{value:r.titleColor}}:{},r.titleFont!==undefined?{font:{value:r.titleFont}}:{},r.titleFontSize!==undefined?{fontSize:{value:r.titleFontSize}}:{},r.titleFontWeight!==undefined?{fontWeight:{value:r.titleFontWeight}}:{},n||{})}e.title=f})(k=t.properties||(t.properties={}))},Hqva:function(e,t,n){e.exports={ChangeSet:n("ekYZ"),Collector:n("B1p+"),DataSource:n("xZ2+"),Dependencies:n("D3vM"),Graph:n("ARV7"),Node:n("3FFs"),Signal:n("KMnl"),Tuple:n("gtuQ"),debug:n("J731").debug}},ISRz:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)};var i=n("cihr");var a=n("P/aK");var o=n("Py5Z");var s=n("x6Fv");var u=n("QSMf");var l=n("o+e1");var f=n("Fw/k");var c=n("WJ2w");var h=n("ZAUf");var d=n("HeGT");var p=n("MtYt");var g=n("V22v");var m=n("YBv9");var v=n("jGoH");var y=n("TLMq");var _=function(e){r(t,e);function t(t,n,r){e.call(this,t,n,r);var i=this._config=this._initConfig(t.config,n);var a=this._child=p.buildModel(t.spec,this,this.name("child"));var o=this._facet=this._initFacet(t.facet);this._scale=this._initScale(o,i,a);this._axis=this._initAxis(o,i,a)}t.prototype._initConfig=function(e,t){return h.mergeDeep(h.duplicate(o.defaultConfig),e,t?t.config():{})};t.prototype._initFacet=function(e){e=h.duplicate(e);var t=this;u.channelMappingForEach(this.channels(),e,function(e,n){if(!l.isDimension(e)){t.addWarning(n+" encoding should be ordinal.")}if(e.type){e.type=c.getFullName(e.type)}});return e};t.prototype._initScale=function(e,t,n){return[a.ROW,a.COLUMN].reduce(function(r,i){if(e[i]){var o=e[i].scale||{};r[i]=h.extend({type:f.ScaleType.ORDINAL,round:t.facet.scale.round,padding:i===a.ROW&&n.has(a.Y)||i===a.COLUMN&&n.has(a.X)?t.facet.scale.padding:0},o)}return r},{})};t.prototype._initAxis=function(e,t,n){return[a.ROW,a.COLUMN].reduce(function(r,o){if(e[o]){var s=e[o].axis;if(s!==false){var u=r[o]=h.extend({},t.facet.axis,s===true?{}:s||{});if(o===a.ROW){var l=n.axis(a.Y);if(l&&l.orient!==i.AxisOrient.RIGHT&&!u.orient){u.orient=i.AxisOrient.RIGHT}if(n.has(a.X)&&!u.labelAngle){u.labelAngle=u.orient===i.AxisOrient.RIGHT?90:270}}}}return r},{})};t.prototype.facet=function(){return this._facet};t.prototype.has=function(e){return!!this._facet[e]};t.prototype.child=function(){return this._child};t.prototype.hasSummary=function(){var e=this.component.data.summary;for(var t=0;t<e.length;t++){if(h.keys(e[t].measures).length>0){return true}}return false};t.prototype.dataTable=function(){return(this.hasSummary()?s.SUMMARY:s.SOURCE)+""};t.prototype.fieldDef=function(e){return this.facet()[e]};t.prototype.stack=function(){return null};t.prototype.parseData=function(){this.child().parseData();this.component.data=g.parseFacetData(this)};t.prototype.parseSelectionData=function(){};t.prototype.parseLayoutData=function(){this.child().parseLayoutData();this.component.layout=m.parseFacetLayout(this)};t.prototype.parseScale=function(){var e=this.child();var t=this;e.parseScale();var n=this.component.scale=y.parseScaleComponent(this);h.keys(e.component.scale).forEach(function(r){if(true){n[r]=e.component.scale[r];h.vals(n[r]).forEach(function(n){var r=n.name.substr(e.name("").length);var i=t.scaleName(r);e.renameScale(n.name,i);n.name=i});delete e.component.scale[r]}})};t.prototype.parseMark=function(){this.child().parseMark();this.component.mark=h.extend({name:this.name("cell"),type:"group",from:h.extend(this.dataTable()?{data:this.dataTable()}:{},{transform:[{type:"facet",groupby:[].concat(this.has(a.ROW)?[this.field(a.ROW)]:[],this.has(a.COLUMN)?[this.field(a.COLUMN)]:[])}]}),properties:{update:x(this)}},this.child().assembleGroup())};t.prototype.parseAxis=function(){this.child().parseAxis();this.component.axis=d.parseAxisComponent(this,[a.ROW,a.COLUMN])};t.prototype.parseAxisGroup=function(){var e=b(this,a.X);var t=b(this,a.Y);this.component.axisGroup=h.extend(e?{x:e}:{},t?{y:t}:{})};t.prototype.parseGridGroup=function(){var e=this.child();this.component.gridGroup=h.extend(!e.has(a.X)&&this.has(a.COLUMN)?{column:S(this)}:{},!e.has(a.Y)&&this.has(a.ROW)?{row:w(this)}:{})};t.prototype.parseLegend=function(){this.child().parseLegend();this.component.legend=this._child.component.legend;this._child.component.legend={}};t.prototype.assembleParentGroupProperties=function(){return null};t.prototype.assembleData=function(e){g.assembleData(this,e);return this._child.assembleData(e)};t.prototype.assembleLayout=function(e){this._child.assembleLayout(e);return m.assembleLayout(this,e)};t.prototype.assembleMarks=function(){return[].concat(h.vals(this.component.axisGroup),h.flatten(h.vals(this.component.gridGroup)),this.component.mark)};t.prototype.channels=function(){return[a.ROW,a.COLUMN]};t.prototype.mapping=function(){return this.facet()};t.prototype.isFacet=function(){return true};return t}(v.Model);t.FacetModel=_;function x(e){var t=e.child();var n=h.extend({},t.config().cell,t.config().facet.cell);return h.extend({x:e.has(a.COLUMN)?{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN),offset:e.scale(a.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2},y:e.has(a.ROW)?{scale:e.scaleName(a.ROW),field:e.field(a.ROW),offset:e.scale(a.ROW).padding/2}:{value:e.config().facet.scale.padding/2},width:{field:{parent:e.child().sizeName("width")}},height:{field:{parent:e.child().sizeName("height")}}},t.assembleParentGroupProperties(n))}function b(e,t){var n=null;var r=e.child();if(r.has(t)){if(r.axis(t)){if(true){n=t===a.X?M(e):k(e);if(r.axis(t)&&d.gridShow(r,t)){r.component.axis[t]=d.parseInnerAxis(t,r)}else{delete r.component.axis[t]}}else{}}}return n}function M(e){var t=e.has(a.COLUMN);return h.extend({name:e.name("x-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(a.COLUMN)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{parent:e.child().sizeName("width")}},height:{field:{group:"height"}},x:t?{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN),offset:e.scale(a.COLUMN).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[d.parseAxis(a.X,e.child())]})}function k(e){var t=e.has(a.ROW);return h.extend({name:e.name("y-axes"),type:"group"},t?{from:{data:e.dataTable(),transform:[{type:"aggregate",groupby:[e.field(a.ROW)],summarize:{"*":["count"]}}]}}:{},{properties:{update:{width:{field:{group:"width"}},height:{field:{parent:e.child().sizeName("height")}},y:t?{scale:e.scaleName(a.ROW),field:e.field(a.ROW),offset:e.scale(a.ROW).padding/2}:{value:e.config().facet.scale.padding/2}}},axes:[d.parseAxis(a.Y,e.child())]})}function w(e){var t=e.config().facet.grid;var n={name:e.name("row-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(a.ROW)]}]},properties:{update:{y:{scale:e.scaleName(a.ROW),field:e.field(a.ROW)},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[n,{name:e.name("row-grid-end"),type:"rule",properties:{update:{y:{field:{group:"height"}},x:{value:0,offset:-t.offset},x2:{field:{group:"width"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}function S(e){var t=e.config().facet.grid;var n={name:e.name("column-grid"),type:"rule",from:{data:e.dataTable(),transform:[{type:"facet",groupby:[e.field(a.COLUMN)]}]},properties:{update:{x:{scale:e.scaleName(a.COLUMN),field:e.field(a.COLUMN)},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}};return[n,{name:e.name("column-grid-end"),type:"rule",properties:{update:{x:{field:{group:"width"}},y:{value:0,offset:-t.offset},y2:{field:{group:"height"},offset:t.offset},stroke:{value:t.color},strokeOpacity:{value:t.opacity},strokeWidth:{value:.5}}}}]}},J731:function(e,t){var n=Date.now();function r(e){console.log("[Vega Log]",e)}function i(e){console.error("[Vega Err]",e)}function a(e,t){if(!a.enable)return;var r=Function.prototype.bind.call(console.log,console);var i={prevTime:Date.now()-n,stamp:e.stamp};if(e.add){i.add=e.add.length;i.mod=e.mod.length;i.rem=e.rem.length;i.reflow=!!e.reflow}r.apply(console,(t.push(JSON.stringify(i)),t));n=Date.now()}e.exports={log:r,error:i,debug:(a.enable=false,a)}},KMnl:function(e,t,n){var r=n("ekYZ"),i=n("3FFs"),a=i.prototype;function o(e,t,n){a.init.call(this,e);this._name=t;this._value=n;this._verbose=false;this._handlers=[];return this}var s=o.prototype=Object.create(a);s.constructor=o;s.name=function(){return this._name};s.value=function(e){if(!arguments.length)return this._value;return this._value=e,this};s.values=s.value;s.verbose=function(e){if(!arguments.length)return this._verbose;return this._verbose=!!e,this};s.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate};s.fire=function(e){if(!e)e=r.create(null,true);e.signals[this._name]=1;this._graph.propagate(e,this)};s.on=function(e){var t=this,n=new i(this._graph);n.evaluate=function(n){e(t.name(),t.value());return n};this._handlers.push({handler:e,node:n});return this.addListener(n)};s.off=function(e){var t=this._handlers,n,r;for(n=t.length;--n>=0;){if(!e||t[n].handler===e){r=t.splice(n,1)[0];this.removeListener(r.node)}}return this};e.exports=o},KfF0:function(e,t){function n(e){this.cmp=e;this.nodes=[]}var r=n.prototype;r.size=function(){return this.nodes.length};r.clear=function(){return this.nodes=[],this};r.peek=function(){return this.nodes[0]};r.push=function(e){var t=this.nodes;t.push(e);return i(t,0,t.length-1,this.cmp)};r.pop=function(){var e=this.nodes,t=e.pop(),n;if(e.length){n=e[0];e[0]=t;a(e,0,this.cmp)}else{n=t}return n};r.replace=function(e){var t=this.nodes,n=t[0];t[0]=e;a(t,0,this.cmp);return n};r.pushpop=function(e){var t=this.nodes,n=t[0];if(t.length&&this.cmp(n,e)<0){t[0]=e;e=n;a(t,0,this.cmp)}return e};function i(e,t,n,r){var i,a,o;i=e[n];while(n>t){o=n-1>>1;a=e[o];if(r(i,a)<0){e[n]=a;n=o;continue}break}return e[n]=i}function a(e,t,n){var r=t,a=e.length,o=e[t],s=2*t+1,u;while(s<a){u=s+1;if(u<a&&n(e[s],e[u])>=0){s=u}e[t]=e[s];t=s;s=2*t+1}e[t]=o;return i(e,r,t,n)}e.exports=n},LHV8:function(e,t,n){e.exports={path:n("pfe9"),render:n("WCPv"),Item:n("iMk1"),bound:n("BONk"),Bounds:n("lnKO"),canvas:n("WFOa"),Gradient:n("1C2Q"),toJSON:n("3Gpk").toJSON,fromJSON:n("3Gpk").fromJSON}},"Lp/H":function(e,t,n){var r=n("Za4h"),i=n("LHV8").bound,a=n("Hqva").Tuple,o=n("Vp7n").STATUS;function s(e,t){this.duration=e||500;this.ease=t&&r.ease(t)||r.ease("cubic-in-out");this.updates={next:null}}var u=s.prototype;var l={text:1,url:1};u.interpolate=function(e,t){var n,i,s,u,f=null;for(n in t){i=e[n];s=t[n];if(i!==s){if(l[n]||i===undefined){a.set(e,n,s)}else if(typeof i==="number"&&!isFinite(i)){a.set(e,n,s)}else{u=r.interpolate(i,s);u.property=n;(f||(f=[])).push(u)}}}if(f===null&&e.status===o.EXIT){f=[]}if(f!=null){f.item=e;f.ease=e.mark.ease||this.ease;f.next=this.updates.next;this.updates.next=f}return this};u.start=function(e){var t=this,n=t.updates,i=n.next;for(;i!=null;n=i,i=n.next){if(i.item.status===o.EXIT){i.item.status=o.UPDATE;i.remove=true}}t.callback=e;r.timer(function(e){return f.call(t,e)})};function f(e){var t=this.updates,n=t,r=n.next,a=this.duration,s,u,l,f,c,h,d=true;for(;r!=null;n=r,r=n.next){s=r.item;u=s.delay||0;l=(e-u)/a;if(l<0){d=false;continue}if(l>1)l=1;f=r.ease(l);for(c=0,h=r.length;c<h;++c){s[r[c].property]=r[c](f)}s.touch();i.item(s);if(l===1){if(r.remove){s.status=o.EXIT;s.remove()}n.next=r.next;r=n}else{d=false}}this.callback();return d}e.exports=s},MRce:function(e,t){e.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},MSrK:function(e,t){e.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},"MZ+b":function(e,t,n){var r=n("Hqva"),i=r.Tuple,a=n("J731"),o=n("4JPs");function s(e){o.prototype.init.call(this,e);o.addParameters(this,{fields:{type:"array<field>"}});this._output={key:"key",value:"value"};this._cache={};return this.router(true).produces(true)}var u=s.prototype=Object.create(o.prototype);u.constructor=s;u._reset=function(e,t){for(var n in this._cache){t.rem.push.apply(t.rem,this._cache[n])}this._cache={}};u._tuple=function(e,t,n){var r=this._cache[e._id]||(this._cache[e._id]=Array(n));return r[t]?i.rederive(e,r[t]):r[t]=i.derive(e)};u._fn=function(e,t,n){var r,a,o,s,u,l;for(r=0,o=e.length;r<o;++r){u=e[r];for(a=0,s=t.field.length;a<s;++a){l=this._tuple(u,a,s);i.set(l,this._output.key,t.field[a]);i.set(l,this._output.value,t.accessor[a](u));n.push(l)}}};u.transform=function(e,t){a.debug(e,["folding"]);var n=this,i=this.param("fields"),o=r.ChangeSet.create(e);if(t)this._reset(e,o);this._fn(e.add,i,o.add);this._fn(e.mod,i,t?o.add:o.mod);e.rem.forEach(function(e){o.rem.push.apply(o.rem,n._cache[e._id]);n._cache[e._id]=null});if(e.add.length||e.rem.length||i.field.some(function(t){return!!e.fields[t]})){o.fields[this._output.key]=1;o.fields[this._output.value]=1}return o};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Fold transform",description:'Collapse ("fold") one or more data properties into two properties.',type:"object",properties:{type:{enum:["fold"]},fields:{oneOf:[{type:"array",description:"An array of field references indicating the data properties to fold.",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},minItems:1,uniqueItems:true},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{key:{type:"string",default:"key"},value:{type:"string",default:"value"}},additionalProperties:false}},additionalProperties:false,required:["type","fields"]}},MtYt:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("yLwJ");var o=n("WJ2w");var s=n("ZAUf");var u=n("ISRz");var l=n("Wwtv");var f=n("z5TJ");var c=n("zYzi");var h=n("F9eC");function d(e,t,n){if(h.isFacetSpec(e)){return new u.FacetModel(e,t,n)}if(h.isLayerSpec(e)){return new l.LayerModel(e,t,n)}if(h.isUnitSpec(e)){return new c.UnitModel(e,t,n)}console.error("Invalid spec.");return null}t.buildModel=d;t.STROKE_CONFIG=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","opacity"];t.FILL_CONFIG=["fill","fillOpacity","opacity"];t.FILL_STROKE_CONFIG=s.union(t.STROKE_CONFIG,t.FILL_CONFIG);function p(e,n){var i=n.config().mark.filled;var a=n.fieldDef(r.COLOR);var s=n.fieldDef(r.OPACITY);if(i){m(e,n,t.FILL_CONFIG)}else{m(e,n,t.STROKE_CONFIG)}var u;var l;if(n.has(r.COLOR)){u={scale:n.scaleName(r.COLOR),field:n.field(r.COLOR,a.type===o.ORDINAL?{prefn:"rank_"}:{})}}else if(a&&a.value){u={value:a.value}}if(n.has(r.OPACITY)){l={scale:n.scaleName(r.OPACITY),field:n.field(r.OPACITY,s.type===o.ORDINAL?{prefn:"rank_"}:{})}}else if(s&&s.value){l={value:s.value}}if(u!==undefined){if(i){e.fill=u}else{e.stroke=u}}else{e[i?"fill":"stroke"]=e[i?"fill":"stroke"]||{value:n.config().mark.color}}if(l!==undefined){e.opacity=l}}t.applyColorAndOpacity=p;function g(e,t,n){n.forEach(function(n){var r=t[n];if(r!==undefined){e[n]={value:r}}});return e}t.applyConfig=g;function m(e,t,n){return g(e,t.config().mark,n)}t.applyMarkConfig=m;function v(e,t,n){if(e.type===o.QUANTITATIVE&&!e.bin){return t||n.numberFormat}return undefined}t.numberFormat=v;function y(e){return(e.sort===a.SortOrder.DESCENDING?"-":"")+i.field(e,{binSuffix:"_mid"})}t.sortField=y;function _(e,t,n,r,i){if(!t||n){var a=n||i.timeFormat;return"{{"+e+" | time:'"+a+"'}}"}else{return f.template(t,e,r)}}t.timeTemplate=_},NNYs:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva"),o=n("J731"),s=a.Node,u=a.Dependencies,l=n("3Y21");var f={width:1,height:1};var c={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"};var h={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"};function d(e,t,n){this._def=t;this._parent=n;this._updated=false;return s.prototype.init.call(this,e).reflows(true)}var p=d.prototype=new s;p.evaluate=function(e){var t=this,n=function(e){g.call(t,e)};this._updated=false;e.add.forEach(n);e.mod.forEach(n);if(this._updated){e.scales[this._def.name]=1;o.debug(e,["scale",this._def.name])}return a.ChangeSet.create(e,true)};p.dependency=function(e,t){if(arguments.length==2){var n=e===u.DATA?"data":"signal";t=i.array(t);for(var r=0,a=t.length;r<a;++r){this._graph[n](t[r]).addListener(this._parent)}}return s.prototype.dependency.call(this,e,t)};function g(e){var t=this._def.name,n=t+":prev",r=m.call(this,e.scale(t)),i=r.type===c.ORDINAL?v:M,a=C.call(this,e);i.call(this,r,a,e);e.scale(t,r);e.scale(n,e.scale(n)||r);return r}function m(e){var t=this._graph.config(),n=this._def.type||c.LINEAR;if(!e||n!==e.type){var i=t.scale[n]||r.scale[n];if(!i)throw Error("Unrecognized scale type: "+n);(e=i()).type=e.type||n;e.scaleName=this._def.name;e._prev={}}return e}function v(e,t,n){var r=this._def,a=e._prev,o=false,s=N.call(this,r.padding)||0,u=r.outerPadding==null?s:N.call(this,r.outerPadding),l=r.points&&N.call(this,r.points),f=N.call(this,r.round)||r.round==null,c,d,p=true;if(i.isObject(r.range)&&!i.isArray(r.range)){o=true;t=O.call(this,h.RANGE,r.range,e,n)}c=O.call(this,h.DOMAIN,r.domain,e,n);if(c&&!i.equal(a.domain,c)){e.domain(c);a.domain=c;this._updated=true}if(!i.equal(a.range,t)){if(r.bandSize){var g=N.call(this,r.bandSize),m=c.length,v=r.points?s*g:s*g*(m-1)+2*u,y;if(t[0]>t[1]){y=t[1]||0;t=[y+(g*m+v),y]}else{y=t[0]||0;t=[y,y+(g*m+v)]}if(r.reverse)t=t.reverse()}d=typeof t[0]==="string";if(d||t.length>2||t.length===1||o){e.range(t);p=false}else if(l&&f){e.rangeRoundPoints(t,s)}else if(l){e.rangePoints(t,s)}else if(f){e.rangeRoundBands(t,s,u)}else{e.rangeBands(t,s,u)}a.range=t;this._updated=true}if(!e.invert&&p)b(e)}var y=r.bisector(i.numcmp).right,_=function(e,t){return y(e,t)-1},x=r.bisector(function(e,t){return-1*i.numcmp(e,t)}).left;function b(e){e.invert=function(t,n){var r=e.range(),a=r[0]<r[1],o=a?_:x;if(arguments.length===1){if(!i.isNumber(t)){throw Error("Ordinal scale inversion is only supported for numeric input ("+t+").")}return e.domain()[o(r,t)]}else if(arguments.length===2){if(!i.isNumber(t)||!i.isNumber(n)){throw Error("Extents to ordinal invert are not numbers ("+t+", "+n+").")}var s=e.domain(),u=o(r,t),l=o(r,n),f=r.length-1,c;if(l<u){c=u;u=l;l=u}if(u<0)u=0;if(l>f)l=f;return(a?i.range(u,l+1):i.range(l,u-1,-1)).map(function(e){return s[e]})}}}function M(e,t,n){var a=this._def,s=e._prev,u=N.call(this,a.round),l=N.call(this,a.exponent),f=N.call(this,a.clamp),d=N.call(this,a.nice),p,g;p=a.type===c.QUANTILE?O.call(this,h.DOMAIN,a.domain,e,n):L.call(this,e,n);if(p&&!i.equal(s.domain,p)){e.domain(p);s.domain=p;this._updated=true}if(N.call(this,a.range)==="height")t=t.reverse();if(t&&!i.equal(s.range,t)){e[u&&e.rangeRound?"rangeRound":"range"](t);s.range=t;this._updated=true}if(l&&a.type===c.POWER)e.exponent(l);if(f)e.clamp(true);if(d){if(a.type===c.TIME){g=r.time[d];if(!g)o.error("Unrecognized interval: "+g);e.nice(g)}else{e.nice()}}}function k(e){return e.type===c.ORDINAL||e.type===c.QUANTILE}function w(e){return e.fields||i.array(e)}function S(e){return e.some(function(e){if(!e.data)return true;return e.data&&i.array(e.field).some(function(e){return e.parent})})}function E(e,t){return i.array(e.field).map(function(e){return e.parent?i.accessor(e.parent)(t.datum):e})}function A(e,t){var n=w(e);if(n.length==1&&i.array(n[0].field).length==1){return l.TYPES.TUPLE}if(!k(t))return l.TYPES.VALUE;if(!i.isObject(e.sort))return l.TYPES.VALUE;return l.TYPES.MULTI}function T(e,t,n,r){var a=w(t),o=S(a),s=A(t,n),u=k(n),f=t.sort,c="_"+e,d=E(a[0],r);if(n[c]||this[c])return n[c]||this[c];var p=new l(this._graph).type(s),g,m;if(o){n[c]=p}else{this[c]=p}if(u){if(s===l.TYPES.VALUE){g=[{name:h.GROUPBY,get:i.identity}];m={"*":h.COUNT}}else if(s===l.TYPES.TUPLE){g=[{name:h.GROUPBY,get:i.$(d[0])}];m=i.isObject(f)?[{field:h.VALUE,get:i.$(f.field),ops:[f.op]}]:{"*":h.COUNT}}else{g=h.GROUPBY;m=[{field:h.VALUE,ops:[f.op]}]}}else{g=[];m=[{field:h.VALUE,get:s==l.TYPES.TUPLE?i.$(d[0]):i.identity,ops:[h.MIN,h.MAX],as:[h.MIN,h.MAX]}]}p.param("groupby",g).param("summarize",m);return p._lastUpdate=-1,p}function O(e,t,n,r){if(t==null){return[]}if(i.isArray(t))return t.map(N.bind(this));var a=this,o=this._graph,s=w(t),f=S(s),c=A(t,n),d=T.apply(this,arguments),p=t.sort,g=k(n),m,v,y,_,x,b,M,O,L,C;function R(e){a.dependency(u.SIGNALS,e)}if(f||!f&&d._lastUpdate<this._stamp){for(m=0,v=s.length;m<v;++m){x=s[m];L=x.data||r.datum._facetID;O=o.data(L).last();if(O.stamp<=this._stamp)continue;b=E(x,r);for(y=0,_=b.length;y<_;++y){M=b[y];if(c===l.TYPES.VALUE){d.accessors(null,M)}else if(c===l.TYPES.MULTI){d.accessors(M,x.sort||p.field)}d.evaluate(O)}this.dependency(u.DATA,L);d.dependency(u.SIGNALS).forEach(R)}d._lastUpdate=this._stamp;O=d.aggr().result();if(g){if(i.isObject(p)){C=p.op+"_"+h.VALUE;C=i.comparator(C)}else if(p===true){C=i.comparator(h.GROUPBY)}if(C)O=O.sort(C);d._values=O.map(function(e){return e[h.GROUPBY]})}else{O=O[0];d._values=!i.isValid(O)?[]:[O[h.MIN],O[h.MAX]]}}return d._values}function N(e){if(!e||!e.signal)return e;var t=e.signal,n;this.dependency(u.SIGNALS,(n=i.field(t))[0]);return this._graph.signalRef(n)}function L(e,t){var n=this._def,r=[null,null],a,o;if(n.domain!==undefined){r=!i.isObject(n.domain)?r:O.call(this,h.DOMAIN,n.domain,e,t)}o=r.length-1;if(n.domainMin!==undefined){if(i.isObject(n.domainMin)){if(n.domainMin.signal){r[0]=i.isValid(a=N.call(this,n.domainMin))?a:r[0]}else{r[0]=O.call(this,h.DOMAIN+h.MIN,n.domainMin,e,t)[0]}}else{r[0]=n.domainMin}}if(n.domainMax!==undefined){if(i.isObject(n.domainMax)){if(n.domainMax.signal){r[o]=i.isValid(a=N.call(this,n.domainMax))?a:r[o]}else{r[o]=O.call(this,h.DOMAIN+h.MAX,n.domainMax,e,t)[1]}}else{r[o]=n.domainMax}}if(n.type!==c.LOG&&n.type!==c.TIME&&n.type!==c.TIME_UTC&&(n.zero||n.zero===undefined)){r[0]=Math.min(0,r[0]);r[o]=Math.max(0,r[o])}return r}function C(e){var t=this._def,n=this._graph.config(),r=N.call(this,t.range),a=[null,null];if(r!==undefined){if(typeof r==="string"){if(f[r]){a=[0,e[r]]}else if(n.range[r]){a=n.range[r]}else{o.error("Unrecogized range: "+r);return a}}else if(i.isArray(r)){a=i.duplicate(r).map(N.bind(this))}else if(i.isObject(r)){return null}else{a=[0,r]}}if(t.rangeMin!==undefined){a[0]=t.rangeMin.signal?N.call(this,t.rangeMin):t.rangeMin}if(t.rangeMax!==undefined){a[a.length-1]=t.rangeMax.signal?N.call(this,t.rangeMax):t.rangeMax}if(t.reverse!==undefined){var s=N.call(this,t.reverse);if(i.isObject(s)){s=i.accessor(s.field)(e.datum)}if(s)a=a.reverse()}var u=a[0],l=a[a.length-1];if(u===null&&l!==null||u!==null&&l===null){o.error("Range is underspecified. Please ensure either the "+'"range" property or both "rangeMin" and "rangeMax" are specified.')}return a}e.exports=d;var R=[{enum:["width","height","shapes","category10","category20","category20b","category20c"]},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}];d.schema={refs:{data:{type:"object",properties:{data:{oneOf:[{type:"string"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},field:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}},{type:"object",properties:{parent:{type:"string"}},required:["parent"]},{type:"array",items:{type:"object",properties:{parent:{type:"string"}},required:["parent"]}}]},sort:{oneOf:[{type:"boolean"},{type:"object",properties:{field:{type:"string"},op:{enum:n("3Y21").VALID_OPS}}}]}},additionalProperties:false}},defs:{scale:{title:"Scale function",type:"object",allOf:[{properties:{name:{type:"string"},type:{enum:[c.LINEAR,c.ORDINAL,c.TIME,c.TIME_UTC,c.LOG,c.POWER,c.SQRT,c.QUANTILE,c.QUANTIZE,c.THRESHOLD],default:c.LINEAR},domain:{oneOf:[{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/data"},{type:"object",properties:{fields:{type:"array",items:{$ref:"#/refs/data"}}},required:["fields"]}]},domainMin:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},domainMax:{oneOf:[{type:"number"},{$ref:"#/refs/data"},{$ref:"#/refs/signal"}]},rangeMin:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},rangeMax:{oneOf:[{type:"string"},{type:"number"},{$ref:"#/refs/signal"}]},reverse:{oneOf:[{type:"boolean"},{$ref:"#/refs/data"}]},round:{type:"boolean"}},required:["name"]},{oneOf:[{properties:{type:{enum:[c.ORDINAL]},range:{oneOf:R.concat({$ref:"#/refs/data"})},points:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},padding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},outerPadding:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},bandSize:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]},{properties:{type:{enum:[c.TIME,c.TIME_UTC]},range:{oneOf:R},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{enum:["second","minute","hour","day","week","month","year"]},{$ref:"#/refs/signal"}]}},required:["type"]},{anyOf:[{properties:{type:{enum:[c.LINEAR,c.LOG,c.POWER,c.SQRT,c.QUANTILE,c.QUANTIZE,c.THRESHOLD],default:c.LINEAR},range:{oneOf:R},clamp:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},nice:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]},zero:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}]}}},{properties:{type:{enum:[c.POWER]},exponent:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},required:["type"]}]}]}]}}}},NdEd:function(e,t){e.exports={name:"datalib",version:"1.8.0",description:"JavaScript utilites for loading, summarizing and working with data.",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],repository:{type:"git",url:"http://github.com/vega/datalib.git"},author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],license:"BSD-3-Clause",dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",topojson:"^1.6.19",request:"^2.67.0","sync-request":"^2.1.0"},devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},main:"src/index.js",scripts:{deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",build:"browserify src/index.js -d -s dl -o datalib.js",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js"},browser:{buffer:false,fs:false,http:false,request:false,"sync-request":false,url:false}}},NobO:function(e,t,n){var r=n("7rLc").dispatch;var i=Math.PI/180,a=1<<11>>5,o=1<<11;e.exports=function(){var e=[256,256],t=s,n=u,i=f,y=l,k=l,w=c,S=h,E=v,A=[],T=Infinity,O=r("word","end"),N=null,L=Math.random,C={},R=x;C.canvas=function(e){return arguments.length?(R=b(e),C):R};C.start=function(){var r=I(R()),a=_((e[0]>>5)*e[1]),o=null,s=A.length,u=-1,l=[],f=A.map(function(e,r){e.text=t.call(this,e,r);e.font=n.call(this,e,r);e.style=y.call(this,e,r);e.weight=k.call(this,e,r);e.rotate=w.call(this,e,r);e.size=~~i.call(this,e,r);e.padding=S.call(this,e,r);return e}).sort(function(e,t){return t.size-e.size});if(N)clearInterval(N);N=setInterval(c,0);c();return C;function c(){var t=Date.now();while(Date.now()-t<T&&++u<s&&N){var n=f[u];n.x=e[0]*(L()+.5)>>1;n.y=e[1]*(L()+.5)>>1;d(r,n,f,u);if(n.hasText&&D(a,n,o)){l.push(n);O.call("word",C,n);if(o)g(o,n);else o=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}];n.x-=e[0]>>1;n.y-=e[1]>>1}}if(u>=s){C.stop();O.call("end",C,l,o)}}};C.stop=function(){if(N){clearInterval(N);N=null}return C};function I(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(a<<5)/t;e.height=o/t;var n=e.getContext("2d");n.fillStyle=n.strokeStyle="red";n.textAlign="center";return{context:n,ratio:t}}function D(t,n,r){var i=[{x:0,y:0},{x:e[0],y:e[1]}],a=n.x,o=n.y,s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),u=E(e),l=L()<.5?1:-1,f=-l,c,h,d;while(c=u(f+=l)){h=~~c[0];d=~~c[1];if(Math.min(Math.abs(h),Math.abs(d))>=s)break;n.x=a+h;n.y=o+d;if(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])continue;if(!r||!p(n,t,e[0])){if(!r||m(n,r)){var g=n.sprite,v=n.width>>5,y=e[0]>>5,_=n.x-(v<<4),x=_&127,b=32-x,M=n.y1-n.y0,k=(n.y+n.y0)*y+(_>>5),w;for(var S=0;S<M;S++){w=0;for(var A=0;A<=v;A++){t[k+A]|=w<<b|(A<v?(w=g[S*v+A])>>>x:0)}k+=y}delete n.sprite;return true}}}return false}C.timeInterval=function(e){return arguments.length?(T=e==null?Infinity:e,C):T};C.words=function(e){return arguments.length?(A=e,C):A};C.size=function(t){return arguments.length?(e=[+t[0],+t[1]],C):e};C.font=function(e){return arguments.length?(n=b(e),C):n};C.fontStyle=function(e){return arguments.length?(y=b(e),C):y};C.fontWeight=function(e){return arguments.length?(k=b(e),C):k};C.rotate=function(e){return arguments.length?(w=b(e),C):w};C.text=function(e){return arguments.length?(t=b(e),C):t};C.spiral=function(e){return arguments.length?(E=M[e]||e,C):E};C.fontSize=function(e){return arguments.length?(i=b(e),C):i};C.padding=function(e){return arguments.length?(S=b(e),C):S};C.random=function(e){return arguments.length?(L=e,C):L};C.on=function(){var e=O.on.apply(O,arguments);return e===O?C:e};return C};function s(e){return e.text}function u(){return"serif"}function l(){return"normal"}function f(e){return Math.sqrt(e.value)}function c(){return(~~(Math.random()*6)-3)*30}function h(){return 1}function d(e,t,n,r){if(t.sprite)return;var s=e.context,u=e.ratio;s.clearRect(0,0,(a<<5)/u,o/u);var l=0,f=0,c=0,h=n.length;--r;while(++r<h){t=n[r];s.save();s.font=t.style+" "+t.weight+" "+~~((t.size+1)/u)+"px "+t.font;var d=s.measureText(t.text+"m").width*u,p=t.size<<1;if(t.rotate){var g=Math.sin(t.rotate*i),m=Math.cos(t.rotate*i),v=d*m,y=d*g,_=p*m,x=p*g;d=Math.max(Math.abs(v+x),Math.abs(v-x))+31>>5<<5;p=~~Math.max(Math.abs(y+_),Math.abs(y-_))}else{d=d+31>>5<<5}if(p>c)c=p;if(l+d>=a<<5){l=0;f+=c;c=0}if(f+p>=o)break;s.translate((l+(d>>1))/u,(f+(p>>1))/u);if(t.rotate)s.rotate(t.rotate*i);s.fillText(t.text,0,0);if(t.padding)s.lineWidth=2*t.padding,s.strokeText(t.text,0,0);s.restore();t.width=d;t.height=p;t.xoff=l;t.yoff=f;t.x1=d>>1;t.y1=p>>1;t.x0=-t.x1;t.y0=-t.y1;t.hasText=true;l+=d}var b=s.getImageData(0,0,(a<<5)/u,o/u).data,M=[];while(--r>=0){t=n[r];if(!t.hasText)continue;var d=t.width,k=d>>5,p=t.y1-t.y0;for(var w=0;w<p*k;w++)M[w]=0;l=t.xoff;if(l==null)return;f=t.yoff;var S=0,E=-1;for(var A=0;A<p;A++){for(var w=0;w<d;w++){var T=k*A+(w>>5),O=b[(f+A)*(a<<5)+(l+w)<<2]?1<<31-w%32:0;M[T]|=O;S|=O}if(S)E=A;else{t.y0++;p--;A--;f++}}t.y1=t.y0+E;t.sprite=M.slice(0,(t.y1-t.y0)*k)}}function p(e,t,n){n>>=5;var r=e.sprite,i=e.width>>5,a=e.x-(i<<4),o=a&127,s=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(a>>5),f;for(var c=0;c<u;c++){f=0;for(var h=0;h<=i;h++){if((f<<s|(h<i?(f=r[c*i+h])>>>o:0))&t[l+h])return true}l+=n}return false}function g(e,t){var n=e[0],r=e[1];if(t.x+t.x0<n.x)n.x=t.x+t.x0;if(t.y+t.y0<n.y)n.y=t.y+t.y0;if(t.x+t.x1>r.x)r.x=t.x+t.x1;if(t.y+t.y1>r.y)r.y=t.y+t.y1}function m(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function v(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function y(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=e<0?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function _(e){var t=[],n=-1;while(++n<e)t[n]=0;return t}function x(){return document.createElement("canvas")}function b(e){return typeof e==="function"?e:function(){return e}}var M={archimedean:v,rectangular:y}},O3lN:function(e,t,n){var r=n("zicW");function i(e){return e==null?"auto":r.isObject(e)?e:r.isNumber(e)?{top:e,left:e,right:e,bottom:e}:e==="strict"?e:"auto"}e.exports=i;i.schema={defs:{padding:{oneOf:[{enum:["strict","auto"]},{type:"number"},{type:"object",properties:{top:{type:"number"},bottom:{type:"number"},left:{type:"number"},right:{type:"number"}},additionalProperties:false}]}}}},OTIj:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("DUWk"),o=n("r7he");function s(e,t,n){var a=e.config(),o=0;function u(e,t){i.error("PARSE DATA FAILED: "+t.name+" "+e);o=-1;n(e)}function l(t){return function(i,a){if(i){u(i,t)}else if(o>0){try{e.data(t.name).values(r.read(a,t.format));if(--o===0)n()}catch(e){u(e,t)}}}}(t||[]).forEach(function(t){if(t.url){o+=1;r.load(r.extend({url:t.url},a.load),l(t))}try{s.datasource(e,t)}catch(e){u(e,t)}});if(o===0)setTimeout(n,1);return t}s.datasource=function(e,t){var n=(t.transform||[]).map(function(t){return a(e,t)}),i=(t.modify||[]).map(function(n){return o(e,n,t)}),s=e.data(t.name,i.concat(n));if(t.values){s.values(r.read(t.values,t.format))}else if(t.source){s.source(t.source).addListener(s);e.removeListener(s.pipeline()[0])}return s};e.exports=s;var u={oneOf:[{enum:["auto"]},{type:"object",additionalProperties:{enum:["number","boolean","date","string"]}}]};s.schema={defs:{data:{title:"Input data set definition",type:"object",allOf:[{properties:{name:{type:"string"},transform:{$ref:"#/defs/transform"},modify:{$ref:"#/defs/modify"},format:{type:"object",oneOf:[{properties:{type:{enum:["json"]},parse:u,property:{type:"string"}},additionalProperties:false},{properties:{type:{enum:["csv","tsv"]},parse:u},additionalProperties:false},{oneOf:[{properties:{type:{enum:["topojson"]},feature:{type:"string"}},additionalProperties:false},{properties:{type:{enum:["topojson"]},mesh:{type:"string"}},additionalProperties:false}]},{properties:{type:{enum:["treejson"]},children:{type:"string"},parse:u},additionalProperties:false}]}},required:["name"]},{anyOf:[{required:["name","modify"]},{oneOf:[{properties:{source:{type:"string"}},required:["source"]},{properties:{values:{type:"array"}},required:["values"]},{properties:{url:{type:"string"}},required:["url"]}]}]}]}}}},"P/aK":function(e,t,n){"use strict";var r=n("ZAUf");(function(e){e[e["X"]="x"]="X";e[e["Y"]="y"]="Y";e[e["X2"]="x2"]="X2";e[e["Y2"]="y2"]="Y2";e[e["ROW"]="row"]="ROW";e[e["COLUMN"]="column"]="COLUMN";e[e["SHAPE"]="shape"]="SHAPE";e[e["SIZE"]="size"]="SIZE";e[e["COLOR"]="color"]="COLOR";e[e["TEXT"]="text"]="TEXT";e[e["DETAIL"]="detail"]="DETAIL";e[e["LABEL"]="label"]="LABEL";e[e["PATH"]="path"]="PATH";e[e["ORDER"]="order"]="ORDER";e[e["OPACITY"]="opacity"]="OPACITY"})(t.Channel||(t.Channel={}));var i=t.Channel;t.X=i.X;t.Y=i.Y;t.X2=i.X2;t.Y2=i.Y2;t.ROW=i.ROW;t.COLUMN=i.COLUMN;t.SHAPE=i.SHAPE;t.SIZE=i.SIZE;t.COLOR=i.COLOR;t.TEXT=i.TEXT;t.DETAIL=i.DETAIL;t.LABEL=i.LABEL;t.PATH=i.PATH;t.ORDER=i.ORDER;t.OPACITY=i.OPACITY;t.CHANNELS=[t.X,t.Y,t.X2,t.Y2,t.ROW,t.COLUMN,t.SIZE,t.SHAPE,t.COLOR,t.PATH,t.ORDER,t.OPACITY,t.TEXT,t.DETAIL,t.LABEL];t.UNIT_CHANNELS=r.without(t.CHANNELS,[t.ROW,t.COLUMN]);t.UNIT_SCALE_CHANNELS=r.without(t.UNIT_CHANNELS,[t.PATH,t.ORDER,t.DETAIL,t.TEXT,t.LABEL,t.X2,t.Y2]);t.NONSPATIAL_CHANNELS=r.without(t.UNIT_CHANNELS,[t.X,t.Y,t.X2,t.Y2]);t.NONSPATIAL_SCALE_CHANNELS=r.without(t.UNIT_SCALE_CHANNELS,[t.X,t.Y,t.X2,t.Y2]);t.STACK_GROUP_CHANNELS=[t.COLOR,t.DETAIL,t.ORDER,t.OPACITY,t.SIZE];function a(e,t){return!!o(e)[t]}t.supportMark=a;function o(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.DETAIL:case t.ORDER:case t.OPACITY:case t.ROW:case t.COLUMN:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,line:true,area:true,text:true};case t.X2:case t.Y2:return{rule:true,bar:true,area:true};case t.SIZE:return{point:true,tick:true,rule:true,circle:true,square:true,bar:true,text:true};case t.SHAPE:return{point:true};case t.TEXT:return{text:true};case t.PATH:return{line:true}}return{}}t.getSupportedMark=o;function s(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.OPACITY:case t.LABEL:case t.DETAIL:return{measure:true,dimension:true};case t.ROW:case t.COLUMN:case t.SHAPE:return{measure:false,dimension:true};case t.X2:case t.Y2:case t.SIZE:case t.TEXT:return{measure:true,dimension:false};case t.PATH:return{measure:false,dimension:true}}throw new Error("Invalid encoding channel"+e)}t.getSupportedRole=s;function u(e){return!r.contains([t.DETAIL,t.PATH,t.TEXT,t.LABEL,t.ORDER],e)}t.hasScale=u},P7vC:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("Hqva").Tuple,o=n("4JPs"),s=n("acp7");function u(e){s.prototype.init.call(this,e);o.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value",default:"value"},value:{type:"value",default:0}});return this.router(true).produces(true)}var l=u.prototype=Object.create(s.prototype);l.constructor=u;l.batchTransform=function(e,t){i.debug(e,["imputing"]);var n=this.param("groupby"),a=this.param("orderby"),o=this.param("method"),s=this.param("value"),u=this.param("field"),l=u.accessor,h=u.field,d=this._imputed||[],p=[],g=c(t,n.accessor,a.accessor),m=g.domain,v,y,_,x,b,M;function k(e){return e==null?null:l(e)}for(_=0,b=g.length;_<b;++_){v=g[_];if(o!=="value"){s=r[o](v,k)}for(y=0,x=v.length;y<x;++y){if(v[y]==null){M=f(n.field,v.values,a.field,m[y]);M[h]=s;p.push(M)}}}for(y=0,x=p.length;y<x;++y){e.add.push(p[y])}for(y=0,x=d.length;y<x;++y){e.rem.push(d[y])}this._imputed=p;return e};function f(e,t,n,r){var i={_imputed:true},o;for(o=0;o<t.length;++o)i[e[o]]=t[o];for(o=0;o<r.length;++o)i[n[o]]=r[o];return a.ingest(i)}function c(e,t,n){var i=[],a=function(e){return e(l)},o=function(e){return l=e,n.map(a)},s,u,l,f,c,h,d,p;h=i.domain=r.unique(e,o);p=h.length;d=h.reduce(function(e,t,n){return e[t]={value:t,index:n},e},{});for(s={},u=0;u<e.length;++u){l=e[u];f=t==null?[]:t.map(a);c=s[f]||(i.push(s[f]=Array(p)),s[f].values=f,s[f]);c[d[o(l)].index]=l}return i}e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Impute transform",description:"Performs imputation of missing values.",type:"object",properties:{type:{enum:["impute"]},method:{description:"The imputation method to use.",oneOf:[{enum:["value","mean","median","min","max"]},{$ref:"#/refs/signal"}],default:"value"},value:{description:"The value to use for missing data if the method is 'value'.",oneOf:[{type:"number"},{type:"string"},{type:"boolean"},{type:"null"},{$ref:"#/refs/signal"}],default:0},field:{description:"The data field to impute.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},groupby:{description:"A list of fields to group the data into series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},orderby:{description:"A list of fields to determine ordering within series.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]}},additionalProperties:false,required:["type","groupby","orderby","field"]}},PwiD:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=i.ChangeSet,o=i.Graph.prototype,s=i.Node,u=n("BB2X"),l=n("Qpkz"),f=n("TrdW"),c=n("8NMF");function h(e){this._defs={};this._predicates={};this._scene=null;this._groups=null;this._node=null;this._builder=null;this._reset={axes:false,legends:false};this.config(e);this.expr=f(this);o.init.call(this)}var d=h.prototype=Object.create(o);d.constructor=h;d.defs=function(e){if(!arguments.length)return this._defs;this._defs=e;return this};d.config=function(e){if(!arguments.length)return this._config;this._config=Object.create(c);for(var t in e){var n=e[t],i=this._config[t];if(r.isObject(n)&&r.isObject(i)){this._config[t]=r.extend({},i,n)}else{this._config[t]=n}}return this};d.width=function(e){if(this._defs)this._defs.width=e;if(this._defs&&this._defs.marks)this._defs.marks.width=e;if(this._scene){this._scene.items[0].width=e;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};d.height=function(e){if(this._defs)this._defs.height=e;if(this._defs&&this._defs.marks)this._defs.marks.height=e;if(this._scene){this._scene.items[0].height=e;this._scene.items[0]._dirty=true}this._reset.axes=true;return this};d.node=function(){return this._node||(this._node=new s(this))};d.data=function(){var e=o.data.apply(this,arguments);if(arguments.length>1){this.node().addListener(e.pipeline()[0])}return e};function p(e){var t=this,n={};if(!r.isArray(e))return this._predicates[e];e.forEach(function(e){n[e]=t._predicates[e]});return n}d.predicate=function(e,t){if(arguments.length===1)return p.call(this,e);return this._predicates[e]=t};d.predicates=function(){return this._predicates};d.scene=function(e){if(!arguments.length)return this._scene;if(this._builder){this.node().removeListener(this._builder);this._builder._groupBuilder.disconnect()}var t=this,n=this._builder=new s(this);n.evaluate=function(r){if(n._groupBuilder)return r;var i=n._groupBuilder=new u(t,t._defs.marks,t._scene={}),a=i.pipeline();t._groups={};this.addListener(i.connect());a[a.length-1].addListener(e);return r};this.addListener(n);return this};d.group=function(e,t){var n=this._groups;if(arguments.length===1)return n[e];return n[e]=t,this};d.reset=function(){if(this._scene&&this._reset.axes){l(this._scene,function(e){if(e.axes)e.axes.forEach(function(e){e.reset()})});this._reset.axes=false}if(this._scene&&this._reset.legends){l(this._scene,function(e){if(e.legends)e.legends.forEach(function(e){e.reset()})});this._reset.legends=false}return this};d.addListener=function(e){this.node().addListener(e)};d.removeListener=function(e){this.node().removeListener(e)};d.fire=function(e){if(!e)e=a.create();this.propagate(e,this.node())};e.exports=h},Py5Z:function(e,t,n){"use strict";var r=n("Fw/k");var i=n("cihr");var a=n("ZE31");t.defaultCellConfig={width:200,height:200};t.defaultFacetCellConfig={stroke:"#ccc",strokeWidth:1};var o={color:"#000000",opacity:.4,offset:0};t.defaultFacetConfig={scale:r.defaultFacetScaleConfig,axis:i.defaultFacetAxisConfig,grid:o,cell:t.defaultFacetCellConfig};(function(e){e[e["NORMAL"]="normal"]="NORMAL";e[e["BOLD"]="bold"]="BOLD"})(t.FontWeight||(t.FontWeight={}));var s=t.FontWeight;(function(e){e[e["CIRCLE"]="circle"]="CIRCLE";e[e["SQUARE"]="square"]="SQUARE";e[e["CROSS"]="cross"]="CROSS";e[e["DIAMOND"]="diamond"]="DIAMOND";e[e["TRIANGLEUP"]="triangle-up"]="TRIANGLEUP";e[e["TRIANGLEDOWN"]="triangle-down"]="TRIANGLEDOWN"})(t.Shape||(t.Shape={}));var u=t.Shape;(function(e){e[e["LEFT"]="left"]="LEFT";e[e["RIGHT"]="right"]="RIGHT";e[e["CENTER"]="center"]="CENTER"})(t.HorizontalAlign||(t.HorizontalAlign={}));var l=t.HorizontalAlign;(function(e){e[e["TOP"]="top"]="TOP";e[e["MIDDLE"]="middle"]="MIDDLE";e[e["BOTTOM"]="bottom"]="BOTTOM"})(t.VerticalAlign||(t.VerticalAlign={}));var f=t.VerticalAlign;(function(e){e[e["NORMAL"]="normal"]="NORMAL";e[e["ITALIC"]="italic"]="ITALIC"})(t.FontStyle||(t.FontStyle={}));var c=t.FontStyle;(function(e){e[e["LINEAR"]="linear"]="LINEAR";e[e["LINEAR_CLOSED"]="linear-closed"]="LINEAR_CLOSED";e[e["STEP"]="step"]="STEP";e[e["STEP_BEFORE"]="step-before"]="STEP_BEFORE";e[e["STEP_AFTER"]="step-after"]="STEP_AFTER";e[e["BASIS"]="basis"]="BASIS";e[e["BASIS_OPEN"]="basis-open"]="BASIS_OPEN";e[e["BASIS_CLOSED"]="basis-closed"]="BASIS_CLOSED";e[e["CARDINAL"]="cardinal"]="CARDINAL";e[e["CARDINAL_OPEN"]="cardinal-open"]="CARDINAL_OPEN";e[e["CARDINAL_CLOSED"]="cardinal-closed"]="CARDINAL_CLOSED";e[e["BUNDLE"]="bundle"]="BUNDLE";e[e["MONOTONE"]="monotone"]="MONOTONE"})(t.Interpolate||(t.Interpolate={}));var h=t.Interpolate;(function(e){e[e["LINE"]="line"]="LINE";e[e["LINEPOINT"]="linepoint"]="LINEPOINT";e[e["NONE"]="none"]="NONE"})(t.AreaOverlay||(t.AreaOverlay={}));var d=t.AreaOverlay;t.defaultOverlayConfig={line:false,pointStyle:{filled:true},lineStyle:{}};t.defaultMarkConfig={color:"#4682b4",shape:u.CIRCLE,strokeWidth:2,size:30,barThinSize:2,ruleSize:1,tickThickness:1,fontSize:10,baseline:f.MIDDLE,text:"Abc",shortTimeLabels:false,applyColorToBackground:false};t.defaultConfig={numberFormat:"s",timeFormat:"%Y-%m-%d",countTitle:"Number of Records",cell:t.defaultCellConfig,mark:t.defaultMarkConfig,overlay:t.defaultOverlayConfig,scale:r.defaultScaleConfig,axis:i.defaultAxisConfig,legend:a.defaultLegendConfig,facet:t.defaultFacetConfig}},QNWf:function(e,t,n){"use strict";var r=n("h/tW");var i=n("x6Fv");var a=n("o+e1");var o=n("ZAUf");var s;(function(e){function t(e,t){if(t.bin){e[a.field(t,{binSuffix:"_start"})]=true;e[a.field(t,{binSuffix:"_mid"})]=true;e[a.field(t,{binSuffix:"_end"})]=true;e[a.field(t,{binSuffix:"_range"})]=true}else{e[a.field(t)]=true}return e}function n(e){var n={};var a={};e.forEach(function(e,i){if(e.aggregate){if(e.aggregate===r.AggregateOp.COUNT){a["*"]=a["*"]||{};a["*"]["count"]=true}else{a[e.field]=a[e.field]||{};a[e.field][e.aggregate]=true}}else{t(n,e)}});return[{name:e.dataName(i.SUMMARY),dimensions:n,measures:a}]}e.parseUnit=n;function s(e){var n=e.child().component.data;if(!n.source&&n.summary){var r=n.summary.map(function(n){n.dimensions=e.reduce(t,n.dimensions);var r=n.name.substr(e.child().name("").length);e.child().renameData(n.name,r);n.name=r;return n});delete n.summary;return r}return[]}e.parseFacet=s;function u(e,t){for(var n in t){if(t.hasOwnProperty(n)){var r=t[n];for(var i in r){if(r.hasOwnProperty(i)){if(n in e){e[n][i]=true}else{e[n]={op:true}}}}}}}function l(e){var t={};e.children().forEach(function(n){var r=n.component.data;if(!r.source&&r.summary){r.summary.forEach(function(a){var s=o.hash(a.dimensions);if(s in t){u(t[s].measures,a.measures)}else{a.name=e.dataName(i.SUMMARY)+"_"+o.keys(t).length;t[s]=a}n.renameData(n.dataName(i.SUMMARY),t[s].name);delete r.summary})}});return o.vals(t)}e.parseLayer=l;function f(e,t){if(!e.summary){return[]}return e.summary.reduce(function(e,n){var r=n.dimensions;var a=n.measures;var s=o.keys(r);var u=o.reduce(a,function(e,t,n){e[n]=o.keys(t);return e},{});if(o.keys(a).length>0){e.push({name:n.name,source:t.dataName(i.SOURCE),transform:[{type:"aggregate",groupby:s,summarize:u}]})}return e},[])}e.assemble=f})(s=t.summary||(t.summary={}))},QSMf:function(e,t,n){"use strict";var r=n("P/aK");var i=n("ZAUf");function a(e){var t=0;if(e.color){t++}if(e.opacity){t++}if(e.size){t++}if(e.shape){t++}return t}t.countRetinal=a;function o(e){return r.CHANNELS.filter(function(t){return s(e,t)})}t.channels=o;function s(e,t){var n=e&&e[t];return n&&(n.field!==undefined||i.isArray(n)&&n.length>0)}t.has=s;function u(e){return i.some(r.CHANNELS,function(t){if(s(e,t)&&e[t].aggregate){return true}return false})}t.isAggregate=u;function l(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}t.isRanged=l;function f(e){var t=[];r.CHANNELS.forEach(function(n){if(s(e,n)){if(i.isArray(e[n])){e[n].forEach(function(e){t.push(e)})}else{t.push(e[n])}}});return t}t.fieldDefs=f;function c(e,t,n){h(r.CHANNELS,e,t,n)}t.forEach=c;function h(e,t,n,r){var a=0;e.forEach(function(e){if(s(t,e)){if(i.isArray(t[e])){t[e].forEach(function(t){n.call(r,t,e,a++)})}else{n.call(r,t[e],e,a++)}}})}t.channelMappingForEach=h;function d(e,t,n){return p(r.CHANNELS,e,t,n)}t.map=d;function p(e,t,n,r){var a=[];e.forEach(function(e){if(s(t,e)){if(i.isArray(t[e])){t[e].forEach(function(t){a.push(n.call(r,t,e))})}else{a.push(n.call(r,t[e],e))}}});return a}t.channelMappingMap=p;function g(e,t,n,i){return m(r.CHANNELS,e,t,n,i)}t.reduce=g;function m(e,t,n,a,o){var u=a;r.CHANNELS.forEach(function(e){if(s(t,e)){if(i.isArray(t[e])){t[e].forEach(function(t){u=n.call(o,u,t,e)})}else{u=n.call(o,u,t[e],e)}}});return u}t.channelMappingReduce=m},Qpkz:function(e,t){e.exports=function e(t,n){var r,i,a,o,s;if(n(t))return true;var u=["items","axisItems","legendItems"];for(a=0,o=u.length;a<o;++a){if(s=t[u[a]]){for(r=0,i=s.length;r<i;++r){if(e(s[r],n))return true}}}}},QvNu:function(e,t,n){var r=n("zicW"),i=r.Aggregator,a=i.prototype,o=n("Hqva"),s=o.Tuple,u=n("J731"),l=0;function f(){i.call(this);this._facet=null;this._facetID=++l}var c=f.prototype=Object.create(a);c.constructor=f;c.facet=function(e){return arguments.length?(this._facet=e,this):this._facet};c._ingest=function(e){return s.ingest(e,null)};c._assign=s.set;function h(e){u.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]);e._graph.removeListener(t[0]);e._graph.disconnect(t)}c._newcell=function(e,t){var n=a._newcell.call(this,e,t),r=this._facet;if(r){var i=r._graph,o=n.tuple,s=r.param("transform");n.ds=i.data(o._facetID,s,o);n.disconnect=h;r.addListener(s[0])}return n};c._newtuple=function(e,t){var n=a._newtuple.call(this,e);if(this._facet){s.set(n,"key",t);s.set(n,"_facetID",this._facetID+"_"+t)}return n};c.clear=function(){if(this._facet){for(var e in this._cells){this._cells[e].disconnect(this._facet)}}return a.clear.call(this)};c._on_add=function(e,t){if(this._facet)t.ds._input.add.push(e)};c._on_rem=function(e,t){if(this._facet)t.ds._input.rem.push(e)};c._on_mod=function(e,t,n,r){if(this._facet){if(n===r){n.ds._input.mod.push(e)}else{n.ds._input.rem.push(e);r.ds._input.add.push(e)}}};c._on_drop=function(e){if(this._facet)e.disconnect(this._facet)};c._on_keep=function(e){if(this._facet)o.ChangeSet.copy(this._input,e.ds._input)};e.exports=f},RA6T:function(e,t){e.exports=function(e,t,n){var r=e.open(t),i=1e4,a=250,o=~~(i/a);function s(t){if(t.source===r){o=0;e.removeEventListener("message",s,false)}}e.addEventListener("message",s,false);function u(){if(o<=0)return;r.postMessage(n,"*");setTimeout(u,a);o-=1}setTimeout(u,a)}},RdYp:function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){s.prototype.init.call(this,e);o.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value",default:10},maxbins:{type:"value",default:20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>",default:[5,2]}});this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"};return this.mutates(true)}var l=u.prototype=Object.create(s.prototype);l.constructor=u;l.extent=function(e){var t=[this.param("min"),this.param("max")],n;if(t[0]==null||t[1]==null){n=r.extent(e,this.param("field").accessor);if(t[0]==null)t[0]=n[0];if(t[1]==null)t[1]=n[1]}return t};l.batchTransform=function(e,t){a.debug(e,["binning"]);var n=this.extent(t),o=this._output,s=this.param("step"),u=this.param("steps"),l=this.param("minstep"),f=this.param("field").accessor,c={min:n[0],max:n[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};if(s)c.step=s;if(u)c.steps=u;if(l)c.minstep=l;var h=r.bins(c),d=h.step;function p(e){var t=f(e);t=t==null?null:h.start+d*~~((t-h.start)/d);i.set(e,o.start,t);i.set(e,o.end,t+d);i.set(e,o.mid,t+d/2)}e.add.forEach(p);e.mod.forEach(p);e.rem.forEach(p);e.fields[o.start]=1;e.fields[o.end]=1;e.fields[o.mid]=1;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Bin transform",description:"Bins values into quantitative bins (e.g., for a histogram).",type:"object",properties:{type:{enum:["bin"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"The name of the field to bin values from."},min:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The minimum bin value to consider."},max:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum bin value to consider."},base:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The number base to use for automatic bin determination.",default:10},maxbins:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum number of allowable bins.",default:20},step:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"An exact step size to use between bins. If provided, options such as maxbins will be ignored."},steps:{description:"An array of allowable step sizes to choose from.",oneOf:[{type:"array",items:{type:"number"}},{$ref:"#/refs/signal"}]},minstep:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"A minimum allowable step size (particularly useful for integer values)."},div:{description:"An array of scale factors indicating allowable subdivisions.",oneOf:[{type:"array",items:{type:"number"},default:[5,2]},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"bin_start"},end:{type:"string",default:"bin_end"},mid:{type:"string",default:"bin_mid"}},additionalProperties:false}},additionalProperties:false,required:["type","field"]}},"S/OH":function(e,t,n){var r=n("zicW"),i=n("TrdW"),a=n("Hqva").Dependencies.SIGNALS;var o=["datum","event","signals","width","height","padding"].concat(r.keys(i.codegen.functions));function s(e,t){(t||[]).forEach(function(t){if(o.indexOf(t.name)!==-1){throw Error('Signal name "'+t.name+'" is a '+"reserved keyword ("+o.join(", ")+").")}var n=e.signal(t.name,t.init).verbose(t.verbose);if(t.init&&t.init.expr){t.init.expr=e.expr(t.init.expr);n.value(u(e,t.init))}if(t.expr){t.expr=e.expr(t.expr);n.evaluate=function(r){var i=u(e,t),a=r.signals;if(i!==n.value()||n.verbose()){n.value(i);a[t.name]=1}return a[t.name]?r:e.doNotPropagate};n.dependency(a,t.expr.globals);t.expr.globals.forEach(function(t){e.signal(t).addListener(n)})}});return t}function u(e,t){var n=t.expr,r=n.fn();return t.scale?s.scale(e,t,r):r}s.scale=function e(t,n,a,o,s){var u=n.scale,l=u.name||u.signal||u,f=u.scope,c;if(f){if(f.signal){f=t.signalRef(f.signal)}else if(r.isString(f)){c=u._expr=u._expr||t.expr(f);f=c.fn(o,s)}}return i.scale(t,u.invert,l,a,f)};e.exports=s;s.schema={refs:{signal:{title:"SignalRef",type:"object",properties:{signal:{type:"string"}},required:["signal"]},scopedScale:{oneOf:[{type:"string"},{type:"object",properties:{name:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},scope:{oneOf:[{$ref:"#/refs/signal"},{type:"string"}]},invert:{type:"boolean",default:false}},additionalProperties:false,required:["name"]}]}},defs:{signal:{type:"object",properties:{name:{type:"string",not:{enum:o}},init:{},verbose:{type:"boolean",default:false},expr:{type:"string"},scale:{$ref:"#/refs/scopedScale"},streams:{$ref:"#/defs/streams"}},additionalProperties:false,required:["name"]}}}},SAbC:function(e,t,n){(function(e,n){true?n(t):typeof define==="function"&&define.amd?define(["exports"],n):n(e.d3_dsv={})})(this,function(e){"use strict";function t(e){return new a(e)}function n(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function r(e,t){var r=n(e);return function(n,i){return t(r(n),i,e)}}function i(e){var t=Object.create(null),n=[];e.forEach(function(e){for(var r in e){if(!(r in t)){n.push(t[r]=r)}}});return n}function a(e){var t=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);this.parse=function(e,t){var i,a,o=this.parseRows(e,function(e,o){if(i)return i(e,o-1);a=e,i=t?r(e,t):n(e)});o.columns=a;return o};this.parseRows=function(e,t){var n={},r={},i=[],o=e.length,s=0,u=0,l,f;function c(){if(s>=o)return r;if(f)return f=false,n;var t=s,i;if(e.charCodeAt(t)===34){var u=t;while(u++<o){if(e.charCodeAt(u)===34){if(e.charCodeAt(u+1)!==34)break;++u}}s=u+2;i=e.charCodeAt(u+1);if(i===13){f=true;if(e.charCodeAt(u+2)===10)++s}else if(i===10){f=true}return e.slice(t+1,u).replace(/""/g,'"')}while(s<o){var l=1;i=e.charCodeAt(s++);if(i===10)f=true;else if(i===13){f=true;if(e.charCodeAt(s)===10)++s,++l}else if(i!==a)continue;return e.slice(t,s-l)}return e.slice(t)}while((l=c())!==r){var h=[];while(l!==n&&l!==r){h.push(l);l=c()}if(t&&(h=t(h,u++))==null)continue;i.push(h)}return i};this.format=function(t,n){if(n==null)n=i(t);return[n.map(s).join(e)].concat(t.map(function(t){return n.map(function(e){return s(t[e])}).join(e)})).join("\n")};this.formatRows=function(e){return e.map(o).join("\n")};function o(t){return t.map(s).join(e)}function s(e){return t.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}}t.prototype=a.prototype;var o=t(",");var s=t("\t");var u="0.1.14";e.version=u;e.dsv=t;e.csv=o;e.tsv=s})},SIx5:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("MtYt");var o;(function(e){function t(){return"rect"}e.markType=t;function n(e){var t={};var n=e.config().mark.orient;var s=e.stack();var u=e.encoding().x;var l=e.encoding().x2;var f=i.isMeasure(u)||i.isMeasure(l);if(s&&r.X===s.fieldChannel){t.x={scale:e.scaleName(r.X),field:e.field(r.X,{suffix:"_start"})};t.x2={scale:e.scaleName(r.X),field:e.field(r.X,{suffix:"_end"})}}else if(f){if(n==="horizontal"){if(e.has(r.X)){t.x={scale:e.scaleName(r.X),field:e.field(r.X)}}else{t.x={scale:e.scaleName(r.X),value:0}}if(e.has(r.X2)){t.x2={scale:e.scaleName(r.X),field:e.field(r.X2)}}else{t.x2={scale:e.scaleName(r.X),value:0}}}else{t.xc={scale:e.scaleName(r.X),field:e.field(r.X)};t.width={value:o(e,r.X)}}}else if(e.fieldDef(r.X).bin){if(e.has(r.SIZE)&&n!=="horizontal"){t.xc={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_mid"})};t.width={scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}}else{t.x={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_start"}),offset:1};t.x2={scale:e.scaleName(r.X),field:e.field(r.X,{binSuffix:"_end"})}}}else{if(e.has(r.X)){t.xc={scale:e.scaleName(r.X),field:e.field(r.X)}}else{t.x={value:0,offset:2}}t.width=e.has(r.SIZE)&&n!=="horizontal"?{scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}:{value:o(e,r.X)}}var c=e.encoding().y;var h=e.encoding().y2;var d=i.isMeasure(c)||i.isMeasure(h);if(s&&r.Y===s.fieldChannel){t.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{suffix:"_start"})};t.y2={scale:e.scaleName(r.Y),field:e.field(r.Y,{suffix:"_end"})}}else if(d){if(n!=="horizontal"){if(e.has(r.Y)){t.y={scale:e.scaleName(r.Y),field:e.field(r.Y)}}else{t.y={scale:e.scaleName(r.Y),value:0}}if(e.has(r.Y2)){t.y2={scale:e.scaleName(r.Y),field:e.field(r.Y2)}}else{t.y2={scale:e.scaleName(r.Y),value:0}}}else{t.yc={scale:e.scaleName(r.Y),field:e.field(r.Y)};t.height={value:o(e,r.Y)}}}else if(e.fieldDef(r.Y).bin){if(e.has(r.SIZE)&&n==="horizontal"){t.yc={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_mid"})};t.height={scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}}else{t.y={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_start"})};t.y2={scale:e.scaleName(r.Y),field:e.field(r.Y,{binSuffix:"_end"}),offset:1}}}else{if(e.has(r.Y)){t.yc={scale:e.scaleName(r.Y),field:e.field(r.Y)}}else{t.y2={field:{group:"height"},offset:-1}}t.height=e.has(r.SIZE)&&n==="horizontal"?{scale:e.scaleName(r.SIZE),field:e.field(r.SIZE)}:{value:o(e,r.Y)}}a.applyColorAndOpacity(t,e);return t}e.properties=n;function o(e,t){var n=e.fieldDef(r.SIZE);if(n&&n.value!==undefined){return n.value}var i=e.config().mark;if(i.barSize){return i.barSize}return e.isOrdinalScale(t)?e.scale(t).bandSize-1:!e.has(t)?e.config().scale.bandSize-1:i.barThinSize}function s(e){return undefined}e.labels=s})(o=t.bar||(t.bar={}))},SbOu:function(e,t,n){var r=n("zicW"),i=n("h36N");function a(e,t,n){var o=t.properties||n&&(t.properties={}),s=o.enter||n&&(o.enter={}),u=t.marks,l=e.config().marks||{};if(n){if(t.type==="symbol"&&!s.size&&l.symbolSize){s.size={value:l.symbolSize}}var f={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"};var c=f[t.type];if(!s[c]&&l.color){s[c]={value:l.color}}}r.keys(o).forEach(function(n){o[n]=i(e,t.type,o[n])});if(t.delay){t.delay=i(e,t.type,{delay:t.delay})}if(u){t.marks=u.map(function(t){return a(e,t,true)})}return t}e.exports=a;a.schema={defs:{mark:{type:"object",properties:{name:{type:"string"},key:{type:"string"},type:{enum:["rect","symbol","path","arc","area","line","rule","image","text","group"]},from:{type:"object",properties:{data:{type:"string"},mark:{type:"string"},transform:{$ref:"#/defs/transform"}},additionalProperties:false},delay:{$ref:"#/refs/numberValue"},ease:{enum:["linear","quad","cubic","sin","exp","circle","bounce"].reduce(function(e,t){["in","out","in-out","out-in"].forEach(function(n){e.push(t+"-"+n)});return e},[])},interactive:{type:"boolean"},properties:{type:"object",properties:{enter:{$ref:"#/defs/propset"},update:{$ref:"#/defs/propset"},exit:{$ref:"#/defs/propset"},hover:{$ref:"#/defs/propset"}},additionalProperties:false,anyOf:[{required:["enter"]},{required:["update"]}]}},required:["type"]}}}},Sgrz:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("4JPs"),u=n("acp7");function l(e){u.prototype.init.call(this,e);s.addParameters(this,{sort:{type:"array<field>",default:null},children:{type:"field",default:"children"},parent:{type:"field",default:"parent"},field:{type:"value",default:null},mode:{type:"value",default:"tidy"},size:{type:"array<value>",default:n("MRce").size},nodesize:{type:"array<value>",default:null},orient:{type:"value",default:"cartesian"}});this._mode=null;this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"};return this.mutates(true)}var f="partition";var c={cartesian:function(e,t){return e.parent===t.parent?1:2},radial:function(e,t){return(e.parent===t.parent?1:2)/e.depth}};var h=l.prototype=Object.create(u.prototype);h.constructor=l;h.batchTransform=function(e,t){o.debug(e,["hierarchy layout"]);var n=this._layout,s=this._output,u=this.param("mode"),l=this.param("sort"),h=this.param("nodesize"),d=this.param("parent").accessor,p=t.filter(function(e){return d(e)===null})[0];if(u!==this._mode){this._mode=u;if(u==="tidy")u="tree";n=this._layout=r.layout[u]()}e.fields[s.x]=1;e.fields[s.y]=1;e.fields[s.depth]=1;if(u===f){e.fields[s.width]=1;e.fields[s.height]=1;n.value(this.param("field").accessor)}else{n.separation(c[this.param("orient")])}if(h.length&&u!==f){n.nodeSize(h)}else{n.size(this.param("size"))}n.sort(l.field.length?i.comparator(l.field):null).children(this.param("children").accessor).nodes(p);t.forEach(function(e){a.set(e,s.x,e.x);a.set(e,s.y,e.y);a.set(e,s.depth,e.depth);if(u===f){a.set(e,s.width,e.dx);a.set(e,s.height,e.dy)}});return e};e.exports=l;l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Hierarchy transform",type:"object",properties:{type:{enum:["hierarchy"]},sort:{description:"A list of fields to use as sort criteria for sibling nodes.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},children:{description:"The data field for the children node array",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"children"},parent:{description:"The data field for the parent node",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"parent"},field:{description:"The value for the area of each leaf-level node for partition layouts.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},mode:{description:"The layout algorithm mode to use.",oneOf:[{enum:["tidy","cluster","partition"]},{$ref:"#/refs/signal"}],default:"tidy"},orient:{description:"The layout orientation to use.",oneOf:[{enum:["cartesian","radial"]},{$ref:"#/refs/signal"}],default:"cartesian"},size:{description:"The dimensions of the tree layout",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:[500,500]},nodesize:{description:"Sets a fixed x,y size for each node (overrides the size parameter)",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}],default:null},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"},width:{type:"string",default:"layout_width"},height:{type:"string",default:"layout_height"},depth:{type:"string",default:"layout_depth"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},TLMq:function(e,t,n){"use strict";var r=n("h/tW");var i=n("P/aK");var a=n("x6Fv");var o=n("o+e1");var s=n("j8cM");var u=n("Fw/k");var l=n("f2i1");var f=n("z5TJ");var c=n("WJ2w");var h=n("ZAUf");var d=n("wKIX");t.COLOR_LEGEND="color_legend";t.COLOR_LEGEND_LABEL="color_legend_label";function p(e){return e.channels().reduce(function(t,n){if(e.scale(n)){var r=e.fieldDef(n);var a={main:g(e,r,n)};if(n===i.COLOR&&e.legend(i.COLOR)&&(r.type===c.ORDINAL||r.bin||r.timeUnit)){a.colorLegend=m(e,r);if(r.bin){a.binColorLegend=v(e,r)}}t[n]=a}return t},{})}t.parseScaleComponent=p;function g(e,n,r){var a=e.scale(r);var o=e.sort(r);var s={name:e.scaleName(r),type:a.type};if(r===i.X&&e.has(i.X2)){if(e.has(i.X)){s.domain={fields:[_(a,e,i.X),_(a,e,i.X2)]}}else{s.domain=_(a,e,i.X2)}}else if(r===i.Y&&e.has(i.Y2)){if(e.has(i.Y)){s.domain={fields:[_(a,e,i.Y),_(a,e,i.Y2)]}}else{s.domain=_(a,e,i.Y2)}}else{s.domain=_(a,e,r)}h.extend(s,M(a,e,r));if(o&&(typeof o==="string"?o:o.order)==="descending"){s.reverse=true}["round","clamp","nice","exponent","zero","padding","points"].forEach(function(i){var o=t[i](a,r,n,e);if(o!==undefined){s[i]=o}});return s}function m(e,n){return{name:e.scaleName(t.COLOR_LEGEND),type:u.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(i.COLOR,n.bin||n.timeUnit?{}:{prefn:"rank_"}),sort:true},range:{data:e.dataTable(),field:e.field(i.COLOR),sort:true}}}function v(e,n){return{name:e.scaleName(t.COLOR_LEGEND_LABEL),type:u.ScaleType.ORDINAL,domain:{data:e.dataTable(),field:e.field(i.COLOR),sort:true},range:{data:e.dataTable(),field:o.field(n,{binSuffix:"_range"}),sort:{field:e.field(i.COLOR,{binSuffix:"_start"}),op:"min"}}}}function y(e,t,n,r){if(!i.hasScale(n)){return null}if(h.contains([i.ROW,i.COLUMN,i.SHAPE],n)){return u.ScaleType.ORDINAL}if(e.type!==undefined){return e.type}switch(t.type){case c.NOMINAL:return u.ScaleType.ORDINAL;case c.ORDINAL:if(n===i.COLOR){return u.ScaleType.LINEAR}return u.ScaleType.ORDINAL;case c.TEMPORAL:if(n===i.COLOR){return u.ScaleType.TIME}if(t.timeUnit){switch(t.timeUnit){case f.TimeUnit.HOURS:case f.TimeUnit.DAY:case f.TimeUnit.MONTH:case f.TimeUnit.QUARTER:return u.ScaleType.ORDINAL;default:return u.ScaleType.TIME}}return u.ScaleType.TIME;case c.QUANTITATIVE:if(t.bin){return h.contains([i.X,i.Y,i.COLOR],n)?u.ScaleType.LINEAR:u.ScaleType.ORDINAL}return u.ScaleType.LINEAR}return null}t.scaleType=y;function _(e,t,n){var r=t.fieldDef(n);if(e.domain){return e.domain}if(r.type===c.TEMPORAL){if(d.rawDomain(r.timeUnit,n)){return{data:r.timeUnit,field:"date"}}return{data:t.dataTable(),field:t.field(n),sort:{field:t.field(n),op:"min"}}}var o=t.stack();if(o&&n===o.fieldChannel){if(o.offset===l.StackOffset.NORMALIZE){return[0,1]}return{data:t.dataName(a.STACKED_SCALE),field:t.field(n,{prefn:"sum_"})}}var s=b(e,t,n),f=x(t,n,e.type);if(s){return{data:a.SOURCE,field:t.field(n,{noAggregate:true})}}else if(r.bin){if(e.type===u.ScaleType.ORDINAL){return{data:t.dataTable(),field:t.field(n,{binSuffix:"_range"}),sort:{field:t.field(n,{binSuffix:"_start"}),op:"min"}}}else if(n===i.COLOR){return{data:t.dataTable(),field:t.field(n,{binSuffix:"_start"})}}else{return{data:t.dataTable(),field:[t.field(n,{binSuffix:"_start"}),t.field(n,{binSuffix:"_end"})]}}}else if(f){return{data:f.op?a.SOURCE:t.dataTable(),field:r.type===c.ORDINAL&&n===i.COLOR?t.field(n,{prefn:"rank_"}):t.field(n),sort:f}}else{return{data:t.dataTable(),field:r.type===c.ORDINAL&&n===i.COLOR?t.field(n,{prefn:"rank_"}):t.field(n)}}}t.domain=_;function x(e,t,n){if(n!==u.ScaleType.ORDINAL){return undefined}var r=e.sort(t);if(h.contains(["ascending","descending",undefined],r)){return true}if(typeof r!=="string"){return{op:r.op,field:r.field}}return undefined}t.domainSort=x;function b(e,t,n){var i=t.fieldDef(n);return e.useRawDomain&&i.aggregate&&r.SHARED_DOMAIN_OPS.indexOf(i.aggregate)>=0&&(i.type===c.QUANTITATIVE&&!i.bin||i.type===c.TEMPORAL&&h.contains([u.ScaleType.TIME,u.ScaleType.UTC],e.type))}function M(e,t,n){var r=t.fieldDef(n);var a=t.config().scale;if(e.type===u.ScaleType.ORDINAL&&e.bandSize&&h.contains([i.X,i.Y],n)){return{bandSize:e.bandSize}}if(e.range&&!h.contains([i.X,i.Y,i.ROW,i.COLUMN],n)){return{range:e.range}}switch(n){case i.ROW:return{range:"height"};case i.COLUMN:return{range:"width"}}var o=t;switch(n){case i.X:return{rangeMin:0,rangeMax:o.config().cell.width};case i.Y:return{rangeMin:o.config().cell.height,rangeMax:0};case i.SIZE:if(o.mark()===s.BAR){if(a.barSizeRange!==undefined){return{range:a.barSizeRange}}var l=t.config().mark.orient==="horizontal"?i.Y:i.X;return{range:[t.config().mark.barThinSize,t.scale(l).bandSize]}}else if(o.mark()===s.TEXT){return{range:a.fontSizeRange}}else if(o.mark()===s.RULE){return{range:a.ruleSizeRange}}else if(o.mark()===s.TICK){return{range:a.tickSizeRange}}if(a.pointSizeRange!==undefined){return{range:a.pointSizeRange}}var f=k(o);return{range:[9,(f-2)*(f-2)]};case i.SHAPE:return{range:a.shapeRange};case i.COLOR:if(r.type===c.NOMINAL){return{range:a.nominalColorRange}}return{range:a.sequentialColorRange};case i.OPACITY:return{range:a.opacity}}return{}}t.rangeMixins=M;function k(e){var t=e.config().scale;var n=e.has(i.X);var r=e.has(i.Y);var a=o.isMeasure(e.encoding().x);var s=o.isMeasure(e.encoding().y);if(n&&r){return a!==s?e.scale(a?i.Y:i.X).bandSize:Math.min(e.scale(i.X).bandSize||t.bandSize,e.scale(i.Y).bandSize||t.bandSize)}else if(r){return s?e.config().scale.bandSize:e.scale(i.Y).bandSize}else if(n){return a?e.config().scale.bandSize:e.scale(i.X).bandSize}return e.config().scale.bandSize}function w(e){if(h.contains([u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.LOG,u.ScaleType.TIME,u.ScaleType.UTC],e.type)){return e.clamp}return undefined}t.clamp=w;function S(e){if(e.type===u.ScaleType.POW){return e.exponent}return undefined}t.exponent=S;function E(e,t,n){if(h.contains([u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.LOG,u.ScaleType.TIME,u.ScaleType.UTC,u.ScaleType.QUANTIZE],e.type)){if(e.nice!==undefined){return e.nice}if(h.contains([u.ScaleType.TIME,u.ScaleType.UTC],e.type)){return d.smallestUnit(n.timeUnit)}return h.contains([i.X,i.Y],t)}return undefined}t.nice=E;function A(e,t){if(e.type===u.ScaleType.ORDINAL&&h.contains([i.X,i.Y],t)){return e.padding}return undefined}t.padding=A;function T(e,t,n,r){if(e.type===u.ScaleType.ORDINAL&&h.contains([i.X,i.Y],t)){return true}return undefined}t.points=T;function O(e,t){if(h.contains([i.X,i.Y,i.ROW,i.COLUMN,i.SIZE],t)&&e.round!==undefined){return e.round}return undefined}t.round=O;function N(e,t,n){if(!h.contains([u.ScaleType.TIME,u.ScaleType.UTC,u.ScaleType.ORDINAL],e.type)){if(e.zero!==undefined){return e.zero}return!n.bin&&h.contains([i.X,i.Y],t)}return undefined}t.zero=N},TXaq:function(e,t,n){var r=n("Hqva"),i=r.Tuple,a=n("J731"),o=n("4JPs");function s(e){o.prototype.init.call(this,e);o.addParameters(this,{field:{type:"value"},expr:{type:"expr"}});return this.mutates(true)}var u=s.prototype=Object.create(o.prototype);u.constructor=s;u.transform=function(e){a.debug(e,["formulating"]);var t=this.param("field"),n=this.param("expr"),r=false;function o(e){i.set(e,t,n(e));r=true}e.add.forEach(o);if(this.reevaluate(e)){e.mod.forEach(o)}if(r)e.fields[t]=1;return e};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Formula transform",description:"Extends data elements with new values according to a calculation formula.",type:"object",properties:{type:{enum:["formula"]},field:{type:"string",description:"The property name in which to store the computed formula value."},expr:{type:"string",description:"A string containing an expression (in JavaScript syntax) for the formula."}},required:["type","field","expr"]}},TrdW:function(e,t,n){var r=n("zicW"),i=r.template,a=n("jNWb"),o=["datum","parent","event","signals"];var s=a.compiler(o,{idWhiteList:o,fieldVar:o[0],globalVar:function(e){return"this.sig["+r.str(e)+"]._value"},functions:function(e){var t=a.functions(e);t.eventItem="event.vg.getItem";t.eventGroup="event.vg.getGroup";t.eventX="event.vg.getX";t.eventY="event.vg.getY";t.open=u(e);t.scale=f(e,false);t.iscale=f(e,true);t.inrange="this.defs.inrange";t.indata=d(e);t.format="this.defs.format";t.timeFormat="this.defs.timeFormat";t.utcFormat="this.defs.utcFormat";return t},functionDefs:function(){return{scale:c,inrange:h,indata:p,format:g,timeFormat:m,utcFormat:v,open:l}}});function u(e){return function(t){t=t.map(e);var n=t.length;if(n<1||n>2){throw Error("open takes exactly 1 or 2 arguments.")}return"this.defs.open(this.model, "+t[0]+(n>1?","+t[1]:"")+")"}}function l(e,t,n){if(typeof window!=="undefined"&&window&&window.open){var i=r.extend({type:"open",url:t,name:n},e.config().load),a=r.load.sanitizeUrl(i);if(a){window.open(a,n)}else{throw Error("Invalid URL: "+i.url)}}else{throw Error("Open function can only be invoked in a browser.")}}function f(e,t){return function(n){n=n.map(e);var r=n.length;if(r<2||r>3){throw Error("scale takes exactly 2 or 3 arguments.")}return"this.defs.scale(this.model, "+t+", "+n[0]+","+n[1]+(r>2?","+n[2]:"")+")"}}function c(e,t,n,r,i){if(!i||!i.scale){i=i&&i.mark?i.mark.group:e.scene().items[0]}if(e.group(i._id)!==i){throw Error('Scope for scale "'+n+'" is not a valid group item.')}var a=i.scale(n);return!a?r:t?a.invert(r):a(r)}function h(e,t,n,r){var i=t,a=n;if(t>n){i=n;a=t}return r?i<e&&a>e:i<=e&&a>=e}function d(e){return function(t,n,r,i){var a;if(t.length!==3){throw Error("indata takes 3 arguments.")}if(t[0].type!=="Literal"){throw Error("Data source name must be a literal for indata.")}a=t[0].value;i[a]=1;if(t[2].type==="Literal"){d.model.requestIndex(a,t[2].value)}t=t.map(e);return"this.defs.indata(this.model,"+t[0]+","+t[1]+","+t[2]+")"}}function p(e,t,n,r){var i=e.data(t),a=i.getIndex(r);return a[n]>0}function g(e,t){return i.format(e,"number")(t)}function m(e,t){return i.format(e,"time")(t)}function v(e,t){return i.format(e,"utc")(t)}function y(e){return function(t){d.model=e;var n=s(t);n.model=e;n.sig=e?e._signals:{};return n}}y.scale=c;y.codegen=s.codegen;e.exports=y},UaGl:function(e,t,n){e.exports={axes:n("W+IH"),background:n("fxxq"),data:n("OTIj"),events:n("XSKZ"),expr:n("TrdW"),legends:n("v4pi"),mark:n("SbOu"),marks:n("92+E"),modify:n("r7he"),padding:n("O3lN"),predicates:n("yaQe"),properties:n("h36N"),signals:n("S/OH"),spec:n("ybCx"),streams:n("6gf1"),transforms:n("DUWk")}},Uikm:function(e,t,n){var r=n("4JPs"),i=n("3Y21");function a(e){r.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var e=n("DUWk"),t=this._transform;return t._pipeline.map(function(n){return e(t._graph,n)})}}});this._pipeline=[];return i.call(this,e)}var o=a.prototype=Object.create(i.prototype);o.constructor=a;o.aggr=function(){return i.prototype.aggr.call(this).facet(this)};o.transform=function(e,t){var n=i.prototype.transform.call(this,e,t);if(e.add.length){this.listeners()[0].rerank()}return n};e.exports=a;var s=n("zicW");a.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Facet transform",description:'A special aggregate transform that organizes a data set into groups or "facets".',type:"object",properties:s.extend({},i.schema.properties,{type:{enum:["facet"]},transform:{$ref:"#/defs/transform"}}),additionalProperties:false,required:["type"]}},"Utn/":function(e,t,n){"use strict";var r=n("ZAUf");var i=n("j8cM");t.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]};t.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:r.toMap(["row","column","x","y","size","color","detail"]),line:r.toMap(["row","column","x","y","color","detail"]),area:r.toMap(["row","column","x","y","color","detail"]),tick:r.toMap(["row","column","x","y","color","detail"]),circle:r.toMap(["row","column","x","y","color","size","detail"]),square:r.toMap(["row","column","x","y","color","size","detail"]),point:r.toMap(["row","column","x","y","color","size","detail","shape"]),text:r.toMap(["row","column","size","color","text"])};function a(e,n,r){if(n===void 0){n=t.DEFAULT_REQUIRED_CHANNEL_MAP}if(r===void 0){r=t.DEFAULT_SUPPORTED_CHANNEL_TYPE}var a=e.mark;var o=e.encoding;var s=n[a];var u=r[a];for(var l in s){if(!(s[l]in o)){return'Missing encoding channel "'+s[l]+'" for mark "'+a+'"'}}for(var f in o){if(!u[f]){return'Encoding channel "'+f+'" is not supported by mark type "'+a+'"'}}if(a===i.BAR&&!o.x&&!o.y){return"Missing both x and y for bar"}return null}t.getEncodingMappingError=a},V22v:function(e,t,n){"use strict";var r=n("ZAUf");var i=n("jMte");var a=n("hBex");var o=n("t3C9");var s=n("1PdY");var u=n("nOes");var l=n("pAWG");var f=n("yixx");var c=n("QNWf");var h=n("kowr");var d=n("736r");var p=n("k66X");var g=n("vY52");function m(e){return{formatParse:a.formatParse.parseUnit(e),nullFilter:o.nullFilter.parseUnit(e),filter:s.filter.parseUnit(e),nonPositiveFilter:f.nonPositiveFilter.parseUnit(e),source:i.source.parseUnit(e),bin:u.bin.parseUnit(e),calculate:l.formula.parseUnit(e),timeUnit:d.timeUnit.parseUnit(e),timeUnitDomain:p.timeUnitDomain.parseUnit(e),summary:c.summary.parseUnit(e),stackScale:h.stackScale.parseUnit(e),colorRank:g.colorRank.parseUnit(e)}}t.parseUnitData=m;function v(e){return{formatParse:a.formatParse.parseFacet(e),nullFilter:o.nullFilter.parseFacet(e),filter:s.filter.parseFacet(e),nonPositiveFilter:f.nonPositiveFilter.parseFacet(e),source:i.source.parseFacet(e),bin:u.bin.parseFacet(e),calculate:l.formula.parseFacet(e),timeUnit:d.timeUnit.parseFacet(e),timeUnitDomain:p.timeUnitDomain.parseFacet(e),summary:c.summary.parseFacet(e),stackScale:h.stackScale.parseFacet(e),colorRank:g.colorRank.parseFacet(e)}}t.parseFacetData=v;function y(e){return{filter:s.filter.parseLayer(e),formatParse:a.formatParse.parseLayer(e),nullFilter:o.nullFilter.parseLayer(e),nonPositiveFilter:f.nonPositiveFilter.parseLayer(e),source:i.source.parseLayer(e),bin:u.bin.parseLayer(e),calculate:l.formula.parseLayer(e),timeUnit:d.timeUnit.parseLayer(e),timeUnitDomain:p.timeUnitDomain.parseLayer(e),summary:c.summary.parseLayer(e),stackScale:h.stackScale.parseLayer(e),colorRank:g.colorRank.parseLayer(e)}}t.parseLayerData=y;function _(e,t){var n=e.component.data;var a=i.source.assemble(e,n);if(a){t.push(a)}c.summary.assemble(n,e).forEach(function(e){t.push(e)});if(t.length>0){var o=t[t.length-1];var s=g.colorRank.assemble(n);if(s.length>0){o.transform=(o.transform||[]).concat(s)}var u=f.nonPositiveFilter.assemble(n);if(u.length>0){o.transform=(o.transform||[]).concat(u)}}else{if(r.keys(n.colorRank).length>0){throw new Error("Invalid colorRank not merged")}else if(r.keys(n.nonPositiveFilter).length>0){throw new Error("Invalid nonPositiveFilter not merged")}}var l=h.stackScale.assemble(n);if(l){t.push(l)}p.timeUnitDomain.assemble(n).forEach(function(e){t.push(e)});return t}t.assembleData=_},VeBo:function(e,t){function n(){this._active=null;this._handlers={}}var r=n.prototype;r.initialize=function(e,t,n){this._el=e;this._obj=n||null;return this.padding(t)};r.element=function(){return this._el};r.padding=function(e){this._padding=e||{top:0,left:0,bottom:0,right:0};return this};r.scene=function(e){if(!arguments.length)return this._scene;this._scene=e;return this};r.on=function(){};r.off=function(){};r.handlers=function(){var e=this._handlers,t=[],n;for(n in e){t.push.apply(t,e[n])}return t};r.eventName=function(e){var t=e.indexOf(".");return t<0?e:e.slice(0,t)};e.exports=n},Vp7n:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("LHV8").Item,o=n("Hqva"),s=o.Node,u=o.Dependencies,l=o.Tuple,f=o.ChangeSet,c={},h=n("XVii"),d=n("rnWk"),p=n("OTIj");function g(){return arguments.length?this.init.apply(this,arguments):this}var m=g.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"};var v=1,y=2;var _=g.prototype=new s;_.init=function(e,t,n,i,a,o){s.prototype.init.call(this,e).router(true).collector(true);this._def=t;this._mark=n;this._from=(t.from?t.from.data:null)||o;this._ds=r.isString(this._from)?e.data(this._from):null;this._map={};this._status=null;n.def=t;n.marktype=t.type;n.interactive=t.interactive!==false;n.items=[];if(r.isValid(t.name))n.name=t.name;this._parent=i;this._parent_id=a;if(t.from&&(t.from.mark||t.from.transform||t.from.modify)){x.call(this)}this._isSuper=this._def.type!=="group";this._encoder=new h(this._graph,this._mark,this);this._bounder=new d(this._graph,this._mark);this._output=null;if(this._ds){this._encoder.dependency(u.DATA,this._from)}this.dependency(u.DATA,this._encoder.dependency(u.DATA));this.dependency(u.SCALES,this._encoder.dependency(u.SCALES));this.dependency(u.SIGNALS,this._encoder.dependency(u.SIGNALS));return this};function x(){var e=this._def.from,t=e.mark,n,r,i,a,o,u,l;if(t){a=this.sibling(t);n=a._isSuper?a:a._bounder;r=["vg",this._parent_id,t,n.listeners(true).length].join("_");i={name:r,transform:e.transform,modify:e.modify}}else{n=this._graph.data(this._from);if(!n)throw Error('Data source "'+this._from+'" is not defined.');r=["vg",this._from,this._def.type,n.listeners(true).length].join("_");i={name:r,source:this._from,transform:e.transform,modify:e.modify}}this._from=r;this._ds=p.datasource(this._graph,i);if(t){l=new s(this._graph).addListener(this._ds.listener());l.evaluate=function(e){var t=f.create(e),n=a._output;t.add=n.add;t.mod=n.mod;t.rem=n.rem;return t};n.addListener(l)}else{o=this._ds.source().last();u=f.create(o);u.add=o.add;u.mod=o.mod;u.rem=o.rem;u.stamp=null;this._graph.propagate(u,this._ds.listener(),o.stamp)}}_.ds=function(){return this._ds};_.parent=function(){return this._parent};_.encoder=function(){return this._encoder};_.pipeline=function(){return[this]};_.connect=function(){var e=this;this._graph.connect(this.pipeline());this._encoder._scales.forEach(function(t){if(!(t=e._parent.scale(t)))return;t.addListener(e)});if(this._parent){if(this._isSuper)this.addListener(this._parent._collector);else this._bounder.addListener(this._parent._collector)}return this._status=v,this};_.disconnect=function(){var e=this;if(!this._listeners.length)return this;function t(t){for(var n=0,r=t.length,i;n<r;++n){if(!(i=e._parent.scale(t[n])))continue;i.removeListener(e)}}s.prototype.disconnect.call(this);this._graph.disconnect(this.pipeline());t(this._encoder._scales);t(r.keys(this._mark._scaleRefs));return this._status=y,this};_.sibling=function(e){return this._parent.child(e,this._parent_id)};_.evaluate=function(e){i.debug(e,["building",this._from||this._def.from,this._def.type]);var t=this,n=this._mark.def,a=n.properties||{},o=a.update||{},s=f.create(e),l,h,d,p;if(this._ds){d=s.data[p=this._ds.name()];s.data[p]=null;l=this._encoder.reevaluate(s);s.data[p]=d;h=this._ds.last();if(!h)throw Error("Builder evaluated before backing DataSource.");if(h.stamp>this._stamp){M.call(this,h,s,this._ds.values(),true,l)}else if(l){s.mod=this._mark.items.slice()}}else{d=r.isFunction(this._def.from)?this._def.from():[c];M.call(this,e,s,d)}this._output=s=this._graph.evaluate(s,this._encoder);if(o.nested&&o.nested.length&&this._status===v){r.keys(this._mark._scaleRefs).forEach(function(e){var n=t._parent.scale(e);if(!n)return;n.addListener(t);t.dependency(u.SCALES,e);t._encoder.dependency(u.SCALES,e)})}if(this._isSuper){s.mod=s.mod.filter(function(e){return e._dirty});s=this._graph.evaluate(s,this._bounder)}return s};function b(){var e=l.ingest(new a(this._mark));if(this._def.width)l.set(e,"width",this._def.width);if(this._def.height)l.set(e,"height",this._def.height);return e}function M(e,t,n,r,i){var a=k(this._def.key||(r?"_id":null)),o=this._mark.items||[],s=r?e.rem:o,u=l.idMap(!r||i?n:e.mod),f=[],c,h,d,p,g,v,y;for(c=0,d=s.length;c<d;++c){p=s[c]===o[c]?o[c]:a?this._map[a(s[c])]:s[c];p.status=m.EXIT}for(c=0,d=n.length;c<d;++c){g=n[c];p=a?this._map[h=a(g)]:o[c];v=p?false:(p=b.call(this),true);p.status=v?m.ENTER:m.UPDATE;y=!v&&p.datum!==g;p.datum=g;if(a){l.set(p,"key",h);this._map[h]=p}if(v){t.add.push(p)}else if(y||u[g._id]){t.mod.push(p)}f.push(p)}for(c=0,d=s.length;c<d;++c){p=s[c]===o[c]?o[c]:a?this._map[h=a(s[c])]:s[c];if(p.status===m.EXIT){p._dirty=true;e.dirty.push(p);f.push(p);t.rem.push(p);if(a)this._map[h]=null}}return this._mark.items=f,t}function k(e){if(e==null)return null;var t=r.array(e).map(r.accessor);return function(e){for(var n="",r=0,i=t.length;r<i;++r){if(r>0)n+="|";n+=String(t[r](e))}return n}}e.exports=g},"W+IH":function(e,t,n){var r=n("zicW"),i=n("lKLM"),a=n("YvtE");var o={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};function s(e,t,n,r){var a=l(e);(t||[]).forEach(function(t,o){n[o]=n[o]||i(e,a[t.type]);u(a[t.type],t,o,n[o],r)})}function u(e,t,n,i,s){var u;if(t.scale!==undefined){i.scale(u=s.scale(t.scale))}var l=e.grid;if(r.isObject(l)){e.grid=l[u.type]!==undefined?l[u.type]:l.default}i.orient(a(t,e,"orient",o[t.type]));i.offset(a(t,e,"offset",0));i.layer(a(t,e,"layer","front"));i.grid(a(t,e,"grid",false));i.title(t.title||null);i.titleOffset(a(t,e,"titleOffset"));i.tickValues(t.values||null);i.tickFormat(t.format||null);i.tickFormatType(t.formatType||null);i.tickSubdivide(t.subdivide||0);i.tickPadding(a(t,e,"tickPadding",e.padding));var f=a(t,e,"tickSize"),c=[f,f,f];c[0]=a(t,e,"tickSizeMajor",c[0]);c[1]=a(t,e,"tickSizeMinor",c[1]);c[2]=a(t,e,"tickSizeEnd",c[2]);if(c.length){i.tickSize.apply(i,c)}i.tickCount(a(t,e,"ticks"));var h=t.properties;if(h&&h.ticks){i.majorTickProperties(h.majorTicks?r.extend({},h.ticks,h.majorTicks):h.ticks);i.minorTickProperties(h.minorTicks?r.extend({},h.ticks,h.minorTicks):h.ticks)}else{i.majorTickProperties(h&&h.majorTicks||{});i.minorTickProperties(h&&h.minorTicks||{})}i.tickLabelProperties(h&&h.labels||{});i.titleProperties(h&&h.title||{});i.gridLineProperties(h&&h.grid||{});i.domainProperties(h&&h.axis||{})}function l(e){var t=e.config(),n=t.axis;return{x:r.extend(r.duplicate(n),t.axis_x),y:r.extend(r.duplicate(n),t.axis_y)}}e.exports=s;s.schema={defs:{axis:{type:"object",properties:{type:{enum:["x","y"]},scale:{type:"string"},orient:{enum:["top","bottom","left","right"]},title:{type:"string"},titleOffset:{type:"number"},format:{type:"string"},formatType:{enum:["time","utc","string","number"]},ticks:{type:"number"},values:{type:"array",items:{type:["string","number"]}},subdivide:{type:"number"},tickPadding:{type:"number"},tickSize:{type:"number"},tickSizeMajor:{type:"number"},tickSizeMinor:{type:"number"},tickSizeEnd:{type:"number"},offset:{oneOf:[{type:"number"},{type:"object",properties:{scale:{type:"string"},value:{type:["string","number"]}},required:["scale","value"],additionalProperties:false}]},layer:{enum:["front","back"],default:"front"},grid:{type:"boolean"},properties:{type:"object",properties:{ticks:{$ref:"#/defs/propset"},majorTicks:{$ref:"#/defs/propset"},minorTicks:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},title:{$ref:"#/defs/propset"},grid:{$ref:"#/defs/propset"},axis:{$ref:"#/defs/propset"}},additionalProperties:false}},additionalProperties:false,required:["type","scale"]}}}},WCPv:function(e,t,n){e.exports={canvas:n("oCE4"),svg:n("95dH")}},WFOa:function(e,t,n){function r(e,t){e=e||1;t=t||1;var r;if(typeof document!=="undefined"&&document.createElement){r=document.createElement("canvas");r.width=e;r.height=t}else{var i=n(7);if(!i.prototype)return null;r=new i(e,t)}return o(r)}function i(e,t,n,r,i){var o=this._ctx=e.getContext("2d"),s=1;e.width=t+r.left+r.right;e.height=n+r.top+r.bottom;if(i&&typeof HTMLElement!=="undefined"&&e instanceof HTMLElement){o.pixelratio=s=a(e)||1}o.setTransform(s,0,0,s,s*r.left,s*r.top);return e}function a(e){var t=e.getContext("2d");var n=window&&window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;if(n!==r){var a=e.width,o=e.height;e.width=a*i;e.height=o*i;e.style.width=a+"px";e.style.height=o+"px"}return i}function o(e){var t=e.getContext("2d");if(t.vgLineDash)return;var n=function(){},r=[];if(t.setLineDash){t.vgLineDash=function(e){this.setLineDash(e||r)};t.vgLineDashOffset=function(e){this.lineDashOffset=e}}else if(t.webkitLineDash!==undefined){t.vgLineDash=function(e){this.webkitLineDash=e||r};t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}}else if(t.mozDash!==undefined){t.vgLineDash=function(e){this.mozDash=e};t.vgLineDashOffset=n}else{t.vgLineDash=n;t.vgLineDashOffset=n}return e}e.exports={instance:r,resize:i,lineDash:o}},WJ2w:function(e,t,n){"use strict";(function(e){e[e["QUANTITATIVE"]="quantitative"]="QUANTITATIVE";e[e["ORDINAL"]="ordinal"]="ORDINAL";e[e["TEMPORAL"]="temporal"]="TEMPORAL";e[e["NOMINAL"]="nominal"]="NOMINAL"})(t.Type||(t.Type={}));var r=t.Type;t.QUANTITATIVE=r.QUANTITATIVE;t.ORDINAL=r.ORDINAL;t.TEMPORAL=r.TEMPORAL;t.NOMINAL=r.NOMINAL;t.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"};t.TYPE_FROM_SHORT_TYPE={Q:t.QUANTITATIVE,T:t.TEMPORAL,O:t.ORDINAL,N:t.NOMINAL};function i(e){var n=e;return t.TYPE_FROM_SHORT_TYPE[n.toUpperCase()]||n.toLowerCase()}t.getFullName=i},Wd6V:function(e,t,n){var r=n("lnKO"),i=n("BONk").text,a=n("3Scv"),o=n("gWW/"),s=new r;function u(e,t,n){if(!t.items||!t.items.length)return;var r=t.items,i,s,u,l,f,c,h;for(var d=0,p=r.length;d<p;++d){i=r[d];if(n&&!n.intersects(i.bounds))continue;h=a.value(i.text);if(!h)continue;s=i.opacity==null?1:i.opacity;if(s===0)continue;e.font=a.font(i);e.textAlign=i.align||"left";u=i.x||0;l=i.y||0;if(f=i.radius){c=(i.theta||0)-Math.PI/2;u+=f*Math.cos(c);l+=f*Math.sin(c)}if(i.angle){e.save();e.translate(u,l);e.rotate(i.angle*Math.PI/180);u=l=0}u+=i.dx||0;l+=(i.dy||0)+a.offset(i);if(i.fill&&o.fill(e,i,s)){e.fillText(h,u,l)}if(i.stroke&&o.stroke(e,i,s)){e.strokeText(h,u,l)}if(i.angle)e.restore()}}function l(e,t,n,r,a,o){if(t.fontSize<=0)return false;if(!t.angle)return true;var u=i(t,s,true),l=-t.angle*Math.PI/180,f=Math.cos(l),c=Math.sin(l),h=t.x,d=t.y,p=f*a-c*o+(h-h*f+d*c),g=c*a+f*o+(d-h*c-d*f);return u.contains(p,g)}e.exports={draw:u,pick:o.pick(l)}},Wwtv:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)};var i=n("ZAUf");var a=n("Py5Z");var o=n("V22v");var s=n("YBv9");var u=n("jGoH");var l=n("MtYt");var f=n("7YRp");var c=function(e){r(t,e);function t(t,n,r){var i=this;e.call(this,t,n,r);this._config=this._initConfig(t.config,n);this._children=t.layers.map(function(e,t){return l.buildModel(e,i,i.name("layer_"+t))})}t.prototype._initConfig=function(e,t){return i.mergeDeep(i.duplicate(a.defaultConfig),e,t?t.config():{})};t.prototype.has=function(e){return false};t.prototype.children=function(){return this._children};t.prototype.isOrdinalScale=function(e){return this._children[0].isOrdinalScale(e)};t.prototype.dataTable=function(){return this._children[0].dataTable()};t.prototype.fieldDef=function(e){return null};t.prototype.stack=function(){return null};t.prototype.parseData=function(){this._children.forEach(function(e){e.parseData()});this.component.data=o.parseLayerData(this)};t.prototype.parseSelectionData=function(){};t.prototype.parseLayoutData=function(){this._children.forEach(function(e,t){e.parseLayoutData()});this.component.layout=s.parseLayerLayout(this)};t.prototype.parseScale=function(){var e=this;var t=this.component.scale={};this._children.forEach(function(n){n.parseScale();if(true){i.keys(n.component.scale).forEach(function(r){var a=n.component.scale[r];if(!a){return}var o=t[r];if(o&&o.main){var s=o.main.domain;var u=a.main.domain;if(i.isArray(s)){if(i.isArray(a.main.domain)){o.main.domain=s.concat(u)}else{e.addWarning("custom domain scale cannot be unioned with default field-based domain")}}else{var l=f.isUnionedDomain(s)?s.fields:[s];if(i.isArray(u)){e.addWarning("custom domain scale cannot be unioned with default field-based domain")}var c=f.isDataRefDomain(u)?l.concat([u]):f.isUnionedDomain(u)?l.concat(u.fields):l;c=i.unique(c,i.hash);if(c.length>1){o.main.domain={fields:c}}else{o.main.domain=c[0]}}o.colorLegend=o.colorLegend?o.colorLegend:a.colorLegend;o.binColorLegend=o.binColorLegend?o.binColorLegend:a.binColorLegend}else{t[r]=a}i.vals(a).forEach(function(t){var r=t.name.substr(n.name("").length);var i=e.scaleName(r);n.renameScale(t.name,i);t.name=i});delete a[r]})}})};t.prototype.parseMark=function(){this._children.forEach(function(e){e.parseMark()})};t.prototype.parseAxis=function(){var e=this.component.axis={};this._children.forEach(function(t){t.parseAxis();if(true){i.keys(t.component.axis).forEach(function(n){if(!e[n]){e[n]=t.component.axis[n]}})}})};t.prototype.parseAxisGroup=function(){return null};t.prototype.parseGridGroup=function(){return null};t.prototype.parseLegend=function(){var e=this.component.legend={};this._children.forEach(function(t){t.parseLegend();if(true){i.keys(t.component.legend).forEach(function(n){if(!e[n]){e[n]=t.component.legend[n]}})}})};t.prototype.assembleParentGroupProperties=function(){return null};t.prototype.assembleData=function(e){o.assembleData(this,e);this._children.forEach(function(t){t.assembleData(e)});return e};t.prototype.assembleLayout=function(e){this._children.forEach(function(t){t.assembleLayout(e)});return s.assembleLayout(this,e)};t.prototype.assembleMarks=function(){return i.flatten(this._children.map(function(e){return e.assembleMarks()}))};t.prototype.channels=function(){return[]};t.prototype.mapping=function(){return null};t.prototype.isLayer=function(){return true};t.prototype.compatibleSource=function(e){var t=this.data();var n=e.component.data;var r=!n.source||t&&t.url===n.source.url;return r};return t}(u.Model);t.LayerModel=c},XL1Y:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("MtYt");var o;(function(e){function t(){return"rect"}e.markType=t;function n(e){var t={};var n=e.config();t.xc=o(e.encoding().x,e.scaleName(r.X),n);t.yc=s(e.encoding().y,e.scaleName(r.Y),n);if(n.mark.orient==="horizontal"){t.width=u(e.encoding().size,e.scaleName(r.SIZE),n,(e.scale(r.X)||{}).bandSize);t.height={value:n.mark.tickThickness}}else{t.width={value:n.mark.tickThickness};t.height=u(e.encoding().size,e.scaleName(r.SIZE),n,(e.scale(r.Y)||{}).bandSize)}a.applyColorAndOpacity(t,e);return t}e.properties=n;function o(e,t,n){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}else if(e.value){return{value:e.value}}}return{value:n.scale.bandSize/2}}function s(e,t,n){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}else if(e.value){return{value:e.value}}}return{value:n.scale.bandSize/2}}function u(e,t,n,r){if(e){if(e.field){return{scale:t,field:e.field}}else if(e.value!==undefined){return{value:e.value}}}if(n.mark.tickSize){return{value:n.mark.tickSize}}var i=r!==undefined?r:n.scale.bandSize;return{value:i/1.5}}function l(e){return undefined}e.labels=l})(o=t.tick||(t.tick={}))},XSKZ:function(e,t){e.exports=function(){"use strict";function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype;e.prototype=new n}function t(e,n,r,i){this.message=e;this.expected=n;this.found=r;this.location=i;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,t)}}e(t,Error);function n(e){var n=arguments.length>1?arguments[1]:{},r=this,i={},a={start:ct},o=ct,s=",",u={type:"literal",value:",",description:'","'},l=function(e,t){return[e].concat(t)},f=function(e){return[e]},c="[",h={type:"literal",value:"[",description:'"["'},d="]",p={type:"literal",value:"]",description:'"]"'},g=">",m={type:"literal",value:">",description:'">"'},v=function(e,t,n){return{start:e,middle:n,end:t,str:"["+e.str+", "+t.str+"] > "+n.str}},y=function(e,t){e.filters=t;e.str+=t.map(function(e){return"["+e+"]"}).join("");return e},_=function(e){return e},x="(",b={type:"literal",value:"(",description:'"("'},M=")",k={type:"literal",value:")",description:'")"'},w=function(e){return{stream:e,str:"("+e.map(function(e){return e.str}).join(", ")+")"}},S="@",E={type:"literal",value:"@",description:'"@"'},A=":",T={type:"literal",value:":",description:'":"'},O=function(e,t){return{event:t,name:e,str:"@"+e+":"+t}},N=function(e,t){return{event:t,mark:e,str:e+":"+t}},L=function(e,t){return{event:t,target:e,str:e+":"+t}},C=function(e){return{event:e,str:e}},R=function(e){return{signal:e,str:e}},I="rect",D={type:"literal",value:"rect",description:'"rect"'},U="symbol",P={type:"literal",value:"symbol",description:'"symbol"'},z="path",F={type:"literal",value:"path",description:'"path"'},j="arc",q={type:"literal",value:"arc",description:'"arc"'},Y="area",$={type:"literal",value:"area",description:'"area"'},H="line",W={type:"literal",value:"line",description:'"line"'},V="rule",X={type:"literal",value:"rule",description:'"rule"'},G="image",Z={type:"literal",value:"image",description:'"image"'},B="text",J={type:"literal",value:"text",description:'"text"'},Q="group",K={type:"literal",value:"group",description:'"group"'},ee="mousedown",te={type:"literal",value:"mousedown",description:'"mousedown"'},ne="mouseup",re={type:"literal",value:"mouseup",description:'"mouseup"'},ie="click",ae={type:"literal",value:"click",description:'"click"'},oe="dblclick",se={type:"literal",value:"dblclick",description:'"dblclick"'},ue="wheel",le={type:"literal",value:"wheel",description:'"wheel"'},fe="keydown",ce={type:"literal",value:"keydown",description:'"keydown"'},he="keypress",de={type:"literal",value:"keypress",description:'"keypress"'},pe="keyup",ge={type:"literal",value:"keyup",description:'"keyup"'},me="mousewheel",ve={type:"literal",value:"mousewheel",description:'"mousewheel"'},ye="mousemove",_e={type:"literal",value:"mousemove",description:'"mousemove"'},xe="mouseout",be={type:"literal",value:"mouseout",description:'"mouseout"'},Me="mouseover",ke={type:"literal",value:"mouseover",description:'"mouseover"'},we="mouseenter",Se={type:"literal",value:"mouseenter",description:'"mouseenter"'},Ee="touchstart",Ae={type:"literal",value:"touchstart",description:'"touchstart"'},Te="touchmove",Oe={type:"literal",value:"touchmove",description:'"touchmove"'},Ne="touchend",Le={type:"literal",value:"touchend",description:'"touchend"'},Ce="dragenter",Re={type:"literal",value:"dragenter",description:'"dragenter"'},Ie="dragover",De={type:"literal",value:"dragover",description:'"dragover"'},Ue="dragleave",Pe={type:"literal",value:"dragleave",description:'"dragleave"'},ze=function(e){return e},Fe=/^[a-zA-Z0-9_\-]/,je={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},qe=function(e){return e.join("")},Ye=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,$e={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},He=function(e){return e.join("")},We=/^['"a-zA-Z0-9_().><=! \t-&|~]/,Ve={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},Xe=function(e){return e.join("")},Ge=/^[ \t\r\n]/,Ze={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},Be=0,Je=0,Qe=[{line:1,column:1,seenCR:false}],Ke=0,et=[],tt=0,nt;if("startRule"in n){if(!(n.startRule in a)){throw new Error("Can't start parsing from rule \""+n.startRule+'".')}o=a[n.startRule]}function rt(){return e.substring(Je,Be)}function it(){return ut(Je,Be)}function at(t){throw ft(null,[{type:"other",description:t}],e.substring(Je,Be),ut(Je,Be))}function ot(t){throw ft(t,null,e.substring(Je,Be),ut(Je,Be))}function st(t){var n=Qe[t],r,i;if(n){return n}else{r=t-1;while(!Qe[r]){r--}n=Qe[r];n={line:n.line,column:n.column,seenCR:n.seenCR};while(r<t){i=e.charAt(r);if(i==="\n"){if(!n.seenCR){n.line++}n.column=1;n.seenCR=false}else if(i==="\r"||i==="\u2028"||i==="\u2029"){n.line++;n.column=1;n.seenCR=true}else{n.column++;n.seenCR=false}r++}Qe[t]=n;return n}}function ut(e,t){var n=st(e),r=st(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function lt(e){if(Be<Ke){return}if(Be>Ke){Ke=Be;et=[]}et.push(e)}function ft(e,n,r,i){function a(e){var t=1;e.sort(function(e,t){if(e.description<t.description){return-1}else if(e.description>t.description){return 1}else{return 0}});while(t<e.length){if(e[t-1]===e[t]){e.splice(t,1)}else{t++}}}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,a,o;for(o=0;o<e.length;o++){r[o]=e[o].description}i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0];a=t?'"'+n(t)+'"':"end of input";return"Expected "+i+" but "+a+" found."}if(n!==null){a(n)}return new t(e!==null?e:o(n,r),n,r,i)}function ct(){var e;e=ht();return e}function ht(){var t,n,r,a,o,c;t=Be;n=dt();if(n!==i){r=Mt();if(r!==i){if(e.charCodeAt(Be)===44){a=s;Be++}else{a=i;if(tt===0){lt(u)}}if(a!==i){o=Mt();if(o!==i){c=ht();if(c!==i){Je=t;n=l(n,c);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}if(t===i){t=Be;n=dt();if(n!==i){Je=t;n=f(n)}t=n}return t}function dt(){var t,n,r,a,o,l,f,y,_,x,b,M,k,w;t=Be;if(e.charCodeAt(Be)===91){n=c;Be++}else{n=i;if(tt===0){lt(h)}}if(n!==i){r=Mt();if(r!==i){a=pt();if(a!==i){o=Mt();if(o!==i){if(e.charCodeAt(Be)===44){l=s;Be++}else{l=i;if(tt===0){lt(u)}}if(l!==i){f=Mt();if(f!==i){y=pt();if(y!==i){_=Mt();if(_!==i){if(e.charCodeAt(Be)===93){x=d;Be++}else{x=i;if(tt===0){lt(p)}}if(x!==i){b=Mt();if(b!==i){if(e.charCodeAt(Be)===62){M=g;Be++}else{M=i;if(tt===0){lt(m)}}if(M!==i){k=Mt();if(k!==i){w=dt();if(w!==i){Je=t;n=v(a,y,w);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}if(t===i){t=pt()}return t}function pt(){var e,t,n,r;e=Be;t=gt();if(t!==i){n=[];r=yt();if(r!==i){while(r!==i){n.push(r);r=yt()}}else{n=i}if(n!==i){Je=e;t=y(t,n);e=t}else{Be=e;e=i}}else{Be=e;e=i}if(e===i){e=Be;t=gt();if(t!==i){Je=e;t=_(t)}e=t}return e}function gt(){var t,n,r,a,o;t=Be;if(e.charCodeAt(Be)===40){n=x;Be++}else{n=i;if(tt===0){lt(b)}}if(n!==i){r=ht();if(r!==i){if(e.charCodeAt(Be)===41){a=M;Be++}else{a=i;if(tt===0){lt(k)}}if(a!==i){Je=t;n=w(r);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}if(t===i){t=Be;if(e.charCodeAt(Be)===64){n=S;Be++}else{n=i;if(tt===0){lt(E)}}if(n!==i){r=_t();if(r!==i){if(e.charCodeAt(Be)===58){a=A;Be++}else{a=i;if(tt===0){lt(T)}}if(a!==i){o=vt();if(o!==i){Je=t;n=O(r,o);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}if(t===i){t=Be;n=mt();if(n!==i){if(e.charCodeAt(Be)===58){r=A;Be++}else{r=i;if(tt===0){lt(T)}}if(r!==i){a=vt();if(a!==i){Je=t;n=N(n,a);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}if(t===i){t=Be;n=xt();if(n!==i){if(e.charCodeAt(Be)===58){r=A;Be++}else{r=i;if(tt===0){lt(T)}}if(r!==i){a=vt();if(a!==i){Je=t;n=L(n,a);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}if(t===i){t=Be;n=vt();if(n!==i){Je=t;n=C(n)}t=n;if(t===i){t=Be;n=_t();if(n!==i){Je=t;n=R(n)}t=n}}}}}return t}function mt(){var t;if(e.substr(Be,4)===I){t=I;Be+=4}else{t=i;if(tt===0){lt(D)}}if(t===i){if(e.substr(Be,6)===U){t=U;Be+=6}else{t=i;if(tt===0){lt(P)}}if(t===i){if(e.substr(Be,4)===z){t=z;Be+=4}else{t=i;if(tt===0){lt(F)}}if(t===i){if(e.substr(Be,3)===j){t=j;Be+=3}else{t=i;if(tt===0){lt(q)}}if(t===i){if(e.substr(Be,4)===Y){t=Y;Be+=4}else{t=i;if(tt===0){lt($)}}if(t===i){if(e.substr(Be,4)===H){t=H;Be+=4}else{t=i;if(tt===0){lt(W)}}if(t===i){if(e.substr(Be,4)===V){t=V;Be+=4}else{t=i;if(tt===0){lt(X)}}if(t===i){if(e.substr(Be,5)===G){t=G;Be+=5}else{t=i;if(tt===0){lt(Z)}}if(t===i){if(e.substr(Be,4)===B){t=B;Be+=4}else{t=i;if(tt===0){lt(J)}}if(t===i){if(e.substr(Be,5)===Q){t=Q;Be+=5}else{t=i;if(tt===0){lt(K)}}}}}}}}}}}return t}function vt(){var t;if(e.substr(Be,9)===ee){t=ee;Be+=9}else{t=i;if(tt===0){lt(te)}}if(t===i){if(e.substr(Be,7)===ne){t=ne;Be+=7}else{t=i;if(tt===0){lt(re)}}if(t===i){if(e.substr(Be,5)===ie){t=ie;Be+=5}else{t=i;if(tt===0){lt(ae)}}if(t===i){if(e.substr(Be,8)===oe){t=oe;Be+=8}else{t=i;if(tt===0){lt(se)}}if(t===i){if(e.substr(Be,5)===ue){t=ue;Be+=5}else{t=i;if(tt===0){lt(le)}}if(t===i){if(e.substr(Be,7)===fe){t=fe;Be+=7}else{t=i;if(tt===0){lt(ce)}}if(t===i){if(e.substr(Be,8)===he){t=he;Be+=8}else{t=i;if(tt===0){lt(de)}}if(t===i){if(e.substr(Be,5)===pe){t=pe;Be+=5}else{t=i;if(tt===0){lt(ge)}}if(t===i){if(e.substr(Be,10)===me){t=me;Be+=10}else{t=i;if(tt===0){lt(ve)}}if(t===i){if(e.substr(Be,9)===ye){t=ye;Be+=9}else{t=i;if(tt===0){lt(_e)}}if(t===i){if(e.substr(Be,8)===xe){t=xe;Be+=8}else{t=i;if(tt===0){lt(be)}}if(t===i){if(e.substr(Be,9)===Me){t=Me;Be+=9}else{t=i;if(tt===0){lt(ke)}}if(t===i){if(e.substr(Be,10)===we){t=we;Be+=10}else{t=i;if(tt===0){lt(Se)}}if(t===i){if(e.substr(Be,10)===Ee){t=Ee;Be+=10}else{t=i;if(tt===0){lt(Ae)}}if(t===i){if(e.substr(Be,9)===Te){t=Te;Be+=9}else{t=i;if(tt===0){lt(Oe)}}if(t===i){if(e.substr(Be,8)===Ne){t=Ne;Be+=8}else{t=i;if(tt===0){lt(Le)}}if(t===i){if(e.substr(Be,9)===Ce){t=Ce;Be+=9}else{t=i;if(tt===0){lt(Re)}}if(t===i){if(e.substr(Be,8)===Ie){t=Ie;Be+=8}else{t=i;if(tt===0){lt(De)}}if(t===i){if(e.substr(Be,9)===Ue){t=Ue;Be+=9}else{t=i;if(tt===0){lt(Pe)}}}}}}}}}}}}}}}}}}}}return t}function yt(){var t,n,r,a;t=Be;if(e.charCodeAt(Be)===91){n=c;Be++}else{n=i;if(tt===0){lt(h)}}if(n!==i){r=bt();if(r!==i){if(e.charCodeAt(Be)===93){a=d;Be++}else{a=i;if(tt===0){lt(p)}}if(a!==i){Je=t;n=ze(r);t=n}else{Be=t;t=i}}else{Be=t;t=i}}else{Be=t;t=i}return t}function _t(){var t,n,r;t=Be;n=[];if(Fe.test(e.charAt(Be))){r=e.charAt(Be);Be++}else{r=i;if(tt===0){lt(je)}}if(r!==i){while(r!==i){n.push(r);if(Fe.test(e.charAt(Be))){r=e.charAt(Be);Be++}else{r=i;if(tt===0){lt(je)}}}}else{n=i}if(n!==i){Je=t;n=qe(n)}t=n;return t}function xt(){var t,n,r;t=Be;n=[];if(Ye.test(e.charAt(Be))){r=e.charAt(Be);Be++}else{r=i;if(tt===0){lt($e)}}if(r!==i){while(r!==i){n.push(r);if(Ye.test(e.charAt(Be))){r=e.charAt(Be);Be++}else{r=i;if(tt===0){lt($e)}}}}else{n=i}if(n!==i){Je=t;n=He(n)}t=n;return t}function bt(){var t,n,r;t=Be;n=[];if(We.test(e.charAt(Be))){r=e.charAt(Be);Be++}else{r=i;if(tt===0){lt(Ve)}}if(r!==i){while(r!==i){n.push(r);if(We.test(e.charAt(Be))){r=e.charAt(Be);Be++}else{r=i;if(tt===0){lt(Ve)}}}}else{n=i}if(n!==i){Je=t;n=Xe(n)}t=n;return t}function Mt(){var t,n;t=[];if(Ge.test(e.charAt(Be))){n=e.charAt(Be);Be++}else{n=i;if(tt===0){lt(Ze)}}while(n!==i){t.push(n);if(Ge.test(e.charAt(Be))){n=e.charAt(Be);Be++}else{n=i;if(tt===0){lt(Ze)}}}return t}nt=o();if(nt!==i&&Be===e.length){return nt}else{if(nt!==i&&Be<e.length){lt({type:"end",description:"end of input"})}throw ft(null,et,Ke<e.length?e.charAt(Ke):null,Ke<e.length?ut(Ke,Ke+1):ut(Ke,Ke))}}return{SyntaxError:t,parse:n}}()},XVii:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("Hqva"),o=a.Node,s=a.Dependencies,u=n("LHV8").bound;var l={};function f(e,t,n){var r=t.def.properties||{},i=r.enter,a=r.update,u=r.exit;o.prototype.init.call(this,e);this._mark=t;this._builder=n;var l=this._scales=[];if(i)l.push.apply(l,i.scales);if(a){this.dependency(s.DATA,a.data);this.dependency(s.SIGNALS,a.signals);this.dependency(s.FIELDS,a.fields);this.dependency(s.SCALES,a.scales);l.push.apply(l,a.scales)}if(u)l.push.apply(l,u.scales);return this.mutates(true)}var c=f.prototype=new o;c.evaluate=function(e){i.debug(e,["encoding",this._mark.def.type]);var t=this._graph,r=this._mark.def.properties||{},a=this._mark.items,o=r.enter,u=r.update,f=r.exit,c=e.dirty,p=t.predicates(),g=e.request,m=this._mark.group,v=m&&(m.mark.axis||m.mark.legend),y=l,_=l,x,b,M,k;if(g&&!v){if((k=r[g])&&e.mod.length){y=k.data?t.values(s.DATA,k.data):null;_=k.signals?t.values(s.SIGNALS,k.signals):null;for(x=0,b=e.mod.length;x<b;++x){M=e.mod[x];d.call(this,k,M,e.trans,y,_,p,c)}}return e}y=h(s.DATA,t,e,r);_=h(s.SIGNALS,t,e,r);for(x=0,b=e.rem.length;x<b;++x){M=e.rem[x];if(f)d.call(this,f,M,e.trans,y,_,p,c);if(e.trans&&!f)e.trans.interpolate(M,l);else if(!e.trans)a.pop()}var w=n("Vp7n").STATUS.UPDATE;for(x=0,b=e.add.length;x<b;++x){M=e.add[x];if(o)d.call(this,o,M,e.trans,y,_,p,c);if(u)d.call(this,u,M,e.trans,y,_,p,c);M.status=w}if(u){for(x=0,b=e.mod.length;x<b;++x){M=e.mod[x];d.call(this,u,M,e.trans,y,_,p,c)}}return e};function h(e,t,n,r){var i,a,o,s=n.add.length;if((i=r.enter)&&(a=i[e]).length&&s){o=t.values(e,a,o=o||{})}if((i=r.exit)&&(a=i[e]).length&&n.rem.length){o=t.values(e,a,o=o||{})}if((i=r.update)&&(a=i[e]).length&&(s||n.mod.length)){o=t.values(e,a,o=o||{})}return o||l}function d(e,t,n,r,i,a,o){var s=e.encode,u=t._dirty,l=s.call(s,t,t.mark.group||t,n,r,i,a);t._dirty=l||u;if(l&&!u)o.push(t)}c.reevaluate=function(e){var t=this._mark.def,n=t.properties||{},i=r.isFunction(t.from)||t.orient||e.request||o.prototype.reevaluate.call(this,e);return i||(n.update?p.call(this):false)};function p(){var e=this._mark.def.properties.update.nested,t=this._builder,n=0,r=0,i=e.length,a,o,s;for(;r<i;++r){a=e[r];if(a.scale)continue;for(;n<a.level;++n){t=t.parent();o=t.ds()}s=(a.group?t.encoder():o.last())._stamp;if(s>this._stamp)return true}return false}f.update=function(e,t,n,i,a){i=r.array(i);var o=e.predicates(),l=e.values(s.DATA),f=e.values(s.SIGNALS),c,h,p,g,m;for(c=0,h=i.length;c<h;++c){p=i[c];g=p.mark.def.properties;m=g&&g[n];if(m){d.call(null,m,p,t,l,f,o,a);u.item(p)}}};e.exports=f},YBv9:function(e,t,n){"use strict";var r=n("P/aK");var i=n("x6Fv");var a=n("Fw/k");var o=n("ZAUf");var s=n("j8cM");var u=n("wKIX");function l(e,t){var n=e.component.layout;if(!n.width&&!n.height){return t}if(true){var r=o.keys(o.extend(n.width.distinct,n.height.distinct));var a=n.width.formula.concat(n.height.formula).map(function(e){return o.extend({type:"formula"},e)});return[r.length>0?{name:e.dataName(i.LAYOUT),source:e.dataTable(),transform:[{type:"aggregate",summarize:r.map(function(e){return{field:e,ops:["distinct"]}})}].concat(a)}:{name:e.dataName(i.LAYOUT),values:[{}],transform:a}]}}t.assembleLayout=l;function f(e){return{width:c(e,r.X),height:c(e,r.Y)}}t.parseUnitLayout=f;function c(e,t){var n=e.config().cell;var i=t===r.X?n.width:n.height;return{distinct:y(e,t),formula:[{field:e.channelSizeName(t),expr:h(e,t,i)}]}}function h(e,t,n){if(e.scale(t)){if(e.isOrdinalScale(t)){var i=e.scale(t);return"("+_(e,t)+" + "+i.padding+") * "+i.bandSize}else{return n+""}}else{if(e.mark()===s.TEXT&&t===r.X){return e.config().scale.textBandWidth+""}return e.config().scale.bandSize+""}}function d(e){return{width:p(e,r.COLUMN),height:p(e,r.ROW)}}t.parseFacetLayout=d;function p(e,t){var n=e.child().component.layout;var i=t===r.ROW?"height":"width";var a=n[i];if(true){var s=o.extend(y(e,t),a.distinct);var u=a.formula.concat([{field:e.channelSizeName(t),expr:g(e,t,e.child().channelSizeName(t))}]);delete n[i];return{distinct:s,formula:u}}}function g(e,t,n){var r=e.scale(t);if(e.has(t)){return"(datum."+n+" + "+r.padding+")"+" * "+_(e,t)}else{return"datum."+n+" + "+e.config().facet.scale.padding}}function m(e){return{width:v(e,r.X),height:v(e,r.Y)}}t.parseLayerLayout=m;function v(e,t){if(true){var n=e.children()[0].component.layout;var i=t===r.Y?"height":"width";var a=n[i];var o=a.distinct;var s=[{field:e.channelSizeName(t),expr:a.formula[0].expr}];e.children().forEach(function(e){delete e.component.layout[i]});return{distinct:o,formula:s}}}function y(e,t){if(e.has(t)&&e.isOrdinalScale(t)){var n=e.scale(t);if(n.type===a.ScaleType.ORDINAL&&!(n.domain instanceof Array)){var r=e.field(t);var i={};i[r]=true;return i}}return{}}function _(e,t){var n=e.scale(t);if(n.domain instanceof Array){return n.domain.length}var r=e.fieldDef(t).timeUnit;var i=r?u.rawDomain(r,t):null;return i!==null?i.length:e.field(t,{datum:true,prefn:"distinct_"})}},YGNx:function(e,t,n){var r=n("zF6n"),i=n("ggRp"),a=n("nIY2"),o=n("GXhC").time;function s(e,t){var n=t&&t.type||"json";e=a[n](e,t);if(t&&t.parse)u(e,t.parse);return e}function u(e,t){var n,a,s,u,l,f,c=e.length;t=t==="auto"?i.inferAll(e):r.duplicate(t);n=r.keys(t);a=n.map(function(e){var n=t[e];if(n&&n.indexOf("date:")===0){var r=n.split(/:(.+)?/,2),a=r[1];if(a[0]==="'"&&a[a.length-1]==="'"||a[0]==='"'&&a[a.length-1]==='"'){a=a.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+a)}a=o(a);return function(e){return a.parse(e)}}if(!i.parsers[n]){throw Error("Illegal format pattern: "+e+":"+n)}return i.parsers[n]});for(u=0,f=n.length;u<c;++u){s=e[u];for(l=0;l<f;++l){s[n[l]]=a[l](s[n[l]])}}i.annotation(e,t)}s.formats=a;e.exports=s},YX8j:function(e,t,n){var r=n("Za4h"),i=n("YzNj"),a=n("wWYS"),o=n("rVSZ"),s=n("RA6T");var u={editor_url:"http://vega.github.io/vega-editor/",source_header:"",source_footer:""};var l={vega:"vega","vega-lite":"vega-lite"};var f={vega:function(e){return e},"vega-lite":function(e){return a.compile(e).spec}};function c(e,t,n,r,a){i.util.load({url:e},function(o,s){var u;if(o||!s){console.error(o||"No data found at "+e)}else{if(!t){u=JSON.parse(s)}else{u=i.util.extend({},t);u[n]=n==="source"?s:JSON.parse(s)}h(r,u,a)}})}function h(e,t,n){var a=n||function(){},u=[],p,g,m,v;try{if(i.util.isString(t)){return c(t,null,null,e,n)}else if(t.source){p=t.source;g=JSON.parse(p)}else if(t.spec){g=t.spec;p=JSON.stringify(g,null,2)}else if(t.url){return c(t.url,t,"source",e,n)}else{g=t;p=JSON.stringify(g,null,2);t={spec:g,actions:false}}m=l[t.mode]||l.vega;g=f[m](g);if(i.util.isString(t.config)){return c(t.config,t,"config",e,n)}else if(t.config){v=t.config}var y=r.select(e).classed("vega-embed",true).html("");if(t.parameters){var _=t.parameter_el?r.select(t.parameter_el):y;var x=_.append("div").attr("class","vega-params");u=t.parameters.map(function(e){return o.init(x,e,g)})}}catch(e){a(e)}i.parse.spec(g,v,function(n,i){if(n){a(n);return}try{var l=t.renderer||"canvas",f=t.actions||{};var c=i({el:e,data:t.data||undefined,renderer:l});if(t.actions!==false){var v=y.append("div").attr("class","vega-actions");if(f.export!==false){var _=l==="canvas"?"png":"svg";v.append("a").text("Export as "+_.toUpperCase()).attr("href","#").attr("target","_blank").attr("download",(g.name||"vega")+"."+_).on("mousedown",function(){this.href=c.toImageURL(_);r.event.preventDefault()})}if(f.source!==false){v.append("a").text("View Source").attr("href","#").on("click",function(){d(p);r.event.preventDefault()})}if(f.editor!==false){v.append("a").text("Open in Vega Editor").attr("href","#").on("click",function(){s(window,h.config.editor_url,{spec:p,mode:m});r.event.preventDefault()})}}u.forEach(function(e){o.bind(e,c)});c.update();a(null,{view:c,spec:g})}catch(e){a(e)}})}function d(e){var t="<html><head>"+u.source_header+"</head>"+'<body><pre><code class="json">';var n="</code></pre>"+u.source_footer+"</body></html>";var r=window.open("");r.document.write(t+e+n);r.document.title="Vega JSON Source"}h.config=u;e.exports=h},YsQl:function(e,t,n){var r=n("zF6n"),i=e.exports;i.repeat=function(e,t){var n=Array(t),r;for(r=0;r<t;++r)n[r]=e;return n};i.zeros=function(e){return i.repeat(0,e)};i.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n==Infinity)throw new Error("Infinite range");var r=[],i=-1,a;if(n<0)while((a=e+n*++i)>t)r.push(a);else while((a=e+n*++i)<t)r.push(a);return r};i.random={};i.random.uniform=function(e,t){if(t===undefined){t=e===undefined?1:e;e=0}var n=t-e;var r=function(){return e+n*Math.random()};r.samples=function(e){return i.zeros(e).map(r)};r.pdf=function(r){return r>=e&&r<=t?1/n:0};r.cdf=function(r){return r<e?0:r>t?1:(r-e)/n};r.icdf=function(t){return t>=0&&t<=1?e+t*n:NaN};return r};i.random.integer=function(e,t){if(t===undefined){t=e;e=0}var n=t-e;var r=function(){return e+Math.floor(n*Math.random())};r.samples=function(e){return i.zeros(e).map(r)};r.pdf=function(r){return r===Math.floor(r)&&r>=e&&r<t?1/n:0};r.cdf=function(r){var i=Math.floor(r);return i<e?0:i>=t?1:(i-e+1)/n};r.icdf=function(t){return t>=0&&t<=1?e-1+Math.floor(t*n):NaN};return r};i.random.normal=function(e,t){e=e||0;t=t||1;var n;var r=function(){var r=0,i=0,a,o;if(n!==undefined){r=n;n=undefined;return r}do{r=Math.random()*2-1;i=Math.random()*2-1;a=r*r+i*i}while(a===0||a>1);o=Math.sqrt(-2*Math.log(a)/a);n=e+i*o*t;return e+r*o*t};r.samples=function(e){return i.zeros(e).map(r)};r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r};r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37){r=0}else{var o,s=Math.exp(-a*a/2);if(a<7.07106781186547){o=.0352624965998911*a+.700383064443688;o=o*a+6.37396220353165;o=o*a+33.912866078383;o=o*a+112.079291497871;o=o*a+221.213596169931;o=o*a+220.206867912376;r=s*o;o=.0883883476483184*a+1.75566716318264;o=o*a+16.064177579207;o=o*a+86.7807322029461;o=o*a+296.564248779674;o=o*a+637.333633378831;o=o*a+793.826512519948;o=o*a+440.413735824752;r=r/o}else{o=a+.65;o=a+4/o;o=a+3/o;o=a+2/o;o=a+1/o;r=s/o/2.506628274631}}return i>0?1-r:r};r.icdf=function(n){if(n<=0||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*s};return r};i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null;var s=function(){return n[~~(Math.random()*a)]+(o?o():0)};s.samples=function(e){return i.zeros(e).map(s)};return s}},YvtE:function(e,t){e.exports=function(e,t,n,r){if(e[n]!==undefined){return e[n]}else if(t!==undefined&&t[n]!==undefined){return t[n]}else if(r!==undefined){return r}return undefined}},YzNj:function(e,t,n){e.exports={version:"__VERSION__",dataflow:n("Hqva"),parse:n("UaGl"),scene:{Bounder:n("rnWk"),Builder:n("Vp7n"),Encoder:n("XVii"),GroupBuilder:n("BB2X"),visit:n("Qpkz")},transforms:n("C8zq"),Transform:n("4JPs"),BatchTransform:n("acp7"),Parameter:n("fRRI"),schema:n("CiyH"),config:n("8NMF"),util:n("v0Fq"),logging:n("J731"),debug:n("J731").debug}},Z8XL:function(e,t,n){var r=n("cwb4");var i=function(e,t){var n=i.topojson;if(n==null){throw Error("TopoJSON library not loaded.")}var a=r(e,t),o;if(t&&t.feature){if(o=a.objects[t.feature]){return n.feature(a,o).features}else{throw Error("Invalid TopoJSON object: "+t.feature)}}else if(t&&t.mesh){if(o=a.objects[t.mesh]){return[n.mesh(a,a.objects[t.mesh])]}else{throw Error("Invalid TopoJSON object: "+t.mesh)}}else{throw Error("Missing TopoJSON feature or mesh parameter.")}};i.topojson=n("nTOs");e.exports=i},ZAUf:function(e,t,n){"use strict";var r=n("EbtV");var i=n("zF6n");t.keys=i.keys;t.extend=i.extend;t.duplicate=i.duplicate;t.isArray=i.isArray;t.vals=i.vals;t.truncate=i.truncate;t.toMap=i.toMap;t.isObject=i.isObject;t.isString=i.isString;t.isNumber=i.isNumber;t.isBoolean=i.isBoolean;var a=n("zF6n");var o=n("YsQl");t.range=o.range;var s=n("QSMf");t.has=s.has;var u=n("P/aK");t.Channel=u.Channel;var l=n("zF6n");function f(e,t){var n={};t.forEach(function(t){if(e.hasOwnProperty(t)){n[t]=e[t]}});return n}t.pick=f;function c(e,t){var n=a.duplicate(e);t.forEach(function(e){delete n[e]});return n}t.omit=c;function h(e){if(l.isString(e)||l.isNumber(e)||l.isBoolean(e)){return String(e)}return r(e)}t.hash=h;function d(e,t){return e.indexOf(t)>-1}t.contains=d;function p(e,t){return e.filter(function(e){return!d(t,e)})}t.without=p;function g(e,t){return e.concat(p(t,e))}t.union=g;function m(e,t,n){if(e.forEach){e.forEach.call(n,t)}else{for(var r in e){if(e.hasOwnProperty(r)){t.call(n,e[r],r,e)}}}}t.forEach=m;function v(e,t,n,r){if(e.reduce){return e.reduce.call(r,t,n)}else{for(var i in e){if(e.hasOwnProperty(i)){n=t.call(r,n,e[i],i,e)}}return n}}t.reduce=v;function y(e,t,n){if(e.map){return e.map.call(n,t)}else{var r=[];for(var i in e){if(e.hasOwnProperty(i)){r.push(t.call(n,e[i],i,e))}}return r}}t.map=y;function _(e,t){var n=0;for(var r=0;r<e.length;r++){if(t(e[r],r,n++)){return true}}return false}t.some=_;function x(e,t){var n=0;for(var r=0;r<e.length;r++){if(!t(e[r],r,n++)){return false}}return true}t.every=x;function b(e){return[].concat.apply([],e)}t.flatten=b;function M(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}for(var r=0;r<t.length;r++){e=k(e,t[r])}return e}t.mergeDeep=M;function k(e,t){if(typeof t!=="object"||t===null){return e}for(var n in t){if(!t.hasOwnProperty(n)){continue}if(t[n]===undefined){continue}if(typeof t[n]!=="object"||t[n]===null){e[n]=t[n]}else if(typeof e[n]!=="object"||e[n]===null){e[n]=M(t[n].constructor===Array?[]:{},t[n])}else{M(e[n],t[n])}}return e}var w=n("prMK");function S(e,t){return w({min:e.min,max:e.max,maxbins:t})}t.getbins=S;function E(e,t){var n=[];var r={},i,a,o;for(a=0,o=e.length;a<o;++a){i=t?t(e[a]):e[a];if(i in r){continue}r[i]=1;n.push(e[a])}return n}t.unique=E;function A(e){console.warn("[VL Warning]",e)}t.warning=A;function T(e){console.error("[VL Error]",e)}t.error=T;function O(e,t){for(var n in e){if(e.hasOwnProperty(n)){if(t[n]&&e[n]&&t[n]!==e[n]){return true}}}return false}t.differ=O},ZCPb:function(e,t,n){var r=n("gWW/"),i=[];function a(e,t,n){if(!t.items||!t.items.length)return;var a=t.items,o=this,s,u,l,f,c,h,d,p,g,m,v,y,_;for(m=0,v=a.length;m<v;++m){s=a[m];l=s.axisItems||i;u=s.items||i;f=s.legendItems||i;c=s.x||0;h=s.y||0;d=s.width||0;p=s.height||0;if(s.stroke||s.fill){g=s.opacity==null?1:s.opacity;if(g>0){if(s.fill&&r.fill(e,s,g)){e.fillRect(c,h,d,p)}if(s.stroke&&r.stroke(e,s,g)){e.strokeRect(c,h,d,p)}}}e.save();e.translate(c,h);if(s.clip){e.beginPath();e.rect(0,0,d,p);e.clip()}if(n)n.translate(-c,-h);for(y=0,_=l.length;y<_;++y){if(l[y].layer==="back"){o.draw(e,l[y],n)}}for(y=0,_=u.length;y<_;++y){o.draw(e,u[y],n)}for(y=0,_=l.length;y<_;++y){if(l[y].layer!=="back"){o.draw(e,l[y],n)}}for(y=0,_=f.length;y<_;++y){o.draw(e,f[y],n)}if(n)n.translate(c,h);e.restore()}}function o(e,t,n,r,a,o){if(t.bounds&&!t.bounds.contains(a,o)){return null}var s=t.items||i,u,l,f,c,h,d,p,g,m,v,y;for(m=s.length;--m>=0;){l=s[m];y=l.bounds;if(y&&!y.contains(a,o))continue;f=l.axisItems||i;c=l.items||i;h=l.legendItems||i;p=l.x||0;g=l.y||0;e.save();e.translate(p,g);p=a-p;g=o-g;for(v=h.length;--v>=0;){u=h[v];if(u.interactive!==false){d=this.pick(u,n,r,p,g);if(d){e.restore();return d}}}for(v=f.length;--v>=0;){u=f[v];if(u.interactive!==false&&u.layer!=="back"){d=this.pick(u,n,r,p,g);if(d){e.restore();return d}}}for(v=c.length;--v>=0;){u=c[v];if(u.interactive!==false){d=this.pick(u,n,r,p,g);if(d){e.restore();return d}}}for(v=f.length;--v>=0;){u=f[v];if(u.interative!==false&&u.layer==="back"){d=this.pick(u,n,r,p,g);if(d){e.restore();return d}}}e.restore();if(t.interactive!==false&&(l.fill||l.stroke)&&p>=0&&p<=l.width&&g>=0&&g<=l.height){return l}}return null}e.exports={draw:a,pick:o}},ZE31:function(e,t,n){"use strict";t.defaultLegendConfig={orient:undefined,shortTimeLabels:false}},Za4h:function(e,t,n){var r,i;!function(){var a={version:"3.5.17"};var o=[].slice,s=function(e){return o.call(e)};var u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function f(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u){try{s(u.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}}if(!Date.now)Date.now=function(){return+new Date};if(u){try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var c=this.Element.prototype,h=c.setAttribute,d=c.setAttributeNS,p=this.CSSStyleDeclaration.prototype,g=p.setProperty;c.setAttribute=function(e,t){h.call(this,e,t+"")};c.setAttributeNS=function(e,t,n){d.call(this,e,t,n+"")};p.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}}a.ascending=m;function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}a.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};a.min=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r)if((a=e[n])!=null&&a>=a){i=a;break}while(++n<r)if((a=e[n])!=null&&i>a)i=a}else{while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}while(++n<r)if((a=t.call(e,e[n],n))!=null&&i>a)i=a}return i};a.max=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r)if((a=e[n])!=null&&a>=a){i=a;break}while(++n<r)if((a=e[n])!=null&&a>i)i=a}else{while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>i)i=a}return i};a.extent=function(e,t){var n=-1,r=e.length,i,a,o;if(arguments.length===1){while(++n<r)if((a=e[n])!=null&&a>=a){i=o=a;break}while(++n<r)if((a=e[n])!=null){if(i>a)i=a;if(o<a)o=a}}else{while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>=a){i=o=a;break}while(++n<r)if((a=t.call(e,e[n],n))!=null){if(i>a)i=a;if(o<a)o=a}}return[i,o]};function v(e){return e===null?NaN:+e}function y(e){return!isNaN(e)}a.sum=function(e,t){var n=0,r=e.length,i,a=-1;if(arguments.length===1){while(++a<r)if(y(i=+e[a]))n+=i}else{while(++a<r)if(y(i=+t.call(e,e[a],a)))n+=i}return n};a.mean=function(e,t){var n=0,r=e.length,i,a=-1,o=r;if(arguments.length===1){while(++a<r)if(y(i=v(e[a])))n+=i;else--o}else{while(++a<r)if(y(i=v(t.call(e,e[a],a))))n+=i;else--o}if(o)return n/o};a.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i};a.median=function(e,t){var n=[],r=e.length,i,o=-1;if(arguments.length===1){while(++o<r)if(y(i=v(e[o])))n.push(i)}else{while(++o<r)if(y(i=v(t.call(e,e[o],o))))n.push(i)}if(n.length)return a.quantile(n.sort(m),.5)};a.variance=function(e,t){var n=e.length,r=0,i,a,o=0,s=-1,u=0;if(arguments.length===1){while(++s<n){if(y(i=v(e[s]))){a=i-r;r+=a/++u;o+=a*(i-r)}}}else{while(++s<n){if(y(i=v(t.call(e,e[s],s)))){a=i-r;r+=a/++u;o+=a*(i-r)}}}if(u>1)return o/(u-1)};a.deviation=function(){var e=a.variance.apply(this,arguments);return e?Math.sqrt(e):e};function _(e){return{left:function(t,n,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=t.length;while(r<i){var a=r+i>>>1;if(e(t[a],n)<0)r=a+1;else i=a}return r},right:function(t,n,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=t.length;while(r<i){var a=r+i>>>1;if(e(t[a],n)>0)i=a;else r=a+1}return r}}}var x=_(m);a.bisectLeft=x.left;a.bisect=a.bisectRight=x.right;a.bisector=function(e){return _(e.length===1?function(t,n){return m(e(t),n)}:e)};a.shuffle=function(e,t,n){if((r=arguments.length)<3){n=e.length;if(r<2)t=0}var r=n-t,i,a;while(r){a=Math.random()*r--|0;i=e[r+t],e[r+t]=e[a+t],e[a+t]=i}return e};a.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r};a.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],a=new Array(n<0?0:n);while(t<n)a[t]=[r=i,i=e[++t]];return a};a.transpose=function(e){if(!(o=e.length))return[];for(var t=-1,n=a.min(e,b),r=new Array(n);++t<n;){for(var i=-1,o,s=r[t]=new Array(o);++i<o;){s[i]=e[i][t]}}return r};function b(e){return e.length}a.zip=function(){return a.transpose(arguments)};a.keys=function(e){var t=[];for(var n in e)t.push(n);return t};a.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t};a.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};a.merge=function(e){var t=e.length,n,r=-1,i=0,a,o;while(++r<t)i+=e[r].length;a=new Array(i);while(--t>=0){o=e[t];n=o.length;while(--n>=0){a[--i]=o[n]}}return a};var M=Math.abs;a.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=k(M(n)),a=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++a)>t)r.push(o/i);else while((o=e+n*++a)<t)r.push(o/i);return r};function k(e){var t=1;while(e*t%1)t*=10;return t}function w(e,t){for(var n in t){Object.defineProperty(e.prototype,n,{value:t[n],enumerable:false})}}a.map=function(e,t){var n=new S;if(e instanceof S){e.forEach(function(e,t){n.set(e,t)})}else if(Array.isArray(e)){var r=-1,i=e.length,a;if(arguments.length===1)while(++r<i)n.set(r,e[r]);else while(++r<i)n.set(t.call(e,a=e[r],r),a)}else{for(var o in e)n.set(o,e[o])}return n};function S(){this._=Object.create(null)}var E="__proto__",A="\0";w(S,{has:N,get:function(e){return this._[T(e)]},set:function(e,t){return this._[T(e)]=t},remove:L,keys:C,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:O(t),value:this._[t]});return e},size:R,empty:I,forEach:function(e){for(var t in this._)e.call(this,O(t),this._[t])}});function T(e){return(e+="")===E||e[0]===A?A+e:e}function O(e){return(e+="")[0]===A?e.slice(1):e}function N(e){return T(e)in this._}function L(e){return(e=T(e))in this._&&delete this._[e]}function C(){var e=[];for(var t in this._)e.push(O(t));return e}function R(){var e=0;for(var t in this._)++e;return e}function I(){for(var e in this._)return false;return true}a.nest=function(){var e={},t=[],n=[],r,i;function o(n,a,s){if(s>=t.length)return i?i.call(e,a):r?a.sort(r):a;var u=-1,l=a.length,f=t[s++],c,h,d,p=new S,g;while(++u<l){if(g=p.get(c=f(h=a[u]))){g.push(h)}else{p.set(c,[h])}}if(n){h=n();d=function(e,t){h.set(e,o(n,t,s))}}else{h={};d=function(e,t){h[e]=o(n,t,s)}}p.forEach(d);return h}function s(e,r){if(r>=t.length)return e;var i=[],a=n[r++];e.forEach(function(e,t){i.push({key:e,values:s(t,r)})});return a?i.sort(function(e,t){return a(e.key,t.key)}):i}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return s(o(a.map,e,0),0)};e.key=function(n){t.push(n);return e};e.sortKeys=function(r){n[t.length-1]=r;return e};e.sortValues=function(t){r=t;return e};e.rollup=function(t){i=t;return e};return e};a.set=function(e){var t=new D;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t};function D(){this._=Object.create(null)}w(D,{has:N,add:function(e){this._[T(e+="")]=true;return e},remove:L,values:C,size:R,empty:I,forEach:function(e){for(var t in this._)e.call(this,O(t))}});a.behavior={};function U(e){return e}a.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=P(e,t,t[i]);return e};function P(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function z(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+t;if(i in e)return i}}var F=["webkit","ms","moz","Moz","o","O"];function j(){}a.dispatch=function(){var e=new q,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=Y(e);return e};function q(){}q.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0){r=e.slice(n+1);e=e.slice(0,n)}if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(r,null)}return this}};function Y(e){var t=[],n=new S;function r(){var n=t,r=-1,i=n.length,a;while(++r<i)if(a=n[r].on)a.apply(this,arguments);return e}r.on=function(r,i){var a=n.get(r),o;if(arguments.length<2)return a&&a.on;if(a){a.on=null;t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1));n.remove(r)}if(i)t.push(n.set(r,{on:i}));return e};return r}a.event=null;function $(){a.event.preventDefault()}function H(){var e=a.event,t;while(t=e.sourceEvent)e=t;return e}function W(e){var t=new q,n=0,r=arguments.length;while(++n<r)t[arguments[n]]=Y(t);t.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=e;a.event=i;t[i.type].apply(n,r)}finally{a.event=o}}};return t}a.requote=function(e){return e.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var X={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function G(e){X(e,Q);return e}var Z=function(e,t){return t.querySelector(e)},B=function(e,t){return t.querySelectorAll(e)},J=function(e,t){var n=e.matches||e[z(e,"matchesSelector")];J=function(e,t){return n.call(e,t)};return J(e,t)};if(typeof Sizzle==="function"){Z=function(e,t){return Sizzle(e,t)[0]||null};B=Sizzle;J=Sizzle.matchesSelector}a.selection=function(){return a.select(u.documentElement)};var Q=a.selection.prototype=[];Q.select=function(e){var t=[],n,r,i,a;e=K(e);for(var o=-1,s=this.length;++o<s;){t.push(n=[]);n.parentNode=(i=this[o]).parentNode;for(var u=-1,l=i.length;++u<l;){if(a=i[u]){n.push(r=e.call(a,a.__data__,u,o));if(r&&"__data__"in a)r.__data__=a.__data__}else{n.push(null)}}}return G(t)};function K(e){return typeof e==="function"?e:function(){return Z(e,this)}}Q.selectAll=function(e){var t=[],n,r;e=ee(e);for(var i=-1,a=this.length;++i<a;){for(var o=this[i],u=-1,l=o.length;++u<l;){if(r=o[u]){t.push(n=s(e.call(r,r.__data__,u,i)));n.parentNode=r}}}return G(t)};function ee(e){return typeof e==="function"?e:function(){return B(e,this)}}var te="http://www.w3.org/1999/xhtml";var ne={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:ne,qualify:function(e){var t=e.indexOf(":"),n=e;if(t>=0&&(n=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return ne.hasOwnProperty(n)?{space:ne[n],local:e}:e}};Q.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node();e=a.ns.qualify(e);return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function re(e,t){e=a.ns.qualify(e);function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function s(){var n=t.apply(this,arguments);if(n==null)this.removeAttribute(e);else this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);if(n==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,n)}return t==null?e.local?r:n:typeof t==="function"?e.local?u:s:e.local?o:i}function ie(e){return e.trim().replace(/\s+/g," ")}Q.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node(),r=(e=oe(e)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return false}else{t=n.getAttribute("class");while(++i<r)if(!ae(e[i]).test(t))return false}return true}for(t in e)this.each(se(t,e[t]));return this}return this.each(se(e,t))};function ae(e){return new RegExp("(?:^|\\s+)"+a.requote(e)+"(?:\\s+|$)","g")}function oe(e){return(e+"").trim().split(/^|\s+/)}function se(e,t){e=oe(e).map(ue);var n=e.length;function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}return typeof t==="function"?i:r}function ue(e){var t=ae(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";if(r){t.lastIndex=0;if(!t.test(i))n.setAttribute("class",ie(i+" "+e))}else{n.setAttribute("class",ie(i.replace(t," ")))}}}Q.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2)t="";for(n in e)this.each(le(n,e[n],t));return this}if(r<2){var i=this.node();return f(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(le(e,t,n))};function le(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);if(r==null)this.style.removeProperty(e);else this.style.setProperty(e,r,n)}return t==null?r:typeof t==="function"?a:i}Q.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(fe(t,e[t]));return this}return this.each(fe(e,t))};function fe(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);if(n==null)delete this[e];else this[e]=n}return t==null?n:typeof t==="function"?i:r}Q.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};Q.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};Q.append=function(e){e=ce(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function ce(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===te&&t.documentElement.namespaceURI===te?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=a.ns.qualify(e)).local?n:t}Q.insert=function(e,t){e=ce(e);t=K(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};Q.remove=function(){return this.each(he)};function he(){var e=this.parentNode;if(e)e.removeChild(this)}Q.data=function(e,t){var n=-1,r=this.length,i,a;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r){if(a=i[n]){e[n]=a.__data__}}return e}function o(e,n){var r,i=e.length,a=n.length,o=Math.min(i,a),f=new Array(a),c=new Array(a),h=new Array(i),d,p;if(t){var g=new S,m=new Array(i),v;for(r=-1;++r<i;){if(d=e[r]){if(g.has(v=t.call(d,d.__data__,r))){h[r]=d}else{g.set(v,d)}m[r]=v}}for(r=-1;++r<a;){if(!(d=g.get(v=t.call(n,p=n[r],r)))){c[r]=de(p)}else if(d!==true){f[r]=d;d.__data__=p}g.set(v,true)}for(r=-1;++r<i;){if(r in m&&g.get(m[r])!==true){h[r]=e[r]}}}else{for(r=-1;++r<o;){d=e[r];p=n[r];if(d){d.__data__=p;f[r]=d}else{c[r]=de(p)}}for(;r<a;++r){c[r]=de(n[r])}for(;r<i;++r){h[r]=e[r]}}c.update=f;c.parentNode=f.parentNode=h.parentNode=e.parentNode;s.push(c);u.push(f);l.push(h)}var s=ve([]),u=G([]),l=G([]);if(typeof e==="function"){while(++n<r){o(i=this[n],e.call(i,i.parentNode.__data__,n))}}else{while(++n<r){o(i=this[n],e)}}u.enter=function(){return s};u.exit=function(){return l};return u};function de(e){return{__data__:e}}Q.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};Q.filter=function(e){var t=[],n,r,i;if(typeof e!=="function")e=pe(e);for(var a=0,o=this.length;a<o;a++){t.push(n=[]);n.parentNode=(r=this[a]).parentNode;for(var s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return G(t)};function pe(e){return function(){return J(this,e)}}Q.order=function(){for(var e=-1,t=this.length;++e<t;){for(var n=this[e],r=n.length-1,i=n[r],a;--r>=0;){if(a=n[r]){if(i&&i!==a.nextSibling)i.parentNode.insertBefore(a,i);i=a}}}return this};Q.sort=function(e){e=ge.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()};function ge(e){if(!arguments.length)e=m;return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}Q.each=function(e){return me(this,function(t,n,r){e.call(t,t.__data__,n,r)})};function me(e,t){for(var n=0,r=e.length;n<r;n++){for(var i=e[n],a=0,o=i.length,s;a<o;a++){if(s=i[a])t(s,a,n)}}return e}Q.call=function(e){var t=s(arguments);e.apply(t[0]=this,t);return this};Q.empty=function(){return!this.node()};Q.node=function(){for(var e=0,t=this.length;e<t;e++){for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}}return null};Q.size=function(){var e=0;me(this,function(){++e});return e};function ve(e){X(e,ye);return e}var ye=[];a.selection.enter=ve;a.selection.enter.prototype=ye;ye.append=Q.append;ye.empty=Q.empty;ye.node=Q.node;ye.call=Q.call;ye.size=Q.size;ye.select=function(e){var t=[],n,r,i,a,o;for(var s=-1,u=this.length;++s<u;){i=(a=this[s]).update;t.push(n=[]);n.parentNode=a.parentNode;for(var l=-1,f=a.length;++l<f;){if(o=a[l]){n.push(i[l]=r=e.call(a.parentNode,o.__data__,l,s));r.__data__=o.__data__}else{n.push(null)}}}return G(t)};ye.insert=function(e,t){if(arguments.length<2)t=_e(this);return Q.insert.call(this,e,t)};function _e(e){var t,n;return function(r,i,a){var o=e[a].update,s=o.length,u;if(a!=n)n=a,t=0;if(i>=t)t=i+1;while(!(u=o[t])&&++t<s);return u}}a.select=function(e){var t;if(typeof e==="string"){t=[Z(e,u)];t.parentNode=u.documentElement}else{t=[e];t.parentNode=l(e)}return G([t])};a.selectAll=function(e){var t;if(typeof e==="string"){t=s(B(e,u));t.parentNode=u.documentElement}else{t=s(e);t.parentNode=null}return G([t])};Q.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2)t=false;for(n in e)this.each(xe(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=false}return this.each(xe(e,t,n))};function xe(e,t,n){var r="__on"+e,i=e.indexOf("."),o=Me;if(i>0)e=e.slice(0,i);var u=be.get(e);if(u)e=u,o=ke;function l(){var t=this[r];if(t){this.removeEventListener(e,t,t.$);delete this[r]}}function f(){var i=o(t,s(arguments));l.call(this);this.addEventListener(e,this[r]=i,i.$=n);i._=t}function c(){var t=new RegExp("^__on([^.]+)"+a.requote(e)+"$"),n;for(var r in this){if(n=r.match(t)){var i=this[r];this.removeEventListener(n[1],i,i.$);delete this[r]}}}return i?t?f:l:t?j:c}var be=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(u){be.forEach(function(e){if("on"+e in u)be.remove(e)})}function Me(e,t){return function(n){var r=a.event;a.event=n;t[0]=this.__data__;try{e.apply(this,t)}finally{a.event=r}}}function ke(e,t){var n=Me(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){n.call(t,e)}}}var we,Se=0;function Ee(e){var t=".dragsuppress-"+ ++Se,n="click"+t,r=a.select(f(e)).on("touchmove"+t,$).on("dragstart"+t,$).on("selectstart"+t,$);if(we==null){we="onselectstart"in e?false:z(e.style,"userSelect")}if(we){var i=l(e).style,o=i[we];i[we]="none"}return function(e){r.on(t,null);if(we)i[we]=o;if(e){var a=function(){r.on(n,null)};r.on(n,function(){$();a()},true);setTimeout(a,0)}}}a.mouse=function(e){return Te(e,H())};var Ae=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Te(e,t){if(t.changedTouches)t=t.changedTouches[0];var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Ae<0){var i=f(e);if(i.scrollX||i.scrollY){n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();Ae=!(o.f||o.e);n.remove()}}if(Ae)r.x=t.pageX,r.y=t.pageY;else r.x=t.clientX,r.y=t.clientY;r=r.matrixTransform(e.getScreenCTM().inverse());return[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}a.touch=function(e,t,n){if(arguments.length<3)n=t,t=H().changedTouches;if(t)for(var r=0,i=t.length,a;r<i;++r){if((a=t[r]).identifier===n){return Te(e,a)}}};a.behavior.drag=function(){var e=W(i,"drag","dragstart","dragend"),t=null,n=o(j,a.mouse,f,"mousemove","mouseup"),r=o(Oe,a.touch,U,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u=this,l=a.event.target.correspondingElement||a.event.target,f=u.parentNode,c=e.of(u,arguments),h=0,d=n(),p=".drag"+(d==null?"":"-"+d),g,m=a.select(i(l)).on(o+p,_).on(s+p,x),v=Ee(l),y=r(f,d);if(t){g=t.apply(u,arguments);g=[g.x-y[0],g.y-y[1]]}else{g=[0,0]}c({type:"dragstart"});function _(){var e=r(f,d),t,n;if(!e)return;t=e[0]-y[0];n=e[1]-y[1];h|=t|n;y=e;c({type:"drag",x:e[0]+g[0],y:e[1]+g[1],dx:t,dy:n})}function x(){if(!r(f,d))return;m.on(o+p,null).on(s+p,null);v(h);c({type:"dragend"})}}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};return a.rebind(i,e,"on")};function Oe(){return a.event.changedTouches[0].identifier}a.touches=function(e,t){if(arguments.length<2)t=H().touches;return t?s(t).map(function(t){var n=Te(e,t);n.identifier=t.identifier;return n}):[]};var Ne=1e-6,Le=Ne*Ne,Ce=Math.PI,Re=2*Ce,Ie=Re-Ne,De=Ce/2,Ue=Ce/180,Pe=180/Ce;function ze(e){return e>0?1:e<0?-1:0}function Fe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function je(e){return e>1?0:e<-1?Ce:Math.acos(e)}function qe(e){return e>1?De:e<-1?-De:Math.asin(e)}function Ye(e){return((e=Math.exp(e))-1/e)/2}function $e(e){return((e=Math.exp(e))+1/e)/2}function He(e){return((e=Math.exp(2*e))-1)/(e+1)}function We(e){return(e=Math.sin(e/2))*e}var Ve=Math.SQRT2,Xe=2,Ge=4;a.interpolateZoom=function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=a-n,l=o-r,f=u*u+l*l,c,h;if(f<Le){h=Math.log(s/i)/Ve;c=function(e){return[n+e*u,r+e*l,i*Math.exp(Ve*e*h)]}}else{var d=Math.sqrt(f),p=(s*s-i*i+Ge*f)/(2*i*Xe*d),g=(s*s-i*i-Ge*f)/(2*s*Xe*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);h=(v-m)/Ve;c=function(e){var t=e*h,a=$e(m),o=i/(Xe*d)*(a*He(Ve*t+m)-Ye(m));return[n+o*u,r+o*l,i*a/$e(Ve*t+m)]}}c.duration=h*1e3;return c};a.behavior.zoom=function(){var e={x:0,y:0,k:1},t,n,r,i=[960,500],o=Ze,s=250,l=0,c="mousedown.zoom",h="mousemove.zoom",d="mouseup.zoom",p,g="touchstart.zoom",m,v=W(M,"zoomstart","zoom","zoomend"),y,_,x,b;if(!Je){Je="onwheel"in u?(Be=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Be=function(){return a.event.wheelDelta},"mousewheel"):(Be=function(){return-a.event.detail},"MozMousePixelScroll")}function M(e){e.on(c,C).on(Je+".zoom",I).on("dblclick.zoom",D).on(g,R)}M.event=function(t){t.each(function(){var t=v.of(this,arguments),r=e;if(Du){a.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};O(t)}).tween("zoom:zoom",function(){var o=i[0],s=i[1],u=n?n[0]:o/2,l=n?n[1]:s/2,f=a.interpolateZoom([(u-e.x)/e.k,(l-e.y)/e.k,o/e.k],[(u-r.x)/r.k,(l-r.y)/r.k,o/r.k]);return function(n){var r=f(n),i=o/r[2];this.__chart__=e={x:u-r[0]*i,y:l-r[1]*i,k:i};N(t)}}).each("interrupt.zoom",function(){L(t)}).each("end.zoom",function(){L(t)})}else{this.__chart__=e;O(t);N(t);L(t)}})};M.translate=function(t){if(!arguments.length)return[e.x,e.y];e={x:+t[0],y:+t[1],k:e.k};T();return M};M.scale=function(t){if(!arguments.length)return e.k;e={x:e.x,y:e.y,k:null};S(+t);T();return M};M.scaleExtent=function(e){if(!arguments.length)return o;o=e==null?Ze:[+e[0],+e[1]];return M};M.center=function(e){if(!arguments.length)return r;r=e&&[+e[0],+e[1]];return M};M.size=function(e){if(!arguments.length)return i;i=e&&[+e[0],+e[1]];return M};M.duration=function(e){if(!arguments.length)return s;s=+e;return M};M.x=function(t){if(!arguments.length)return _;_=t;y=t.copy();e={x:0,y:0,k:1};return M};M.y=function(t){if(!arguments.length)return b;b=t;x=t.copy();e={x:0,y:0,k:1};return M};function k(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function w(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function S(t){e.k=Math.max(o[0],Math.min(o[1],t))}function E(t,n){n=w(n);e.x+=t[0]-n[0];e.y+=t[1]-n[1]}function A(t,r,i,o){t.__chart__={x:e.x,y:e.y,k:e.k};S(Math.pow(2,o));E(n=r,i);t=a.select(t);if(s>0)t=t.transition().duration(s);t.call(M.event)}function T(){if(_)_.domain(y.range().map(function(t){return(t-e.x)/e.k}).map(y.invert));if(b)b.domain(x.range().map(function(t){return(t-e.y)/e.k}).map(x.invert))}function O(e){if(!l++)e({type:"zoomstart"})}function N(t){T();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function L(e){if(!--l)e({type:"zoomend"}),n=null}function C(){var e=this,t=v.of(e,arguments),n=0,r=a.select(f(e)).on(h,s).on(d,u),i=k(a.mouse(e)),o=Ee(e);Nu.call(e);O(t);function s(){n=1;E(a.mouse(e),i);N(t)}function u(){r.on(h,null).on(d,null);o(n);L(t)}}function R(){var t=this,n=v.of(t,arguments),r={},i=0,o,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,f=[],h=a.select(t),d=Ee(t);y();O(n);h.on(c,null).on(g,y);function p(){var n=a.touches(t);o=e.k;n.forEach(function(e){if(e.identifier in r)r[e.identifier]=k(e)});return n}function y(){var n=a.event.target;a.select(n).on(u,_).on(l,x);f.push(n);var o=a.event.changedTouches;for(var s=0,c=o.length;s<c;++s){r[o[s].identifier]=null}var h=p(),d=Date.now();if(h.length===1){if(d-m<500){var g=h[0];A(t,g,r[g.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);$()}m=d}else if(h.length>1){var g=h[0],v=h[1],y=g[0]-v[0],b=g[1]-v[1];i=y*y+b*b}}function _(){var e=a.touches(t),s,u,l,f;Nu.call(t);for(var c=0,h=e.length;c<h;++c,f=null){l=e[c];if(f=r[l.identifier]){if(u)break;s=l,u=f}}if(f){var d=(d=l[0]-s[0])*d+(d=l[1]-s[1])*d,p=i&&Math.sqrt(d/i);s=[(s[0]+l[0])/2,(s[1]+l[1])/2];u=[(u[0]+f[0])/2,(u[1]+f[1])/2];S(p*o)}m=null;E(s,u);N(n)}function x(){if(a.event.touches.length){var e=a.event.changedTouches;for(var t=0,i=e.length;t<i;++t){delete r[e[t].identifier]}for(var o in r){return void p()}}a.selectAll(f).on(s,null);h.on(c,C).on(g,R);d();L(n)}}function I(){var i=v.of(this,arguments);if(p)clearTimeout(p);else Nu.call(this),t=k(n=r||a.mouse(this)),O(i);p=setTimeout(function(){p=null;L(i)},50);$();S(Math.pow(2,Be()*.002)*e.k);E(n,t);N(i)}function D(){var t=a.mouse(this),n=Math.log(e.k)/Math.LN2;A(this,t,k(t),a.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return a.rebind(M,v,"on")};var Ze=[0,Infinity],Be,Je;a.color=Qe;function Qe(){}Qe.prototype.toString=function(){return this.rgb()+""};a.hsl=Ke;function Ke(e,t,n){return this instanceof Ke?void(this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof Ke?new Ke(e.h,e.s,e.l):bt(""+e,Mt,Ke):new Ke(e,t,n)}var et=Ke.prototype=new Qe;et.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ke(this.h,this.s,this.l/e)};et.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Ke(this.h,this.s,e*this.l)};et.rgb=function(){return tt(this.h,this.s,this.l)};function tt(e,t,n){var r,i;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;n=n<0?0:n>1?1:n;i=n<=.5?n*(1+t):n+t-n*t;r=2*n-i;function a(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return r+(i-r)*e/60;if(e<180)return i;if(e<240)return r+(i-r)*(240-e)/60;return r}function o(e){return Math.round(a(e)*255)}return new mt(o(e+120),o(e),o(e-120))}a.hcl=nt;function nt(e,t,n){return this instanceof nt?void(this.h=+e,this.c=+t,this.l=+n):arguments.length<2?e instanceof nt?new nt(e.h,e.c,e.l):e instanceof at?ht(e.l,e.a,e.b):ht((e=kt((e=a.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new nt(e,t,n)}var rt=nt.prototype=new Qe;rt.brighter=function(e){return new nt(this.h,this.c,Math.min(100,this.l+ot*(arguments.length?e:1)))};rt.darker=function(e){return new nt(this.h,this.c,Math.max(0,this.l-ot*(arguments.length?e:1)))};rt.rgb=function(){return it(this.h,this.c,this.l).rgb()};function it(e,t,n){if(isNaN(e))e=0;if(isNaN(t))t=0;return new at(n,Math.cos(e*=Ue)*t,Math.sin(e)*t)}a.lab=at;function at(e,t,n){return this instanceof at?void(this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof at?new at(e.l,e.a,e.b):e instanceof nt?it(e.h,e.c,e.l):kt((e=mt(e)).r,e.g,e.b):new at(e,t,n)}var ot=18;var st=.95047,ut=1,lt=1.08883;var ft=at.prototype=new Qe;ft.brighter=function(e){return new at(Math.min(100,this.l+ot*(arguments.length?e:1)),this.a,this.b)};ft.darker=function(e){return new at(Math.max(0,this.l-ot*(arguments.length?e:1)),this.a,this.b)};ft.rgb=function(){return ct(this.l,this.a,this.b)};function ct(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;i=dt(i)*st;r=dt(r)*ut;a=dt(a)*lt;return new mt(gt(3.2404542*i-1.5371385*r-.4985314*a),gt(-.969266*i+1.8760108*r+.041556*a),gt(.0556434*i-.2040259*r+1.0572252*a))}function ht(e,t,n){return e>0?new nt(Math.atan2(n,t)*Pe,Math.sqrt(t*t+n*n),e):new nt(NaN,NaN,e)}function dt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function pt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function gt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}a.rgb=mt;function mt(e,t,n){return this instanceof mt?void(this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof mt?new mt(e.r,e.g,e.b):bt(""+e,mt,tt):new mt(e,t,n)}function vt(e){return new mt(e>>16,e>>8&255,e&255)}function yt(e){return vt(e)+""}var _t=mt.prototype=new Qe;_t.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;if(!t&&!n&&!r)return new mt(i,i,i);if(t&&t<i)t=i;if(n&&n<i)n=i;if(r&&r<i)r=i;return new mt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))};_t.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new mt(e*this.r,e*this.g,e*this.b)};_t.hsl=function(){return Mt(this.r,this.g,this.b)};_t.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};function xt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function bt(e,t,n){var r=0,i=0,a=0,o,s,u;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return n(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(St(s[0]),St(s[1]),St(s[2]))}}}if(u=Et.get(e)){return t(u.r,u.g,u.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(u=parseInt(e.slice(1),16))){if(e.length===4){r=(u&3840)>>4;r=r>>4|r;i=u&240;i=i>>4|i;a=u&15;a=a<<4|a}else if(e.length===7){r=(u&16711680)>>16;i=(u&65280)>>8;a=u&255}}return t(r,i,a)}function Mt(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),a=i-r,o,s,u=(i+r)/2;if(a){s=u<.5?a/(i+r):a/(2-i-r);if(e==i)o=(t-n)/a+(t<n?6:0);else if(t==i)o=(n-e)/a+2;else o=(e-t)/a+4;o*=60}else{o=NaN;s=u>0&&u<1?0:o}return new Ke(o,s,u)}function kt(e,t,n){e=wt(e);t=wt(t);n=wt(n);var r=pt((.4124564*e+.3575761*t+.1804375*n)/st),i=pt((.2126729*e+.7151522*t+.072175*n)/ut),a=pt((.0193339*e+.119192*t+.9503041*n)/lt);return at(116*i-16,500*(r-i),200*(i-a))}function wt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function St(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var Et=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Et.forEach(function(e,t){Et.set(e,vt(t))});function At(e){return typeof e==="function"?e:function(){return e}}a.functor=At;a.xhr=Tt(U);function Tt(e){return function(t,n,r){if(arguments.length===2&&typeof n==="function")r=n,n=null;return Ot(t,n,e,r)}}function Ot(e,t,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,f=null;if(this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e))l=new XDomainRequest;"onload"in l?l.onload=l.onerror=c:l.onreadystatechange=function(){l.readyState>3&&c()};function c(){var e=l.status,t;if(!e&&Lt(l)||e>=200&&e<300||e===304){try{t=n.call(i,l)}catch(e){o.error.call(i,e);return}o.load.call(i,t)}else{o.error.call(i,l)}}l.onprogress=function(e){var t=a.event;a.event=e;try{o.progress.call(i,l)}finally{a.event=t}};i.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return u[e];if(t==null)delete u[e];else u[e]=t+"";return i};i.mimeType=function(e){if(!arguments.length)return t;t=e==null?null:e+"";return i};i.responseType=function(e){if(!arguments.length)return f;f=e;return i};i.response=function(e){n=e;return i};["get","post"].forEach(function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}});i.send=function(n,r,a){if(arguments.length===2&&typeof r==="function")a=r,r=null;l.open(n,e,true);if(t!=null&&!("accept"in u))u["accept"]=t+",*/*";if(l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);if(t!=null&&l.overrideMimeType)l.overrideMimeType(t);if(f!=null)l.responseType=f;if(a!=null)i.on("error",a).on("load",function(e){a(null,e)});o.beforesend.call(i,l);l.send(r==null?null:r);return i};i.abort=function(){l.abort();return i};a.rebind(i,o,"on");return r==null?i:i.get(Nt(r))}function Nt(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Lt(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}a.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){if(arguments.length<3)r=n,n=null;var i=Ot(e,t,n==null?a:o(n),r);i.row=function(e){return arguments.length?i.response((n=e)==null?a:o(e)):n};return i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})};i.parseRows=function(e,t){var n={},i={},a=[],o=e.length,s=0,u=0,l,f;function c(){if(s>=o)return i;if(f)return f=false,n;var t=s;if(e.charCodeAt(t)===34){var a=t;while(a++<o){if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34)break;++a}}s=a+2;var u=e.charCodeAt(a+1);if(u===13){f=true;if(e.charCodeAt(a+2)===10)++s}else if(u===10){f=true}return e.slice(t+1,a).replace(/""/g,'"')}while(s<o){var u=e.charCodeAt(s++),l=1;if(u===10)f=true;else if(u===13){f=true;if(e.charCodeAt(s)===10)++s,++l}else if(u!==r)continue;return e.slice(t,s-l)}return e.slice(t)}while((l=c())!==i){var h=[];while(l!==n&&l!==i){h.push(l);l=c()}if(t&&(h=t(h,u++))==null)continue;a.push(h)}return a};i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new D,r=[];t.forEach(function(e){for(var t in e){if(!n.has(t)){r.push(n.add(t))}}});return[r.map(u).join(e)].concat(t.map(function(t){return r.map(function(e){return u(t[e])}).join(e)})).join("\n")};i.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i};a.csv=a.dsv(",","text/csv");a.tsv=a.dsv("\t","text/tab-separated-values");var Ct,Rt,It,Dt,Ut=this[z(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};a.timer=function(){Pt.apply(this,arguments)};function Pt(e,t,n){var r=arguments.length;if(r<2)t=0;if(r<3)n=Date.now();var i=n+t,a={c:e,t:i,n:null};if(Rt)Rt.n=a;else Ct=a;Rt=a;if(!It){Dt=clearTimeout(Dt);It=1;Ut(zt)}return a}function zt(){var e=Ft(),t=jt()-e;if(t>24){if(isFinite(t)){clearTimeout(Dt);Dt=setTimeout(zt,t)}It=0}else{It=1;Ut(zt)}}a.timer.flush=function(){Ft();jt()};function Ft(){var e=Date.now(),t=Ct;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function jt(){var e,t=Ct,n=Infinity;while(t){if(t.c){if(t.t<n)n=t.t;t=(e=t).n}else{t=e?e.n=t.n:Ct=t.n}}Rt=e;return n}function qt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}a.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Yt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map($t);a.formatPrefix=function(e,t){var n=0;if(e=+e){if(e<0)e*=-1;if(t)e=a.round(e,qt(e,t));n=1+Math.floor(1e-12+Math.log(e)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}return Yt[8+n/3]};function $t(e,t){var n=Math.pow(10,M(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ht(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){var i=e.length,a=[],o=0,s=r[0],u=0;while(i>0&&s>0){if(u+s+1>t)s=Math.max(1,t-u);a.push(e.substring(i-=s,i+s));if((u+=s+1)>t)break;s=r[o=(o+1)%r.length]}return a.reverse().join(n)}:U;return function(e){var n=Wt.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",f=n[5],c=+n[6],h=n[7],d=n[8],p=n[9],g=1,m="",v="",y=false,_=true;if(d)d=+d.substring(1);if(f||r==="0"&&s==="="){f=r="0";s="="}switch(p){case"n":h=true;p="g";break;case"%":g=100;v="%";p="f";break;case"p":g=100;v="%";p="r";break;case"b":case"o":case"x":case"X":if(l==="#")m="0"+p.toLowerCase();case"c":_=false;case"d":y=true;d=0;break;case"s":g=-1;p="r";break}if(l==="$")m=i[0],v=i[1];if(p=="r"&&!d)p="g";if(d!=null){if(p=="g")d=Math.max(1,Math.min(21,d));else if(p=="e"||p=="f")d=Math.max(0,Math.min(20,d))}p=Vt.get(p)||Xt;var x=f&&h;return function(e){var n=v;if(y&&e%1)return"";var i=e<0||e===0&&1/e<0?(e=-e,"-"):u==="-"?"":u;if(g<0){var l=a.formatPrefix(e,d);e=l.scale(e);n=l.symbol+v}else{e*=g}e=p(e,d);var b=e.lastIndexOf("."),M,k;if(b<0){var w=_?e.lastIndexOf("e"):-1;if(w<0)M=e,k="";else M=e.substring(0,w),k=e.substring(w)}else{M=e.substring(0,b);k=t+e.substring(b+1)}if(!f&&h)M=o(M,Infinity);var S=m.length+M.length+k.length+(x?0:i.length),E=S<c?new Array(S=c-S+1).join(r):"";if(x)M=o(E+M,E.length?c-k.length:Infinity);i+=m;e=M+k;return(s==="<"?i+e+E:s===">"?E+i+e:s==="^"?E.substring(0,S>>=1)+i+e+E.substring(S):i+(x?e:E+e))+n}}}var Wt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Vt=a.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=a.round(e,qt(e,t))).toFixed(Math.max(0,Math.min(20,qt(e*(1+1e-15),t))))}});function Xt(e){return e+""}var Gt=a.time={},Zt=Date;function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Jt.setUTCDate.apply(this._,arguments)},setDay:function(){Jt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Jt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Jt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Jt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Jt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Jt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Jt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Jt.setTime.apply(this._,arguments)}};var Jt=Date.prototype;function Qt(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){t(n=e(new Zt(n-1)),1);return n}function a(e,n){t(e=new Zt(+e),n);return e}function o(e,r,a){var o=i(e),s=[];if(a>1){while(o<r){if(!(n(o)%a))s.push(new Date(+o));t(o,1)}}else{while(o<r)s.push(new Date(+o)),t(o,1)}return s}function s(e,t,n){try{Zt=Bt;var r=new Bt;r._=e;return o(r,t,n)}finally{Zt=Date}}e.floor=e;e.round=r;e.ceil=i;e.offset=a;e.range=o;var u=e.utc=Kt(e);u.floor=u;u.round=Kt(r);u.ceil=Kt(i);u.offset=Kt(a);u.range=s;return e}function Kt(e){return function(t,n){try{Zt=Bt;var r=new Bt;r._=t;return e(r,n)._}finally{Zt=Date}}}Gt.year=Qt(function(e){e=Gt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Gt.years=Gt.year.range;Gt.years.utc=Gt.year.utc.range;Gt.day=Qt(function(e){var t=new Zt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Gt.days=Gt.day.range;Gt.days.utc=Gt.day.utc.range;Gt.dayOfYear=function(e){var t=Gt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=Gt[e]=Qt(function(e){(e=Gt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});Gt[e+"s"]=n.range;Gt[e+"s"].utc=n.utc.range;Gt[e+"OfYear"]=function(e){var n=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(n+t)%7)/7)}});Gt.week=Gt.sunday;Gt.weeks=Gt.sunday.range;Gt.weeks.utc=Gt.sunday.utc.range;Gt.weekOfYear=Gt.sundayOfYear;function en(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function f(e){var t=e.length;function n(n){var r=[],i=-1,a=0,o,s,u;while(++i<t){if(e.charCodeAt(i)===37){r.push(e.slice(a,i));if((s=tn[o=e.charAt(++i)])!=null)o=e.charAt(++i);if(u=b[o])o=u(n,s==null?o==="e"?" ":"0":s);r.push(o);a=i+1}}r.push(e.slice(a,i));return r.join("")}n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=c(n,e,t,0);if(r!=t.length)return null;if("p"in n)n.H=n.H%12+n.p*12;var i=n.Z!=null&&Zt!==Bt,a=new(i?Bt:Zt);if("j"in n)a.setFullYear(n.y,0,n.j);else if("W"in n||"U"in n){if(!("w"in n))n.w="W"in n?1:0;a.setFullYear(n.y,0,1);a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(a.getDay()+5)%7:n.w+n.U*7-(a.getDay()+6)%7)}else a.setFullYear(n.y,n.m,n.d);a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L);return i?a._:a};n.toString=function(){return e};return n}function c(e,t,n,r){var i,a,o,s=0,u=t.length,l=n.length;while(s<u){if(r>=l)return-1;i=t.charCodeAt(s++);if(i===37){o=t.charAt(s++);a=M[o in tn?t.charAt(s++):o];if(!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++)){return-1}}return r}f.utc=function(e){var t=f(e);function n(e){try{Zt=Bt;var n=new Zt;n._=e;return t(n)}finally{Zt=Date}}n.parse=function(e){try{Zt=Bt;var n=t.parse(e);return n&&n._}finally{Zt=Date}};n.toString=t.toString;return n};f.multi=f.utc.multi=wn;var h=a.map(),d=on(o),p=sn(o),g=on(s),m=sn(s),v=on(u),y=sn(u),_=on(l),x=sn(l);i.forEach(function(e,t){h.set(e.toLowerCase(),t)});var b={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:f(t),d:function(e,t){return an(e.getDate(),t,2)},e:function(e,t){return an(e.getDate(),t,2)},H:function(e,t){return an(e.getHours(),t,2)},I:function(e,t){return an(e.getHours()%12||12,t,2)},j:function(e,t){return an(1+Gt.dayOfYear(e),t,3)},L:function(e,t){return an(e.getMilliseconds(),t,3)},m:function(e,t){return an(e.getMonth()+1,t,2)},M:function(e,t){return an(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return an(e.getSeconds(),t,2)},U:function(e,t){return an(Gt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return an(Gt.mondayOfYear(e),t,2)},x:f(n),X:f(r),y:function(e,t){return an(e.getFullYear()%100,t,2)},Y:function(e,t){return an(e.getFullYear()%1e4,t,4)},Z:Mn,"%":function(){return"%"}};var M={a:k,A:w,b:S,B:E,c:A,d:mn,e:mn,H:yn,I:yn,j:vn,L:bn,m:gn,M:_n,p:N,S:xn,U:ln,w:un,W:fn,x:T,X:O,y:hn,Y:cn,Z:dn,"%":kn};function k(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function w(e,t,n){d.lastIndex=0;var r=d.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1}function S(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1}function E(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function A(e,t,n){return c(e,b.c.toString(),t,n)}function T(e,t,n){return c(e,b.x.toString(),t,n)}function O(e,t,n){return c(e,b.X.toString(),t,n)}function N(e,t,n){var r=h.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}return f}var tn={"-":"",_:" ",0:"0"},nn=/^\s*\d+/,rn=/^%/;function an(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function on(e){return new RegExp("^(?:"+e.map(a.requote).join("|")+")","i")}function sn(e){var t=new S,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function un(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ln(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function fn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function cn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function hn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.y=pn(+r[0]),n+r[0].length):-1}function dn(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function pn(e){return e+(e>68?1900:2e3)}function gn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function yn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _n(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function xn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function bn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Mn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=M(t)/60|0,i=M(t)%60;return n+an(r,"0",2)+an(i,"0",2)}function kn(e,t,n){rn.lastIndex=0;var r=rn.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function wn(e){var t=e.length,n=-1;while(++n<t)e[n][0]=this(e[n][0]);return function(t){var n=0,r=e[n];while(!r[1](t))r=e[++n];return r[0](t)}}a.locale=function(e){return{numberFormat:Ht(e),timeFormat:en(e)}};var Sn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});a.format=Sn.numberFormat;a.geo={};function En(){}En.prototype={s:0,t:0,add:function(e){Tn(e,this.t,An);Tn(An.s,this.s,this);if(this.s)this.t+=An.t;else this.s=An.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var An=new En;function Tn(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}a.geo.stream=function(e,t){if(e&&Nn.hasOwnProperty(e.type)){Nn[e.type](e,t)}else{On(e,t)}};function On(e,t){if(e&&Ln.hasOwnProperty(e.type)){Ln[e.type](e,t)}}var Nn={Feature:function(e,t){On(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)On(n[r].geometry,t)}};var Ln={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cn(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Cn(n[r],t,0)},Polygon:function(e,t){Rn(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Rn(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)On(n[r],t)}};function Cn(e,t,n){var r=-1,i=e.length-n,a;t.lineStart();while(++r<i)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Rn(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)Cn(e[n],t,1);t.polygonEnd()}a.geo.area=function(e){In=0;a.geo.stream(e,Un);return In};var In,Dn=new En;var Un={sphere:function(){In+=4*Ce},point:j,lineStart:j,lineEnd:j,polygonStart:function(){Dn.reset();Un.lineStart=Pn},polygonEnd:function(){var e=2*Dn;In+=e<0?4*Ce+e:e;Un.lineStart=Un.lineEnd=Un.point=j}};function Pn(){var e,t,n,r,i;Un.point=function(o,s){Un.point=a;n=(e=o)*Ue,r=Math.cos(s=(t=s)*Ue/2+Ce/4),i=Math.sin(s)};function a(e,t){e*=Ue;t=t*Ue/2+Ce/4;var a=e-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),l=Math.sin(t),f=i*l,c=r*u+f*Math.cos(s),h=f*o*Math.sin(s);Dn.add(Math.atan2(h,c));n=e,r=u,i=l}Un.lineEnd=function(){a(e,t)}}function zn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Fn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function jn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qn(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Yn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function $n(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Hn(e){return[Math.atan2(e[1],e[0]),qe(e[2])]}function Wn(e,t){return M(e[0]-t[0])<Ne&&M(e[1]-t[1])<Ne}a.geo.bounds=function(){var e,t,n,r,i,o,s,u,l,f,c;var h={point:d,lineStart:g,lineEnd:m,polygonStart:function(){h.point=v;h.lineStart=y;h.lineEnd=_;l=0;Un.polygonStart()},polygonEnd:function(){Un.polygonEnd();h.point=d;h.lineStart=g;h.lineEnd=m;if(Dn<0)e=-(n=180),t=-(r=90);else if(l>Ne)r=90;else if(l<-Ne)t=-90;c[0]=e,c[1]=n}};function d(i,a){f.push(c=[e=i,n=i]);if(a<t)t=a;if(a>r)r=a}function p(a,o){var s=zn([a*Ue,o*Ue]);if(u){var l=jn(u,s),f=[l[1],-l[0],0],c=jn(f,l);$n(c);c=Hn(c);var h=a-i,p=h>0?1:-1,g=c[0]*Pe*p,m=M(h)>180;if(m^(p*i<g&&g<p*a)){var v=c[1]*Pe;if(v>r)r=v}else if(g=(g+360)%360-180,m^(p*i<g&&g<p*a)){var v=-c[1]*Pe;if(v<t)t=v}else{if(o<t)t=o;if(o>r)r=o}if(m){if(a<i){if(x(e,a)>x(e,n))n=a}else{if(x(a,n)>x(e,n))e=a}}else{if(n>=e){if(a<e)e=a;if(a>n)n=a}else{if(a>i){if(x(e,a)>x(e,n))n=a}else{if(x(a,n)>x(e,n))e=a}}}}else{d(a,o)}u=s,i=a}function g(){h.point=p}function m(){c[0]=e,c[1]=n;h.point=d;u=null}function v(e,t){if(u){var n=e-i;l+=M(n)>180?n+(n>0?360:-360):n}else o=e,s=t;Un.point(e,t);p(e,t)}function y(){Un.lineStart()}function _(){v(o,s);Un.lineEnd();if(M(l)>Ne)e=-(n=180);c[0]=e,c[1]=n;u=null}function x(e,t){return(t-=e)<0?t+360:t}function b(e,t){return e[0]-t[0]}function k(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){r=n=-(e=t=Infinity);f=[];a.geo.stream(i,h);var o=f.length;if(o){f.sort(b);for(var s=1,u=f[0],l,d=[u];s<o;++s){l=f[s];if(k(l[0],u)||k(l[1],u)){if(x(u[0],l[1])>x(u[0],u[1]))u[1]=l[1];if(x(l[0],u[1])>x(u[0],u[1]))u[0]=l[0]}else{d.push(u=l)}}var p=-Infinity,g;for(var o=d.length-1,s=0,u=d[o],l;s<=o;u=l,++s){l=d[s];if((g=x(u[1],l[0]))>p)p=g,e=l[0],n=u[1]}}f=c=null;return e===Infinity||t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}();a.geo.centroid=function(e){Vn=Xn=Gn=Zn=Bn=Jn=Qn=Kn=er=tr=nr=0;a.geo.stream(e,rr);var t=er,n=tr,r=nr,i=t*t+n*n+r*r;if(i<Le){t=Jn,n=Qn,r=Kn;if(Xn<Ne)t=Gn,n=Zn,r=Bn;i=t*t+n*n+r*r;if(i<Le)return[NaN,NaN]}return[Math.atan2(n,t)*Pe,qe(r/Math.sqrt(i))*Pe]};var Vn,Xn,Gn,Zn,Bn,Jn,Qn,Kn,er,tr,nr;var rr={sphere:j,point:ir,lineStart:or,lineEnd:sr,polygonStart:function(){rr.lineStart=ur},polygonEnd:function(){rr.lineStart=or}};function ir(e,t){e*=Ue;var n=Math.cos(t*=Ue);ar(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ar(e,t,n){++Vn;Gn+=(e-Gn)/Vn;Zn+=(t-Zn)/Vn;Bn+=(n-Bn)/Vn}function or(){var e,t,n;rr.point=function(i,a){i*=Ue;var o=Math.cos(a*=Ue);e=o*Math.cos(i);t=o*Math.sin(i);n=Math.sin(a);rr.point=r;ar(e,t,n)};function r(r,i){r*=Ue;var a=Math.cos(i*=Ue),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);Xn+=l;Jn+=l*(e+(e=o));Qn+=l*(t+(t=s));Kn+=l*(n+(n=u));ar(e,t,n)}}function sr(){rr.point=ir}function ur(){var e,t,n,r,i;rr.point=function(o,s){e=o,t=s;rr.point=a;o*=Ue;var u=Math.cos(s*=Ue);n=u*Math.cos(o);r=u*Math.sin(o);i=Math.sin(s);ar(n,r,i)};rr.lineEnd=function(){a(e,t);rr.lineEnd=sr;rr.point=ir};function a(e,t){e*=Ue;var a=Math.cos(t*=Ue),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),l=r*u-i*s,f=i*o-n*u,c=n*s-r*o,h=Math.sqrt(l*l+f*f+c*c),d=n*o+r*s+i*u,p=h&&-je(d)/h,g=Math.atan2(h,d);er+=p*l;tr+=p*f;nr+=p*c;Xn+=g;Jn+=g*(n+(n=o));Qn+=g*(r+(r=s));Kn+=g*(i+(i=u));ar(n,r,i)}}function lr(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}if(e.invert&&t.invert)n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])};return n}function fr(){return true}function cr(e,t,n,r,i){var a=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(Wn(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd();return}var u=new dr(n,e,null,true),l=new dr(n,null,u,false);u.o=l;a.push(u);o.push(l);u=new dr(r,e,null,false);l=new dr(r,null,u,true);u.o=l;a.push(u);o.push(l)});o.sort(t);hr(a);hr(o);if(!a.length)return;for(var s=0,u=n,l=o.length;s<l;++s){o[s].e=u=!u}var f=a[0],c,h;while(1){var d=f,p=true;while(d.v)if((d=d.n)===f)return;c=d.z;i.lineStart();do{d.v=d.o.v=true;if(d.e){if(p){for(var s=0,l=c.length;s<l;++s)i.point((h=c[s])[0],h[1])}else{r(d.x,d.n.x,1,i)}d=d.n}else{if(p){c=d.p.z;for(var s=c.length-1;s>=0;--s)i.point((h=c[s])[0],h[1])}else{r(d.x,d.p.x,-1,i)}d=d.p}d=d.o;c=d.z;p=!p}while(!d.v);i.lineEnd()}}function hr(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t){r.n=i=e[n];i.p=r;r=i}r.n=i=e[0];i.p=r}function dr(e,t,n,r){this.x=e;this.z=t;this.o=n;this.e=r;this.v=false;this.n=this.p=null}function pr(e,t,n,r){return function(i,o){var s=t(o),u=i.invert(r[0],r[1]);var l={point:f,lineStart:h,lineEnd:d,polygonStart:function(){l.point=x;l.lineStart=b;l.lineEnd=M;p=[];y=[]},polygonEnd:function(){l.point=f;l.lineStart=h;l.lineEnd=d;p=a.merge(p);var e=Mr(u,y);if(p.length){if(!v)o.polygonStart(),v=true;cr(p,vr,e,n,o)}else if(e){if(!v)o.polygonStart(),v=true;o.lineStart();n(null,null,1,o);o.lineEnd()}if(v)o.polygonEnd(),v=false;p=y=null},sphere:function(){o.polygonStart();o.lineStart();n(null,null,1,o);o.lineEnd();o.polygonEnd()}};function f(t,n){var r=i(t,n);if(e(t=r[0],n=r[1]))o.point(t,n)}function c(e,t){var n=i(e,t);s.point(n[0],n[1])}function h(){l.point=c;s.lineStart()}function d(){l.point=f;s.lineEnd()}var p;var g=mr(),m=t(g),v=false,y,_;function x(e,t){_.push([e,t]);var n=i(e,t);m.point(n[0],n[1])}function b(){m.lineStart();_=[]}function M(){x(_[0][0],_[0][1]);m.lineEnd();var e=m.clean(),t=g.buffer(),n,r=t.length;_.pop();y.push(_);_=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,a;if(r>0){if(!v)o.polygonStart(),v=true;o.lineStart();while(++i<r)o.point((a=n[i])[0],a[1]);o.lineEnd()}return}if(r>1&&e&2)t.push(t.pop().concat(t.shift()));p.push(t.filter(gr))}return l}}function gr(e){return e.length>1}function mr(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:j,buffer:function(){var n=e;e=[];t=null;return n},rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))}}}function vr(e,t){return((e=e.x)[0]<0?e[1]-De-Ne:De-e[1])-((t=t.x)[0]<0?t[1]-De-Ne:De-t[1])}var yr=pr(fr,_r,br,[-Ce,-Ce/2]);function _r(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart();i=1},point:function(a,o){var s=a>0?Ce:-Ce,u=M(a-t);if(M(u-Ce)<Ne){e.point(t,n=(n+o)/2>0?De:-De);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);e.point(a,n);i=0}else if(r!==s&&u>=Ce){if(M(t-r)<Ne)t-=r*Ne;if(M(a-s)<Ne)a-=s*Ne;n=xr(t,n,a,o);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);i=0}e.point(t=a,n=o);r=s},lineEnd:function(){e.lineEnd();t=n=NaN},clean:function(){return 2-i}}}function xr(e,t,n,r){var i,a,o=Math.sin(e-n);return M(o)>Ne?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function br(e,t,n,r){var i;if(e==null){i=n*De;r.point(-Ce,i);r.point(0,i);r.point(Ce,i);r.point(Ce,0);r.point(Ce,-i);r.point(0,-i);r.point(-Ce,-i);r.point(-Ce,0);r.point(-Ce,i)}else if(M(e[0]-t[0])>Ne){var a=e[0]<t[0]?Ce:-Ce;i=n*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else{r.point(t[0],t[1])}}function Mr(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;Dn.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],f=l.length;if(!f)continue;var c=l[0],h=c[0],d=c[1]/2+Ce/4,p=Math.sin(d),g=Math.cos(d),m=1;while(true){if(m===f)m=0;e=l[m];var v=e[0],y=e[1]/2+Ce/4,_=Math.sin(y),x=Math.cos(y),b=v-h,M=b>=0?1:-1,k=M*b,w=k>Ce,S=p*_;Dn.add(Math.atan2(S*M*Math.sin(k),g*x+S*Math.cos(k)));a+=w?b+M*Re:b;if(w^h>=n^v>=n){var E=jn(zn(c),zn(e));$n(E);var A=jn(i,E);$n(A);var T=(w^b>=0?-1:1)*qe(A[2]);if(r>T||r===T&&(E[0]||E[1])){o+=w^b>=0?1:-1}}if(!m++)break;h=v,p=_,g=x,c=e}}return(a<-Ne||a<Ne&&Dn<-Ne)^o&1}function kr(e){var t=Math.cos(e),n=t>0,r=M(t)>Ne,i=oi(e,6*Ue);return pr(a,o,i,n?[0,-e]:[-Ce,e-Ce]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,l,f;return{lineStart:function(){l=o=false;f=1},point:function(c,h){var d=[c,h],p,g=a(c,h),m=n?g?0:u(c,h):g?u(c+(c<0?Ce:-Ce),h):0;if(!t&&(l=o=g))e.lineStart();if(g!==o){p=s(t,d);if(Wn(t,p)||Wn(d,p)){d[0]+=Ne;d[1]+=Ne;g=a(d[0],d[1])}}if(g!==o){f=0;if(g){e.lineStart();p=s(d,t);e.point(p[0],p[1])}else{p=s(t,d);e.point(p[0],p[1]);e.lineEnd()}t=p}else if(r&&t&&n^g){var v;if(!(m&i)&&(v=s(d,t,true))){f=0;if(n){e.lineStart();e.point(v[0][0],v[0][1]);e.point(v[1][0],v[1][1]);e.lineEnd()}else{e.point(v[1][0],v[1][1]);e.lineEnd();e.lineStart();e.point(v[0][0],v[0][1])}}}if(g&&(!t||!Wn(t,d))){e.point(d[0],d[1])}t=d,o=g,i=m},lineEnd:function(){if(o)e.lineEnd();t=null},clean:function(){return f|(l&&o)<<1}}}function s(e,n,r){var i=zn(e),a=zn(n);var o=[1,0,0],s=jn(i,a),u=Fn(s,s),l=s[0],f=u-l*l;if(!f)return!r&&e;var c=t*u/f,h=-t*l/f,d=jn(o,s),p=Yn(o,c),g=Yn(s,h);qn(p,g);var m=d,v=Fn(p,m),y=Fn(m,m),_=v*v-y*(Fn(p,p)-1);if(_<0)return;var x=Math.sqrt(_),b=Yn(m,(-v-x)/y);qn(b,p);b=Hn(b);if(!r)return b;var k=e[0],w=n[0],S=e[1],E=n[1],A;if(w<k)A=k,k=w,w=A;var T=w-k,O=M(T-Ce)<Ne,N=O||T<Ne;if(!O&&E<S)A=S,S=E,E=A;if(N?O?S+E>0^b[1]<(M(b[0]-k)<Ne?S:E):S<=b[1]&&b[1]<=E:T>Ce^(k<=b[0]&&b[0]<=w)){var L=Yn(m,(-v+x)/y);qn(L,p);return[b,Hn(L)]}}function u(t,r){var i=n?e:Ce-e,a=0;if(t<-i)a|=1;else if(t>i)a|=2;if(r<-i)a|=4;else if(r>i)a|=8;return a}}function wr(e,t,n,r){return function(i){var a=i.a,o=i.b,s=a.x,u=a.y,l=o.x,f=o.y,c=0,h=1,d=l-s,p=f-u,g;g=e-s;if(!d&&g>0)return;g/=d;if(d<0){if(g<c)return;if(g<h)h=g}else if(d>0){if(g>h)return;if(g>c)c=g}g=n-s;if(!d&&g<0)return;g/=d;if(d<0){if(g>h)return;if(g>c)c=g}else if(d>0){if(g<c)return;if(g<h)h=g}g=t-u;if(!p&&g>0)return;g/=p;if(p<0){if(g<c)return;if(g<h)h=g}else if(p>0){if(g>h)return;if(g>c)c=g}g=r-u;if(!p&&g<0)return;g/=p;if(p<0){if(g>h)return;if(g>c)c=g}else if(p>0){if(g<c)return;if(g<h)h=g}if(c>0)i.a={x:s+c*d,y:u+c*p};if(h<1)i.b={x:s+h*d,y:u+h*p};return i}}var Sr=1e9;a.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){if(i)i.valid=false;i=a(e);i.valid=true;return i},extent:function(s){if(!arguments.length)return[[e,t],[n,r]];a=Er(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]);if(i)i.valid=false,i=null;return o}};return o.extent([[0,0],[960,500]])};function Er(e,t,n,r){return function(u){var l=u,f=mr(),c=wr(e,t,n,r),h,d,p;var g={point:_,lineStart:T,lineEnd:O,polygonStart:function(){u=f;h=[];d=[];A=true},polygonEnd:function(){u=l;h=a.merge(h);var t=m([e,r]),n=A&&t,i=h.length;if(n||i){u.polygonStart();if(n){u.lineStart();v(null,null,1,u);u.lineEnd()}if(i){cr(h,o,t,v,u)}u.polygonEnd()}h=d=p=null}};function m(e){var t=0,n=d.length,r=e[1];for(var i=0;i<n;++i){for(var a=1,o=d[i],s=o.length,u=o[0],l;a<s;++a){l=o[a];if(u[1]<=r){if(l[1]>r&&Fe(u,l,e)>0)++t}else{if(l[1]<=r&&Fe(u,l,e)<0)--t}u=l}}return t!==0}function v(a,o,u,l){var f=0,c=0;if(a==null||(f=i(a,u))!==(c=i(o,u))||s(a,o)<0^u>0){do{l.point(f===0||f===3?e:n,f>1?r:t)}while((f=(f+u+4)%4)!==c)}else{l.point(o[0],o[1])}}function y(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function _(e,t){if(y(e,t))u.point(e,t)}var x,b,M,k,w,S,E,A;function T(){g.point=N;if(d)d.push(p=[]);E=true;S=false;k=w=NaN}function O(){if(h){N(x,b);if(M&&S)f.rejoin();h.push(f.buffer())}g.point=_;if(S)u.lineEnd()}function N(e,t){e=Math.max(-Sr,Math.min(Sr,e));t=Math.max(-Sr,Math.min(Sr,t));var n=y(e,t);if(d)p.push([e,t]);if(E){x=e,b=t,M=n;E=false;if(n){u.lineStart();u.point(e,t)}}else{if(n&&S)u.point(e,t);else{var r={a:{x:k,y:w},b:{x:e,y:t}};if(c(r)){if(!S){u.lineStart();u.point(r.a.x,r.a.y)}u.point(r.b.x,r.b.y);if(!n)u.lineEnd();A=false}else if(n){u.lineStart();u.point(e,t);A=false}}}k=e,w=t,S=n}return g};function i(r,i){return M(r[0]-e)<Ne?i>0?0:3:M(r[0]-n)<Ne?i>0?2:1:M(r[1]-t)<Ne?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}}function Ar(e){var t=0,n=Ce/3,r=Qr(e),i=r(t,n);i.parallels=function(e){if(!arguments.length)return[t/Ce*180,n/Ce*180];return r(t=e[0]*Ce/180,n=e[1]*Ce/180)};return i}function Tr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,qe((i-(e*e+n*n)*r*r)/(2*r))]};return o}(a.geo.conicEqualArea=function(){return Ar(Tr)}).raw=Tr;a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};a.geo.albersUsa=function(){var e=a.geo.albers();var t=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var n=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var r,i={point:function(e,t){r=[e,t]}},o,s,u;function l(e){var t=e[0],n=e[1];r=null;(o(t,n),r)||(s(t,n),r)||u(t,n);return r}l.invert=function(r){var i=e.scale(),a=e.translate(),o=(r[0]-a[0])/i,s=(r[1]-a[1])/i;return(s>=.12&&s<.234&&o>=-.425&&o<-.214?t:s>=.166&&s<.234&&o>=-.214&&o<-.115?n:e).invert(r)};l.stream=function(r){var i=e.stream(r),a=t.stream(r),o=n.stream(r);return{point:function(e,t){i.point(e,t);a.point(e,t);o.point(e,t)},sphere:function(){i.sphere();a.sphere();o.sphere()},lineStart:function(){i.lineStart();a.lineStart();o.lineStart()},lineEnd:function(){i.lineEnd();a.lineEnd();o.lineEnd()},polygonStart:function(){i.polygonStart();a.polygonStart();o.polygonStart()},polygonEnd:function(){i.polygonEnd();a.polygonEnd();o.polygonEnd()}}};l.precision=function(r){if(!arguments.length)return e.precision();e.precision(r);t.precision(r);n.precision(r);return l};l.scale=function(r){if(!arguments.length)return e.scale();e.scale(r);t.scale(r*.35);n.scale(r);return l.translate(e.translate())};l.translate=function(r){if(!arguments.length)return e.translate();var a=e.scale(),f=+r[0],c=+r[1];o=e.translate(r).clipExtent([[f-.455*a,c-.238*a],[f+.455*a,c+.238*a]]).stream(i).point;s=t.translate([f-.307*a,c+.201*a]).clipExtent([[f-.425*a+Ne,c+.12*a+Ne],[f-.214*a-Ne,c+.234*a-Ne]]).stream(i).point;u=n.translate([f-.205*a,c+.212*a]).clipExtent([[f-.214*a+Ne,c+.166*a+Ne],[f-.115*a-Ne,c+.234*a-Ne]]).stream(i).point;return l};return l.scale(1070)};var Or,Nr,Lr={point:j,lineStart:j,lineEnd:j,polygonStart:function(){Nr=0;Lr.lineStart=Cr},polygonEnd:function(){Lr.lineStart=Lr.lineEnd=Lr.point=j;Or+=M(Nr/2)}};function Cr(){var e,t,n,r;Lr.point=function(a,o){Lr.point=i;e=n=a,t=r=o};function i(e,t){Nr+=r*e-n*t;n=e,r=t}Lr.lineEnd=function(){i(e,t)}}var Rr,Ir,Dr,Ur;var Pr={point:zr,lineStart:j,lineEnd:j,polygonStart:j,polygonEnd:j};function zr(e,t){if(e<Rr)Rr=e;if(e>Dr)Dr=e;if(t<Ir)Ir=t;if(t>Ur)Ur=t}function Fr(){var e=jr(4.5),t=[];var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(t){e=jr(t);return n},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r);n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function jr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var qr={point:Yr,lineStart:$r,lineEnd:Hr,polygonStart:function(){qr.lineStart=Wr},polygonEnd:function(){qr.point=Yr;qr.lineStart=$r;qr.lineEnd=Hr}};function Yr(e,t){Gn+=e;Zn+=t;++Bn}function $r(){var e,t;qr.point=function(r,i){qr.point=n;Yr(e=r,t=i)};function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);Jn+=o*(e+n)/2;Qn+=o*(t+r)/2;Kn+=o;Yr(e=n,t=r)}}function Hr(){qr.point=Yr}function Wr(){var e,t,n,r;qr.point=function(a,o){qr.point=i;Yr(e=n=a,t=r=o)};function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);Jn+=o*(n+e)/2;Qn+=o*(r+t)/2;Kn+=o;o=r*e-n*t;er+=o*(n+e);tr+=o*(r+t);nr+=o*3;Yr(n=e,r=t)}qr.lineEnd=function(){i(e,t)}}function Vr(e){var t=4.5;var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(e){t=e;return n},result:j};function r(n,r){e.moveTo(n+t,r);e.arc(n,r,t,0,Re)}function i(t,r){e.moveTo(t,r);n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Xr(e){var t=.5,n=Math.cos(30*Ue),r=16;function i(e){return(r?o:a)(e)}function a(t){return Br(t,function(n,r){n=e(n,r);t.point(n[0],n[1])})}function o(t){var n,i,a,o,u,l,f,c,h,d,p,g,m;var v={point:y,lineStart:_,lineEnd:b,polygonStart:function(){t.polygonStart();v.lineStart=M},polygonEnd:function(){t.polygonEnd();v.lineStart=_}};function y(n,r){n=e(n,r);t.point(n[0],n[1])}function _(){h=NaN;v.point=x;t.lineStart()}function x(n,i){var a=zn([n,i]),o=e(n,i);s(h,d,c,p,g,m,h=o[0],d=o[1],c=n,p=a[0],g=a[1],m=a[2],r,t);t.point(h,d)}function b(){v.point=y;t.lineEnd()}function M(){_();v.point=k;v.lineEnd=w}function k(e,t){x(n=e,i=t),a=h,o=d,u=p,l=g,f=m;v.point=x}function w(){s(h,d,c,p,g,m,a,o,n,u,l,f,r,t);v.lineEnd=b;b()}return v}function s(r,i,a,o,u,l,f,c,h,d,p,g,m,v){var y=f-r,_=c-i,x=y*y+_*_;if(x>4*t&&m--){var b=o+d,k=u+p,w=l+g,S=Math.sqrt(b*b+k*k+w*w),E=Math.asin(w/=S),A=M(M(w)-1)<Ne||M(a-h)<Ne?(a+h)/2:Math.atan2(k,b),T=e(A,E),O=T[0],N=T[1],L=O-r,C=N-i,R=_*L-y*C;if(R*R/x>t||M((y*L+_*C)/x-.5)>.3||o*d+u*p+l*g<n){s(r,i,a,o,u,l,O,N,A,b/=S,k/=S,w,m,v);v.point(O,N);s(O,N,A,b,k,w,f,c,h,d,p,g,m,v)}}}i.precision=function(e){if(!arguments.length)return Math.sqrt(t);r=(t=e*e)>0&&16;return i};return i}a.geo.path=function(){var e=4.5,t,n,r,i,o;function s(t){if(t){if(typeof e==="function")i.pointRadius(+e.apply(this,arguments));if(!o||!o.valid)o=r(i);a.geo.stream(t,o)}return i.result()}s.area=function(e){Or=0;a.geo.stream(e,r(Lr));return Or};s.centroid=function(e){Gn=Zn=Bn=Jn=Qn=Kn=er=tr=nr=0;a.geo.stream(e,r(qr));return nr?[er/nr,tr/nr]:Kn?[Jn/Kn,Qn/Kn]:Bn?[Gn/Bn,Zn/Bn]:[NaN,NaN]};s.bounds=function(e){Dr=Ur=-(Rr=Ir=Infinity);a.geo.stream(e,r(Pr));return[[Rr,Ir],[Dr,Ur]]};s.projection=function(e){if(!arguments.length)return t;r=(t=e)?e.stream||Gr(e):U;return u()};s.context=function(t){if(!arguments.length)return n;i=(n=t)==null?new Fr:new Vr(t);if(typeof e!=="function")i.pointRadius(e);return u()};s.pointRadius=function(t){if(!arguments.length)return e;e=typeof t==="function"?t:(i.pointRadius(+t),+t);return s};function u(){o=null;return s}return s.projection(a.geo.albersUsa()).context(null)};function Gr(e){var t=Xr(function(t,n){return e([t*Pe,n*Pe])});return function(e){return Kr(t(e))}}a.geo.transform=function(e){return{stream:function(t){var n=new Zr(t);for(var r in e)n[r]=e[r];return n}}};function Zr(e){this.stream=e}Zr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Br(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}a.geo.projection=Jr;a.geo.projectionMutator=Qr;function Jr(e){return Qr(function(){return e})()}function Qr(e){var t,n,r,i=Xr(function(e,n){e=t(e,n);return[e[0]*o+p,g-e[1]*o]}),o=150,s=480,u=250,l=0,f=0,c=0,h=0,d=0,p,g,m=yr,v=U,y=null,_=null,x;function b(e){e=r(e[0]*Ue,e[1]*Ue);return[e[0]*o+p,g-e[1]*o]}function M(e){e=r.invert((e[0]-p)/o,(g-e[1])/o);return e&&[e[0]*Pe,e[1]*Pe]}b.stream=function(e){if(x)x.valid=false;x=Kr(m(n,i(v(e))));x.valid=true;return x};b.clipAngle=function(e){if(!arguments.length)return y;m=e==null?(y=e,yr):kr((y=+e)*Ue);return w()};b.clipExtent=function(e){if(!arguments.length)return _;_=e;v=e?Er(e[0][0],e[0][1],e[1][0],e[1][1]):U;return w()};b.scale=function(e){if(!arguments.length)return o;o=+e;return k()};b.translate=function(e){if(!arguments.length)return[s,u];s=+e[0];u=+e[1];return k()};b.center=function(e){if(!arguments.length)return[l*Pe,f*Pe];l=e[0]%360*Ue;f=e[1]%360*Ue;return k()};b.rotate=function(e){if(!arguments.length)return[c*Pe,h*Pe,d*Pe];c=e[0]%360*Ue;h=e[1]%360*Ue;d=e.length>2?e[2]%360*Ue:0;return k()};a.rebind(b,i,"precision");function k(){r=lr(n=ni(c,h,d),t);var e=t(l,f);p=s-e[0]*o;g=u+e[1]*o;return w()}function w(){if(x)x.valid=false,x=null;return b}return function(){t=e.apply(this,arguments);b.invert=t.invert&&M;return k()}}function Kr(e){return Br(e,function(t,n){e.point(t*Ue,n*Ue)})}function ei(e,t){return[e,t]}(a.geo.equirectangular=function(){return Jr(ei)}).raw=ei.invert=ei;a.geo.rotation=function(e){e=ni(e[0]%360*Ue,e[1]*Ue,e.length>2?e[2]*Ue:0);function t(t){t=e(t[0]*Ue,t[1]*Ue);return t[0]*=Pe,t[1]*=Pe,t}t.invert=function(t){t=e.invert(t[0]*Ue,t[1]*Ue);return t[0]*=Pe,t[1]*=Pe,t};return t};function ti(e,t){return[e>Ce?e-Re:e<-Ce?e+Re:e,t]}ti.invert=ei;function ni(e,t,n){return e?t||n?lr(ii(e),ai(t,n)):ii(e):t||n?ai(t,n):ti}function ri(e){return function(t,n){return t+=e,[t>Ce?t-Re:t<-Ce?t+Re:t,n]}}function ii(e){var t=ri(e);t.invert=ri(-e);return t}function ai(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),f=l*n+s*r;return[Math.atan2(u*i-f*a,s*n-l*r),qe(f*i+u*a)]}o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),f=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+f*r),qe(f*n-s*r)]};return o}a.geo.circle=function(){var e=[0,0],t,n=6,r;function i(){var t=typeof e==="function"?e.apply(this,arguments):e,n=ni(-t[0]*Ue,-t[1]*Ue,0).invert,i=[];r(null,null,1,{point:function(e,t){i.push(e=n(e,t));e[0]*=Pe,e[1]*=Pe}});return{type:"Polygon",coordinates:[i]}}i.origin=function(t){if(!arguments.length)return e;e=t;return i};i.angle=function(e){if(!arguments.length)return t;r=oi((t=+e)*Ue,n*Ue);return i};i.precision=function(e){if(!arguments.length)return n;r=oi(t*Ue,(n=+e)*Ue);return i};return i.angle(90)};function oi(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;if(i!=null){i=si(n,i);a=si(n,a);if(o>0?i<a:i>a)i+=o*Re}else{i=e+o*Re;a=e-.5*u}for(var l,f=i;o>0?f>a:f<a;f-=u){s.point((l=Hn([n,-r*Math.cos(f),-r*Math.sin(f)]))[0],l[1])}}}function si(e,t){var n=zn(t);n[0]-=e;$n(n);var r=je(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ne)%(2*Math.PI)}a.geo.distance=function(e,t){var n=(t[0]-e[0])*Ue,r=e[1]*Ue,i=t[1]*Ue,a=Math.sin(n),o=Math.cos(n),s=Math.sin(r),u=Math.cos(r),l=Math.sin(i),f=Math.cos(i),c;return Math.atan2(Math.sqrt((c=f*a)*c+(c=u*l-s*f*o)*c),s*l+u*f*o)};a.geo.graticule=function(){var e,t,n,r,i,o,s,u,l=10,f=l,c=90,h=360,d,p,g,m,v=2.5;function y(){return{type:"MultiLineString",coordinates:_()}}function _(){return a.range(Math.ceil(r/c)*c,n,c).map(g).concat(a.range(Math.ceil(u/h)*h,s,h).map(m)).concat(a.range(Math.ceil(t/l)*l,e,l).filter(function(e){return M(e%c)>Ne}).map(d)).concat(a.range(Math.ceil(o/f)*f,i,f).filter(function(e){return M(e%h)>Ne}).map(p))}y.lines=function(){return _().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(m(s).slice(1),g(n).reverse().slice(1),m(u).reverse().slice(1))]}};y.extent=function(e){if(!arguments.length)return y.minorExtent();return y.majorExtent(e).minorExtent(e)};y.majorExtent=function(e){if(!arguments.length)return[[r,u],[n,s]];r=+e[0][0],n=+e[1][0];u=+e[0][1],s=+e[1][1];if(r>n)e=r,r=n,n=e;if(u>s)e=u,u=s,s=e;return y.precision(v)};y.minorExtent=function(n){if(!arguments.length)return[[t,o],[e,i]];t=+n[0][0],e=+n[1][0];o=+n[0][1],i=+n[1][1];if(t>e)n=t,t=e,e=n;if(o>i)n=o,o=i,i=n;return y.precision(v)};y.step=function(e){if(!arguments.length)return y.minorStep();return y.majorStep(e).minorStep(e)};y.majorStep=function(e){if(!arguments.length)return[c,h];c=+e[0],h=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[l,f];l=+e[0],f=+e[1];return y};y.precision=function(a){if(!arguments.length)return v;v=+a;d=ui(o,i,90);p=li(t,e,v);g=ui(u,s,90);m=li(r,n,v);return y};return y.majorExtent([[-180,-90+Ne],[180,90-Ne]]).minorExtent([[-180,-80-Ne],[180,80+Ne]])};function ui(e,t,n){var r=a.range(e,t-Ne,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function li(e,t,n){var r=a.range(e,t-Ne,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function fi(e){return e.source}function ci(e){return e.target}a.geo.greatArc=function(){var e=fi,t,n=ci,r;function i(){return{type:"LineString",coordinates:[t||e.apply(this,arguments),r||n.apply(this,arguments)]}}i.distance=function(){return a.geo.distance(t||e.apply(this,arguments),r||n.apply(this,arguments))};i.source=function(n){if(!arguments.length)return e;e=n,t=typeof n==="function"?null:n;return i};i.target=function(e){if(!arguments.length)return n;n=e,r=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};a.geo.interpolate=function(e,t){return hi(e[0]*Ue,e[1]*Ue,t[0]*Ue,t[1]*Ue)};function hi(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),f=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(We(r-t)+i*o*We(n-e))),d=1/Math.sin(h);var p=h?function(e){var t=Math.sin(e*=h)*d,n=Math.sin(h-e)*d,r=n*u+t*f,i=n*l+t*c,o=n*a+t*s;return[Math.atan2(i,r)*Pe,Math.atan2(o,Math.sqrt(r*r+i*i))*Pe]}:function(){return[e*Pe,t*Pe]};p.distance=h;return p}a.geo.length=function(e){di=0;a.geo.stream(e,pi);return di};var di;var pi={sphere:j,point:j,lineStart:gi,lineEnd:j,polygonStart:j,polygonEnd:j};function gi(){var e,t,n;pi.point=function(i,a){e=i*Ue,t=Math.sin(a*=Ue),n=Math.cos(a);pi.point=r};pi.lineEnd=function(){pi.point=pi.lineEnd=j};function r(r,i){var a=Math.sin(i*=Ue),o=Math.cos(i),s=M((r*=Ue)-e),u=Math.cos(s);di+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u);e=r,t=a,n=o}}function mi(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]};return n}var vi=mi(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(a.geo.azimuthalEqualArea=function(){return Jr(vi)}).raw=vi;var yi=mi(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},U);(a.geo.azimuthalEquidistant=function(){return Jr(yi)}).raw=yi;function _i(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ce/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i)return Mi;function o(e,t){if(a>0){if(t<-De+Ne)t=-De+Ne}else{if(t>De-Ne)t=De-Ne}var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}o.invert=function(e,t){var n=a-t,r=ze(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-De]};return o}(a.geo.conicConformal=function(){return Ar(_i)}).raw=_i;function xi(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(M(r)<Ne)return ei;function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-ze(r)*Math.sqrt(e*e+n*n)]};return a}(a.geo.conicEquidistant=function(){return Ar(xi)}).raw=xi;var bi=mi(function(e){return 1/e},Math.atan);(a.geo.gnomonic=function(){return Jr(bi)}).raw=bi;function Mi(e,t){return[e,Math.log(Math.tan(Ce/4+t/2))]}Mi.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-De]};function ki(e){var t=Jr(e),n=t.scale,r=t.translate,i=t.clipExtent,a;t.scale=function(){var e=n.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.translate=function(){var e=r.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(a=e==null){var s=Ce*n(),u=r();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else if(a){o=null}return o};return t.clipExtent(null)}(a.geo.mercator=function(){return ki(Mi)}).raw=Mi;var wi=mi(function(){return 1},Math.asin);(a.geo.orthographic=function(){return Jr(wi)}).raw=wi;var Si=mi(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(a.geo.stereographic=function(){return Jr(Si)}).raw=Si;function Ei(e,t){return[Math.log(Math.tan(Ce/4+t/2)),-e]}Ei.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-De]};(a.geo.transverseMercator=function(){var e=ki(Ei),t=e.center,n=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])};return n([0,0,90])}).raw=Ei;a.geom={};function Ai(e){return e[0]}function Ti(e){return e[1]}a.geom.hull=function(e){var t=Ai,n=Ti;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r=At(t),i=At(n),a,o=e.length,s=[],u=[];for(a=0;a<o;a++){s.push([+r.call(this,e[a],a),+i.call(this,e[a],a),a])}s.sort(Ni);for(a=0;a<o;a++)u.push([s[a][0],-s[a][1]]);var l=Oi(s),f=Oi(u);var c=f[0]===l[0],h=f[f.length-1]===l[l.length-1],d=[];for(a=l.length-1;a>=0;--a)d.push(e[s[l[a]][2]]);for(a=+c;a<f.length-h;++a)d.push(e[s[f[a]][2]]);return d}r.x=function(e){return arguments.length?(t=e,r):t};r.y=function(e){return arguments.length?(n=e,r):n};return r};function Oi(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&Fe(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function Ni(e,t){return e[0]-t[0]||e[1]-t[1]}a.geom.polygon=function(e){X(e,Li);return e};var Li=a.geom.polygon.prototype=[];Li.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t){n=r;r=this[e];i+=n[1]*r[0]-n[0]*r[1]}return i*.5};Li.centroid=function(e){var t=-1,n=this.length,r=0,i=0,a,o=this[n-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<n){a=o;o=this[t];s=a[0]*o[1]-o[0]*a[1];r+=(a[0]+o[0])*s;i+=(a[1]+o[1])*s}return[r*e,i*e]};Li.clip=function(e){var t,n=Ii(e),r=-1,i=this.length-Ii(this),a,o,s=this[i-1],u,l,f;while(++r<i){t=e.slice();e.length=0;u=this[r];l=t[(o=t.length-n)-1];a=-1;while(++a<o){f=t[a];if(Ci(f,s,u)){if(!Ci(l,s,u)){e.push(Ri(l,f,s,u))}e.push(f)}else if(Ci(l,s,u)){e.push(Ri(l,f,s,u))}l=f}if(n)e.push(e[0]);s=u}return e};function Ci(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ri(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],f=t[1]-u,c=r[1]-l,h=(s*(u-l)-c*(i-a))/(c*o-s*f);return[i+h*o,u+h*f]}function Ii(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}var Di,Ui,Pi,zi=[],Fi,ji,qi=[];function Yi(){la(this);this.edge=this.site=this.circle=null}function $i(e){var t=zi.pop()||new Yi;t.site=e;return t}function Hi(e){ea(e);Pi.remove(e);zi.push(e);la(e)}function Wi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Hi(e);var u=a;while(u.circle&&M(n-u.circle.x)<Ne&&M(r-u.circle.cy)<Ne){a=u.P;s.unshift(u);Hi(u);u=a}s.unshift(u);ea(u);var l=o;while(l.circle&&M(n-l.circle.x)<Ne&&M(r-l.circle.cy)<Ne){o=l.N;s.push(l);Hi(l);l=o}s.push(l);ea(l);var f=s.length,c;for(c=1;c<f;++c){l=s[c];u=s[c-1];oa(l.edge,u.site,l.site,i)}u=s[0];l=s[f-1];l.edge=ia(u.site,l.site,null,i);Ki(u);Ki(l)}function Vi(e){var t=e.x,n=e.y,r,i,a,o,s=Pi._;while(s){a=Xi(s,n)-t;if(a>Ne)s=s.L;else{o=t-Gi(s,n);if(o>Ne){if(!s.R){r=s;break}s=s.R}else{if(a>-Ne){r=s.P;i=s}else if(o>-Ne){r=s;i=s.N}else{r=i=s}break}}}var u=$i(e);Pi.insert(r,u);if(!r&&!i)return;if(r===i){ea(r);i=$i(r.site);Pi.insert(u,i);u.edge=i.edge=ia(r.site,u.site);Ki(r);Ki(i);return}if(!i){u.edge=ia(r.site,u.site);return}ea(r);ea(i);var l=r.site,f=l.x,c=l.y,h=e.x-f,d=e.y-c,p=i.site,g=p.x-f,m=p.y-c,v=2*(h*m-d*g),y=h*h+d*d,_=g*g+m*m,x={x:(m*y-d*_)/v+f,y:(h*_-g*y)/v+c};oa(i.edge,l,p,x);u.edge=ia(l,e,null,x);i.edge=ia(e,p,null,x);Ki(r);Ki(i)}function Xi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var s=n.x,u=n.y,l=u-t;if(!l)return s;var f=s-r,c=1/a-1/l,h=f/l;if(c)return(-h+Math.sqrt(h*h-2*c*(f*f/(-2*l)-u+l/2+i-a/2)))/c+r;return(r+s)/2}function Gi(e,t){var n=e.N;if(n)return Xi(n,t);var r=e.site;return r.y===t?r.x:Infinity}function Zi(e){this.site=e;this.edges=[]}Zi.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--){n=e[t].edge;if(!n.b||!n.a)e.splice(t,1)}e.sort(Ji);return e.length};function Bi(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],a,o,s,u,l=Ui,f=l.length,c,h,d,p,g,m;while(f--){c=l[f];if(!c||!c.prepare())continue;d=c.edges;p=d.length;h=0;while(h<p){m=d[h].end(),s=m.x,u=m.y;g=d[++h%p].start(),a=g.x,o=g.y;if(M(s-a)>Ne||M(u-o)>Ne){d.splice(h,0,new sa(aa(c.site,m,M(s-t)<Ne&&i-u>Ne?{x:t,y:M(a-t)<Ne?o:i}:M(u-i)<Ne&&n-s>Ne?{x:M(o-i)<Ne?a:n,y:i}:M(s-n)<Ne&&u-r>Ne?{x:n,y:M(a-n)<Ne?o:r}:M(u-r)<Ne&&s-t>Ne?{x:M(o-r)<Ne?a:t,y:r}:null),c.site,null));++p}}}}function Ji(e,t){return t.angle-e.angle}function Qi(){la(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ki(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,a=n.site;if(r===a)return;var o=i.x,s=i.y,u=r.x-o,l=r.y-s,f=a.x-o,c=a.y-s;var h=2*(u*c-l*f);if(h>=-Le)return;var d=u*u+l*l,p=f*f+c*c,g=(c*d-l*p)/h,m=(u*p-f*d)/h,c=m+s;var v=qi.pop()||new Qi;v.arc=e;v.site=i;v.x=g+o;v.y=c+Math.sqrt(g*g+m*m);v.cy=c;e.circle=v;var y=null,_=ji._;while(_){if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(_.L)_=_.L;else{y=_.P;break}}else{if(_.R)_=_.R;else{y=_;break}}}ji.insert(y,v);if(!y)Fi=v}function ea(e){var t=e.circle;if(t){if(!t.P)Fi=t.N;ji.remove(t);qi.push(t);la(t);e.circle=null}}function ta(e){var t=Di,n=wr(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!na(i,e)||!n(i)||M(i.a.x-i.b.x)<Ne&&M(i.a.y-i.b.y)<Ne){i.a=i.b=null;t.splice(r,1)}}}function na(e,t){var n=e.b;if(n)return true;var r=e.a,i=t[0][0],a=t[1][0],o=t[0][1],s=t[1][1],u=e.l,l=e.r,f=u.x,c=u.y,h=l.x,d=l.y,p=(f+h)/2,g=(c+d)/2,m,v;if(d===c){if(p<i||p>=a)return;if(f>h){if(!r)r={x:p,y:o};else if(r.y>=s)return;n={x:p,y:s}}else{if(!r)r={x:p,y:s};else if(r.y<o)return;n={x:p,y:o}}}else{m=(f-h)/(d-c);v=g-m*p;if(m<-1||m>1){if(f>h){if(!r)r={x:(o-v)/m,y:o};else if(r.y>=s)return;n={x:(s-v)/m,y:s}}else{if(!r)r={x:(s-v)/m,y:s};else if(r.y<o)return;n={x:(o-v)/m,y:o}}}else{if(c<d){if(!r)r={x:i,y:m*i+v};else if(r.x>=a)return;n={x:a,y:m*a+v}}else{if(!r)r={x:a,y:m*a+v};else if(r.x<i)return;n={x:i,y:m*i+v}}}}e.a=r;e.b=n;return true}function ra(e,t){this.l=e;this.r=t;this.a=this.b=null}function ia(e,t,n,r){var i=new ra(e,t);Di.push(i);if(n)oa(i,e,t,n);if(r)oa(i,t,e,r);Ui[e.i].edges.push(new sa(i,e,t));Ui[t.i].edges.push(new sa(i,t,e));return i}function aa(e,t,n){var r=new ra(e,null);r.a=t;r.b=n;Di.push(r);return r}function oa(e,t,n,r){if(!e.a&&!e.b){e.a=r;e.l=t;e.r=n}else if(e.l===n){e.b=r}else{e.a=r}}function sa(e,t,n){var r=e.a,i=e.b;this.edge=e;this.site=t;this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}sa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ua(){this._=null}function la(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ua.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}n=e}else if(this._){e=ha(this._);t.P=null;t.N=e;e.P=e.L=t;n=e}else{t.P=t.N=null;this._=t;n=null}t.L=t.R=null;t.U=n;t.C=true;e=t;while(n&&n.C){r=n.U;if(n===r.L){i=r.R;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.R){fa(this,n);e=n;n=e.U}n.C=false;r.C=true;ca(this,r)}}else{i=r.L;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.L){ca(this,n);e=n;n=e.U}n.C=false;r.C=true;fa(this,r)}}n=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,a,o;if(!r)a=i;else if(!i)a=r;else a=ha(i);if(t){if(t.L===e)t.L=a;else t.R=a}else{this._=a}if(r&&i){o=a.C;a.C=e.C;a.L=r;r.U=a;if(a!==i){t=a.U;a.U=e.U;e=a.R;t.L=e;a.R=i;i.U=a}else{a.U=t;t=a;e=a.R}}else{o=e.C;e=a}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){n=t.R;if(n.C){n.C=false;t.C=true;fa(this,t);n=t.R}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C){n.L.C=false;n.C=true;ca(this,n);n=t.R}n.C=t.C;t.C=n.R.C=false;fa(this,t);e=this._;break}}else{n=t.L;if(n.C){n.C=false;t.C=true;ca(this,t);n=t.L}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C){n.R.C=false;n.C=true;fa(this,n);n=t.L}n.C=t.C;t.C=n.L.C=false;ca(this,t);e=this._;break}}n.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function fa(e,t){var n=t,r=t.R,i=n.U;if(i){if(i.L===n)i.L=r;else i.R=r}else{e._=r}r.U=i;n.U=r;n.R=r.L;if(n.R)n.R.U=n;r.L=n}function ca(e,t){var n=t,r=t.L,i=n.U;if(i){if(i.L===n)i.L=r;else i.R=r}else{e._=r}r.U=i;n.U=r;n.L=r.R;if(n.L)n.L.U=n;r.R=n}function ha(e){while(e.L)e=e.L;return e}function da(e,t){var n=e.sort(pa).pop(),r,i,a;Di=[];Ui=new Array(e.length);Pi=new ua;ji=new ua;while(true){a=Fi;if(n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x)){if(n.x!==r||n.y!==i){Ui[n.i]=new Zi(n);Vi(n);r=n.x,i=n.y}n=e.pop()}else if(a){Wi(a.arc)}else{break}}if(t)ta(t),Bi(t);var o={cells:Ui,edges:Di};Pi=ji=Di=Ui=null;return o}function pa(e,t){return t.y-e.y||t.x-e.x}a.geom.voronoi=function(e){var t=Ai,n=Ti,r=t,i=n,a=ga;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];da(s(e),a).cells.forEach(function(a,s){var u=a.edges,l=a.site,f=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];f.point=e[s]});return t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/Ne)*Ne,y:Math.round(i(e,t)/Ne)*Ne,i:t}})}o.links=function(e){return da(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];da(s(e)).cells.forEach(function(n,r){var i=n.site,a=n.edges.sort(Ji),o=-1,s=a.length,u,l,f=a[s-1].edge,c=f.l===i?f.r:f.l;while(++o<s){u=f;l=c;f=a[o].edge;c=f.l===i?f.r:f.l;if(r<l.i&&r<c.i&&ma(i,l,c)<0){t.push([e[r],e[l.i],e[c.i]])}}});return t};o.x=function(e){return arguments.length?(r=At(t=e),o):t};o.y=function(e){return arguments.length?(i=At(n=e),o):n};o.clipExtent=function(e){if(!arguments.length)return a===ga?null:a;a=e==null?ga:e;return o};o.size=function(e){if(!arguments.length)return a===ga?null:a&&a[1];return o.clipExtent(e&&[[0,0],e])};return o};var ga=[[-1e6,-1e6],[1e6,1e6]];function ma(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}a.geom.delaunay=function(e){return a.geom.voronoi().triangles(e)};a.geom.quadtree=function(e,t,n,r,i){var a=Ai,o=Ti,s;if(s=arguments.length){a=va;o=ya;if(s===3){i=n;r=t;n=t=0}return u(e)}function u(e){var u,l=At(a),f=At(o),c,h,d,p,g,m,v,y;if(t!=null){g=t,m=n,v=r,y=i}else{v=y=-(g=m=Infinity);c=[],h=[];p=e.length;if(s)for(d=0;d<p;++d){u=e[d];if(u.x<g)g=u.x;if(u.y<m)m=u.y;if(u.x>v)v=u.x;if(u.y>y)y=u.y;c.push(u.x);h.push(u.y)}else for(d=0;d<p;++d){var _=+l(u=e[d],d),x=+f(u,d);if(_<g)g=_;if(x<m)m=x;if(_>v)v=_;if(x>y)y=x;c.push(_);h.push(x)}}var b=v-g,k=y-m;if(b>k)y=m+b;else v=g+k;function w(e,t,n,r,i,a,o,s){if(isNaN(n)||isNaN(r))return;if(e.leaf){var u=e.x,l=e.y;if(u!=null){if(M(u-n)+M(l-r)<.01){S(e,t,n,r,i,a,o,s)}else{var f=e.point;e.x=e.y=e.point=null;S(e,f,u,l,i,a,o,s);S(e,t,n,r,i,a,o,s)}}else{e.x=n,e.y=r,e.point=t}}else{S(e,t,n,r,i,a,o,s)}}function S(e,t,n,r,i,a,o,s){var u=(i+o)*.5,l=(a+s)*.5,f=n>=u,c=r>=l,h=c<<1|f;e.leaf=false;e=e.nodes[h]||(e.nodes[h]=_a());if(f)i=u;else o=u;if(c)a=l;else s=l;w(e,t,n,r,i,a,o,s)}var E=_a();E.add=function(e){w(E,e,+l(e,++d),+f(e,d),g,m,v,y)};E.visit=function(e){xa(e,E,g,m,v,y)};E.find=function(e){return ba(E,e[0],e[1],g,m,v,y)};d=-1;if(t==null){while(++d<p){w(E,e[d],c[d],h[d],g,m,v,y)}--d}else e.forEach(E.add);c=h=e=u=null;return E}u.x=function(e){return arguments.length?(a=e,u):a};u.y=function(e){return arguments.length?(o=e,u):o};u.extent=function(e){if(!arguments.length)return t==null?null:[[t,n],[r,i]];if(e==null)t=n=r=i=null;else t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1];return u};u.size=function(e){if(!arguments.length)return t==null?null:[r-t,i-n];if(e==null)t=n=r=i=null;else t=n=0,r=+e[0],i=+e[1];return u};return u};function va(e){return e.x}function ya(e){return e.y}function _a(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function xa(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=(n+i)*.5,s=(r+a)*.5,u=t.nodes;if(u[0])xa(e,u[0],n,r,o,s);if(u[1])xa(e,u[1],o,r,i,s);if(u[2])xa(e,u[2],n,s,o,a);if(u[3])xa(e,u[3],o,s,i,a)}}function ba(e,t,n,r,i,a,o){var s=Infinity,u;(function e(l,f,c,h,d){if(f>a||c>o||h<r||d<i)return;if(p=l.point){var p,g=t-l.x,m=n-l.y,v=g*g+m*m;if(v<s){var y=Math.sqrt(s=v);r=t-y,i=n-y;a=t+y,o=n+y;u=p}}var _=l.nodes,x=(f+h)*.5,b=(c+d)*.5,M=t>=x,k=n>=b;for(var w=k<<1|M,S=w+4;w<S;++w){if(l=_[w&3])switch(w&3){case 0:e(l,f,c,x,b);break;case 1:e(l,x,c,h,b);break;case 2:e(l,f,b,x,d);break;case 3:e(l,x,b,h,d);break}}})(e,r,i,a,o);return u}a.interpolateRgb=Ma;function Ma(e,t){e=a.rgb(e);t=a.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,s=t.g-r,u=t.b-i;return function(e){return"#"+xt(Math.round(n+o*e))+xt(Math.round(r+s*e))+xt(Math.round(i+u*e))}}a.interpolateObject=ka;function ka(e,t){var n={},r={},i;for(i in e){if(i in t){n[i]=Ta(e[i],t[i])}else{r[i]=e[i]}}for(i in t){if(!(i in e)){r[i]=t[i]}}return function(e){for(i in n)r[i]=n[i](e);return r}}a.interpolateNumber=wa;function wa(e,t){e=+e,t=+t;return function(n){return e*(1-n)+t*n}}a.interpolateString=Sa;function Sa(e,t){var n=Ea.lastIndex=Aa.lastIndex=0,r,i,a,o=-1,s=[],u=[];e=e+"",t=t+"";while((r=Ea.exec(e))&&(i=Aa.exec(t))){if((a=i.index)>n){a=t.slice(n,a);if(s[o])s[o]+=a;else s[++o]=a}if((r=r[0])===(i=i[0])){if(s[o])s[o]+=i;else s[++o]=i}else{s[++o]=null;u.push({i:o,x:wa(r,i)})}n=Aa.lastIndex}if(n<t.length){a=t.slice(n);if(s[o])s[o]+=a;else s[++o]=a}return s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n=0,r;n<t;++n)s[(r=u[n]).i]=r.x(e);return s.join("")})}var Ea=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Aa=new RegExp(Ea.source,"g");a.interpolate=Ta;function Ta(e,t){var n=a.interpolators.length,r;while(--n>=0&&!(r=a.interpolators[n](e,t)));return r}a.interpolators=[function(e,t){var n=typeof t;return(n==="string"?Et.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Ma:Sa:t instanceof Qe?Ma:Array.isArray(t)?Oa:n==="object"&&isNaN(t)?ka:wa)(e,t)}];a.interpolateArray=Oa;function Oa(e,t){var n=[],r=[],i=e.length,a=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)n.push(Ta(e[s],t[s]));for(;s<i;++s)r[s]=e[s];for(;s<a;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}var Na=function(){return U};var La=a.map({linear:Na,poly:Fa,quad:function(){return Ua},cubic:function(){return Pa},sin:function(){return ja},exp:function(){return qa},circle:function(){return Ya},elastic:$a,back:Ha,bounce:function(){return Wa}});var Ca=a.map({in:U,out:Ia,"in-out":Da,"out-in":function(e){return Da(Ia(e))}});a.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";n=La.get(n)||Na;r=Ca.get(r)||U;return Ra(r(n.apply(null,o.call(arguments,1))))};function Ra(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Ia(e){return function(t){return 1-e(1-t)}}function Da(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ua(e){return e*e}function Pa(e){return e*e*e}function za(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Fa(e){return function(t){return Math.pow(t,e)}}function ja(e){return 1-Math.cos(e*De)}function qa(e){return Math.pow(2,10*(e-1))}function Ya(e){return 1-Math.sqrt(1-e*e)}function $a(e,t){var n;if(arguments.length<2)t=.45;if(arguments.length)n=t/Re*Math.asin(1/e);else e=1,n=t/4;return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Re/t)}}function Ha(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Wa(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}a.interpolateHcl=Va;function Va(e,t){e=a.hcl(e);t=a.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,s=t.c-r,u=t.l-i;if(isNaN(s))s=0,r=isNaN(r)?t.c:r;if(isNaN(o))o=0,n=isNaN(n)?t.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return it(n+o*e,r+s*e,i+u*e)+""}}a.interpolateHsl=Xa;function Xa(e,t){e=a.hsl(e);t=a.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,s=t.s-r,u=t.l-i;if(isNaN(s))s=0,r=isNaN(r)?t.s:r;if(isNaN(o))o=0,n=isNaN(n)?t.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return tt(n+o*e,r+s*e,i+u*e)+""}}a.interpolateLab=Ga;function Ga(e,t){e=a.lab(e);t=a.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,s=t.a-r,u=t.b-i;return function(e){return ct(n+o*e,r+s*e,i+u*e)+""}}a.interpolateRound=Za;function Za(e,t){t-=e;return function(n){return Math.round(e+t*n)}}a.transform=function(e){var t=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(e){if(e!=null){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Ba(n?n.matrix:eo)})(e)};function Ba(e){var t=[e.a,e.b],n=[e.c,e.d],r=Qa(t),i=Ja(t,n),a=Qa(Ka(n,t,-i))||0;if(t[0]*n[1]<n[0]*t[1]){t[0]*=-1;t[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Pe;this.translate=[e.e,e.f];this.scale=[r,a];this.skew=a?Math.atan2(i,a)*Pe:0}Ba.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Ja(e,t){return e[0]*t[0]+e[1]*t[1]}function Qa(e){var t=Math.sqrt(Ja(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Ka(e,t,n){e[0]+=n*t[0];e[1]+=n*t[1];return e}var eo={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=oo;function to(e){return e.length?e.pop()+",":""}function no(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:wa(e[0],t[0])},{i:i-2,x:wa(e[1],t[1])})}else if(t[0]||t[1]){n.push("translate("+t+")")}}function ro(e,t,n,r){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;r.push({i:n.push(to(n)+"rotate(",null,")")-2,x:wa(e,t)})}else if(t){n.push(to(n)+"rotate("+t+")")}}function io(e,t,n,r){if(e!==t){r.push({i:n.push(to(n)+"skewX(",null,")")-2,x:wa(e,t)})}else if(t){n.push(to(n)+"skewX("+t+")")}}function ao(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(to(n)+"scale(",null,",",null,")");r.push({i:i-4,x:wa(e[0],t[0])},{i:i-2,x:wa(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){n.push(to(n)+"scale("+t+")")}}function oo(e,t){var n=[],r=[];e=a.transform(e),t=a.transform(t);no(e.translate,t.translate,n,r);ro(e.rotate,t.rotate,n,r);io(e.skew,t.skew,n,r);ao(e.scale,t.scale,n,r);e=t=null;return function(e){var t=-1,i=r.length,a;while(++t<i)n[(a=r[t]).i]=a.x(e);return n.join("")}}function so(e,t){t=(t-=e=+e)||1/t;return function(n){return(n-e)/t}}function uo(e,t){t=(t-=e=+e)||1/t;return function(n){return Math.max(0,Math.min(1,(n-e)/t))}}a.layout={};a.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(lo(e[n]));return t}};function lo(e){var t=e.source,n=e.target,r=co(t,n),i=[t];while(t!==r){t=t.parent;i.push(t)}var a=i.length;while(n!==r){i.splice(a,0,n);n=n.parent}return i}function fo(e){var t=[],n=e.parent;while(n!=null){t.push(e);e=n;n=n.parent}t.push(e);return t}function co(e,t){if(e===t)return e;var n=fo(e),r=fo(t),i=n.pop(),a=r.pop(),o=null;while(i===a){o=i;i=n.pop();a=r.pop()}return o}a.layout.chord=function(){var e={},t,n,r,i,o=0,s,u,l;function f(){var e={},f=[],h=a.range(i),d=[],p,g,m,v,y;t=[];n=[];p=0,v=-1;while(++v<i){g=0,y=-1;while(++y<i){g+=r[v][y]}f.push(g);d.push(a.range(i));p+=g}if(s){h.sort(function(e,t){return s(f[e],f[t])})}if(u){d.forEach(function(e,t){e.sort(function(e,n){return u(r[t][e],r[t][n])})})}p=(Re-o*i)/p;g=0,v=-1;while(++v<i){m=g,y=-1;while(++y<i){var _=h[v],x=d[_][y],b=r[_][x],M=g,k=g+=b*p;e[_+"-"+x]={index:_,subindex:x,startAngle:M,endAngle:k,value:b}}n[_]={index:_,startAngle:m,endAngle:g,value:f[_]};g+=o}v=-1;while(++v<i){y=v-1;while(++y<i){var w=e[v+"-"+y],S=e[y+"-"+v];if(w.value||S.value){t.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}}}if(l)c()}function c(){t.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(a){if(!arguments.length)return r;i=(r=a)&&r.length;t=n=null;return e};e.padding=function(r){if(!arguments.length)return o;o=r;t=n=null;return e};e.sortGroups=function(r){if(!arguments.length)return s;s=r;t=n=null;return e};e.sortSubgroups=function(n){if(!arguments.length)return u;u=n;t=null;return e};e.sortChords=function(n){if(!arguments.length)return l;l=n;if(t)c();return e};e.chords=function(){if(!t)f();return t};e.groups=function(){if(!n)f();return n};return e};a.layout.force=function(){var e={},t=a.dispatch("start","tick","end"),n,r=[1,1],i,o,s=.9,u=yo,l=_o,f=-30,c=xo,h=.1,d=.64,p=[],g=[],m,v,y;function _(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/d<u){if(u<c){var l=t.charge/u;e.px-=a*l;e.py-=o*l}return true}if(t.point&&u&&u<c){var l=t.pointCharge/u;e.px-=a*l;e.py-=o*l}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){n=null;t.end({type:"end",alpha:o=0});return true}var e=p.length,i=g.length,u,l,c,d,x,b,M,k,w;for(l=0;l<i;++l){c=g[l];d=c.source;x=c.target;k=x.x-d.x;w=x.y-d.y;if(b=k*k+w*w){b=o*v[l]*((b=Math.sqrt(b))-m[l])/b;k*=b;w*=b;x.x-=k*(M=d.weight+x.weight?d.weight/(d.weight+x.weight):.5);x.y-=w*M;d.x+=k*(M=1-M);d.y+=w*M}}if(M=o*h){k=r[0]/2;w=r[1]/2;l=-1;if(M)while(++l<e){c=p[l];c.x+=(k-c.x)*M;c.y+=(w-c.y)*M}}if(f){vo(u=a.geom.quadtree(p),o,y);l=-1;while(++l<e){if(!(c=p[l]).fixed){u.visit(_(c))}}}l=-1;while(++l<e){c=p[l];if(c.fixed){c.x=c.px;c.y=c.py}else{c.x-=(c.px-(c.px=c.x))*s;c.y-=(c.py-(c.py=c.y))*s}}t.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length)return p;p=t;return e};e.links=function(t){if(!arguments.length)return g;g=t;return e};e.size=function(t){if(!arguments.length)return r;r=t;return e};e.linkDistance=function(t){if(!arguments.length)return u;u=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length)return l;l=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length)return s;s=+t;return e};e.charge=function(t){if(!arguments.length)return f;f=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(c);c=t*t;return e};e.gravity=function(t){if(!arguments.length)return h;h=+t;return e};e.theta=function(t){if(!arguments.length)return Math.sqrt(d);d=t*t;return e};e.alpha=function(r){if(!arguments.length)return o;r=+r;if(o){if(r>0){o=r}else{n.c=null,n.t=NaN,n=null;t.end({type:"end",alpha:o=0})}}else if(r>0){t.start({type:"start",alpha:o=r});n=Pt(e.tick)}return e};e.start=function(){var t,n=p.length,i=g.length,a=r[0],o=r[1],s,c;for(t=0;t<n;++t){(c=p[t]).index=t;c.weight=0}for(t=0;t<i;++t){c=g[t];if(typeof c.source=="number")c.source=p[c.source];if(typeof c.target=="number")c.target=p[c.target];++c.source.weight;++c.target.weight}for(t=0;t<n;++t){c=p[t];if(isNaN(c.x))c.x=h("x",a);if(isNaN(c.y))c.y=h("y",o);if(isNaN(c.px))c.px=c.x;if(isNaN(c.py))c.py=c.y}m=[];if(typeof u==="function")for(t=0;t<i;++t)m[t]=+u.call(this,g[t],t);else for(t=0;t<i;++t)m[t]=u;v=[];if(typeof l==="function")for(t=0;t<i;++t)v[t]=+l.call(this,g[t],t);else for(t=0;t<i;++t)v[t]=l;y=[];if(typeof f==="function")for(t=0;t<n;++t)y[t]=+f.call(this,p[t],t);else for(t=0;t<n;++t)y[t]=f;function h(e,r){if(!s){s=new Array(n);for(u=0;u<n;++u){s[u]=[]}for(u=0;u<i;++u){var a=g[u];s[a.source.index].push(a.target);s[a.target.index].push(a.source)}}var o=s[t],u=-1,l=o.length,f;while(++u<l)if(!isNaN(f=o[u][e]))return f;return Math.random()*r}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!i)i=a.behavior.drag().origin(U).on("dragstart.force",ho).on("drag.force",x).on("dragend.force",po);if(!arguments.length)return i;this.on("mouseover.force",go).on("mouseout.force",mo).call(i)};function x(t){t.px=a.event.x,t.py=a.event.y;e.resume()}return a.rebind(e,t,"on")};function ho(e){e.fixed|=2}function po(e){e.fixed&=~6}function go(e){e.fixed|=4;e.px=e.x,e.py=e.y}function mo(e){e.fixed&=~4}function vo(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var a=e.nodes,o=a.length,s=-1,u;while(++s<o){u=a[s];if(u==null)continue;vo(u,t,n);e.charge+=u.charge;r+=u.charge*u.cx;i+=u.charge*u.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var l=t*n[e.point.index];e.charge+=e.pointCharge=l;r+=l*e.point.x;i+=l*e.point.y}e.cx=r/e.charge;e.cy=i/e.charge}var yo=20,_o=1,xo=Infinity;a.layout.hierarchy=function(){var e=Eo,t=wo,n=So;function r(i){var a=[i],o=[],s;i.depth=0;while((s=a.pop())!=null){o.push(s);if((l=t.call(r,s,s.depth))&&(u=l.length)){var u,l,f;while(--u>=0){a.push(f=l[u]);f.parent=s;f.depth=s.depth+1}if(n)s.value=0;s.children=l}else{if(n)s.value=+n.call(r,s,s.depth)||0;delete s.children}}ko(i,function(t){var r,i;if(e&&(r=t.children))r.sort(e);if(n&&(i=t.parent))i.value+=t.value});return o}r.sort=function(t){if(!arguments.length)return e;e=t;return r};r.children=function(e){if(!arguments.length)return t;t=e;return r};r.value=function(e){if(!arguments.length)return n;n=e;return r};r.revalue=function(e){if(n){Mo(e,function(e){if(e.children)e.value=0});ko(e,function(e){var t;if(!e.children)e.value=+n.call(r,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return r};function bo(e,t){a.rebind(e,t,"sort","children","value");e.nodes=e;e.links=Ao;return e}function Mo(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0)n.push(i[r])}}}function ko(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(a=o.length)){var i=-1,a,o;while(++i<a)n.push(o[i])}}while((e=r.pop())!=null){t(e)}}function wo(e){return e.children}function So(e){return e.value}function Eo(e,t){return t.value-e.value}function Ao(e){return a.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}a.layout.partition=function(){var e=a.layout.hierarchy(),t=[1,1];function n(e,t,r,i){var a=e.children;e.x=t;e.y=e.depth*i;e.dx=r;e.dy=i;if(a&&(s=a.length)){var o=-1,s,u,l;r=e.value?r/e.value:0;while(++o<s){n(u=a[o],t,l=u.value*r,i);t+=l}}}function r(e){var t=e.children,n=0;if(t&&(a=t.length)){var i=-1,a;while(++i<a)n=Math.max(n,r(t[i]))}return 1+n}function i(i,a){var o=e.call(this,i,a);n(o[0],0,t[0],t[1]/r(o[0]));return o}i.size=function(e){if(!arguments.length)return t;t=e;return i};return bo(i,e)};a.layout.pie=function(){var e=Number,t=To,n=0,r=Re,i=0;function o(s){var u=s.length,l=s.map(function(t,n){return+e.call(o,t,n)}),f=+(typeof n==="function"?n.apply(this,arguments):n),c=(typeof r==="function"?r.apply(this,arguments):r)-f,h=Math.min(Math.abs(c)/u,+(typeof i==="function"?i.apply(this,arguments):i)),d=h*(c<0?-1:1),p=a.sum(l),g=p?(c-u*d)/p:0,m=a.range(u),v=[],y;if(t!=null)m.sort(t===To?function(e,t){return l[t]-l[e]}:function(e,n){return t(s[e],s[n])});m.forEach(function(e){v[e]={data:s[e],value:y=l[e],startAngle:f,endAngle:f+=y*g+d,padAngle:h}});return v}o.value=function(t){if(!arguments.length)return e;e=t;return o};o.sort=function(e){if(!arguments.length)return t;t=e;return o};o.startAngle=function(e){if(!arguments.length)return n;n=e;return o};o.endAngle=function(e){if(!arguments.length)return r;r=e;return o};o.padAngle=function(e){if(!arguments.length)return i;i=e;return o};return o};var To={};a.layout.stack=function(){var e=U,t=Io,n=Do,r=Lo,i=Oo,o=No;function s(u,l){if(!(g=u.length))return u;var f=u.map(function(t,n){return e.call(s,t,n)});var c=f.map(function(e){return e.map(function(e,t){return[i.call(s,e,t),o.call(s,e,t)]})});var h=t.call(s,c,l);f=a.permute(f,h);c=a.permute(c,h);var d=n.call(s,c,l);var p=f[0].length,g,m,v,y;for(v=0;v<p;++v){r.call(s,f[0][v],y=d[v],c[0][v][1]);for(m=1;m<g;++m){r.call(s,f[m][v],y+=c[m-1][v][1],c[m][v][1])}}return u}s.values=function(t){if(!arguments.length)return e;e=t;return s};s.order=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:Co.get(e)||Io;return s};s.offset=function(e){if(!arguments.length)return n;n=typeof e==="function"?e:Ro.get(e)||Do;return s};s.x=function(e){if(!arguments.length)return i;i=e;return s};s.y=function(e){if(!arguments.length)return o;o=e;return s};s.out=function(e){if(!arguments.length)return r;r=e;return s};return s};function Oo(e){return e.x}function No(e){return e.y}function Lo(e,t,n){e.y0=t;e.y=n}var Co=a.map({"inside-out":function(e){var t=e.length,n,r,i=e.map(Uo),o=e.map(Po),s=a.range(t).sort(function(e,t){return i[e]-i[t]}),u=0,l=0,f=[],c=[];for(n=0;n<t;++n){r=s[n];if(u<l){u+=o[r];f.push(r)}else{l+=o[r];c.push(r)}}return c.reverse().concat(f)},reverse:function(e){return a.range(e.length).reverse()},default:Io});var Ro=a.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,a,o,s,u=[];for(o=0;o<n;++o){for(a=0,s=0;a<t;a++)s+=e[a][o][1];if(s>i)i=s;r.push(s)}for(o=0;o<n;++o){u[o]=(i-r[o])/2}return u},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,a,o,s,u,l,f,c,h,d=[];d[0]=c=h=0;for(a=1;a<r;++a){for(i=0,s=0;i<t;++i)s+=e[i][a][1];for(i=0,u=0,f=n[a][0]-n[a-1][0];i<t;++i){for(o=0,l=(e[i][a][1]-e[i][a-1][1])/(2*f);o<i;++o){l+=(e[o][a][1]-e[o][a-1][1])/f}u+=l*e[i][a][1]}d[a]=c-=s?u/s*f:0;if(c<h)h=c}for(a=0;a<r;++a)d[a]-=h;return d},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,a,o,s=[];for(a=0;a<n;++a){for(i=0,o=0;i<t;i++)o+=e[i][a][1];if(o)for(i=0;i<t;i++)e[i][a][1]/=o;else for(i=0;i<t;i++)e[i][a][1]=r}for(a=0;a<n;++a)s[a]=0;return s},zero:Do});function Io(e){return a.range(e.length)}function Do(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function Uo(e){var t=1,n=0,r=e[0][1],i,a=e.length;for(;t<a;++t){if((i=e[t][1])>r){n=t;r=i}}return n}function Po(e){return e.reduce(zo,0)}function zo(e,t){return e+t[1]}a.layout.histogram=function(){var e=true,t=Number,n=qo,r=Fo;function i(i,o){var s=[],u=i.map(t,this),l=n.call(this,u,o),f=r.call(this,l,u,o),c,o=-1,h=u.length,d=f.length-1,p=e?1:1/h,g;while(++o<d){c=s[o]=[];c.dx=f[o+1]-(c.x=f[o]);c.y=0}if(d>0){o=-1;while(++o<h){g=u[o];if(g>=l[0]&&g<=l[1]){c=s[a.bisect(f,g,1,d)-1];c.y+=p;c.push(i[o])}}}return s}i.value=function(e){if(!arguments.length)return t;t=e;return i};i.range=function(e){if(!arguments.length)return n;n=At(e);return i};i.bins=function(e){if(!arguments.length)return r;r=typeof e==="number"?function(t){return jo(t,e)}:At(e);return i};i.frequency=function(t){if(!arguments.length)return e;e=!!t;return i};return i};function Fo(e,t){return jo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function jo(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];while(++n<=t)a[n]=i*n+r;return a}function qo(e){return[a.min(e),a.max(e)]}a.layout.pack=function(){var e=a.layout.hierarchy().sort(Yo),t=0,n=[1,1],r;function i(i,a){var o=e.call(this,i,a),s=o[0],u=n[0],l=n[1],f=r==null?Math.sqrt:typeof r==="function"?r:function(){return r};s.x=s.y=0;ko(s,function(e){e.r=+f(e.value)});ko(s,Vo);if(t){var c=t*(r?1:Math.max(2*s.r/u,2*s.r/l))/2;ko(s,function(e){e.r+=c});ko(s,Vo);ko(s,function(e){e.r-=c})}Zo(s,u/2,l/2,r?1:1/Math.max(2*s.r/u,2*s.r/l));return o}i.size=function(e){if(!arguments.length)return n;n=e;return i};i.radius=function(e){if(!arguments.length)return r;r=e==null||typeof e==="function"?e:+e;return i};i.padding=function(e){if(!arguments.length)return t;t=+e;return i};return bo(i,e)};function Yo(e,t){return e.value-t.value}function $o(e,t){var n=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=n;n._pack_prev=t}function Ho(e,t){e._pack_next=t;t._pack_prev=e}function Wo(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Vo(e){if(!(t=e.children)||!(h=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o,s,u,l,f,c,h;function d(e){n=Math.min(e.x-e.r,n);r=Math.max(e.x+e.r,r);i=Math.min(e.y-e.r,i);a=Math.max(e.y+e.r,a)}t.forEach(Xo);o=t[0];o.x=-o.r;o.y=0;d(o);if(h>1){s=t[1];s.x=s.r;s.y=0;d(s);if(h>2){u=t[2];Bo(o,s,u);d(u);$o(o,u);o._pack_prev=u;$o(u,s);s=o._pack_next;for(l=3;l<h;l++){Bo(o,s,u=t[l]);var p=0,g=1,m=1;for(f=s._pack_next;f!==s;f=f._pack_next,g++){if(Wo(f,u)){p=1;break}}if(p==1){for(c=o._pack_prev;c!==f._pack_prev;c=c._pack_prev,m++){if(Wo(c,u)){break}}}if(p){if(g<m||g==m&&s.r<o.r)Ho(o,s=f);else Ho(o=c,s);l--}else{$o(o,u);s=u;d(u)}}}}var v=(n+r)/2,y=(i+a)/2,_=0;for(l=0;l<h;l++){u=t[l];u.x-=v;u.y-=y;_=Math.max(_,u.r+Math.sqrt(u.x*u.x+u.y*u.y))}e.r=_;t.forEach(Go)}function Xo(e){e._pack_next=e._pack_prev=e}function Go(e){delete e._pack_next;delete e._pack_prev}function Zo(e,t,n,r){var i=e.children;e.x=t+=r*e.x;e.y=n+=r*e.y;e.r*=r;if(i){var a=-1,o=i.length;while(++a<o)Zo(i[a],t,n,r)}}function Bo(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o;r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a;n.y=e.y+u*a-l*i}else{n.x=e.x+r;n.y=e.y}}a.layout.tree=function(){var e=a.layout.hierarchy().sort(null).value(null),t=Jo,n=[1,1],r=null;function i(i,a){var l=e.call(this,i,a),c=l[0],h=o(c);ko(h,s),h.parent.m=-h.z;Mo(h,u);if(r)Mo(c,f);else{var d=c,p=c,g=c;Mo(c,function(e){if(e.x<d.x)d=e;if(e.x>p.x)p=e;if(e.depth>g.depth)g=e});var m=t(d,p)/2-d.x,v=n[0]/(p.x+t(p,d)/2+m),y=n[1]/(g.depth||1);Mo(c,function(e){e.x=(e.x+m)*v;e.y=e.depth*y})}return l}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null){for(var i=r.children,a,o=0,s=i.length;o<s;++o){n.push((i[o]=a={_:i[o],parent:r,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a)}}return t.children[0]}function s(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){ts(e);var a=(n[0].z+n[n.length-1].z)/2;if(i){e.z=i.z+t(e._,i._);e.m=e.z-a}else{e.z=a}}else if(i){e.z=i.z+t(e._,i._)}e.parent.A=l(e,i,e.parent.A||r[0])}function u(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function l(e,n,r){if(n){var i=e,a=e,o=n,s=i.parent.children[0],u=i.m,l=a.m,f=o.m,c=s.m,h;while(o=Ko(o),i=Qo(i),o&&i){s=Qo(s);a=Ko(a);a.a=e;h=o.z+f-i.z-u+t(o._,i._);if(h>0){es(ns(o,e,r),e,h);u+=h;l+=h}f+=o.m;u+=i.m;c+=s.m;l+=a.m}if(o&&!Ko(a)){a.t=o;a.m+=f-l}if(i&&!Qo(s)){s.t=i;s.m+=u-c;r=e}}return r}function f(e){e.x*=n[0];e.y=e.depth*n[1]}i.separation=function(e){if(!arguments.length)return t;t=e;return i};i.size=function(e){if(!arguments.length)return r?null:n;r=(n=e)==null?f:null;return i};i.nodeSize=function(e){if(!arguments.length)return r?n:null;r=(n=e)==null?null:f;return i};return bo(i,e)};function Jo(e,t){return e.parent==t.parent?1:2}function Qo(e){var t=e.children;return t.length?t[0]:e.t}function Ko(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function es(e,t,n){var r=n/(t.i-e.i);t.c-=r;t.s+=n;e.c+=r;t.z+=n;t.m+=n}function ts(e){var t=0,n=0,r=e.children,i=r.length,a;while(--i>=0){a=r[i];a.z+=t;a.m+=t;t+=a.s+(n+=a.c)}}function ns(e,t,n){return e.a.parent===t.parent?e.a:n}a.layout.cluster=function(){var e=a.layout.hierarchy().sort(null).value(null),t=Jo,n=[1,1],r=false;function i(i,a){var o=e.call(this,i,a),s=o[0],u,l=0;ko(s,function(e){var n=e.children;if(n&&n.length){e.x=is(n);e.y=rs(n)}else{e.x=u?l+=t(e,u):0;e.y=0;u=e}});var f=as(s),c=os(s),h=f.x-t(f,c)/2,d=c.x+t(c,f)/2;ko(s,r?function(e){e.x=(e.x-s.x)*n[0];e.y=(s.y-e.y)*n[1]}:function(e){e.x=(e.x-h)/(d-h)*n[0];e.y=(1-(s.y?e.y/s.y:1))*n[1]});return o}i.separation=function(e){if(!arguments.length)return t;t=e;return i};i.size=function(e){if(!arguments.length)return r?null:n;r=(n=e)==null;return i};i.nodeSize=function(e){if(!arguments.length)return r?n:null;r=(n=e)!=null;return i};return bo(i,e)};function rs(e){return 1+a.max(e,function(e){return e.y})}function is(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function as(e){var t=e.children;return t&&t.length?as(t[0]):e}function os(e){var t=e.children,n;return t&&(n=t.length)?os(t[n-1]):e}a.layout.treemap=function(){var e=a.layout.hierarchy(),t=Math.round,n=[1,1],r=null,i=ss,o=false,s,u="squarify",l=.5*(1+Math.sqrt(5));function f(e,t){var n=-1,r=e.length,i,a;while(++n<r){a=(i=e[n]).value*(t<0?0:t);i.area=isNaN(a)||a<=0?0:a}}function c(e){var t=e.children;if(t&&t.length){var n=i(e),r=[],a=t.slice(),o,s=Infinity,l,h=u==="slice"?n.dx:u==="dice"?n.dy:u==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),g;f(a,n.dx*n.dy/e.value);r.area=0;while((g=a.length)>0){r.push(o=a[g-1]);r.area+=o.area;if(u!=="squarify"||(l=d(r,h))<=s){a.pop();s=l}else{r.area-=r.pop().area;p(r,h,n,false);h=Math.min(n.dx,n.dy);r.length=r.area=0;s=Infinity}}if(r.length){p(r,h,n,true);r.length=r.area=0}t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var n=i(e),r=t.slice(),a,o=[];f(r,n.dx*n.dy/e.value);o.area=0;while(a=r.pop()){o.push(a);o.area+=a.area;if(a.z!=null){p(o,a.z?n.dx:n.dy,n,!r.length);o.length=o.area=0}}t.forEach(h)}}function d(e,t){var n=e.area,r,i=0,a=Infinity,o=-1,s=e.length;while(++o<s){if(!(r=e[o].area))continue;if(r<a)a=r;if(r>i)i=r}n*=n;t*=t;return n?Math.max(t*i*l/n,n/(t*a*l)):Infinity}function p(e,n,r,i){var a=-1,o=e.length,s=r.x,u=r.y,l=n?t(e.area/n):0,f;if(n==r.dx){if(i||l>r.dy)l=r.dy;while(++a<o){f=e[a];f.x=s;f.y=u;f.dy=l;s+=f.dx=Math.min(r.x+r.dx-s,l?t(f.area/l):0)}f.z=true;f.dx+=r.x+r.dx-s;r.y+=l;r.dy-=l}else{if(i||l>r.dx)l=r.dx;while(++a<o){f=e[a];f.x=s;f.y=u;f.dx=l;u+=f.dy=Math.min(r.y+r.dy-u,l?t(f.area/l):0)}f.z=false;f.dy+=r.y+r.dy-u;r.x+=l;r.dx-=l}}function g(t){var r=s||e(t),i=r[0];i.x=i.y=0;if(i.value)i.dx=n[0],i.dy=n[1];else i.dx=i.dy=0;if(s)e.revalue(i);f([i],i.dx*i.dy/i.value);(s?h:c)(i);if(o)s=r;return r}g.size=function(e){if(!arguments.length)return n;n=e;return g};g.padding=function(e){if(!arguments.length)return r;function t(t){var n=e.call(g,t,t.depth);return n==null?ss(t):us(t,typeof n==="number"?[n,n,n,n]:n)}function n(t){return us(t,e)}var a;i=(r=e)==null?ss:(a=typeof e)==="function"?t:a==="number"?(e=[e,e,e,e],n):n;return g};g.round=function(e){if(!arguments.length)return t!=Number;t=e?Math.round:Number;return g};g.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return g};g.ratio=function(e){if(!arguments.length)return l;l=e;return g};g.mode=function(e){if(!arguments.length)return u;u=e+"";return g};return bo(g,e)};function ss(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function us(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];if(i<0){n+=i/2;i=0}if(a<0){r+=a/2;a=0}return{x:n,y:r,dx:i,dy:a}}a.random={normal:function(e,t){var n=arguments.length;if(n<2)t=1;if(n<1)e=0;return function(){var n,r,i;do{n=Math.random()*2-1;r=Math.random()*2-1;i=n*n+r*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=a.random.normal.apply(a,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=a.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}};a.scale={};function ls(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function fs(e){return e.rangeExtent?e.rangeExtent():ls(e.range())}function cs(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function hs(e,t){var n=0,r=e.length-1,i=e[n],a=e[r],o;if(a<i){o=n,n=r,r=o;o=i,i=a,a=o}e[n]=t.floor(i);e[r]=t.ceil(a);return e}function ds(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ps}var ps={floor:U,ceil:U};function gs(e,t,n,r){var i=[],o=[],s=0,u=Math.min(e.length,t.length)-1;if(e[u]<e[0]){e=e.slice().reverse();t=t.slice().reverse()}while(++s<=u){i.push(n(e[s-1],e[s]));o.push(r(t[s-1],t[s]))}return function(t){var n=a.bisect(e,t,1,u)-1;return o[n](i[n](t))}}a.scale.linear=function(){return ms([0,1],[0,1],Ta,false)};function ms(e,t,n,r){var i,a;function o(){var o=Math.min(e.length,t.length)>2?gs:cs,u=r?uo:so;i=o(e,t,u,n);a=o(t,e,u,Ta);return s}function s(e){return i(e)}s.invert=function(e){return a(e)};s.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};s.range=function(e){if(!arguments.length)return t;t=e;return o()};s.rangeRound=function(e){return s.range(e).interpolate(Za)};s.clamp=function(e){if(!arguments.length)return r;r=e;return o()};s.interpolate=function(e){if(!arguments.length)return n;n=e;return o()};s.ticks=function(t){return xs(e,t)};s.tickFormat=function(t,n){return bs(e,t,n)};s.nice=function(t){ys(e,t);return o()};s.copy=function(){return ms(e,t,n,r)};return o()}function vs(e,t){return a.rebind(e,t,"range","rangeRound","interpolate","clamp")}function ys(e,t){hs(e,ds(_s(e,t)[2]));hs(e,ds(_s(e,t)[2]));return e}function _s(e,t){if(t==null)t=10;var n=ls(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;if(a<=.15)i*=10;else if(a<=.35)i*=5;else if(a<=.75)i*=2;n[0]=Math.ceil(n[0]/i)*i;n[1]=Math.floor(n[1]/i)*i+i*.5;n[2]=i;return n}function xs(e,t){return a.range.apply(a,_s(e,t))}function bs(e,t,n){var r=_s(e,t);if(n){var i=Wt.exec(n);i.shift();if(i[8]==="s"){var o=a.formatPrefix(Math.max(M(r[0]),M(r[1])));if(!i[7])i[7]="."+ks(o.scale(r[2]));i[8]="f";n=a.format(i.join(""));return function(e){return n(o.scale(e))+o.symbol}}if(!i[7])i[7]="."+ws(i[8],r);n=i.join("")}else{n=",."+ks(r[2])+"f"}return a.format(n)}var Ms={s:1,g:1,p:1,r:1,e:1};function ks(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function ws(e,t){var n=ks(t[2]);return e in Ms?Math.abs(n-ks(Math.max(M(t[0]),M(t[1]))))+ +(e!=="e"):n-(e==="%")*2}a.scale.log=function(){return Ss(a.scale.linear().domain([0,1]),10,true,[1,10])};function Ss(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(i(t))}s.invert=function(t){return o(e.invert(t))};s.domain=function(t){if(!arguments.length)return r;n=t[0]>=0;e.domain((r=t.map(Number)).map(i));return s};s.base=function(n){if(!arguments.length)return t;t=+n;e.domain(r.map(i));return s};s.nice=function(){var t=hs(r.map(i),n?Math:As);e.domain(t);r=t.map(o);return s};s.ticks=function(){var e=ls(r),a=[],s=e[0],u=e[1],l=Math.floor(i(s)),f=Math.ceil(i(u)),c=t%1?2:t;if(isFinite(f-l)){if(n){for(;l<f;l++)for(var h=1;h<c;h++)a.push(o(l)*h);a.push(o(l))}else{a.push(o(l));for(;l++<f;)for(var h=c-1;h>0;h--)a.push(o(l)*h)}for(l=0;a[l]<s;l++){}for(f=a.length;a[f-1]>u;f--){}a=a.slice(l,f)}return a};s.tickFormat=function(e,n){if(!arguments.length)return Es;if(arguments.length<2)n=Es;else if(typeof n!=="function")n=a.format(n);var r=Math.max(1,t*e/s.ticks().length);return function(e){var a=e/o(Math.round(i(e)));if(a*t<t-.5)a*=t;return a<=r?n(e):""}};s.copy=function(){return Ss(e.copy(),t,n,r)};return vs(s,e)}var Es=a.format(".0e"),As={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};a.scale.pow=function(){return Ts(a.scale.linear(),1,[0,1])};function Ts(e,t,n){var r=Os(t),i=Os(1/t);function a(t){return e(r(t))}a.invert=function(t){return i(e.invert(t))};a.domain=function(t){if(!arguments.length)return n;e.domain((n=t.map(Number)).map(r));return a};a.ticks=function(e){return xs(n,e)};a.tickFormat=function(e,t){return bs(n,e,t)};a.nice=function(e){return a.domain(ys(n,e))};a.exponent=function(o){if(!arguments.length)return t;r=Os(t=o);i=Os(1/t);e.domain(n.map(r));return a};a.copy=function(){return Ts(e.copy(),t,n)};return vs(a,e)}function Os(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}a.scale.sqrt=function(){return a.scale.pow().exponent(.5)};a.scale.ordinal=function(){return Ns([],{t:"range",a:[[]]})};function Ns(e,t){var n,r,i;function o(i){return r[((n.get(i)||(t.t==="range"?n.set(i,e.push(i)):NaN))-1)%r.length]}function s(t,n){return a.range(e.length).map(function(e){return t+n*e})}o.domain=function(r){if(!arguments.length)return e;e=[];n=new S;var i=-1,a=r.length,s;while(++i<a)if(!n.has(s=r[i]))n.set(s,e.push(s));return o[t.t].apply(o,t.a)};o.range=function(e){if(!arguments.length)return r;r=e;i=0;t={t:"range",a:arguments};return o};o.rangePoints=function(n,a){if(arguments.length<2)a=0;var u=n[0],l=n[1],f=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+a);r=s(u+f*a/2,f);i=0;t={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(n,a){if(arguments.length<2)a=0;var u=n[0],l=n[1],f=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+a)|0;r=s(u+Math.round(f*a/2+(l-u-(e.length-1+a)*f)/2),f);i=0;t={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(n,a,u){if(arguments.length<2)a=0;if(arguments.length<3)u=a;var l=n[1]<n[0],f=n[l-0],c=n[1-l],h=(c-f)/(e.length-a+2*u);r=s(f+h*u,h);if(l)r.reverse();i=h*(1-a);t={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(n,a,u){if(arguments.length<2)a=0;if(arguments.length<3)u=a;var l=n[1]<n[0],f=n[l-0],c=n[1-l],h=Math.floor((c-f)/(e.length-a+2*u));r=s(f+Math.round((c-f-(e.length-a)*h)/2),h);if(l)r.reverse();i=Math.round(h*(1-a));t={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return i};o.rangeExtent=function(){return ls(t.a[0])};o.copy=function(){return Ns(e,t)};return o.domain(e)}a.scale.category10=function(){return a.scale.ordinal().range(Ls)};a.scale.category20=function(){return a.scale.ordinal().range(Cs)};a.scale.category20b=function(){return a.scale.ordinal().range(Rs)};a.scale.category20c=function(){return a.scale.ordinal().range(Is)};var Ls=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt);var Cs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt);var Rs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt);var Is=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);a.scale.quantile=function(){return Ds([],[])};function Ds(e,t){var n;function r(){var r=0,o=t.length;n=[];while(++r<o)n[r-1]=a.quantile(e,r/o);return i}function i(e){if(!isNaN(e=+e))return t[a.bisect(n,e)]}i.domain=function(t){if(!arguments.length)return e;e=t.map(v).filter(y).sort(m);return r()};i.range=function(e){if(!arguments.length)return t;t=e;return r()};i.quantiles=function(){return n};i.invertExtent=function(r){r=t.indexOf(r);return r<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]};i.copy=function(){return Ds(e,t)};return r()}a.scale.quantize=function(){return Us(0,1,[0,1])};function Us(e,t,n){var r,i;function a(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){r=n.length/(t-e);i=n.length-1;return a}a.domain=function(n){if(!arguments.length)return[e,t];e=+n[0];t=+n[n.length-1];return o()};a.range=function(e){if(!arguments.length)return n;n=e;return o()};a.invertExtent=function(t){t=n.indexOf(t);t=t<0?NaN:t/r+e;return[t,t+1/r]};a.copy=function(){return Us(e,t,n)};return o()}a.scale.threshold=function(){return Ps([.5],[0,1])};function Ps(e,t){function n(n){if(n<=n)return t[a.bisect(e,n)]}n.domain=function(t){if(!arguments.length)return e;e=t;return n};n.range=function(e){if(!arguments.length)return t;t=e;return n};n.invertExtent=function(n){n=t.indexOf(n);return[e[n-1],e[n]]};n.copy=function(){return Ps(e,t)};return n}a.scale.identity=function(){return zs([0,1])};function zs(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(n){if(!arguments.length)return e;e=n.map(t);return t};t.ticks=function(t){return xs(e,t)};t.tickFormat=function(t,n){return bs(e,t,n)};t.copy=function(){return zs(e)};return t}a.svg={};function Fs(){return 0}a.svg.arc=function(){var e=qs,t=Ys,n=Fs,r=js,i=$s,a=Hs,o=Ws;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),f=i.apply(this,arguments)-De,c=a.apply(this,arguments)-De,h=Math.abs(c-f),d=f>c?0:1;if(l<s)p=l,l=s,s=p;if(h>=Ie)return u(l,d)+(s?u(s,1-d):"")+"Z";var p,g,m,v,y=0,_=0,x,b,M,k,w,S,E,A,T=[];if(v=(+o.apply(this,arguments)||0)/2){m=r===js?Math.sqrt(s*s+l*l):+r.apply(this,arguments);if(!d)_*=-1;if(l)_=qe(m/l*Math.sin(v));if(s)y=qe(m/s*Math.sin(v))}if(l){x=l*Math.cos(f+_);b=l*Math.sin(f+_);M=l*Math.cos(c-_);k=l*Math.sin(c-_);var O=Math.abs(c-f-2*_)<=Ce?0:1;if(_&&Vs(x,b,M,k)===d^O){var N=(f+c)/2;x=l*Math.cos(N);b=l*Math.sin(N);M=k=null}}else{x=b=0}if(s){w=s*Math.cos(c-y);S=s*Math.sin(c-y);E=s*Math.cos(f+y);A=s*Math.sin(f+y);var L=Math.abs(f-c+2*y)<=Ce?0:1;if(y&&Vs(w,S,E,A)===1-d^L){var C=(f+c)/2;w=s*Math.cos(C);S=s*Math.sin(C);E=A=null}}else{w=S=0}if(h>Ne&&(p=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^d?0:1;var R=p,I=p;if(h<Ce){var D=E==null?[w,S]:M==null?[x,b]:Ri([x,b],[E,A],[M,k],[w,S]),U=x-D[0],P=b-D[1],z=M-D[0],F=k-D[1],j=1/Math.sin(Math.acos((U*z+P*F)/(Math.sqrt(U*U+P*P)*Math.sqrt(z*z+F*F)))/2),q=Math.sqrt(D[0]*D[0]+D[1]*D[1]);I=Math.min(p,(s-q)/(j-1));R=Math.min(p,(l-q)/(j+1))}if(M!=null){var Y=Xs(E==null?[w,S]:[E,A],[x,b],l,R,d),$=Xs([M,k],[w,S],l,R,d);if(p===R){T.push("M",Y[0],"A",R,",",R," 0 0,",g," ",Y[1],"A",l,",",l," 0 ",1-d^Vs(Y[1][0],Y[1][1],$[1][0],$[1][1]),",",d," ",$[1],"A",R,",",R," 0 0,",g," ",$[0])}else{T.push("M",Y[0],"A",R,",",R," 0 1,",g," ",$[0])}}else{T.push("M",x,",",b)}if(E!=null){var H=Xs([x,b],[E,A],s,-I,d),W=Xs([w,S],M==null?[x,b]:[M,k],s,-I,d);if(p===I){T.push("L",W[0],"A",I,",",I," 0 0,",g," ",W[1],"A",s,",",s," 0 ",d^Vs(W[1][0],W[1][1],H[1][0],H[1][1]),",",1-d," ",H[1],"A",I,",",I," 0 0,",g," ",H[0])}else{T.push("L",W[0],"A",I,",",I," 0 0,",g," ",H[0])}}else{T.push("L",w,",",S)}}else{T.push("M",x,",",b);if(M!=null)T.push("A",l,",",l," 0 ",O,",",d," ",M,",",k);T.push("L",w,",",S);if(E!=null)T.push("A",s,",",s," 0 ",L,",",1-d," ",E,",",A)}T.push("Z");return T.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length)return e;e=At(t);return s};s.outerRadius=function(e){if(!arguments.length)return t;t=At(e);return s};s.cornerRadius=function(e){if(!arguments.length)return n;n=At(e);return s};s.padRadius=function(e){if(!arguments.length)return r;r=e==js?js:At(e);return s};s.startAngle=function(e){if(!arguments.length)return i;i=At(e);return s};s.endAngle=function(e){if(!arguments.length)return a;a=At(e);return s};s.padAngle=function(e){if(!arguments.length)return o;o=At(e);return s};s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-De;return[Math.cos(r)*n,Math.sin(r)*n]};return s};var js="auto";function qs(e){return e.innerRadius}function Ys(e){return e.outerRadius}function $s(e){return e.startAngle}function Hs(e){return e.endAngle}function Ws(e){return e&&e.padAngle}function Vs(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Xs(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,f=e[0]+u,c=e[1]+l,h=t[0]+u,d=t[1]+l,p=(f+h)/2,g=(c+d)/2,m=h-f,v=d-c,y=m*m+v*v,_=n-r,x=f*d-h*c,b=(v<0?-1:1)*Math.sqrt(Math.max(0,_*_*y-x*x)),M=(x*v-m*b)/y,k=(-x*m-v*b)/y,w=(x*v+m*b)/y,S=(-x*m+v*b)/y,E=M-p,A=k-g,T=w-p,O=S-g;if(E*E+A*A>T*T+O*O)M=w,k=S;return[[M-u,k-l],[M*n/_,k*n/_]]}function Gs(e){var t=Ai,n=Ti,r=fr,i=Bs,a=i.key,o=.7;function s(a){var s=[],u=[],l=-1,f=a.length,c,h=At(t),d=At(n);function p(){s.push("M",i(e(u),o))}while(++l<f){if(r.call(this,c=a[l],l)){u.push([+h.call(this,c,l),+d.call(this,c,l)])}else if(u.length){p();u=[]}}if(u.length)p();return s.length?s.join(""):null}s.x=function(e){if(!arguments.length)return t;t=e;return s};s.y=function(e){if(!arguments.length)return n;n=e;return s};s.defined=function(e){if(!arguments.length)return r;r=e;return s};s.interpolate=function(e){if(!arguments.length)return a;if(typeof e==="function")a=i=e;else a=(i=Zs.get(e)||Bs).key;return s};s.tension=function(e){if(!arguments.length)return o;o=e;return s};return s}a.svg.line=function(){return Gs(U)};var Zs=a.map({linear:Bs,"linear-closed":Js,step:Qs,"step-before":Ks,"step-after":eu,basis:ou,"basis-open":su,"basis-closed":uu,bundle:lu,cardinal:ru,"cardinal-open":tu,"cardinal-closed":nu,monotone:yu});Zs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Bs(e){return e.length>1?e.join("L"):e+"Z"}function Js(e){return e.join("L")+"Z"}function Qs(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);if(n>1)i.push("H",r[0]);return i.join("")}function Ks(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function eu(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function tu(e,t){return e.length<4?Bs(e):e[1]+iu(e.slice(1,-1),au(e,t))}function nu(e,t){return e.length<3?Js(e):e[0]+iu((e.push(e[0]),e),au([e[e.length-2]].concat(e,[e[1]]),t))}function ru(e,t){return e.length<3?Bs(e):e[0]+iu(e,au(e,t))}function iu(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Bs(e)}var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n){r+="Q"+(a[0]-o[0]*2/3)+","+(a[1]-o[1]*2/3)+","+a[0]+","+a[1];i=e[1];u=2}if(t.length>1){s=t[1];a=e[u];u++;r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++){a=e[u];s=t[l];r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}}if(n){var f=e[u];r+="Q"+(a[0]+s[0]*2/3)+","+(a[1]+s[1]*2/3)+","+f[0]+","+f[1]}return r}function au(e,t){var n=[],r=(1-t)/2,i,a=e[0],o=e[1],s=1,u=e.length;while(++s<u){i=a;a=o;o=e[s];n.push([r*(o[0]-i[0]),r*(o[1]-i[1])])}return n}function ou(e){if(e.length<3)return Bs(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",fu(du,o),",",fu(du,s)];e.push(e[n-1]);while(++t<=n){r=e[t];o.shift();o.push(r[0]);s.shift();s.push(r[1]);pu(u,o,s)}e.pop();u.push("L",r);return u.join("")}function su(e){if(e.length<4)return Bs(e);var t=[],n=-1,r=e.length,i,a=[0],o=[0];while(++n<3){i=e[n];a.push(i[0]);o.push(i[1])}t.push(fu(du,a)+","+fu(du,o));--n;while(++n<r){i=e[n];a.shift();a.push(i[0]);o.shift();o.push(i[1]);pu(t,a,o)}return t.join("")}function uu(e){var t,n=-1,r=e.length,i=r+4,a,o=[],s=[];while(++n<4){a=e[n%r];o.push(a[0]);s.push(a[1])}t=[fu(du,o),",",fu(du,s)];--n;while(++n<i){a=e[n%r];o.shift();o.push(a[0]);s.shift();s.push(a[1]);pu(t,o,s)}return t.join("")}function lu(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],a=e[n][0]-r,o=e[n][1]-i,s=-1,u,l;while(++s<=n){u=e[s];l=s/n;u[0]=t*u[0]+(1-t)*(r+l*a);u[1]=t*u[1]+(1-t)*(i+l*o)}}return ou(e)}function fu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var cu=[0,2/3,1/3,0],hu=[0,1/3,2/3,0],du=[0,1/6,2/3,1/6];function pu(e,t,n){e.push("C",fu(cu,t),",",fu(cu,n),",",fu(hu,t),",",fu(hu,n),",",fu(du,t),",",fu(du,n))}function gu(e,t){return(t[1]-e[1])/(t[0]-e[0])}function mu(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=gu(i,a);while(++t<n){r[t]=(o+(o=gu(i=a,a=e[t+1])))/2}r[t]=o;return r}function vu(e){var t=[],n,r,i,a,o=mu(e),s=-1,u=e.length-1;while(++s<u){n=gu(e[s],e[s+1]);if(M(n)<Ne){o[s]=o[s+1]=0}else{r=o[s]/n;i=o[s+1]/n;a=r*r+i*i;if(a>9){a=n*3/Math.sqrt(a);o[s]=a*r;o[s+1]=a*i}}}s=-1;while(++s<=u){a=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([a||0,o[s]*a||0])}return t}function yu(e){return e.length<3?Bs(e):e[0]+iu(e,vu(e))}a.svg.line.radial=function(){var e=Gs(_u);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function _u(e){var t,n=-1,r=e.length,i,a;while(++n<r){t=e[n];i=t[0];a=t[1]-De;t[0]=i*Math.cos(a);t[1]=i*Math.sin(a)}return e}function xu(e){var t=Ai,n=Ai,r=0,i=Ti,a=fr,o=Bs,s=o.key,u=o,l="L",f=.7;function c(s){var c=[],h=[],d=[],p=-1,g=s.length,m,v=At(t),y=At(r),_=t===n?function(){return b}:At(n),x=r===i?function(){return M}:At(i),b,M;function k(){c.push("M",o(e(d),f),l,u(e(h.reverse()),f),"Z")}while(++p<g){if(a.call(this,m=s[p],p)){h.push([b=+v.call(this,m,p),M=+y.call(this,m,p)]);d.push([+_.call(this,m,p),+x.call(this,m,p)])}else if(h.length){k();h=[];d=[]}}if(h.length)k();return c.length?c.join(""):null}c.x=function(e){if(!arguments.length)return n;t=n=e;return c};c.x0=function(e){if(!arguments.length)return t;t=e;return c};c.x1=function(e){if(!arguments.length)return n;n=e;return c};c.y=function(e){if(!arguments.length)return i;r=i=e;return c};c.y0=function(e){if(!arguments.length)return r;r=e;return c};c.y1=function(e){if(!arguments.length)return i;i=e;return c};c.defined=function(e){if(!arguments.length)return a;a=e;return c};c.interpolate=function(e){if(!arguments.length)return s;if(typeof e==="function")s=o=e;else s=(o=Zs.get(e)||Bs).key;u=o.reverse||o;l=o.closed?"M":"L";return c};c.tension=function(e){if(!arguments.length)return f;f=e;return c};return c}Ks.reverse=eu;eu.reverse=Ks;a.svg.area=function(){return xu(U)};a.svg.area.radial=function(){var e=xu(_u);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};a.svg.chord=function(){var e=fi,t=ci,n=bu,r=$s,i=Hs;function a(n,r){var i=o(this,e,n,r),a=o(this,t,n,r);return"M"+i.p0+u(i.r,i.p1,i.a1-i.a0)+(s(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+u(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),l=r.call(e,s,o)-De,f=i.call(e,s,o)-De;return{r:u,a0:l,a1:f,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ce)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}a.radius=function(e){if(!arguments.length)return n;n=At(e);return a};a.source=function(t){if(!arguments.length)return e;e=At(t);return a};a.target=function(e){if(!arguments.length)return t;t=At(e);return a};a.startAngle=function(e){if(!arguments.length)return r;r=At(e);return a};a.endAngle=function(e){if(!arguments.length)return i;i=At(e);return a};return a};function bu(e){return e.radius}a.svg.diagonal=function(){var e=fi,t=ci,n=Mu;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];u=u.map(n);return"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}r.source=function(t){if(!arguments.length)return e;e=At(t);return r};r.target=function(e){if(!arguments.length)return t;t=At(e);return r};r.projection=function(e){if(!arguments.length)return n;n=e;return r};return r};function Mu(e){return[e.x,e.y]}a.svg.diagonal.radial=function(){var e=a.svg.diagonal(),t=Mu,n=e.projection;e.projection=function(e){return arguments.length?n(ku(t=e)):t};return e};function ku(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-De;return[n*Math.cos(r),n*Math.sin(r)]}}a.svg.symbol=function(){var e=Su,t=wu;function n(n,r){return(Au.get(e.call(this,n,r))||Eu)(t.call(this,n,r))}n.type=function(t){if(!arguments.length)return e;e=At(t);return n};n.size=function(e){if(!arguments.length)return t;t=At(e);return n};return n};function wu(){return 64}function Su(){return"circle"}function Eu(e){var t=Math.sqrt(e/Ce);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var Au=a.map({circle:Eu,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ou)),n=t*Ou;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Tu),n=t*Tu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Tu),n=t*Tu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});a.svg.symbolTypes=Au.keys();var Tu=Math.sqrt(3),Ou=Math.tan(30*Ue);Q.transition=function(e){var t=Du||++Iu,n=Fu(e),r=[],i,a,o=Uu||{time:Date.now(),ease:za,delay:0,duration:250};for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],f=-1,c=l.length;++f<c;){if(a=l[f])ju(a,f,n,t,o);i.push(a)}}return Cu(r,n,t)};Q.interrupt=function(e){return this.each(e==null?Nu:Lu(Fu(e)))};var Nu=Lu(Fu());function Lu(e){return function(){var t,n,r;if((t=this[e])&&(r=t[n=t.active])){r.timer.c=null;r.timer.t=NaN;if(--t.count)delete t[n];else delete this[e];t.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function Cu(e,t,n){X(e,Ru);e.namespace=t;e.id=n;return e}var Ru=[],Iu=0,Du,Uu;Ru.call=Q.call;Ru.empty=Q.empty;Ru.node=Q.node;Ru.size=Q.size;a.transition=function(e,t){return e&&e.transition?Du?e.transition(t):e:a.selection().transition(e)};a.transition.prototype=Ru;Ru.select=function(e){var t=this.id,n=this.namespace,r=[],i,a,o;e=K(e);for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],f=-1,c=l.length;++f<c;){if((o=l[f])&&(a=e.call(o,o.__data__,f,s))){if("__data__"in o)a.__data__=o.__data__;ju(a,f,n,t,o[n][t]);i.push(a)}else{i.push(null)}}}return Cu(r,n,t)};Ru.selectAll=function(e){var t=this.id,n=this.namespace,r=[],i,a,o,s,u;e=ee(e);for(var l=-1,f=this.length;++l<f;){for(var c=this[l],h=-1,d=c.length;++h<d;){if(o=c[h]){u=o[n][t];a=e.call(o,o.__data__,h,l);r.push(i=[]);for(var p=-1,g=a.length;++p<g;){if(s=a[p])ju(s,p,n,t,u);i.push(s)}}}}return Cu(r,n,t)};Ru.filter=function(e){var t=[],n,r,i;if(typeof e!=="function")e=pe(e);for(var a=0,o=this.length;a<o;a++){t.push(n=[]);for(var r=this[a],s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return Cu(t,this.namespace,this.id)};Ru.tween=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2)return this.node()[r][n].tween.get(e);return me(this,t==null?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})};function Pu(e,t,n,r){var i=e.id,a=e.namespace;return me(e,typeof n==="function"?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}Ru.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n=e=="transform"?oo:Ta,r=a.ns.qualify(e);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(e){return e==null?i:(e+="",function(){var t=this.getAttribute(r),i;return t!==e&&(i=n(t,e),function(e){this.setAttribute(r,i(e))})})}function u(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(r.space,r.local),i;return t!==e&&(i=n(t,e),function(e){this.setAttributeNS(r.space,r.local,i(e))})})}return Pu(this,"attr."+e,t,r.local?u:s)};Ru.attrTween=function(e,t){var n=a.ns.qualify(e);function r(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}}function i(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}return this.tween("attr."+e,n.local?i:r)};Ru.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2)t="";for(n in e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}function a(t){return t==null?i:(t+="",function(){var r=f(this).getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=Ta(r,t),function(t){this.style.setProperty(e,i(t),n)})})}return Pu(this,"style."+e,t,a)};Ru.styleTween=function(e,t,n){if(arguments.length<3)n="";function r(r,i){var a=t.call(this,r,i,f(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return this.tween("style."+e,r)};Ru.text=function(e){return Pu(this,"text",e,zu)};function zu(e){if(e==null)e="";return function(){this.textContent=e}}Ru.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)})};Ru.ease=function(e){var t=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][t].ease;if(typeof e!=="function")e=a.ease.apply(a,arguments);return me(this,function(r){r[n][t].ease=e})};Ru.delay=function(e){var t=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][t].delay;return me(this,typeof e==="function"?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))};Ru.duration=function(e){var t=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][t].duration;return me(this,typeof e==="function"?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))};Ru.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Uu,o=Du;try{Du=n;me(this,function(t,i,a){Uu=t[r][n];e.call(t,t.__data__,i,a)})}finally{Uu=i;Du=o}}else{me(this,function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(e,t)})}return this};Ru.transition=function(){var e=this.id,t=++Iu,n=this.namespace,r=[],i,a,o,s;for(var u=0,l=this.length;u<l;u++){r.push(i=[]);for(var a=this[u],f=0,c=a.length;f<c;f++){if(o=a[f]){s=o[n][e];ju(o,f,n,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}i.push(o)}}return Cu(r,n,t)};function Fu(e){return e==null?"__transition__":"__transition_"+e+"__"}function ju(e,t,n,r,i){var a=e[n]||(e[n]={active:0,count:0}),o=a[r],s,u,l,f,c;function h(e){var t=o.delay;u.t=t+s;if(t<=e)return d(e-t);u.c=d}function d(n){var i=a.active,h=a[i];if(h){h.timer.c=null;h.timer.t=NaN;--a.count;delete a[i];h.event&&h.event.interrupt.call(e,e.__data__,h.index)}for(var d in a){if(+d<r){var g=a[d];g.timer.c=null;g.timer.t=NaN;--a.count;delete a[d]}}u.c=p;Pt(function(){if(u.c&&p(n||1)){u.c=null;u.t=NaN}return 1},0,s);a.active=r;o.event&&o.event.start.call(e,e.__data__,t);c=[];o.tween.forEach(function(n,r){if(r=r.call(e,e.__data__,t)){c.push(r)}});f=o.ease;l=o.duration}function p(i){var s=i/l,u=f(s),h=c.length;while(h>0){c[--h].call(e,u)}if(s>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--a.count)delete a[r];else delete e[n];return 1}}if(!o){s=i.time;u=Pt(h,0,s);o=a[r]={tween:new S,time:s,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t};i=null;++a.count}}a.svg.axis=function(){var e=a.scale.linear(),t=qu,n=6,r=6,i=3,o=[10],u=null,l;function f(s){s.each(function(){var s=a.select(this);var f=this.__chart__||e,c=this.__chart__=e.copy();var h=u==null?c.ticks?c.ticks.apply(c,o):c.domain():u,d=l==null?c.tickFormat?c.tickFormat.apply(c,o):U:l,p=s.selectAll(".tick").data(h,c),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ne),m=a.transition(p.exit()).style("opacity",Ne).remove(),v=a.transition(p.order()).style("opacity",1),y=Math.max(n,0)+i,_;var x=fs(c),b=s.selectAll(".domain").data([0]),M=(b.enter().append("path").attr("class","domain"),a.transition(b));g.append("line");g.append("text");var k=g.select("line"),w=v.select("line"),S=p.select("text").text(d),E=g.select("text"),A=v.select("text"),T=t==="top"||t==="left"?-1:1,O,N,L,C;if(t==="bottom"||t==="top"){_=$u,O="x",L="y",N="x2",C="y2";S.attr("dy",T<0?"0em":".71em").style("text-anchor","middle");M.attr("d","M"+x[0]+","+T*r+"V0H"+x[1]+"V"+T*r)}else{_=Hu,O="y",L="x",N="y2",C="x2";S.attr("dy",".32em").style("text-anchor",T<0?"end":"start");M.attr("d","M"+T*r+","+x[0]+"H0V"+x[1]+"H"+T*r)}k.attr(C,T*n);E.attr(L,T*y);w.attr(N,0).attr(C,T*n);A.attr(O,0).attr(L,T*y);if(c.rangeBand){var R=c,I=R.rangeBand()/2;f=c=function(e){return R(e)+I}}else if(f.rangeBand){f=c}else{m.call(_,c,f)}g.call(_,f,c);v.call(_,c,c)})}f.scale=function(t){if(!arguments.length)return e;e=t;return f};f.orient=function(e){if(!arguments.length)return t;t=e in Yu?e+"":qu;return f};f.ticks=function(){if(!arguments.length)return o;o=s(arguments);return f};f.tickValues=function(e){if(!arguments.length)return u;u=e;return f};f.tickFormat=function(e){if(!arguments.length)return l;l=e;return f};f.tickSize=function(e){var t=arguments.length;if(!t)return n;n=+e;r=+arguments[t-1];return f};f.innerTickSize=function(e){if(!arguments.length)return n;n=+e;return f};f.outerTickSize=function(e){if(!arguments.length)return r;r=+e;return f};f.tickPadding=function(e){if(!arguments.length)return i;i=+e;return f};f.tickSubdivide=function(){return arguments.length&&f};return f};var qu="bottom",Yu={top:1,right:1,bottom:1,left:1};function $u(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Hu(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}a.svg.brush=function(){var e=W(h,"brushstart","brush","brushend"),t=null,n=null,r=[0,0],i=[0,0],o,s,u=true,l=true,c=Vu[0];function h(e){e.each(function(){var e=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m);var r=e.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(c,U);i.exit().remove();i.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Wu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");i.style("display",h.empty()?"none":null);var o=a.transition(e),s=a.transition(r),u;if(t){u=fs(t);s.attr("x",u[0]).attr("width",u[1]-u[0]);p(o)}if(n){u=fs(n);s.attr("y",u[0]).attr("height",u[1]-u[0]);g(o)}d(o)})}h.event=function(t){t.each(function(){var t=e.of(this,arguments),n={x:r,y:i,i:o,j:s},u=this.__chart__||n;this.__chart__=n;if(Du){a.select(this).transition().each("start.brush",function(){o=u.i;s=u.j;r=u.x;i=u.y;t({type:"brushstart"})}).tween("brush:brush",function(){var e=Oa(r,n.x),a=Oa(i,n.y);o=s=null;return function(o){r=n.x=e(o);i=n.y=a(o);t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i;s=n.j;t({type:"brush",mode:"resize"});t({type:"brushend"})})}else{t({type:"brushstart"});t({type:"brush",mode:"resize"});t({type:"brushend"})}})};function d(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+r[+/e$/.test(e)]+","+i[+/^s/.test(e)]+")"})}function p(e){e.select(".extent").attr("x",r[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function g(e){e.select(".extent").attr("y",i[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function m(){var c=this,m=a.select(a.event.target),v=e.of(c,arguments),y=a.select(c),_=m.datum(),x=!/^(n|s)$/.test(_)&&t,b=!/^(e|w)$/.test(_)&&n,M=m.classed("extent"),k=Ee(c),w,S=a.mouse(c),E;var A=a.select(f(c)).on("keydown.brush",N).on("keyup.brush",L);if(a.event.changedTouches){A.on("touchmove.brush",C).on("touchend.brush",I)}else{A.on("mousemove.brush",C).on("mouseup.brush",I)}y.interrupt().selectAll("*").interrupt();if(M){S[0]=r[0]-S[0];S[1]=i[0]-S[1]}else if(_){var T=+/w$/.test(_),O=+/^n/.test(_);E=[r[1-T]-S[0],i[1-O]-S[1]];S[0]=r[T];S[1]=i[O]}else if(a.event.altKey)w=S.slice();y.style("pointer-events","none").selectAll(".resize").style("display",null);a.select("body").style("cursor",m.style("cursor"));v({type:"brushstart"});C();function N(){if(a.event.keyCode==32){if(!M){w=null;S[0]-=r[1];S[1]-=i[1];M=2}$()}}function L(){if(a.event.keyCode==32&&M==2){S[0]+=r[1];S[1]+=i[1];M=0;$()}}function C(){var e=a.mouse(c),o=false;if(E){e[0]+=E[0];e[1]+=E[1]}if(!M){if(a.event.altKey){if(!w)w=[(r[0]+r[1])/2,(i[0]+i[1])/2];S[0]=r[+(e[0]<w[0])];S[1]=i[+(e[1]<w[1])]}else w=null}if(x&&R(e,t,0)){p(y);o=true}if(b&&R(e,n,1)){g(y);o=true}if(o){d(y);v({type:"brush",mode:M?"move":"resize"})}}function R(e,t,n){var a=fs(t),f=a[0],c=a[1],h=S[n],d=n?i:r,p=d[1]-d[0],g,m;if(M){f-=h;c-=p+h}g=(n?l:u)?Math.max(f,Math.min(c,e[n])):e[n];if(M){m=(g+=h)+p}else{if(w)h=Math.max(f,Math.min(c,2*w[n]-g));if(h<g){m=g;g=h}else{m=h}}if(d[0]!=g||d[1]!=m){if(n)s=null;else o=null;d[0]=g;d[1]=m;return true}}function I(){C();y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null);a.select("body").style("cursor",null);A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);k();v({type:"brushend"})}}h.x=function(e){if(!arguments.length)return t;t=e;c=Vu[!t<<1|!n];return h};h.y=function(e){if(!arguments.length)return n;n=e;c=Vu[!t<<1|!n];return h};h.clamp=function(e){if(!arguments.length)return t&&n?[u,l]:t?u:n?l:null;if(t&&n)u=!!e[0],l=!!e[1];else if(t)u=!!e;else if(n)l=!!e;return h};h.extent=function(e){var a,u,l,f,c;if(!arguments.length){if(t){if(o){a=o[0],u=o[1]}else{a=r[0],u=r[1];if(t.invert)a=t.invert(a),u=t.invert(u);if(u<a)c=a,a=u,u=c}}if(n){if(s){l=s[0],f=s[1]}else{l=i[0],f=i[1];if(n.invert)l=n.invert(l),f=n.invert(f);if(f<l)c=l,l=f,f=c}}return t&&n?[[a,l],[u,f]]:t?[a,u]:n&&[l,f]}if(t){a=e[0],u=e[1];if(n)a=a[0],u=u[0];o=[a,u];if(t.invert)a=t(a),u=t(u);if(u<a)c=a,a=u,u=c;if(a!=r[0]||u!=r[1])r=[a,u]}if(n){l=e[0],f=e[1];if(t)l=l[1],f=f[1];s=[l,f];if(n.invert)l=n(l),f=n(f);if(f<l)c=l,l=f,f=c;if(l!=i[0]||f!=i[1])i=[l,f]}return h};h.clear=function(){if(!h.empty()){r=[0,0],i=[0,0];o=s=null}return h};h.empty=function(){return!!t&&r[0]==r[1]||!!n&&i[0]==i[1]};return a.rebind(h,e,"on")};var Wu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Vu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Xu=Gt.format=Sn.timeFormat;var Gu=Xu.utc;var Zu=Gu("%Y-%m-%dT%H:%M:%S.%LZ");Xu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Bu:Zu;function Bu(e){return e.toISOString()}Bu.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Bu.toString=Zu.toString;Gt.second=Qt(function(e){return new Zt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Gt.seconds=Gt.second.range;Gt.seconds.utc=Gt.second.utc.range;Gt.minute=Qt(function(e){return new Zt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Gt.minutes=Gt.minute.range;Gt.minutes.utc=Gt.minute.utc.range;Gt.hour=Qt(function(e){var t=e.getTimezoneOffset()/60;return new Zt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Gt.hours=Gt.hour.range;Gt.hours.utc=Gt.hour.utc.range;Gt.month=Qt(function(e){e=Gt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Gt.months=Gt.month.range;Gt.months.utc=Gt.month.utc.range;function Ju(e,t,n){function r(t){return e(t)}r.invert=function(t){return Qu(e.invert(t))};r.domain=function(t){if(!arguments.length)return e.domain().map(Qu);e.domain(t);return r};function i(e,n){var r=e[1]-e[0],i=r/n,o=a.bisect(Ku,i);return o==Ku.length?[t.year,_s(e.map(function(e){return e/31536e6}),n)[2]]:!o?[nl,_s(e,n)[2]]:t[i/Ku[o-1]<Ku[o]/i?o-1:o]}r.nice=function(e,t){var n=r.domain(),a=ls(n),o=e==null?i(a,10):typeof e==="number"&&i(a,e);if(o)e=o[0],t=o[1];function s(n){return!isNaN(n)&&!e.range(n,Qu(+n+1),t).length}return r.domain(hs(n,t>1?{floor:function(t){while(s(t=e.floor(t)))t=Qu(t-1);return t},ceil:function(t){while(s(t=e.ceil(t)))t=Qu(+t+1);return t}}:e))};r.ticks=function(e,t){var n=ls(r.domain()),a=e==null?i(n,10):typeof e==="number"?i(n,e):!e.range&&[{range:e},t];if(a)e=a[0],t=a[1];return e.range(n[0],Qu(+n[1]+1),t<1?1:t)};r.tickFormat=function(){return n};r.copy=function(){return Ju(e.copy(),t,n)};return vs(r,e)}function Qu(e){return new Date(e)}var Ku=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var el=[[Gt.second,1],[Gt.second,5],[Gt.second,15],[Gt.second,30],[Gt.minute,1],[Gt.minute,5],[Gt.minute,15],[Gt.minute,30],[Gt.hour,1],[Gt.hour,3],[Gt.hour,6],[Gt.hour,12],[Gt.day,1],[Gt.day,2],[Gt.week,1],[Gt.month,1],[Gt.month,3],[Gt.year,1]];var tl=Xu.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",fr]]);var nl={range:function(e,t,n){return a.range(Math.ceil(e/n)*n,+t,n).map(Qu)},floor:U,ceil:U};el.year=Gt.year;Gt.scale=function(){return Ju(a.scale.linear(),el,tl)};var rl=el.map(function(e){return[e[0].utc,e[1]]});var il=Gu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",fr]]);rl.year=Gt.year.utc;Gt.scale.utc=function(){return Ju(a.scale.linear(),rl,il)};a.text=Tt(function(e){return e.responseText});a.json=function(e,t){return Ot(e,"application/json",al,t)};function al(e){return JSON.parse(e.responseText)}a.html=function(e,t){return Ot(e,"text/html",ol,t)};function ol(e){var t=u.createRange();t.selectNode(u.body);return t.createContextualFragment(e.responseText)}a.xml=Tt(function(e){return e.responseXML});if(true)this.d3=a,!(r=a,i=typeof r==="function"?r.call(t,n,t,e):r,i!==undefined&&(e.exports=i));else if(typeof e==="object"&&e.exports)e.exports=a;else this.d3=a}()},ZyfV:function(e,t){function n(){this._el=null;this._bgcolor=null}var r=n.prototype;r.initialize=function(e,t,n,r){this._el=e;return this.resize(t,n,r)};r.element=function(){return this._el};r.scene=function(){return this._el&&this._el.firstChild};r.background=function(e){if(arguments.length===0)return this._bgcolor;this._bgcolor=e;return this};r.resize=function(e,t,n){this._width=e;this._height=t;this._padding=n||{top:0,left:0,bottom:0,right:0};return this};r.render=function(){return this};e.exports=n},aZ75:function(e,t,n){(function(e,n){true?n(t):typeof define==="function"&&define.amd?define("d3-time",["exports"],n):n(e.d3_time={})})(this,function(e){"use strict";var t=new Date;var n=new Date;function r(e,i,a,o){function s(t){return e(t=new Date(+t)),t}s.floor=s;s.round=function(t){var n=new Date(+t),r=new Date(t-1);e(n),e(r),i(r,1);return t-n<r-t?n:r};s.ceil=function(t){return e(t=new Date(t-1)),i(t,1),t};s.offset=function(e,t){return i(e=new Date(+e),t==null?1:Math.floor(t)),e};s.range=function(t,n,r){var a=[];t=new Date(t-1);n=new Date(+n);r=r==null?1:Math.floor(r);if(!(t<n)||!(r>0))return a;i(t,1),e(t);if(t<n)a.push(new Date(+t));while(i(t,r),e(t),t<n)a.push(new Date(+t));return a};s.filter=function(t){return r(function(n){while(e(n),!t(n))n.setTime(n-1)},function(e,n){while(--n>=0)while(i(e,1),!t(e));})};if(a){s.count=function(r,i){t.setTime(+r),n.setTime(+i);e(t),e(n);return Math.floor(a(t,n))};s.every=function(e){e=Math.floor(e);return!isFinite(e)||!(e>0)?null:!(e>1)?s:s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0})}}return s}var i=r(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});i.every=function(e){e=Math.floor(e);if(!isFinite(e)||!(e>0))return null;if(!(e>1))return i;return r(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e})};var a=r(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+t*1e3)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()});var o=r(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+t*6e4)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()});var s=r(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+t*36e5)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()});var u=r(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5},function(e){return e.getDate()-1});function l(e){return r(function(t){t.setHours(0,0,0,0);t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+t*7)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5})}var f=l(0);var c=l(1);var h=l(2);var d=l(3);var p=l(4);var g=l(5);var m=l(6);var v=r(function(e){e.setHours(0,0,0,0);e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});var y=r(function(e){e.setHours(0,0,0,0);e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});var _=r(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+t*1e3)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()});var x=r(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*6e4)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()});var b=r(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*36e5)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()});var M=r(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1});function k(e){return r(function(t){t.setUTCHours(0,0,0,0);t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+t*7)},function(e,t){return(t-e)/6048e5})}var w=k(0);var S=k(1);var E=k(2);var A=k(3);var T=k(4);var O=k(5);var N=k(6);var L=r(function(e){e.setUTCHours(0,0,0,0);e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});var C=r(function(e){e.setUTCHours(0,0,0,0);e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});var R=i.range;var I=a.range;var D=o.range;var U=s.range;var P=u.range;var z=f.range;var F=c.range;var j=h.range;var q=d.range;var Y=p.range;var $=g.range;var H=m.range;var W=f.range;var V=v.range;var X=y.range;var G=i;var Z=R;var B=_.range;var J=x.range;var Q=b.range;var K=M.range;var ee=w.range;var te=S.range;var ne=E.range;var re=A.range;var ie=T.range;var ae=O.range;var oe=N.range;var se=w.range;var ue=L.range;var le=C.range;var fe="0.1.1";e.version=fe;e.milliseconds=R;e.seconds=I;e.minutes=D;e.hours=U;e.days=P;e.sundays=z;e.mondays=F;e.tuesdays=j;e.wednesdays=q;e.thursdays=Y;e.fridays=$;e.saturdays=H;e.weeks=W;e.months=V;e.years=X;e.utcMillisecond=G;e.utcMilliseconds=Z;e.utcSeconds=B;e.utcMinutes=J;e.utcHours=Q;e.utcDays=K;e.utcSundays=ee;e.utcMondays=te;e.utcTuesdays=ne;e.utcWednesdays=re;e.utcThursdays=ie;e.utcFridays=ae;e.utcSaturdays=oe;e.utcWeeks=se;e.utcMonths=ue;e.utcYears=le;e.millisecond=i;e.second=a;e.minute=o;e.hour=s;e.day=u;e.sunday=f;e.monday=c;e.tuesday=h;e.wednesday=d;e.thursday=p;e.friday=g;e.saturday=m;e.week=f;e.month=v;e.year=y;e.utcSecond=_;e.utcMinute=x;e.utcHour=b;e.utcDay=M;e.utcSunday=w;e.utcMonday=S;e.utcTuesday=E;e.utcWednesday=A;e.utcThursday=T;e.utcFriday=O;e.utcSaturday=N;e.utcWeek=w;e.utcMonth=L;e.utcYear=C;e.interval=r})},acp7:function(e,t,n){var r=n("4JPs").prototype;function i(){this._collector=null}var a=i.prototype=Object.create(r);a.constructor=i;a.init=function(e){r.init.call(this,e);return this.batch(true)};a.transform=function(e,t){return this.batchTransform(e,this._collector.data(),t)};a.batchTransform=function(){};e.exports=i},"bSC/":function(e,t,n){var r=n("/MHv");e.exports=function(e,t,n,r){var a,o=null,s=0,u=0,l=0,f=0,c,h,d,p;if(n==null)n=0;if(r==null)r=0;e.beginPath();for(var g=0,m=t.length;g<m;++g){a=t[g];switch(a[0]){case"l":s+=a[1];u+=a[2];e.lineTo(s+n,u+r);break;case"L":s=a[1];u=a[2];e.lineTo(s+n,u+r);break;case"h":s+=a[1];e.lineTo(s+n,u+r);break;case"H":s=a[1];e.lineTo(s+n,u+r);break;case"v":u+=a[1];e.lineTo(s+n,u+r);break;case"V":u=a[1];e.lineTo(s+n,u+r);break;case"m":s+=a[1];u+=a[2];e.moveTo(s+n,u+r);break;case"M":s=a[1];u=a[2];e.moveTo(s+n,u+r);break;case"c":c=s+a[5];h=u+a[6];l=s+a[3];f=u+a[4];e.bezierCurveTo(s+a[1]+n,u+a[2]+r,l+n,f+r,c+n,h+r);s=c;u=h;break;case"C":s=a[5];u=a[6];l=a[3];f=a[4];e.bezierCurveTo(a[1]+n,a[2]+r,l+n,f+r,s+n,u+r);break;case"s":c=s+a[3];h=u+a[4];l=2*s-l;f=2*u-f;e.bezierCurveTo(l+n,f+r,s+a[1]+n,u+a[2]+r,c+n,h+r);l=s+a[1];f=u+a[2];s=c;u=h;break;case"S":c=a[3];h=a[4];l=2*s-l;f=2*u-f;e.bezierCurveTo(l+n,f+r,a[1]+n,a[2]+r,c+n,h+r);s=c;u=h;l=a[1];f=a[2];break;case"q":c=s+a[3];h=u+a[4];l=s+a[1];f=u+a[2];e.quadraticCurveTo(l+n,f+r,c+n,h+r);s=c;u=h;break;case"Q":c=a[3];h=a[4];e.quadraticCurveTo(a[1]+n,a[2]+r,c+n,h+r);s=c;u=h;l=a[1];f=a[2];break;case"t":c=s+a[1];h=u+a[2];if(o[0].match(/[QqTt]/)===null){l=s;f=u}else if(o[0]==="t"){l=2*s-d;f=2*u-p}else if(o[0]==="q"){l=2*s-l;f=2*u-f}d=l;p=f;e.quadraticCurveTo(l+n,f+r,c+n,h+r);s=c;u=h;l=s+a[1];f=u+a[2];break;case"T":c=a[1];h=a[2];l=2*s-l;f=2*u-f;e.quadraticCurveTo(l+n,f+r,c+n,h+r);s=c;u=h;break;case"a":i(e,s+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+s+n,a[7]+u+r]);s+=a[6];u+=a[7];break;case"A":i(e,s+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]);s=a[6];u=a[7];break;case"z":case"Z":e.closePath();break}o=a}};function i(e,t,n,i){var a=r.segments(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(var o=0;o<a.length;++o){var s=r.bezier(a[o]);e.bezierCurveTo.apply(e,s)}}},bZsP:function(e,t,n){(function(e,r){true?r(t,n("aZ75")):typeof define==="function"&&define.amd?define("d3-time-format",["exports","d3-time"],r):r(e.d3_time_format={},e.d3_time)})(this,function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);t.setFullYear(e.y);return t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));t.setUTCFullYear(e.y);return t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){var t=e.dateTime,a=e.date,s=e.time,u=e.periods,l=e.days,f=e.shortDays,c=e.months,re=e.shortMonths;var ie=h(u),ae=d(u),oe=h(l),se=d(l),ue=h(f),le=d(f),fe=h(c),ce=d(c),he=h(re),de=d(re);var pe={a:Te,A:Oe,b:Ne,B:Le,c:null,d:T,e:T,H:O,I:N,j:L,L:C,m:R,M:I,p:Ce,S:D,U,w:P,W:z,x:null,X:null,y:F,Y:j,Z:q,"%":ne};var ge={a:Re,A:Ie,b:De,B:Ue,c:null,d:Y,e:Y,H:$,I:H,j:W,L:V,m:X,M:G,p:Pe,S:Z,U:B,w:J,W:Q,x:null,X:null,y:K,Y:ee,Z:te,"%":ne};var me={a:be,A:Me,b:ke,B:we,c:Se,d:b,e:b,H:k,I:k,j:M,L:E,m:x,M:w,p:xe,S,U:g,w:p,W:m,x:Ee,X:Ae,y,Y:v,Z:_,"%":A};pe.x=ve(a,pe);pe.X=ve(s,pe);pe.c=ve(t,pe);ge.x=ve(a,ge);ge.X=ve(s,ge);ge.c=ve(t,ge);function ve(e,t){return function(n){var r=[],i=-1,a=0,s=e.length,u,l,f;if(!(n instanceof Date))n=new Date(+n);while(++i<s){if(e.charCodeAt(i)===37){r.push(e.slice(a,i));if((l=o[u=e.charAt(++i)])!=null)u=e.charAt(++i);else l=u==="e"?" ":"0";if(f=t[u])u=f(n,l);r.push(u);a=i+1}}r.push(e.slice(a,i));return r.join("")}}function ye(e,t){return function(n){var a=i(1900),o=_e(a,e,n+="",0);if(o!=n.length)return null;if("p"in a)a.H=a.H%12+a.p*12;if("W"in a||"U"in a){if(!("w"in a))a.w="W"in a?1:0;var s="Z"in a?r(i(a.y)).getUTCDay():t(i(a.y)).getDay();a.m=0;a.d="W"in a?(a.w+6)%7+a.W*7-(s+5)%7:a.w+a.U*7-(s+6)%7}if("Z"in a){a.H+=a.Z/100|0;a.M+=a.Z%100;return r(a)}return t(a)}}function _e(e,t,n,r){var i=0,a=t.length,s=n.length,u,l;while(i<a){if(r>=s)return-1;u=t.charCodeAt(i++);if(u===37){u=t.charAt(i++);l=me[u in o?t.charAt(i++):u];if(!l||(r=l(e,n,r))<0)return-1}else if(u!=n.charCodeAt(r++)){return-1}}return r}function xe(e,t,n){var r=ie.exec(t.slice(n));return r?(e.p=ae[r[0].toLowerCase()],n+r[0].length):-1}function be(e,t,n){var r=ue.exec(t.slice(n));return r?(e.w=le[r[0].toLowerCase()],n+r[0].length):-1}function Me(e,t,n){var r=oe.exec(t.slice(n));return r?(e.w=se[r[0].toLowerCase()],n+r[0].length):-1}function ke(e,t,n){var r=he.exec(t.slice(n));return r?(e.m=de[r[0].toLowerCase()],n+r[0].length):-1}function we(e,t,n){var r=fe.exec(t.slice(n));return r?(e.m=ce[r[0].toLowerCase()],n+r[0].length):-1}function Se(e,n,r){return _e(e,t,n,r)}function Ee(e,t,n){return _e(e,a,t,n)}function Ae(e,t,n){return _e(e,s,t,n)}function Te(e){return f[e.getDay()]}function Oe(e){return l[e.getDay()]}function Ne(e){return re[e.getMonth()]}function Le(e){return c[e.getMonth()]}function Ce(e){return u[+(e.getHours()>=12)]}function Re(e){return f[e.getUTCDay()]}function Ie(e){return l[e.getUTCDay()]}function De(e){return re[e.getUTCMonth()]}function Ue(e){return c[e.getUTCMonth()]}function Pe(e){return u[+(e.getUTCHours()>=12)]}return{format:function(e){var t=ve(e+="",pe);t.parse=ye(e,n);t.toString=function(){return e};return t},utcFormat:function(e){var t=ve(e+="",ge);t.parse=ye(e,r);t.toString=function(){return e};return t}}}var o={"-":"",_:" ",0:"0"};var s=/^\s*\d+/;var u=/^%/;var l=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function f(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function c(e){return e.replace(l,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(c).join("|")+")","i")}function d(e){var t={},n=-1,r=e.length;while(++n<r)t[e[n].toLowerCase()]=n;return t}function p(e,t,n){var r=s.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function g(e,t,n){var r=s.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function m(e,t,n){var r=s.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function v(e,t,n){var r=s.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function y(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function x(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function M(e,t,n){var r=s.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function k(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function w(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function S(e,t,n){var r=s.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function E(e,t,n){var r=s.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function A(e,t,n){var r=u.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function T(e,t){return f(e.getDate(),t,2)}function O(e,t){return f(e.getHours(),t,2)}function N(e,t){return f(e.getHours()%12||12,t,2)}function L(e,n){return f(1+t.day.count(t.year(e),e),n,3)}function C(e,t){return f(e.getMilliseconds(),t,3)}function R(e,t){return f(e.getMonth()+1,t,2)}function I(e,t){return f(e.getMinutes(),t,2)}function D(e,t){return f(e.getSeconds(),t,2)}function U(e,n){return f(t.sunday.count(t.year(e),e),n,2)}function P(e){return e.getDay()}function z(e,n){return f(t.monday.count(t.year(e),e),n,2)}function F(e,t){return f(e.getFullYear()%100,t,2)}function j(e,t){return f(e.getFullYear()%1e4,t,4)}function q(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function Y(e,t){return f(e.getUTCDate(),t,2)}function $(e,t){return f(e.getUTCHours(),t,2)}function H(e,t){return f(e.getUTCHours()%12||12,t,2)}function W(e,n){return f(1+t.utcDay.count(t.utcYear(e),e),n,3)}function V(e,t){return f(e.getUTCMilliseconds(),t,3)}function X(e,t){return f(e.getUTCMonth()+1,t,2)}function G(e,t){return f(e.getUTCMinutes(),t,2)}function Z(e,t){return f(e.getUTCSeconds(),t,2)}function B(e,n){return f(t.utcSunday.count(t.utcYear(e),e),n,2)}function J(e){return e.getUTCDay()}function Q(e,n){return f(t.utcMonday.count(t.utcYear(e),e),n,2)}function K(e,t){return f(e.getUTCFullYear()%100,t,2)}function ee(e,t){return f(e.getUTCFullYear()%1e4,t,4)}function te(){return"+0000"}function ne(){return"%"}var re=a({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ie=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]});var ae=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var oe=a({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]});var se=a({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ue=a({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var le=a({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]});var fe=a({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]});var ce=a({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]});var he=a({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]});var de=a({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]});var pe=a({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]});var ge=a({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]});var me=a({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]});var ve=a({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]});var ye=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]});var _e=a({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]});var xe=a({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]});var be=a({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]});var Me=a({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]});var ke=a({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]});var we=a({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});var Se="%Y-%m-%dT%H:%M:%S.%LZ";function Ee(e){return e.toISOString()}Ee.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Ee.toString=function(){return Se};var Ae=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ee:re.utcFormat(Se);var Te=re.format;var Oe=re.utcFormat;var Ne="0.2.1";e.version=Ne;e.format=Te;e.utcFormat=Oe;e.locale=a;e.localeCaEs=ie;e.localeDeCh=ae;e.localeDeDe=oe;e.localeEnCa=se;e.localeEnGb=ue;e.localeEnUs=re;e.localeEsEs=le;e.localeFiFi=fe;e.localeFrCa=ce;e.localeFrFr=he;e.localeHeIl=de;e.localeHuHu=pe;e.localeItIt=ge;e.localeJaJp=me;e.localeKoKr=ve;e.localeMkMk=ye;e.localeNlNl=_e;e.localePlPl=xe;e.localePtBr=be;e.localeRuRu=Me;e.localeSvSe=ke;e.localeZhCn=we;e.isoFormat=Ae})},cihr:function(e,t,n){"use strict";(function(e){e[e["TOP"]="top"]="TOP";e[e["RIGHT"]="right"]="RIGHT";e[e["LEFT"]="left"]="LEFT";e[e["BOTTOM"]="bottom"]="BOTTOM"})(t.AxisOrient||(t.AxisOrient={}));var r=t.AxisOrient;t.defaultAxisConfig={offset:undefined,grid:undefined,labels:true,labelMaxLength:25,tickSize:undefined,characterWidth:6};t.defaultFacetAxisConfig={axisWidth:0,labels:true,grid:false,tickSize:0}},ct8e:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("4JPs");function u(e){s.prototype.init.call(this,e);s.addParameters(this,u.Parameters);s.addParameters(this,{lon:{type:"field"},lat:{type:"field"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}u.Parameters={projection:{type:"value",default:"mercator"},center:{type:"array<value>"},translate:{type:"array<value>",default:n("MRce").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}};u.d3Projection=function(){var e=this.param("projection"),t=u.Parameters,n,a,o;if(e!==this._mode){this._mode=e;this._projection=r.geo[e]()}n=this._projection;for(a in t){if(a==="projection"||!n[a])continue;o=this.param(a);if(o===undefined||i.isArray(o)&&o.length===0){continue}if(o!==n[a]()){n[a](o)}}return n};var l=u.prototype=Object.create(s.prototype);l.constructor=u;l.transform=function(e){o.debug(e,["geo"]);var t=this._output,n=this.param("lon").accessor,r=this.param("lat").accessor,i=u.d3Projection.call(this);function s(e){var o=[n(e),r(e)];var s=i(o)||[null,null];a.set(e,t.x,s[0]);a.set(e,t.y,s[1])}e.add.forEach(s);if(this.reevaluate(e)){e.mod.forEach(s);e.rem.forEach(s)}e.fields[t.x]=1;e.fields[t.y]=1;return e};e.exports=u;u.baseSchema={projection:{description:"The type of cartographic projection to use.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"mercator"},center:{description:"The center of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},translate:{description:"The translation of the projection.",oneOf:[{type:"array",items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},minItems:2,maxItems:2},{$ref:"#/refs/signal"}]},rotate:{description:"The rotation of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},scale:{description:"The scale of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},precision:{description:"The desired precision of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipAngle:{description:"The clip angle of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]},clipExtent:{description:"The clip extent of the projection.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}};u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Geo transform",description:"Performs a cartographic projection. Given longitude and latitude values, sets corresponding x and y properties for a mark.",type:"object",properties:i.extend({type:{enum:["geo"]},lon:{description:"The input longitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},lat:{description:"The input latitude values.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"}},additionalProperties:false}},u.baseSchema),required:["type","lon","lat"],additionalProperties:false}},cwb4:function(e,t,n){var r=n("zF6n");e.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);if(t&&t.property){n=r.accessor(t.property)(n)}return n}},eJnU:function(e,t){var n={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},r=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];e.exports=function(e){var t=[],i,a,o,s,u,l,f,c,h,d,p;i=e.slice().replace(r[0],"###$1").split(r[1]).slice(1);for(c=0,d=i.length;c<d;++c){a=i[c];o=a.slice(1).trim().replace(r[2],"$1###$2").split(r[3]);l=a.charAt(0);s=[l];for(h=0,p=o.length;h<p;++h){if((u=+o[h])===u){s.push(u)}}f=n[l.toLowerCase()];if(s.length-1>f){for(h=1,p=s.length;h<p;h+=f){t.push([l].concat(s.slice(h,h+f)))}}else{t.push(s)}}return t}},eVGq:function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/"),o=n("zhsD").path.line;function s(e,t){var n=t[0],r=n.pathCache||(n.pathCache=i(o(t)));a(e,r)}function u(e,t,n,r,i,a){var o=t.items,s=t.bounds;if(!o||!o.length||s&&!s.contains(i,a)){return null}if(e.pixelratio!=null&&e.pixelratio!==1){n*=e.pixelratio;r*=e.pixelratio}return l(e,o,n,r)?o[0]:null}var l=r.testPath(s,false);e.exports={draw:r.drawOne(s),pick:u,nested:true}},ec8D:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs");function o(e){a.prototype.init.call(this,e);a.addParameters(this,{on:{type:"data"},onKey:{type:"field",default:null},as:{type:"array<value>"},keys:{type:"array<field>",default:["data"]},default:{type:"value"}});return this.mutates(true)}var s=o.prototype=Object.create(a.prototype);s.constructor=o;s.transform=function(e,t){i.debug(e,["lookup"]);var n=this.param("on"),a=n.source.last(),o=n.source.values(),s=this.param("onKey"),u=s.field,l=this.param("keys"),f=l.accessor,c=this.param("as"),h=this.param("default"),d=this._lut,p,g;if(d==null||this._on!==u||u&&a.fields[u]||a.add.length||a.rem.length){if(u){s=s.accessor;for(d={},p=0;p<o.length;++p){d[s(g=o[p])]=g}}else{d=o}this._lut=d;this._on=u;t=true}function m(e){for(var t=0;t<f.length;++t){var n=d[f[t](e)]||h;r.set(e,c[t],n)}}e.add.forEach(m);var v=l.field.some(function(t){return e.fields[t]});if(v||t){e.mod.forEach(m);e.rem.forEach(m)}c.forEach(function(t){e.fields[t]=1});return e};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Lookup transform",description:"Extends a data set by looking up values in another data set.",type:"object",properties:{type:{enum:["lookup"]},on:{type:"string",description:"The name of the secondary data set on which to lookup values."},onKey:{description:"The key field to lookup, or null for index-based lookup.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},keys:{description:"One or more fields in the primary data set to match against the secondary data set.",type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},as:{type:"array",description:"The names of the fields in which to store looked-up values.",items:{type:"string"}},default:{description:"The default value to use if a lookup match fails."}},required:["type","on","as","keys"],additionalProperties:false}},ei6W:function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){s.prototype.init.call(this,e);o.addParameters(this,{groupby:{type:"array<field>"}});this._output={children:"children",parent:"parent"};return this.router(true).produces(true)}var l=u.prototype=Object.create(s.prototype);l.constructor=u;l.batchTransform=function(e,t){a.debug(e,["treeifying"]);var n=this.param("groupby").field,o=this._output.children,s=this._output.parent,u=[{name:"*",ops:["values"],as:[o]}],l=n.map(function(e){return r.groupby(e).summarize(u)}),f=this._internal||[],c=[],h,d;function p(e,t,r){var a=l[e].execute(r);t[o]=a;a.forEach(function(r){r[s]=t;c.push(i.ingest(r));if(e+1<n.length)p(e+1,r,r[o]);else r[o].forEach(function(e){e[s]=r})})}var g=i.ingest({});g[s]=null;c.push(g);p(0,g,t);for(h=0,d=c.length;h<d;++h){e.add.push(c[h])}for(h=0,d=f.length;h<d;++h){e.rem.push(f[h])}this._internal=c;return e};e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Treeify transform",type:"object",properties:{type:{enum:["treeify"]},groupby:{description:"An ordered list of fields by which to group tuples into a tree.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{children:{type:"string",default:"children"},parent:{type:"string",default:"parent"}},additionalProperties:false}},additionalProperties:false,required:["type","groupby"]}},ekYZ:function(e,t,n){var r=n("D3vM").ALL;function i(e,t){var n={};a(e,n);n.add=[];n.mod=[];n.rem=[];n.reflow=t;return n}function a(e,t){t.stamp=e?e.stamp:0;t.sort=e?e.sort:null;t.facet=e?e.facet:null;t.trans=e?e.trans:null;t.dirty=e?e.dirty:[];t.request=e?e.request:null;for(var n,i=0,a=r.length;i<a;++i){t[n=r[i]]=e?e[n]:{}}}e.exports={create:i,copy:a}},evf9:function(e,t,n){var r=n("gWW/");var i=Math.PI/2;function a(e,t){var n=t.x||0,r=t.y||0,a=t.innerRadius||0,o=t.outerRadius||0,s=(t.startAngle||0)-i,u=(t.endAngle||0)-i;e.beginPath();if(a===0)e.moveTo(n,r);else e.arc(n,r,a,s,u,0);e.arc(n,r,o,u,s,1);e.closePath()}e.exports={draw:r.drawAll(a),pick:r.pickPath(a)}},f2i1:function(e,t,n){"use strict";var r=n("P/aK");var i=n("QSMf");var a=n("j8cM");var o=n("ZAUf");(function(e){e[e["ZERO"]="zero"]="ZERO";e[e["CENTER"]="center"]="CENTER";e[e["NORMALIZE"]="normalize"]="NORMALIZE";e[e["NONE"]="none"]="NONE"})(t.StackOffset||(t.StackOffset={}));var s=t.StackOffset;function u(e,t,n){var u=n&&n.mark?n.mark.stacked:undefined;if(o.contains([s.NONE,null,false],u)){return null}if(!o.contains([a.BAR,a.AREA],e)){return null}if(!i.isAggregate(t)){return null}var l=r.STACK_GROUP_CHANNELS.reduce(function(e,n){if(i.has(t,n)&&!t[n].aggregate){e.push(n)}return e},[]);if(l.length===0){return null}var f=i.has(t,r.X);var c=i.has(t,r.Y);var h=f&&!!t.x.aggregate;var d=c&&!!t.y.aggregate;if(h!==d){return{groupbyChannel:h?c?r.Y:null:f?r.X:null,fieldChannel:h?r.X:r.Y,stackByChannels:l,offset:u||s.ZERO}}return null}t.stack=u},fRRI:function(e,t,n){var r=n("zicW"),i=n("Hqva").Dependencies;var a=/array/i,o=/data/i,s=/field/i,u=/expr/i,l=/value/i;function f(e,t,n){this._name=e;this._type=t;this._transform=n;this._value=[];this._accessors=[];this._resolution=false;this._signals=[]}var c=f.prototype;function h(){var e=a.test(this._type),t=o.test(this._type),n=s.test(this._type);var i=e?this._value:this._value[0],u=e?this._accessors:this._accessors[0];if(!r.isValid(u)&&l.test(this._type)){return i}else{return t?{name:i,source:u}:n?{field:i,accessor:u}:i}}c.get=function(){var e=this._transform._graph,t=o.test(this._type),n=s.test(this._type),i,a,u,l,f;if(!this._resolution)return h.call(this);if(t){this._accessors=this._value.map(function(t){return e.data(t)});return h.call(this)}for(i=0,a=this._signals.length;i<a;++i){u=this._signals[i];l=u.index;f=u.value(e);if(n){this._accessors[l]=this._value[l]!=f?r.accessor(f):this._accessors[l]}this._value[l]=f}return h.call(this)};c.set=function(e){var t=this,n=t._transform._graph,a=u.test(this._type),l=o.test(this._type),f=s.test(this._type);t._signals=[];this._value=r.array(e).map(function(e,o){var s;if(r.isString(e)){if(a){s=n.expr(e);t._transform.dependency(i.FIELDS,s.fields);t._transform.dependency(i.SIGNALS,s.globals);t._transform.dependency(i.DATA,s.dataSources);return s.fn}else if(f){t._accessors[o]=r.accessor(e);t._transform.dependency(i.FIELDS,r.field(e))}else if(l){t._resolution=true;t._transform.dependency(i.DATA,e)}return e}else if(e.value!==undefined){return e.value}else if(e.field!==undefined){t._accessors[o]=r.accessor(e.field);t._transform.dependency(i.FIELDS,r.field(e.field));return e.field}else if(e.signal!==undefined){t._resolution=true;t._transform.dependency(i.SIGNALS,r.field(e.signal)[0]);t._signals.push({index:o,value:function(t){return t.signalRef(e.signal)}});return e.signal}else if(e.expr!==undefined){t._resolution=true;s=n.expr(e.expr);t._transform.dependency(i.SIGNALS,s.globals);t._signals.push({index:o,value:function(){return s.fn()}});return e.expr}return e});return t._transform};e.exports=f;f.schema={type:"object",oneOf:[{properties:{field:{type:"string"}},required:["field"]},{properties:{value:{type:"string"}},required:["value"]}]}},fxxq:function(e,t,n){var r=n("Za4h");function i(e){if(e==null)return null;return r.rgb(e)+""}e.exports=i;i.schema={defs:{background:{type:"string"}}}},"gWW/":function(e,t){function n(e,t,n,r){if(e(t,r))return;var i=n.opacity==null?1:n.opacity;if(i===0)return;if(n.fill&&f(t,n,i)){t.fill()}if(n.stroke&&c(t,n,i)){t.stroke()}}function r(e,t,r,i){var a,o,s;for(a=0,o=r.items.length;a<o;++a){s=r.items[a];if(!i||i.intersects(s.bounds)){n(e,t,s,s)}}}function i(e){return function(t,n,i){r(e,t,n,i)}}function a(e){return function(t,r,i){if(!r.items.length)return;if(!i||i.intersects(r.bounds)){n(e,t,r.items[0],r.items)}}}var o=function(){return true};function s(e){if(!e)e=o;return function(t,n,r,i,a,o){if(!n.items.length)return null;var s,u,l;if(t.pixelratio!=null&&t.pixelratio!==1){r*=t.pixelratio;i*=t.pixelratio}for(l=n.items.length;--l>=0;){s=n.items[l];u=s.bounds;if(u&&!u.contains(a,o)||!u)continue;if(e(t,s,r,i,a,o))return s}return null}}function u(e,t){return function(n,r,i,a){var o=Array.isArray(r)?r[0]:r,s=t==null?o.fill:t,u=o.stroke&&n.isPointInStroke,l,f;if(u){l=o.strokeWidth;f=o.strokeCap;n.lineWidth=l!=null?l:1;n.lineCap=f!=null?f:"butt"}return e(n,r)?false:s&&n.isPointInPath(i,a)||u&&n.isPointInStroke(i,a)}}function l(e){return s(u(e))}function f(e,t,n){n*=t.fillOpacity==null?1:t.fillOpacity;if(n>0){e.globalAlpha=n;e.fillStyle=h(e,t,t.fill);return true}else{return false}}function c(e,t,n){var r=(r=t.strokeWidth)!=null?r:1,i;if(r<=0)return false;n*=t.strokeOpacity==null?1:t.strokeOpacity;if(n>0){e.globalAlpha=n;e.strokeStyle=h(e,t,t.stroke);e.lineWidth=r;e.lineCap=(i=t.strokeCap)!=null?i:"butt";e.vgLineDash(t.strokeDash||null);e.vgLineDashOffset(t.strokeDashOffset||0);return true}else{return false}}function h(e,t,n){return n.id?d(e,n,t.bounds):n}function d(e,t,n){var r=n.width(),i=n.height(),a=n.x1+t.x1*r,o=n.y1+t.y1*i,s=n.x1+t.x2*r,u=n.y1+t.y2*i,l=e.createLinearGradient(a,o,s,u),f=t.stops,c,h;for(c=0,h=f.length;c<h;++c){l.addColorStop(f[c].offset,f[c].color)}return l}e.exports={drawOne:a,drawAll:i,pick:s,pickPath:l,testPath:u,stroke:c,fill:f,color:h,gradient:d}},ggRp:function(e,t,n){var r=n("zF6n");var i="__types__";var a={boolean:r.boolean,integer:r.number,number:r.number,date:r.date,string:function(e){return e==null||e===""?null:e+""}};var o={boolean:function(e){return e==="true"||e==="false"||r.isBoolean(e)},integer:function(e){return o.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!r.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};function s(e,t){if(!t)return e&&e[i]||null;e[i]=t}function u(e){return r.keys(e)}function l(e){return"["+e+"]"}function f(e,t){e=r.array(e);t=r.$(t);var n,a,o;if(e[i]){n=t(e[i]);if(r.isString(n))return n}for(a=0,o=e.length;!r.isValid(n)&&a<o;++a){n=t?t(e[a]):e[a]}return r.isDate(n)?"date":r.isNumber(n)?"number":r.isBoolean(n)?"boolean":r.isString(n)?"string":null}function c(e,t){if(!e.length)return;var n=t?r.identity:(t=u(e[0]),l);return t.reduce(function(t,r){return t[r]=f(e,n(r)),t},{})}function h(e,t,n){e=r.array(e);t=r.$(t);var i,a,s;var u=["boolean","integer","number","date"];for(i=0;i<e.length;++i){s=t?t(e[i]):e[i];for(a=0;a<u.length;++a){if((!n||!n.test(s))&&r.isValid(s)&&!o[u[a]](s)){u.splice(a,1);a-=1}}if(u.length===0)return"string"}return u[0]}function d(e,t,n){var i=t?r.identity:(t=u(e[0]),l);return t.reduce(function(t,r){t[r]=h(e,i(r),n);return t},{})}f.annotation=s;f.all=c;f.infer=h;f.inferAll=d;f.parsers=a;e.exports=f},gjoU:function(e,t,n){var r=n("zF6n");var i=n("5AQc");var a=n("YGNx");e.exports=r.keys(a.formats).reduce(function(e,t){e[t]=function(e,n,o){if(r.isString(e)){e={url:e}}if(arguments.length===2&&r.isFunction(n)){o=n;n=undefined}n=r.extend({parse:"auto"},n);n.type=t;var s=i(e,o?function(e,t){if(e){o(e,null);return}try{t=a(t,n);o(null,t)}catch(e){o(e,null)}}:undefined);if(!o)return a(s,n)};return e},{})},gtuQ:function(e,t){var n=0;function r(e){e=e===Object(e)?e:{data:e};e._id=++n;if(e._prev)e._prev=null;return e}function i(e,t){t=t||{};for(var n=0,r=e.length;n<r;++n){t[e[n]._id]=1}return t}function a(e,t){t=t||{};for(var n in e){if(n!=="_prev"&&n!=="_id")t[n]=e[n]}return t}e.exports={ingest:r,idMap:i,derive:function(e){return r(a(e))},rederive:function(e,t){return a(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){if(!e._prev){e._prev={_id:e._id}}},prev_update:function(e){var t=e._prev,n,r;if(t)for(n in e){if(n!=="_prev"&&n!=="_id"){t[n]=(r=e[n])instanceof Object&&r._prev?r._prev:r}}},reset:function(){n=0},idFilter:function(e){var t={};for(var n=arguments.length;--n>0;){i(arguments[n],t)}return e.filter(function(e){return!t[e._id]})}}},"h/tW":function(e,t,n){"use strict";(function(e){e[e["VALUES"]="values"]="VALUES";e[e["COUNT"]="count"]="COUNT";e[e["VALID"]="valid"]="VALID";e[e["MISSING"]="missing"]="MISSING";e[e["DISTINCT"]="distinct"]="DISTINCT";e[e["SUM"]="sum"]="SUM";e[e["MEAN"]="mean"]="MEAN";e[e["AVERAGE"]="average"]="AVERAGE";e[e["VARIANCE"]="variance"]="VARIANCE";e[e["VARIANCEP"]="variancep"]="VARIANCEP";e[e["STDEV"]="stdev"]="STDEV";e[e["STDEVP"]="stdevp"]="STDEVP";e[e["MEDIAN"]="median"]="MEDIAN";e[e["Q1"]="q1"]="Q1";e[e["Q3"]="q3"]="Q3";e[e["MODESKEW"]="modeskew"]="MODESKEW";e[e["MIN"]="min"]="MIN";e[e["MAX"]="max"]="MAX";e[e["ARGMIN"]="argmin"]="ARGMIN";e[e["ARGMAX"]="argmax"]="ARGMAX"})(t.AggregateOp||(t.AggregateOp={}));var r=t.AggregateOp;t.AGGREGATE_OPS=[r.VALUES,r.COUNT,r.VALID,r.MISSING,r.DISTINCT,r.SUM,r.MEAN,r.AVERAGE,r.VARIANCE,r.VARIANCEP,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MODESKEW,r.MIN,r.MAX,r.ARGMIN,r.ARGMAX];t.SUM_OPS=[r.COUNT,r.SUM,r.DISTINCT];t.SHARED_DOMAIN_OPS=[r.MEAN,r.AVERAGE,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MIN,r.MAX]},h36N:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("J731"),o=n("Hqva").Tuple;var s=["signals","scales","data","fields"];function u(e,t,n){var u=e.config(),l="",c=i.keys(n),g=[],m,v,y,_,x={},b={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:false};l+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\n"+"tmpl.datum  = item.datum;\n"+"tmpl.group  = group;\n"+"tmpl.parent = group.datum;\n";function M(e){if(_[e]==null)return;var t=i.array(_[e]),n,r;for(n=0,r=t.length;n<r;++n){b[e][t[n]]=1}}function k(e){var t=(e.parent?"parent_":"group_")+e.level;b._nRefs[t]=e}h(e,u,n);for(m=0,v=c.length;m<v;++m){_=n[y=c[m]];l+=m>0?"\n  ":"  ";if(_.rule){_=d(e,y,_.rule,g);l+="\n  "+_.code}else if(i.isArray(_)){_=d(e,y,_,g);l+="\n  "+_.code}else{_=p(u,y,_);l+="d += set(o, "+i.str(y)+", "+_.val+");"}x[y]=true;s.forEach(M);b.reflow=b.reflow||_.reflow;if(_.nested.length)_.nested.forEach(k)}i.keys(b._nRefs).forEach(function(e){b.nested.push(b._nRefs[e])});b.nested.sort(function(e,t){e=e.level;t=t.level;return e<t?-1:e>t?1:e>=t?0:NaN});if(x.x2){if(x.x){l+="\n  if (o.x > o.x2) { "+"\n    t = o.x;"+"\n    d += set(o, 'x', o.x2);"+"\n    d += set(o, 'x2', t); "+"\n  };";l+="\n  d += set(o, 'width', (o.x2 - o.x));"}else if(x.width){l+="\n  d += set(o, 'x', (o.x2 - o.width));"}else{l+="\n  d += set(o, 'x', o.x2);"}}if(x.xc){if(x.width){l+="\n  d += set(o, 'x', (o.xc - o.width/2));"}else{l+="\n  d += set(o, 'x', o.xc);"}}if(x.y2){if(x.y){l+="\n  if (o.y > o.y2) { "+"\n    t = o.y;"+"\n    d += set(o, 'y', o.y2);"+"\n    d += set(o, 'y2', t);"+"\n  };";l+="\n  d += set(o, 'height', (o.y2 - o.y));"}else if(x.height){l+="\n  d += set(o, 'y', (o.y2 - o.height));"}else{l+="\n  d += set(o, 'y', o.y2);"}}if(x.yc){if(x.height){l+="\n  d += set(o, 'y', (o.yc - o.height/2));"}else{l+="\n  d += set(o, 'y', o.yc);"}}if(f(t,x))l+="\n  d += (item.touch(), 1);";l+="\n  if (trans) trans.interpolate(item, o);";l+="\n  return d > 0;";try{var w=Function("item","group","trans","db","signals","predicates",l);w.tpl=o;w.exprs=g;w.util=i;w.d3=r;i.extend(w,i.template.context);return{encode:w,signals:i.keys(b.signals),scales:i.keys(b.scales),data:i.keys(b.data),fields:i.keys(b.fields),nested:b.nested,reflow:b.reflow}}catch(e){a.error(e);a.log(l)}}function l(e,t){if(!i.isObject(e)){e={reflow:false,nested:[]};s.forEach(function(t){e[t]=[]})}if(i.isObject(t)){e.reflow=e.reflow||t.reflow;e.nested.push.apply(e.nested,t.nested);s.forEach(function(n){e[n].push.apply(e[n],t[n])})}return e}function f(e,t){return t.path||(e==="area"||e==="line")&&(t.x||t.x2||t.width||t.y||t.y2||t.height||t.tension||t.interpolate)}var c=/{{(.*?)}}/g;function h(e,t,n){var r=n.shape,i=0,a,o;if(r&&(a=r.value)){if(t.shape&&t.shape[a]){a=t.shape[a]}r="";while((o=c.exec(a))!==null){r+=a.substring(i,o.index);r+=e.expr(o[1]).fn();i=c.lastIndex}n.shape.value=r+a.substring(i)}}function d(e,t,n,r){var a=e.config(),o=l(),s=[],u="";(n||[]).forEach(function(f,c){var h=p(a,t,f);l(o,h);if(f.test){var d=e.expr(f.test);o.signals.push.apply(o.signals,d.globals);o.data.push.apply(o.data,d.dataSources);u+="if (exprs["+r.length+"](item.datum, item.mark.group.datum, null)) {"+"\n    d += set(o, "+i.str(t)+", "+h.val+");";u+=n[c+1]?"\n  } else ":"  }";r.push(d.fn)}else{var g=f.predicate,m=g&&(g.name||g),v=e.predicate(m),y="predicates["+i.str(m)+"]",_=[],x=t+"_arg"+c;if(i.isObject(g)){i.keys(g).forEach(function(e){if(e==="name")return;var t=p(a,c,g[e],true);_.push(i.str(e)+": "+t.val);l(o,t)})}if(m){o.signals.push.apply(o.signals,v.signals);o.data.push.apply(o.data,v.data);s.push(x+" = {\n    "+_.join(",\n    ")+"\n  }");u+="if ("+y+".call("+y+","+x+", db, signals, predicates)) {"+"\n    d += set(o, "+i.str(t)+", "+h.val+");";u+=n[c+1]?"\n  } else ":"  }"}else{u+="{"+"\n    d += set(o, "+i.str(t)+", "+h.val+");"+"\n  }\n"}}});if(s.length)u="var "+s.join(",\n      ")+";\n  "+u;return o.code=u,o}function p(e,t,n,r){if(n==null)return null;if(t==="fill"||t==="stroke"){if(n.c){return g(e,"hcl",n.h,n.c,n.l)}else if(n.h||n.s){return g(e,"hsl",n.h,n.s,n.l)}else if(n.l||n.a){return g(e,"lab",n.l,n.a,n.b)}else if(n.r||n.g||n.b){return g(e,"rgb",n.r,n.g,n.b)}}var a=null,o=null,s=l(),u=null,f=null,c=null,h={};if(n.template!==undefined){a=i.template.source(n.template,"tmpl",h);i.keys(h).forEach(function(e){var t=i.field(e),n=t.shift();if(n==="parent"||n==="group"){s.nested.push({parent:n==="parent",group:n==="group",level:1})}else if(n==="datum"){s.fields.push(t[0])}else{s.signals.push(n)}})}if(n.value!==undefined){a=i.str(n.value)}if(n.signal!==undefined){u=i.field(n.signal);a="signals["+u.map(i.str).join("][")+"]";s.signals.push(u.shift())}if(n.field!==undefined){n.field=i.isString(n.field)?{datum:n.field}:n.field;f=m(n.field);a=f.val;l(s,f)}if(n.scale!==undefined){c=v(n.scale);o=c.val;l(s,c);s.scales.push(n.scale.name||n.scale);if(a!==null||n.band||n.mult||n.offset||!r){a=o+(n.band?".rangeBand()":"("+(a!==null?a:"item.datum.data")+")")}else if(r){a=o}}a="("+(n.mult?i.number(n.mult)+" * ":"")+a+")"+(n.offset?" + "+i.number(n.offset):"");return s.val=a,s}function g(e,t,n,r,a){var o=n?p(e,"",n):e.color[t][0],s=r?p(e,"",r):e.color[t][1],u=a?p(e,"",a):e.color[t][2],f=l();[o,s,u].forEach(function(e){if(i.isArray)return;l(f,e)});var c="(this.d3."+t+"("+[o.val,s.val,u.val].join(",")+') + "")';return f.val=c,f}function m(e){if(i.isString(e)){return{val:i.field(e).map(i.str).join("][")}}var t=e.level||1,n=(e.group||e.parent)&&t,r=n?Array(t).join("group.mark."):"",a=m(e.datum||e.group||e.parent||e.signal),o=a.val,s=l(null,a);if(e.datum){o="item.datum["+o+"]";s.fields.push(e.datum)}else if(e.group){o=r+"group["+o+"]";s.nested.push({level:t,group:true})}else if(e.parent){o=r+"group.datum["+o+"]";s.nested.push({level:t,parent:true})}else if(e.signal){o="signals["+o+"]";s.signals.push(i.field(e.signal)[0]);s.reflow=true}return s.val=o,s}function v(e){var t=null,n=null,r=l();if(i.isString(e)){t=i.str(e)}else if(e.name){t=i.isString(e.name)?i.str(e.name):(n=m(e.name)).val}else{t=(n=m(e)).val}t="(item.mark._scaleRefs["+t+"] = 1, group.scale("+t+"))";if(e.invert)t+=".invert";if(n)n.nested.forEach(function(e){e.scale=true});return n?(n.val=t,n):(r.val=t,r)}e.exports=u;function y(e){e=i.isArray(e)?{enum:e}:{type:e};var t=e.type==="number"&&e.type||"string";var n={type:"object",allOf:[{$ref:"#/refs/"+t+"Modifiers"},{oneOf:[{$ref:"#/refs/signal",required:["signal"]},{properties:{value:e},required:["value"]},{properties:{field:{$ref:"#/refs/field"}},required:["field"]},{properties:{band:{type:"boolean"}},required:["band"]}]}]};if(e.type==="string"){n.allOf[1].oneOf.push({properties:{template:{type:"string"}},required:["template"]})}return{oneOf:[{type:"object",properties:{rule:{type:"array",items:{allOf:[{$ref:"#/defs/rule"},n]}}},additionalProperties:false,required:["rule"]},{type:"array",items:{allOf:[{$ref:"#/defs/rule"},n]}},n]}}u.schema={refs:{field:{title:"FieldRef",oneOf:[{type:"string"},{oneOf:[{$ref:"#/refs/signal"},{type:"object",properties:{datum:{$ref:"#/refs/field"}},required:["datum"],additionalProperties:false},{type:"object",properties:{group:{$ref:"#/refs/field"},level:{type:"number"}},required:["group"],additionalProperties:false},{type:"object",properties:{parent:{$ref:"#/refs/field"},level:{type:"number"}},required:["parent"],additionalProperties:false}]}]},scale:{title:"ScaleRef",oneOf:[{$ref:"#/refs/field"},{type:"object",properties:{name:{$ref:"#/refs/field"},invert:{type:"boolean",default:false}},required:["name"]}]},stringModifiers:{properties:{scale:{$ref:"#/refs/scale"}}},numberModifiers:{properties:{mult:{type:"number"},offset:{type:"number"},scale:{$ref:"#/refs/scale"}}},value:y({},"value"),numberValue:y("number","numberValue"),stringValue:y("string","stringValue"),booleanValue:y("boolean","booleanValue"),arrayValue:y("array","arrayValue"),colorValue:{title:"ColorRef",oneOf:[{$ref:"#/refs/stringValue"},{type:"object",properties:{r:{$ref:"#/refs/numberValue"},g:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["r","g","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},s:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","s","l"]},{type:"object",properties:{l:{$ref:"#/refs/numberValue"},a:{$ref:"#/refs/numberValue"},b:{$ref:"#/refs/numberValue"}},required:["l","a","b"]},{type:"object",properties:{h:{$ref:"#/refs/numberValue"},c:{$ref:"#/refs/numberValue"},l:{$ref:"#/refs/numberValue"}},required:["h","c","l"]}]}},defs:{rule:{anyOf:[{type:"object",properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}}},{type:"object",properties:{test:{type:"string"}}}]},propset:{title:"Mark property set",type:"object",properties:{x:{$ref:"#/refs/numberValue"},x2:{$ref:"#/refs/numberValue"},xc:{$ref:"#/refs/numberValue"},width:{$ref:"#/refs/numberValue"},y:{$ref:"#/refs/numberValue"},y2:{$ref:"#/refs/numberValue"},yc:{$ref:"#/refs/numberValue"},height:{$ref:"#/refs/numberValue"},opacity:{$ref:"#/refs/numberValue"},fill:{$ref:"#/refs/colorValue"},fillOpacity:{$ref:"#/refs/numberValue"},stroke:{$ref:"#/refs/colorValue"},strokeWidth:{$ref:"#/refs/numberValue"},strokeOpacity:{$ref:"#/refs/numberValue"},strokeDash:{$ref:"#/refs/arrayValue"},strokeDashOffset:{$ref:"#/refs/numberValue"},cursor:{$ref:"#/refs/stringValue"},clip:{$ref:"#/refs/booleanValue"},size:{$ref:"#/refs/numberValue"},shape:{anyOf:[y(["circle","square","cross","diamond","triangle-up","triangle-down"]),{$ref:"#/refs/stringValue"}]},path:{$ref:"#/refs/stringValue"},innerRadius:{$ref:"#/refs/numberValue"},outerRadius:{$ref:"#/refs/numberValue"},startAngle:{$ref:"#/refs/numberValue"},endAngle:{$ref:"#/refs/numberValue"},interpolate:y(["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"]),tension:{$ref:"#/refs/numberValue"},orient:y(["horizontal","vertical"]),url:{$ref:"#/refs/stringValue"},align:y(["left","right","center"]),baseline:y(["top","middle","bottom","alphabetic"]),text:{$ref:"#/refs/stringValue"},dx:{$ref:"#/refs/numberValue"},dy:{$ref:"#/refs/numberValue"},radius:{$ref:"#/refs/numberValue"},theta:{$ref:"#/refs/numberValue"},angle:{$ref:"#/refs/numberValue"},font:{$ref:"#/refs/stringValue"},fontSize:{$ref:"#/refs/numberValue"},fontWeight:{$ref:"#/refs/stringValue"},fontStyle:{$ref:"#/refs/stringValue"}},additionalProperties:false}}}},hBex:function(e,t,n){"use strict";var r=n("o+e1");var i=n("WJ2w");var a=n("ZAUf");var o;(function(e){function t(e){var t=(e.transform().calculate||[]).reduce(function(e,t){e[t.field]=true;return e},{});var n={};e.forEach(function(e){if(e.type===i.TEMPORAL){n[e.field]="date"}else if(e.type===i.QUANTITATIVE){if(r.isCount(e)||t[e.field]){return}n[e.field]="number"}});return n}e.parseUnit=t;function n(e){var n=t(e);var r=e.child().component.data;if(!r.source&&r.formatParse){a.extend(n,r.formatParse);delete r.formatParse}return n}e.parseFacet=n;function o(e){var n=t(e);e.children().forEach(function(t){var r=t.component.data;if(e.compatibleSource(t)&&!a.differ(r.formatParse,n)){a.extend(n,r.formatParse);delete r.formatParse}});return n}e.parseLayer=o})(o=t.formatParse||(t.formatParse={}))},hv1v:function(e,t,n){var r=n("zicW");var i="time",a="utc",o="string",s="ordinal",u="number";function l(e,t,n,r){var i=n||f(e);return h(e,t,i,r)}function f(e){switch(e.type){case i:return i;case a:return a;case s:return o;default:return u}}function c(e,t,n,r){if(n==null)return r;var i=e.base(),a=Math.min(i,e.ticks().length/n),o=t[0]>0?(s=1e-12,Math.ceil):(s=-1e-12,Math.floor),s;function u(e){return(t[0]<0?-Math.log(e>0?0:-e):Math.log(e<0?0:e))/Math.log(i)}function l(e){return t[0]<0?-Math.pow(i,-e):Math.pow(i,e)}return function(e){return l(o(u(e)+s))/e>=a?r(e):""}}function h(e,t,n,o){var s=r.format,l=e.type==="log",f;switch(n){case u:f=e.domain();return l?c(e,f,t,s.auto.number(o||null)):s.auto.linear(f,t,o||null);case i:return(o?s:s.auto).time(o);case a:return(o?s:s.auto).utc(o);default:return String}}e.exports={getTickFormat:l}},iIpz:function(e,t,n){"use strict"},iMk1:function(e,t){function n(e){this.mark=e}var r=n.prototype;r.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&t[e]!=null};r.cousin=function(e,t){if(e===0)return this;e=e||-1;var n=this.mark,r=n.group,i=t==null?n.items.indexOf(this):t,a=r.items.indexOf(n)+e;return r.items[a].items[i]};r.sibling=function(e){if(e===0)return this;e=e||-1;var t=this.mark,n=t.items.indexOf(this)+e;return t.items[n]};r.remove=function(){var e=this,t=e.mark.items,n=t.indexOf(e);if(n>=0){if(n===t.length-1){t.pop()}else{t.splice(n,1)}}return e};r.touch=function(){if(this.pathCache)this.pathCache=null};e.exports=n},j8cM:function(e,t,n){"use strict";(function(e){e[e["AREA"]="area"]="AREA";e[e["BAR"]="bar"]="BAR";e[e["LINE"]="line"]="LINE";e[e["POINT"]="point"]="POINT";e[e["TEXT"]="text"]="TEXT";e[e["TICK"]="tick"]="TICK";e[e["RULE"]="rule"]="RULE";e[e["CIRCLE"]="circle"]="CIRCLE";e[e["SQUARE"]="square"]="SQUARE";e[e["ERRORBAR"]="errorBar"]="ERRORBAR"})(t.Mark||(t.Mark={}));var r=t.Mark;t.AREA=r.AREA;t.BAR=r.BAR;t.LINE=r.LINE;t.POINT=r.POINT;t.TEXT=r.TEXT;t.TICK=r.TICK;t.RULE=r.RULE;t.CIRCLE=r.CIRCLE;t.SQUARE=r.SQUARE;t.ERRORBAR=r.ERRORBAR;t.PRIMITIVE_MARKS=[t.AREA,t.BAR,t.LINE,t.POINT,t.TEXT,t.TICK,t.RULE,t.CIRCLE,t.SQUARE]},jGoH:function(e,t,n){"use strict";var r=n("P/aK");var i=n("QSMf");var a=n("o+e1");var o=n("Fw/k");var s=n("ZAUf");var u=function(){function e(){this._nameMap={}}e.prototype.rename=function(e,t){this._nameMap[e]=t};e.prototype.get=function(e){while(this._nameMap[e]){e=this._nameMap[e]}return e};return e}();var l=function(){function e(e,t,n){this._warnings=[];this._parent=t;this._name=e.name||n;this._dataNameMap=t?t._dataNameMap:new u;this._scaleNameMap=t?t._scaleNameMap:new u;this._sizeNameMap=t?t._sizeNameMap:new u;this._data=e.data;this._description=e.description;this._transform=e.transform;this.component={data:null,layout:null,mark:null,scale:null,axis:null,axisGroup:null,gridGroup:null,legend:null}}e.prototype.parse=function(){this.parseData();this.parseSelectionData();this.parseLayoutData();this.parseScale();this.parseAxis();this.parseLegend();this.parseAxisGroup();this.parseGridGroup();this.parseMark()};e.prototype.assembleScales=function(){return s.flatten(s.vals(this.component.scale).map(function(e){var t=[e.main];if(e.colorLegend){t.push(e.colorLegend)}if(e.binColorLegend){t.push(e.binColorLegend)}return t}))};e.prototype.assembleAxes=function(){return s.vals(this.component.axis)};e.prototype.assembleLegends=function(){return s.vals(this.component.legend)};e.prototype.assembleGroup=function(){var e={};e.marks=this.assembleMarks();var t=this.assembleScales();if(t.length>0){e.scales=t}var n=this.assembleAxes();if(n.length>0){e.axes=n}var r=this.assembleLegends();if(r.length>0){e.legends=r}return e};e.prototype.reduce=function(e,t,n){return i.channelMappingReduce(this.channels(),this.mapping(),e,t,n)};e.prototype.forEach=function(e,t){i.channelMappingForEach(this.channels(),this.mapping(),e,t)};e.prototype.parent=function(){return this._parent};e.prototype.name=function(e,t){if(t===void 0){t="_"}return(this._name?this._name+t:"")+e};e.prototype.description=function(){return this._description};e.prototype.data=function(){return this._data};e.prototype.renameData=function(e,t){this._dataNameMap.rename(e,t)};e.prototype.dataName=function(e){return this._dataNameMap.get(this.name(String(e)))};e.prototype.renameSize=function(e,t){this._sizeNameMap.rename(e,t)};e.prototype.channelSizeName=function(e){return this.sizeName(e===r.X||e===r.COLUMN?"width":"height")};e.prototype.sizeName=function(e){return this._sizeNameMap.get(this.name(e,"_"))};e.prototype.transform=function(){return this._transform||{}};e.prototype.field=function(e,t){if(t===void 0){t={}}var n=this.fieldDef(e);if(n.bin){t=s.extend({binSuffix:this.scale(e).type===o.ScaleType.ORDINAL?"_range":"_start"},t)}return a.field(n,t)};e.prototype.scale=function(e){return this._scale[e]};e.prototype.isOrdinalScale=function(e){var t=this.scale(e);return t&&t.type===o.ScaleType.ORDINAL};e.prototype.renameScale=function(e,t){this._scaleNameMap.rename(e,t)};e.prototype.scaleName=function(e){return this._scaleNameMap.get(this.name(e+""))};e.prototype.sort=function(e){return(this.mapping()[e]||{}).sort};e.prototype.axis=function(e){return this._axis[e]};e.prototype.legend=function(e){return this._legend[e]};e.prototype.config=function(){return this._config};e.prototype.addWarning=function(e){s.warning(e);this._warnings.push(e)};e.prototype.warnings=function(){return this._warnings};e.prototype.isUnit=function(){return false};e.prototype.isFacet=function(){return false};e.prototype.isLayer=function(){return false};return e}();t.Model=l},jMte:function(e,t,n){"use strict";var r=n("x6Fv");var i=n("ZAUf");var a=n("t3C9");var o=n("1PdY");var s=n("nOes");var u=n("pAWG");var l=n("736r");var f;(function(e){function t(e){var t=e.data();if(t){var n={name:e.dataName(r.SOURCE)};if(t.values&&t.values.length>0){n.values=t.values;n.format={type:"json"}}else if(t.url){n.url=t.url;var a=/(?:\.([^.]+))?$/.exec(n.url)[1];if(!i.contains(["json","csv","tsv","topojson"],a)){a="json"}var o=t.format||{};var s=o.type||t["formatType"];n.format=i.extend({type:s?s:a},o.property?{property:o.property}:{},o.feature?{feature:o.feature}:o.mesh?{mesh:o.mesh}:{})}return n}else if(!e.parent()){return{name:e.dataName(r.SOURCE)}}return undefined}e.parseUnit=t;function n(e){var n=t(e);if(!e.child().component.data.source){e.child().renameData(e.child().dataName(r.SOURCE),e.dataName(r.SOURCE))}return n}e.parseFacet=n;function f(e){var n=t(e);e.children().forEach(function(t){var n=t.component.data;if(e.compatibleSource(t)){var i=!n.filter&&!n.formatParse&&!n.nullFilter;if(i){t.renameData(t.dataName(r.SOURCE),e.dataName(r.SOURCE));delete n.source}else{n.source={name:t.dataName(r.SOURCE),source:e.dataName(r.SOURCE)}}}});return n}e.parseLayer=f;function c(e,t){if(t.source){var n=t.source;if(t.formatParse){t.source.format=t.source.format||{};t.source.format.parse=t.formatParse}n.transform=[].concat(a.nullFilter.assemble(t),u.formula.assemble(t),o.filter.assemble(t),s.bin.assemble(t),l.timeUnit.assemble(t));return n}return null}e.assemble=c})(f=t.source||(t.source={}))},jNWb:function(e,t,n){var r=n("H3bJ"),i=n("4XOj");var a=e.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));e[r]='"use strict"; return ('+i.code+");";var o=Function.apply(null,e);i.fn=e.length>8?function(){return o.apply(i,arguments)}:function(e,t,n,r,a,s,u){return o.call(i,e,t,n,r,a,s,u)};return i};o.codegen=n;return o},functions:n("nj7R"),constants:n("MSrK")}},jbgm:function(e,t,n){var r=n("cwb4");e.exports=function(e,t){return i(r(e,t),t)};function i(e,t){var n=t&&t.children||"children",r=t&&t.parent||"parent",i=[];function a(e,t){e[r]=t;i.push(e);var o=e[n];if(o){for(var s=0;s<o.length;++s){a(o[s],e)}}}a(e,null);return i.root=e,i}},juLC:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=i.ChangeSet,o=i.Tuple,s=n("J731"),u=n("4JPs"),l=n("acp7");function f(e){l.prototype.init.call(this,e);u.addParameters(this,{with:{type:"data"},diagonal:{type:"value",default:"true"},filter:{type:"expr"}});this._output={left:"a",right:"b"};this._lastWith=null;this._cids={};this._cache={};return this.router(true).produces(true)}var c=f.prototype=Object.create(l.prototype);c.constructor=f;function h(e,t){var n=this._cache,r=n[e._id]||(n[e._id]={c:[],f:false});r.c.push(t)}function d(e,t,n){return e?t._id+"_"+n._id:n._id+"_"+t._id}function p(e,t,n,r,i,a,s){var u=this._output,l=this._cache,f=this._cids,c=e.add,p=false,g=0,m=n.length,v={},y,_;for(;g<m;++g){y=n[g];_=d(t,s,y);if(f[_])continue;if(s._id===y._id&&!r)continue;o.set(v,u.left,t?s:y);o.set(v,u.right,t?y:s);if(!i||i(v)){c.push(v=o.ingest(v));h.call(this,s,v);if(s._id!==y._id)h.call(this,y,v);a[v._id]=1;f[_]=true;v={}}else{if(l[y._id])l[y._id].f=true;p=true}}if(l[s._id])l[s._id].f=p}function g(e,t,n,r,i,a,o,s){var u=this._output,l=this._cache,f=this._cids,c=l[s._id],h=c&&c.c,g=!c||c.f,m=e.mod,v=e.rem,y,_,x,b,M;if(h){for(y=h.length-1;y>=0;--y){_=h[y];b=s===_[u.left];x=b?_[u.right]:_[u.left];M=d(b,s,x);if(!l[x._id]){f[M]=false;h.splice(y,1);continue}if(!i||i(_)){if(a[_._id])continue;m.push(_);a[_._id]=1}else{if(!o[_._id])v.push.apply(v,h.splice(y,1));o[_._id]=1;f[M]=false;c.f=true}}}if(i&&g)p.call(this,e,t,n,r,i,a,s)}function m(e,t,n,r){var i=this._output,a=this._cache[r._id],o=this._cids,s=e.rem,u,l,f,c,h;if(!a)return;for(u=0,l=a.c.length;u<l;++u){f=a.c[u];h=r===f[i.left];c=h?f[i.right]:f[i.left];o[d(h,r,c)]=false;if(!n[f._id]){s.push(f);n[f._id]=1}}this._cache[r._id]=null}function v(e,t){var n=this._cache,i=r.keys(n),a=e.rem,o,s,u,l,f,c;for(o=0,s=i.length;o<s;++o){f=n[i[o]];for(u=0,l=f.c.length;u<l;++u){c=f.c[u];if(t[c._id])continue;a.push(c);t[c._id]=1}}this._cache={};this._cids={};this._lastWith=null}c.batchTransform=function(e,t,n){s.debug(e,["crossing"]);var r=this.param("with"),i=this.param("diagonal"),o=this._output,u=this.param("filter")||null,l=!r.name,f=l?e:r.source.last(),c=l?t:r.source.values(),h=a.create(e),d={},y={};if(n){v.call(this,h,y);t.forEach(p.bind(this,h,true,c,i,u,d));this._lastWith=f.stamp}else{e.rem.forEach(m.bind(this,h,true,y));e.add.forEach(p.bind(this,h,true,c,i,u,d));if(f.stamp>this._lastWith){f.rem.forEach(m.bind(this,h,false,y));f.add.forEach(p.bind(this,h,false,t,i,u,d));f.mod.forEach(g.bind(this,h,false,t,i,u,d,y));this._lastWith=f.stamp}e.mod.forEach(g.bind(this,h,true,c,i,u,d,y))}h.fields[o.left]=1;h.fields[o.right]=1;return h};e.exports=f;f.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Cross transform",description:"Compute the cross-product of two data sets.",type:"object",properties:{type:{enum:["cross"]},with:{type:"string",description:"The name of the secondary data set to cross with the primary data. "+"If unspecified, the primary data is crossed with itself."},diagonal:{oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],description:'If false, items along the "diagonal" of the cross-product '+"(those elements with the same index in their respective array) "+"will not be included in the output.",default:true},filter:{type:"string",description:"A string containing an expression (in JavaScript syntax) "+"to filter the resulting data elements."},output:{type:"object",description:"Rename the output data fields",properties:{left:{type:"string",default:"a"},right:{type:"string",default:"b"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},jxr4:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("j8cM");var o=n("WJ2w");var s=n("ZAUf");var u=n("MtYt");var l=n("TLMq");function f(e){return[r.COLOR,r.SIZE,r.SHAPE].reduce(function(t,n){if(e.legend(n)){t[n]=h(e,n)}return t},{})}t.parseLegendComponent=f;function c(e,t){switch(t){case r.COLOR:var n=e.fieldDef(r.COLOR);var i=e.scaleName(p(n)?l.COLOR_LEGEND:r.COLOR);return e.config().mark.filled?{fill:i}:{stroke:i};case r.SIZE:return{size:e.scaleName(r.SIZE)};case r.SHAPE:return{shape:e.scaleName(r.SHAPE)}}return null}function h(e,t){var n=e.fieldDef(t);var r=e.legend(t);var i=e.config();var a=c(e,t);a.title=d(r,n,i);var o=u.numberFormat(n,r.format,i);if(o){a.format=o}["offset","orient","values"].forEach(function(e){var t=r[e];if(t!==undefined){a[e]=t}});var l=typeof r!=="boolean"&&r.properties||{};["title","symbols","legend","labels"].forEach(function(r){var i=g[r]?g[r](n,l[r],e,t):l[r];if(i!==undefined&&s.keys(i).length>0){a.properties=a.properties||{};a.properties[r]=i}});return a}t.parseLegend=h;function d(e,t,n){if(typeof e!=="boolean"&&e.title){return e.title}return i.title(t,n)}t.title=d;function p(e){return e.type===o.ORDINAL||e.bin||e.timeUnit}t.useColorLegendScale=p;var g;(function(e){function t(e,t,n,i){var o={};var l=n.mark();var f=n.legend(i);switch(l){case a.BAR:case a.TICK:case a.TEXT:o.shape={value:"square"};break;case a.CIRCLE:case a.SQUARE:o.shape={value:l};break;case a.POINT:case a.LINE:case a.AREA:break}var c=n.config().mark.filled;var h=i===r.COLOR?s.without(u.FILL_STROKE_CONFIG,[c?"fill":"stroke","strokeDash","strokeDashOffset"]):s.without(u.FILL_STROKE_CONFIG,["strokeDash","strokeDashOffset"]);h=s.without(h,["strokeDash","strokeDashOffset"]);u.applyMarkConfig(o,n,h);if(c){o.strokeWidth={value:0}}var d;if(n.has(r.COLOR)&&i===r.COLOR){if(p(e)){d={scale:n.scaleName(r.COLOR),field:"data"}}}else if(n.fieldDef(r.COLOR).value){d={value:n.fieldDef(r.COLOR).value}}if(d!==undefined){if(c){o.fill=d}else{o.stroke=d}}else if(i!==r.COLOR){o[c?"fill":"stroke"]=o[c?"fill":"stroke"]||{value:n.config().mark.color}}if(f.symbolColor!==undefined){o.fill={value:f.symbolColor}}if(f.symbolShape!==undefined){o.shape={value:f.symbolShape}}if(f.symbolSize!==undefined){o.size={value:f.symbolSize}}if(f.symbolStrokeWidth!==undefined){o.strokeWidth={value:f.symbolStrokeWidth}}o=s.extend(o,t||{});return s.keys(o).length>0?o:undefined}e.symbols=t;function n(e,t,n,i){var a=n.legend(i);var f=n.config();var c={};if(i===r.COLOR){if(e.type===o.ORDINAL){t=s.extend({text:{scale:n.scaleName(l.COLOR_LEGEND),field:"data"}},t||{})}else if(e.bin){t=s.extend({text:{scale:n.scaleName(l.COLOR_LEGEND_LABEL),field:"data"}},t||{})}else if(e.type===o.TEMPORAL){t=s.extend({text:{template:u.timeTemplate("datum.data",e.timeUnit,a.format,a.shortTimeLabels,f)}},t||{})}}if(a.labelAlign!==undefined){c.align={value:a.labelAlign}}if(a.labelColor!==undefined){c.stroke={value:a.labelColor}}if(a.labelFont!==undefined){c.font={value:a.labelFont}}if(a.labelFontSize!==undefined){c.fontSize={value:a.labelFontSize}}if(a.labelBaseline!==undefined){c.baseline={value:a.labelBaseline}}c=s.extend(c,t||{});return s.keys(c).length>0?c:undefined}e.labels=n;function i(e,t,n,r){var i=n.legend(r);var a={};if(i.titleColor!==undefined){a.stroke={value:i.titleColor}}if(i.titleFont!==undefined){a.font={value:i.titleFont}}if(i.titleFontSize!==undefined){a.fontSize={value:i.titleFontSize}}if(i.titleFontWeight!==undefined){a.fontWeight={value:i.titleFontWeight}}a=s.extend(a,t||{});return s.keys(a).length>0?a:undefined}e.title=i})(g=t.properties||(t.properties={}))},jyAW:function(e,t,n){"use strict";var r={value:function(){}};function i(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new a(n)}function a(e){this._=e}function o(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0)n=e.slice(r+1),e=e.slice(0,r);if(e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}a.prototype=i.prototype={constructor:a,on:function(e,t){var n=this._,r=o(e+"",n),i,a=-1,l=r.length;if(arguments.length<2){while(++a<l)if((i=(e=r[a]).type)&&(i=s(n[i],e.name)))return i;return}if(t!=null&&typeof t!=="function")throw new Error("invalid callback: "+t);while(++a<l){if(i=(e=r[a]).type)n[i]=u(n[i],e.name,t);else if(t==null)for(i in n)n[i]=u(n[i],e.name,null)}return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new a(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function s(e,t){for(var n=0,r=e.length,i;n<r;++n){if((i=e[n]).name===t){return i.value}}}function u(e,t,n){for(var i=0,a=e.length;i<a;++i){if(e[i].name===t){e[i]=r,e=e.slice(0,i).concat(e.slice(i+1));break}}if(n!=null)e.push({name:t,value:n});return e}t["a"]=i},k2D6:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("MtYt");var o;(function(e){function t(){return"area"}e.markType=t;function n(e){var t={};var n=e.config();var i=n.mark.orient;if(i){t.orient={value:i}}var f=e.stack();var c=o(e.encoding().x,e.scaleName(r.X),i,f);if(c){t.x=c}var h=u(e.encoding().y,e.scaleName(r.Y),i,f);if(h){t.y=h}var d=s(e.encoding().x,e.encoding().x2,e.scaleName(r.X),i,f);if(d){t.x2=d}var p=l(e.encoding().y,e.encoding().y2,e.scaleName(r.Y),i,f);if(p){t.y2=p}a.applyColorAndOpacity(t,e);a.applyMarkConfig(t,e,["interpolate","tension"]);return t}e.properties=n;function o(e,t,n,a){if(a&&r.X===a.fieldChannel){return{scale:t,field:i.field(e,{suffix:"_start"})}}else if(i.isMeasure(e)){if(n==="horizontal"){if(e&&e.field){return{scale:t,field:i.field(e)}}else{return{scale:t,value:0}}}else{return{scale:t,field:i.field(e)}}}else if(i.isDimension(e)){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}return undefined}e.x=o;function s(e,t,n,a,o){if(o&&r.X===o.fieldChannel){if(a==="horizontal"){return{scale:n,field:i.field(e,{suffix:"_end"})}}}else if(i.isMeasure(t)){if(a==="horizontal"){if(t&&t.field){return{scale:n,field:i.field(t)}}else{return{scale:n,value:0}}}}return undefined}e.x2=s;function u(e,t,n,a){if(a&&r.Y===a.fieldChannel){return{scale:t,field:i.field(e,{suffix:"_start"})}}else if(i.isMeasure(e)){if(n!=="horizontal"){if(e&&e.field){return{scale:t,field:i.field(e)}}else{return{field:{group:"height"}}}}else{return{scale:t,field:i.field(e)}}}else if(i.isDimension(e)){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}return undefined}e.y=u;function l(e,t,n,a,o){if(o&&r.Y===o.fieldChannel){if(a!=="horizontal"){return{scale:n,field:i.field(e,{suffix:"_end"})}}}else if(i.isMeasure(e)){if(a!=="horizontal"){if(t&&t.field){return{scale:n,field:i.field(t)}}else{return{scale:n,value:0}}}}return undefined}e.y2=l;function f(e){return undefined}e.labels=f})(o=t.area||(t.area={}))},k66X:function(e,t,n){"use strict";var r=n("ZAUf");var i=n("wKIX");var a;(function(e){function t(e){return e.reduce(function(e,t,n){if(t.timeUnit){var r=i.rawDomain(t.timeUnit,n);if(r){e[t.timeUnit]=true}}return e},{})}e.parseUnit=t;function n(e){return r.extend(t(e),e.child().component.data.timeUnitDomain)}e.parseFacet=n;function a(e){return r.extend(t(e),e.children().forEach(function(e){return e.component.data.timeUnitDomain}))}e.parseLayer=a;function o(e){return r.keys(e.timeUnitDomain).reduce(function(e,t){var n=t;var r=i.rawDomain(n,null);if(r){e.push({name:n,values:r,transform:[{type:"formula",field:"date",expr:i.parseExpression(n,"datum.data",true)}]})}return e},[])}e.assemble=o})(a=t.timeUnitDomain||(t.timeUnitDomain={}))},kC7m:function(e,t,n){e.exports={arc:n("evf9"),area:n("lTFi"),group:n("ZCPb"),image:n("9+55"),line:n("eVGq"),path:n("7Zus"),rect:n("HaGw"),rule:n("qnrb"),symbol:n("zPnY"),text:n("Wd6V")}},kowr:function(e,t,n){"use strict";var r=n("x6Fv");var i=n("o+e1");var a;(function(e){function t(e){var t=e.stack();if(t){var n=t.groupbyChannel;var i=t.fieldChannel;return{name:e.dataName(r.STACKED_SCALE),source:e.dataName(r.SUMMARY),transform:[{type:"aggregate",groupby:[e.field(n)],summarize:[{ops:["sum"],field:e.field(i)}]}]}}return null}e.parseUnit=t;function n(e){var t=e.child();var n=t.component.data;if(!n.source&&n.stackScale){var a=n.stackScale;var o=e.dataName(r.STACKED_SCALE);t.renameData(a.name,o);a.name=o;a.source=e.dataName(r.SUMMARY);a.transform[0].groupby=e.reduce(function(e,t){e.push(i.field(t));return e},a.transform[0].groupby);delete n.stackScale;return a}return null}e.parseFacet=n;function a(e){return null}e.parseLayer=a;function o(e){return e.stackScale}e.assemble=o})(a=t.stackScale||(t.stackScale={}))},lKLM:function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("SbOu"),o=n("v0Fq");var s=new(n("LHV8").Bounds);var u="ordinal";function l(e,t){var n,l=t.orient,h=0,p=t.titleOffset,g={},S="front",E=false,A=null,T=t.tickSize,O=t.tickSize,N=t.tickSize,L=t.tickPadding||t.padding,C=null,R=null,I=null,D=0,U=t.ticks,P={},z={},F={},j={},q={},Y={},$={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}};var H={};function W(){g.type=null}function V(e){return{data:e}}function X(e){var t=C||(n.ticks?n.ticks(U):n.domain()),r=c(n,t,D).map(V);t=t.map(function(t){return t=V(t),t.label=e(t.data),t});return[t,r]}H.def=function(){if(!g.type)Z(n);var e=o.getTickFormat(n,U,I,R),t=X(e),r=A?[A].map(V):[];g.marks[0].from=function(){return E?t[0]:[]};g.marks[1].from=function(){return t[0]};g.marks[2].from=function(){return t[1]};g.marks[3].from=g.marks[1].from;g.marks[4].from=function(){return[1]};g.marks[5].from=function(){return r};g.offset=h;g.orient=l;g.layer=S;if(p==="auto")G(g);return g};function G(e){var n=e.orient,r=e.marks[5].properties.update,a=r.encode,o=t.titleOffsetAutoMin,u=t.titleOffsetAutoMax,l=t.titleOffsetAutoMargin;r.encode=function(e,t,r,f,c,h){var d=a.call(a,e,t,r,f,c,h),p=n==="bottom"||n==="top"?"y":"x";if(q[p]!=null)return d;s.clear().union(t.items[3].bounds).union(t.items[4].bounds);var g=r?{}:e,m=n==="left"||n==="right"?"width":"height",v=n==="top"||n==="left"?-1:1,y=~~(s[m]()+e.fontSize/2+l);i.set(g,p,v*Math.min(Math.max(o,y),u));if(r)r.interpolate(e,g);return true}}function Z(n){var i,o,s;if(n.type===u){i={scale:n.scaleName,offset:.5+n.rangeBand()/2};o=i}else{i={scale:n.scaleName,offset:.5};o={scale:n.scaleName+":prev",offset:.5}}s=d(n);r.extend($.gridLines,b(t));r.extend($.majorTicks,b(t));r.extend($.minorTicks,b(t));r.extend($.tickLabels,M(t));r.extend($.domain,w(t));r.extend($.title,k(t));$.gridLines.properties.enter.stroke={value:t.gridColor};$.gridLines.properties.enter.strokeOpacity={value:t.gridOpacity};$.gridLines.properties.enter.strokeWidth={value:t.gridWidth};$.gridLines.properties.enter.strokeDash={value:t.gridDash};v(l,$.gridLines,o,i,Infinity,n,t,h);v(l,$.majorTicks,o,i,T,n,t);v(l,$.minorTicks,o,i,O,n,t);m(l,$.tickLabels,o,i,T,L);_(l,$.domain,s,N);y(l,$.title,s,+p||-1);r.extend($.gridLines.properties.update,P);r.extend($.majorTicks.properties.update,F);r.extend($.minorTicks.properties.update,j);r.extend($.tickLabels.properties.update,z);r.extend($.domain.properties.update,Y);r.extend($.title.properties.update,q);var f=[$.gridLines,$.majorTicks,$.minorTicks,$.tickLabels,$.domain,$.title];r.extend(g,{type:"group",interactive:false,properties:{enter:{encode:x,scales:[n.scaleName],signals:[],data:[]},update:{encode:x,scales:[n.scaleName],signals:[],data:[]}}});g.marks=f.map(function(t){return a(e,t)})}H.scale=function(e){if(!arguments.length)return n;if(n!==e){n=e;W()}return H};H.orient=function(e){if(!arguments.length)return l;if(l!==e){l=e in f?e+"":t.orient;W()}return H};H.title=function(e){if(!arguments.length)return A;if(A!==e){A=e;W()}return H};H.tickCount=function(e){if(!arguments.length)return U;U=e;return H};H.tickValues=function(e){if(!arguments.length)return C;C=e;return H};H.tickFormat=function(e){if(!arguments.length)return R;if(R!==e){R=e;W()}return H};H.tickFormatType=function(e){if(!arguments.length)return I;if(I!==e){I=e;W()}return H};H.tickSize=function(e,t){if(!arguments.length)return T;var n=arguments.length-1,r=+e,i=n>1?+t:T,a=n>0?+arguments[n]:T;if(T!==r||O!==i||N!==a){W()}T=r;O=i;N=a;return H};H.tickSubdivide=function(e){if(!arguments.length)return D;D=+e;return H};H.offset=function(e){if(!arguments.length)return h;h=r.isObject(e)?e:+e;return H};H.tickPadding=function(e){if(!arguments.length)return L;if(L!==+e){L=+e;W()}return H};H.titleOffset=function(e){if(!arguments.length)return p;if(p!==e){p=e;W()}return H};H.layer=function(e){if(!arguments.length)return S;if(S!==e){S=e;W()}return H};H.grid=function(e){if(!arguments.length)return E;if(E!==e){E=e;W()}return H};H.gridLineProperties=function(e){if(!arguments.length)return P;if(P!==e){P=e}return H};H.majorTickProperties=function(e){if(!arguments.length)return F;if(F!==e){F=e}return H};H.minorTickProperties=function(e){if(!arguments.length)return j;if(j!==e){j=e}return H};H.tickLabelProperties=function(e){if(!arguments.length)return z;if(z!==e){z=e}return H};H.titleProperties=function(e){if(!arguments.length)return q;if(q!==e){q=e}return H};H.domainProperties=function(e){if(!arguments.length)return Y;if(Y!==e){Y=e}return H};H.reset=function(){W();return H};return H}var f={top:1,right:1,bottom:1,left:1};function c(e,t,n){var r=[];if(n&&t.length>1){var i=h(e.domain()),a=-1,o=t.length,s=(t[1]-t[0])/++n,u,l;while(++a<o){for(u=n;--u>0;){if((l=+t[a]-u*s)>=i[0]){r.push(l)}}}for(--a,u=0;++u<n&&(l=+t[a]+u*s)<i[1];){r.push(l)}}return r}function h(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function d(e){return e.rangeExtent?e.rangeExtent():h(e.range())}var p={bottom:"center",top:"center",left:"right",right:"left"};var g={bottom:"top",top:"bottom",left:"middle",right:"middle"};function m(e,t,n,i,a,o){a=Math.max(a,0)+o;if(e==="left"||e==="top"){a*=-1}if(e==="top"||e==="bottom"){r.extend(t.properties.enter,{x:n,y:{value:a}});r.extend(t.properties.update,{x:i,y:{value:a},align:{value:"center"},baseline:{value:g[e]}})}else{r.extend(t.properties.enter,{x:{value:a},y:n});r.extend(t.properties.update,{x:{value:a},y:i,align:{value:p[e]},baseline:{value:"middle"}})}}function v(e,t,n,i,a,o,s,l){var f=e==="left"||e==="top"?-1:1;if(a===Infinity){a=e==="top"||e==="bottom"?{field:{group:"height",level:2},mult:-f,offset:l*-f}:{field:{group:"width",level:2},mult:-f,offset:l*-f}}else{a={value:f*a,offset:l}}if(s.tickPlacement==="between"&&o.type===u){var c=o.range(),h=.5+(o.rangeBand()||(c[1]-c[0])/2);i=n=r.duplicate(i);i.offset=n.offset=h}if(e==="top"||e==="bottom"){r.extend(t.properties.enter,{x:n,y:{value:0},y2:a});r.extend(t.properties.update,{x:i,y:{value:0},y2:a});r.extend(t.properties.exit,{x:i})}else{r.extend(t.properties.enter,{x:{value:0},x2:a,y:n});r.extend(t.properties.update,{x:{value:0},x2:a,y:i});r.extend(t.properties.exit,{y:i})}}function y(e,t,n,r){var i=t.properties.update,a=~~((n[0]+n[1])/2),o=e==="top"||e==="left"?-1:1;if(e==="bottom"||e==="top"){i.x={value:a};i.angle={value:0};if(r>=0)i.y={value:o*r}}else{i.y={value:a};i.angle={value:e==="left"?-90:90};if(r>=0)i.x={value:o*r}}}function _(e,t,n,r){var i;if(e==="top"||e==="left"){r=-1*r}if(e==="bottom"||e==="top"){i="M"+n[0]+","+r+"V0H"+n[1]+"V"+r}else{i="M"+r+","+n[0]+"H0V"+n[1]+"H"+r}t.properties.update.path={value:i}}function x(e,t,n){var a=n?{}:e,o=e.mark.def.offset,s=e.mark.def.orient,u=t.width,l=t.height;if(r.isArray(o)){var f=o[0],c=o[1];switch(s){case"left":{i.set(a,"x",-f);i.set(a,"y",c);break}case"right":{i.set(a,"x",u+f);i.set(a,"y",c);break}case"bottom":{i.set(a,"x",f);i.set(a,"y",l+c);break}case"top":{i.set(a,"x",f);i.set(a,"y",-c);break}default:{i.set(a,"x",f);i.set(a,"y",c)}}}else{if(r.isObject(o)){o=-t.scale(o.scale)(o.value)}switch(s){case"left":{i.set(a,"x",-o);i.set(a,"y",0);break}case"right":{i.set(a,"x",u+o);i.set(a,"y",0);break}case"bottom":{i.set(a,"x",0);i.set(a,"y",l+o);break}case"top":{i.set(a,"x",0);i.set(a,"y",-o);break}default:{i.set(a,"x",0);i.set(a,"y",0)}}}if(n)n.interpolate(e,a);return true}function b(e){return{type:"rule",interactive:false,key:"data",properties:{enter:{stroke:{value:e.tickColor},strokeWidth:{value:e.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function M(e){return{type:"text",interactive:true,key:"data",properties:{enter:{fill:{value:e.tickLabelColor},font:{value:e.tickLabelFont},fontSize:{value:e.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function k(e){return{type:"text",interactive:true,properties:{enter:{font:{value:e.titleFont},fontSize:{value:e.titleFontSize},fontWeight:{value:e.titleFontWeight},fill:{value:e.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function w(e){return{type:"path",interactive:false,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:e.axisColor},strokeWidth:{value:e.axisWidth}},update:{}}}}e.exports=l},lTFi:function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/"),o=n("zhsD").path.area;function s(e,t){var n=t[0],r=n.pathCache||(n.pathCache=i(o(t)));a(e,r)}function u(e,t,n,r,i,a){var o=t.items,s=t.bounds;if(!o||!o.length||s&&!s.contains(i,a)){return null}if(e.pixelratio!=null&&e.pixelratio!==1){n*=e.pixelratio;r*=e.pixelratio}return l(e,o,n,r)?o[0]:null}var l=r.testPath(s);e.exports={draw:r.drawOne(s),pick:u,nested:true}},lkhv:function(e,t,n){var r=n("zF6n");var i=n("tGq9");e.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},lnKO:function(e,t){function n(e){this.clear();if(e)this.union(e)}var r=n.prototype;r.clone=function(){return new n(this)};r.clear=function(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this};r.set=function(e,t,n,r){this.x1=e;this.y1=t;this.x2=n;this.y2=r;return this};r.add=function(e,t){if(e<this.x1)this.x1=e;if(t<this.y1)this.y1=t;if(e>this.x2)this.x2=e;if(t>this.y2)this.y2=t;return this};r.expand=function(e){this.x1-=e;this.y1-=e;this.x2+=e;this.y2+=e;return this};r.round=function(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this};r.translate=function(e,t){this.x1+=e;this.x2+=e;this.y1+=t;this.y2+=t;return this};r.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,s=this.x1,u=this.x2,l=this.y1,f=this.y2;return this.clear().add(r*s-i*l+a,i*s+r*l+o).add(r*s-i*f+a,i*s+r*f+o).add(r*u-i*l+a,i*u+r*l+o).add(r*u-i*f+a,i*u+r*f+o)};r.union=function(e){if(e.x1<this.x1)this.x1=e.x1;if(e.y1<this.y1)this.y1=e.y1;if(e.x2>this.x2)this.x2=e.x2;if(e.y2>this.y2)this.y2=e.y2;return this};r.encloses=function(e){return e&&(this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2)};r.alignsWith=function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)};r.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)};r.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)};r.width=function(){return this.x2-this.x1};r.height=function(){return this.y2-this.y1};e.exports=n},mP8n:function(e,t,n){var r=n("zLl/"),i=n("ZyfV"),a=n("3Scv"),o=n("sV93"),s=n("zhsD"),u=s.metadata.xmlns,l=n("rfWk");function f(e){i.call(this);this._loader=new r(e);this._dirtyID=0}var c=i.prototype;var h=f.prototype=Object.create(c);h.constructor=f;h.initialize=function(e,t,n,r){if(e){this._svg=o.child(e,0,"svg",u,"marks");o.clear(e,1);this._root=o.child(this._svg,0,"g",u);o.clear(this._svg,1)}this._defs={clip_id:1,gradient:{},clipping:{}};this.background(this._bgcolor);return c.initialize.call(this,e,t,n,r)};h.background=function(e){if(arguments.length&&this._svg){this._svg.style.setProperty("background-color",e)}return c.background.apply(this,arguments)};h.resize=function(e,t,n){c.resize.call(this,e,t,n);if(this._svg){var r=this._width,i=this._height,a=this._padding;this._svg.setAttribute("width",r+a.left+a.right);this._svg.setAttribute("height",i+a.top+a.bottom);this._root.setAttribute("transform","translate("+a.left+","+a.top+")")}return this};h.svg=function(){if(!this._svg)return null;var e={class:"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in s.metadata){e[t]=s.metadata[t]}return o.openTag("svg",e)+this._svg.innerHTML+o.closeTag("svg")};h.imageURL=function(e){return this._loader.imageURL(e)};h.render=function(e,t){if(this._dirtyCheck(t)){if(this._dirtyAll)this._resetDefs();this.draw(this._root,e,-1);o.clear(this._root,1)}this.updateDefs();return this};h.draw=function(e,t,n){this.drawMark(e,t,n,l[t.marktype])};h.updateDefs=function(){var e=this._svg,t=this._defs,n=t.el,r=0,i;for(i in t.gradient){if(!n)n=t.el=o.child(e,0,"defs",u);d(n,t.gradient[i],r++)}for(i in t.clipping){if(!n)n=t.el=o.child(e,0,"defs",u);p(n,t.clipping[i],r++)}if(n){if(r===0){e.removeChild(n);t.el=null}else{o.clear(n,r)}}};function d(e,t,n){var r,i,a;e=o.child(e,n,"linearGradient",u);e.setAttribute("id",t.id);e.setAttribute("x1",t.x1);e.setAttribute("x2",t.x2);e.setAttribute("y1",t.y1);e.setAttribute("y2",t.y2);for(r=0,i=t.stops.length;r<i;++r){a=o.child(e,r,"stop",u);a.setAttribute("offset",t.stops[r].offset);a.setAttribute("stop-color",t.stops[r].color)}o.clear(e,r)}function p(e,t,n){var r;e=o.child(e,n,"clipPath",u);e.setAttribute("id",t.id);r=o.child(e,0,"rect",u);r.setAttribute("x",0);r.setAttribute("y",0);r.setAttribute("width",t.width);r.setAttribute("height",t.height)}h._resetDefs=function(){var e=this._defs;e.clip_id=1;e.gradient={};e.clipping={}};h.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID};h._dirtyCheck=function(e){this._dirtyAll=true;if(!e)return true;var t=++this._dirtyID,n,r,i,a,s,u,f;for(s=0,u=e.length;s<u;++s){n=e[s];r=n.mark;if(r.marktype!==i){i=r.marktype;a=l[i]}if(n.status==="exit"){if(n._svg){if(a.nest&&n.mark.items.length){this._update(a,n._svg,n.mark.items[0]);f=n.mark.items[0];f._svg=n._svg;f._update=t}else{o.remove(n._svg)}n._svg=null}continue}n=a.nest?r.items[0]:n;if(n._update===t){continue}else if(n._svg){this._update(a,n._svg,n)}else{this._dirtyAll=false;g(n,t)}n._update=t}return!this._dirtyAll};function g(e,t){for(;e&&e.dirty!==t;e=e.mark.group){e.dirty=t;if(e.mark&&e.mark.dirty!==t){e.mark.dirty=t}else return}}h.drawMark=function(e,t,n,r){if(!this.isDirty(t))return;var i=r.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],a=t.interactive===false?"none":null,s=r.tag==="g",l=o.cssClass(t),f,c,h,d,p,g;f=o.child(e,n+1,"g",u,l);f.setAttribute("class",l);t._svg=f;if(!s&&a){f.style.setProperty("pointer-events",a)}for(c=0,h=i.length;c<h;++c){if(this.isDirty(p=i[c])){g=!(this._dirtyAll||p._svg);d=m(f,r,p,c,g);this._update(r,d,p);if(s){if(g)this._dirtyAll=true;this._recurse(d,p);if(g)this._dirtyAll=false}}}o.clear(f,c);return f};h._recurse=function(e,t){var n=t.items||[],r=t.legendItems||[],i=t.axisItems||[],a=0,s,u;for(s=0,u=i.length;s<u;++s){if(i[s].layer==="back"){this.drawMark(e,i[s],a++,l.group)}}for(s=0,u=n.length;s<u;++s){this.draw(e,n[s],a++)}for(s=0,u=i.length;s<u;++s){if(i[s].layer!=="back"){this.drawMark(e,i[s],a++,l.group)}}for(s=0,u=r.length;s<u;++s){this.drawMark(e,r[s],a++,l.group)}o.clear(e,1+a)};function m(e,t,n,r,i){var a=o.child(e,r,t.tag,u,null,i);a.__data__=n;a.__values__={fill:"default"};if(t.tag==="g"){var s=o.child(a,0,"rect",u,"background");s.__data__=n}return n._svg=a}var v=null,y=null;var _={group:function(e,t,n){v=t.childNodes[0];y=t.__values__;e.background(x,n,this);var r=n.mark.interactive===false?"none":null;if(r!==y.events){v.style.setProperty("pointer-events",r);y.events=r}},text:function(e,t,n){var r=a.value(n.text);if(r!==y.text){t.textContent=r;y.text=r}r=a.font(n);if(r!==y.font){t.style.setProperty("font",r);y.font=r}}};h._update=function(e,t,n){v=t;y=t.__values__;e.attr(x,n,this);var r=_[e.type];if(r)r(e,t,n);this.style(v,n)};function x(e,t,n){if(t===y[e])return;if(t!=null){if(n){v.setAttributeNS(n,e,t)}else{v.setAttribute(e,t)}}else{if(n){v.removeAttributeNS(n,e)}else{v.removeAttribute(e)}}y[e]=t}h.style=function(e,t){if(t==null)return;var n,r,i,a,o;for(n=0,r=s.styleProperties.length;n<r;++n){i=s.styleProperties[n];o=t[i];if(o===y[i])continue;a=s.styles[i];if(o==null){if(a==="fill"){e.style.setProperty(a,"none")}else{e.style.removeProperty(a)}}else{if(o.id){this._defs.gradient[o.id]=o;o="url("+b()+"#"+o.id+")"}e.style.setProperty(a,o+"")}y[i]=o}};function b(){return typeof window!=="undefined"?window.location.href:""}e.exports=f},mgrV:function(e,t,n){var r=n("aZ75");var i=new Date,a=new Date(0,0,1).setFullYear(0),o=new Date(Date.UTC(0,0,1)).setUTCFullYear(0);function s(e){return i.setTime(+e),i}function u(e,t,n,r,i,a){var o={type:e,date:t,unit:n};if(r){o.step=r}else{o.minstep=1}if(i!=null)o.min=i;if(a!=null)o.max=a;return o}function l(e,t,n,r,i,a){return u(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,i,a)}var f=[l("second",r.second,a),l("minute",r.minute,a),l("hour",r.hour,a),l("day",r.day,a,[1,7]),l("month",r.month,a,[1,3,6]),l("year",r.year,a),u("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return s(e).getSeconds()},null,0,59),u("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return s(e).getMinutes()},null,0,59),u("hours",function(e){return new Date(1970,0,1,e)},function(e){return s(e).getHours()},null,0,23),u("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return s(e).getDay()},[1],0,6),u("dates",function(e){return new Date(1970,0,e)},function(e){return s(e).getDate()},[1],1,31),u("months",function(e){return new Date(1970,e%12,1)},function(e){return s(e).getMonth()},[1],0,11)];var c=[l("second",r.utcSecond,o),l("minute",r.utcMinute,o),l("hour",r.utcHour,o),l("day",r.utcDay,o,[1,7]),l("month",r.utcMonth,o,[1,3,6]),l("year",r.utcYear,o),u("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return s(e).getUTCSeconds()},null,0,59),u("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return s(e).getUTCMinutes()},null,0,59),u("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return s(e).getUTCHours()},null,0,23),u("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return s(e).getUTCDay()},[1],0,6),u("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return s(e).getUTCDate()},[1],1,31),u("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return s(e).getUTCMonth()},[1],0,11)];var h=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];function d(e,t,n,r){var i=h[0],a,o,s;for(a=1,o=h.length;a<o;++a){i=h[a];if(t>i[0]){s=t/i[0];if(s>r){return e[h[a-1][1]]}if(s>=n){return e[i[1]]}}}return e[h[o-1][1]]}function p(e){var t={},n,r;for(n=0,r=e.length;n<r;++n){t[e[n].type]=e[n]}t.find=function(t,n,r){return d(e,t,n,r)};return t}e.exports=p(f);e.exports.utc=p(c)},nIY2:function(e,t,n){var r=n("pYy3");e.exports={json:n("cwb4"),topojson:n("Z8XL"),treejson:n("jbgm"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("\t")}},nOes:function(e,t,n){"use strict";var r=n("FmT5");var i=n("P/aK");var a=n("o+e1");var o=n("ZAUf");var s;(function(e){function t(e){return e.reduce(function(t,n,s){var u=e.fieldDef(s).bin;if(u){var l=o.extend({type:"bin",field:n.field,output:{start:a.field(n,{binSuffix:"_start"}),mid:a.field(n,{binSuffix:"_mid"}),end:a.field(n,{binSuffix:"_end"})}},typeof u==="boolean"?{}:u);if(!l.maxbins&&!l.step){l.maxbins=r.autoMaxBins(s)}var f=[l];var c=e.isOrdinalScale(s)||s===i.COLOR;if(c){f.push({type:"formula",field:a.field(n,{binSuffix:"_range"}),expr:a.field(n,{datum:true,binSuffix:"_start"})+" + '-' + "+a.field(n,{datum:true,binSuffix:"_end"})})}var h=o.hash(u)+"_"+n.field+"oc:"+c;t[h]=f}return t},{})}e.parseUnit=t;function n(e){var n=t(e);var r=e.child().component.data;if(!r.source){o.extend(n,r.bin);delete r.bin}return n}e.parseFacet=n;function s(e){var n=t(e);e.children().forEach(function(e){var t=e.component.data;if(!t.source){o.extend(n,t.bin);delete t.bin}});return n}e.parseLayer=s;function u(e){return o.flatten(o.vals(e.bin))}e.assemble=u})(s=t.bin||(t.bin={}))},nTOs:function(e,t,n){(function(e,n){true?n(t):typeof define==="function"&&define.amd?define(["exports"],n):n(e.topojson=e.topojson||{})})(this,function(e){"use strict";function t(){}function n(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){if(!t)n=r=0;e[0]=(n+=e[0])*i+o;e[1]=(r+=e[1])*a+s}}function r(e){if(!e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){if(!t)n=r=0;var u=Math.round((e[0]-o)/i),l=Math.round((e[1]-s)/a);e[0]=u-n;e[1]=l-r;n=u;r=l}}function i(e,t){var n,r=e.length,i=r-t;while(i<--r)n=e[i],e[i++]=e[r],e[r]=n}function a(e,t){var n=0,r=e.length;while(n<r){var i=n+r>>>1;if(e[i]<t)n=i+1;else r=i}return n}function o(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return s(e,t)})}:s(e,t)}function s(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:u(e,t)};if(t.id==null)delete n.id;return n}function u(e,t){var r=n(e.transform),a=e.arcs;function o(e,t){if(t.length)t.pop();for(var n=a[e<0?~e:e],o=0,s=n.length,u;o<s;++o){t.push(u=n[o].slice());r(u,o)}if(e<0)i(t,s)}function s(e){e=e.slice();r(e,0);return e}function u(e){var t=[];for(var n=0,r=e.length;n<r;++n)o(e[n],t);if(t.length<2)t.push(t[0].slice());return t}function l(e){var t=u(e);while(t.length<4)t.push(t[0].slice());return t}function f(e){return e.map(l)}function c(e){var t=e.type;return t==="GeometryCollection"?{type:t,geometries:e.geometries.map(c)}:t in h?{type:t,coordinates:h[t](e)}:null}var h={Point:function(e){return s(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(s)},LineString:function(e){return u(e.arcs)},MultiLineString:function(e){return e.arcs.map(u)},Polygon:function(e){return f(e.arcs)},MultiPolygon:function(e){return e.arcs.map(f)}};return c(t)}function l(e,t){var n={},r={},i={},a=[],o=-1;t.forEach(function(n,r){var i=e.arcs[n<0?~n:n],a;if(i.length<3&&!i[1][0]&&!i[1][1]){a=t[++o],t[o]=n,t[r]=a}});t.forEach(function(e){var t=s(e),n=t[0],a=t[1],o,u;if(o=i[n]){delete i[o.end];o.push(e);o.end=a;if(u=r[a]){delete r[u.start];var l=u===o?o:o.concat(u);r[l.start=o.start]=i[l.end=u.end]=l}else{r[o.start]=i[o.end]=o}}else if(o=r[a]){delete r[o.start];o.unshift(e);o.start=n;if(u=i[n]){delete i[u.end];var f=u===o?o:u.concat(o);r[f.start=u.start]=i[f.end=o.end]=f}else{r[o.start]=i[o.end]=o}}else{o=[e];r[o.start=n]=i[o.end=a]=o}});function s(t){var n=e.arcs[t<0?~t:t],r=n[0],i;if(e.transform)i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]});else i=n[n.length-1];return t<0?[i,r]:[r,i]}function u(e,t){for(var r in e){var i=e[r];delete t[i.start];delete i.start;delete i.end;i.forEach(function(e){n[e<0?~e:e]=1});a.push(i)}}u(i,r);u(r,i);t.forEach(function(e){if(!n[e<0?~e:e])a.push([e])});return a}function f(e){return u(e,c.apply(this,arguments))}function c(e,t,n){var r=[];function i(e){var t=e<0?~e:e;(u[t]||(u[t]=[])).push({i:e,g:f})}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function s(e){if(e.type==="GeometryCollection")e.geometries.forEach(s);else if(e.type in c)f=e,c[e.type](e.arcs)}if(arguments.length>1){var u=[],f;var c={LineString:a,MultiLineString:o,Polygon:o,MultiPolygon:function(e){e.forEach(o)}};s(t);u.forEach(arguments.length<3?function(e){r.push(e[0].i)}:function(e){if(n(e[0].g,e[e.length-1].g))r.push(e[0].i)})}else{for(var h=0,d=e.arcs.length;h<d;++h)r.push(h)}return{type:"MultiLineString",arcs:l(e,r)}}function h(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function d(e){var t=-1,n=e.length,r,i=e[n-1],a=0;while(++t<n){r=i;i=e[t];a+=r[0]*i[1]-r[1]*i[0]}return a/2}function p(e){return u(e,g.apply(this,arguments))}function g(e,t){var n={},r=[],i=[];t.forEach(function(e){if(e.type==="Polygon")a(e.arcs);else if(e.type==="MultiPolygon")e.arcs.forEach(a)});function a(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})});r.push(e)}function o(t){return Math.abs(d(u(e,{type:"Polygon",arcs:[t]}).coordinates[0]))}r.forEach(function(e){if(!e._){var t=[],r=[e];e._=1;i.push(t);while(e=r.pop()){t.push(e);e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){if(!e._){e._=1;r.push(e)}})})})}}});r.forEach(function(e){delete e._});return{type:"MultiPolygon",arcs:i.map(function(t){var r=[],i;t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){if(n[e<0?~e:e].length<2){r.push(e)}})})});r=l(e,r);if((i=r.length)>1){for(var a=1,s=o(r[0]),u,f;a<i;++a){if((u=o(r[a]))>s){f=r[0],r[0]=r[a],r[a]=f,s=u}}}return r})}}function m(e){var t={},n=e.map(function(){return[]});function r(e,n){e.forEach(function(e){if(e<0)e=~e;var r=t[e];if(r)r.push(n);else t[e]=[n]})}function i(e,t){e.forEach(function(e){r(e,t)})}function o(e,t){if(e.type==="GeometryCollection")e.geometries.forEach(function(e){o(e,t)});else if(e.type in s)s[e.type](e.arcs,t)}var s={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(o);for(var u in t){for(var l=t[u],f=l.length,c=0;c<f;++c){for(var h=c+1;h<f;++h){var d=l[c],p=l[h],g;if((g=n[d])[u=a(g,p)]!==p)g.splice(u,0,p);if((g=n[p])[u=a(g,d)]!==d)g.splice(u,0,d)}}}return n}function v(e,t){return e[1][2]-t[1][2]}function y(){var e={},t=[],n=0;e.push=function(e){r(t[e._=n]=e,n++);return n};e.pop=function(){if(n<=0)return;var e=t[0],r;if(--n>0)r=t[n],i(t[r._=0]=r,0);return e};e.remove=function(e){var a=e._,o;if(t[a]!==e)return;if(a!==--n)o=t[n],(v(o,e)<0?r:i)(t[o._=a]=o,a);return a};function r(e,n){while(n>0){var r=(n+1>>1)-1,i=t[r];if(v(e,i)>=0)break;t[i._=n]=i;t[e._=n=r]=e}}function i(e,r){while(true){var i=r+1<<1,a=i-1,o=r,s=t[o];if(a<n&&v(t[a],s)<0)s=t[o=a];if(i<n&&v(t[i],s)<0)s=t[o=i];if(o===r)break;t[s._=r]=s;t[e._=r=o]=e}}return e}function _(e,t){var i=n(e.transform),a=r(e.transform),o=y();if(!t)t=h;e.arcs.forEach(function(e){var n=[],r=0,u,l,f,c;for(l=0,f=e.length;l<f;++l){c=e[l];i(e[l]=[c[0],c[1],Infinity],l)}for(l=1,f=e.length-1;l<f;++l){u=e.slice(l-1,l+2);u[1][2]=t(u);n.push(u);o.push(u)}for(l=0,f=n.length;l<f;++l){u=n[l];u.previous=n[l-1];u.next=n[l+1]}while(u=o.pop()){var h=u.previous,d=u.next;if(u[1][2]<r)u[1][2]=r;else r=u[1][2];if(h){h.next=d;h[2]=u[2];s(h)}if(d){d.previous=h;d[0]=u[0];s(d)}}e.forEach(a)});function s(e){o.remove(e);e[1][2]=t(e);o.push(e)}return e}var x="1.6.27";e.version=x;e.mesh=f;e.meshArcs=c;e.merge=p;e.mergeArcs=g;e.feature=o;e.neighbors=m;e.presimplify=_;Object.defineProperty(e,"__esModule",{value:true})})},nXcD:function(e,t,n){var r=n("zF6n"),i=n("ggRp"),a=n("uHQN"),o=n("yQql");e.exports={table:l,summary:f};var s={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'};var u={number:"left",integer:"left"};function l(e,t){t=r.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||r.keys(e[0]),l=i.all(e);if(t.start||t.limit){var f=t.start||0,c=t.limit?f+t.limit:e.length;e=e.slice(f,c)}var h=n.map(function(n){var r=s[l[n]]||"",i=o("{{"+n+r+"}}"),u=a.max(e,function(e){return i(e).length});u=Math.max(Math.min(n.length,t.minwidth),u);return t.maxwidth>0?Math.min(u,t.maxwidth):u});var d=n.map(function(e,t){return r.truncate(r.pad(e,h[t],"center"),h[t])}).join(t.separator);var p=o(n.map(function(e,t){return"{{"+e+(s[l[e]]||"")+("|pad:"+h[t]+","+(u[l[e]]||"right"))+("|truncate:"+h[t])+"}}"}).join(t.separator));return d+"\n"+e.map(p).join("\n")}function f(e){e=e?e.__summary__?e:a.summary(e):this;var t=[],n,r;for(n=0,r=e.length;n<r;++n){t.push("-- "+e[n].field+" --");if(e[n].type==="string"||e[n].distinct<10){t.push(h(e[n]))}else{t.push(c(e[n]))}t.push("")}return t.join("\n")}function c(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function h(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "];var n=e.unique;var i=r.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(i).join("\n")}},nj7R:function(e,t){e.exports=function(e){function t(t,n,r,i){var a=e(n[0]);if(r){a=r+"("+a+")";if(r.lastIndexOf("new ",0)===0)a="("+a+")"}return a+"."+t+(i<0?"":i===0?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),if:function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}},"o+e1":function(e,t,n){"use strict";var r=n("h/tW");var i=n("Fw/k");var a=n("z5TJ");var o=n("WJ2w");var s=n("ZAUf");t.aggregate={type:"string",enum:r.AGGREGATE_OPS,supportedEnums:{quantitative:r.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:s.toMap([o.QUANTITATIVE,o.NOMINAL,o.ORDINAL,o.TEMPORAL,""])};function u(e,t){if(t===void 0){t={}}var n=(t.datum?"datum.":"")+(t.prefn||"");var r=t.suffix||"";var a=e.field;if(d(e)){return n+"count"+r}else if(t.fn){return n+t.fn+"_"+a+r}else if(!t.nofn&&e.bin){var o=t.binSuffix||(t.scaleType===i.ScaleType.ORDINAL?"_range":"_start");return n+"bin_"+a+o}else if(!t.nofn&&!t.noAggregate&&e.aggregate){return n+e.aggregate+"_"+a+r}else if(!t.nofn&&e.timeUnit){return n+e.timeUnit+"_"+a+r}else{return n+a}}t.field=u;function l(e){return s.contains([o.NOMINAL,o.ORDINAL],e.type)||!!e.bin||e.type===o.TEMPORAL&&!!e.timeUnit}function f(e){return e&&e.field&&l(e)}t.isDimension=f;function c(e){return e&&e.field&&!l(e)}t.isMeasure=c;function h(){return{field:"*",aggregate:r.AggregateOp.COUNT,type:o.QUANTITATIVE}}t.count=h;function d(e){return e.aggregate===r.AggregateOp.COUNT}t.isCount=d;function p(e,t,n){if(n===void 0){n={}}var r=t[e.field],i=e.type;if(e.bin){var u=e.bin;var l=typeof u==="boolean"?undefined:u.maxbins;if(l===undefined){l=10}var f=s.getbins(r,l);return(f.stop-f.start)/f.step}if(i===o.TEMPORAL){var c=e.timeUnit;switch(c){case a.TimeUnit.SECONDS:return 60;case a.TimeUnit.MINUTES:return 60;case a.TimeUnit.HOURS:return 24;case a.TimeUnit.DAY:return 7;case a.TimeUnit.DATE:return 31;case a.TimeUnit.MONTH:return 12;case a.TimeUnit.QUARTER:return 4;case a.TimeUnit.YEAR:var h=t["year_"+e.field];if(!h){return null}return h.distinct-(r.missing>0&&n[i]?1:0)}}if(e.aggregate){return 1}return r.distinct-(r.missing>0&&n[i]?1:0)}t.cardinality=p;function g(e,t){if(e.title!=null){return e.title}if(d(e)){return t.countTitle}var n=e.aggregate||e.timeUnit||e.bin&&"bin";if(n){return n.toString().toUpperCase()+"("+e.field+")"}else{return e.field}}t.title=g},oCE4:function(e,t,n){e.exports={Handler:n("2zc7"),Renderer:n("pEEJ")}},oCPx:function(e,t,n){var r=n("LHV8").render,i=r.canvas,a=r.svg.string,o=n("+5nH");function s(e,t,n){o.call(this,e,t,n);this._type="canvas";this._renderers={canvas:i,svg:a}}var u=s.prototype=new o;u.renderer=function(e){if(e)this._type=e;return o.prototype.renderer.apply(this,arguments)};u.canvas=function(){return this._type==="canvas"?this._renderer.canvas():null};u.canvasAsync=function(e){var t=this._renderer,n=this;function r(){if(t.pendingImages()===0){n.render();e(n.canvas())}else{setTimeout(r,10)}}if(this._type!=="canvas")return null;if(t.pendingImages()>0){r()}else{e(this.canvas())}};u.svg=function(){return this._type==="svg"?this._renderer.svg():null};u.initialize=function(){var e=this._width,t=this._height,n=this._bgcolor,r=this._padding,i=this.model().config();if(this._viewport){e=this._viewport[0]-(r?r.left+r.right:0);t=this._viewport[1]-(r?r.top+r.bottom:0)}this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,r).background(n);return this._repaint=true,this};e.exports=s},pAWG:function(e,t,n){"use strict";var r=n("ZAUf");var i;(function(e){function t(e){return(e.transform().calculate||[]).reduce(function(e,t){e[r.hash(t)]=t;return e},{})}e.parseUnit=t;function n(e){var n=t(e);var i=e.child().component.data;if(!i.source){r.extend(n,i.calculate);delete i.calculate}return n}e.parseFacet=n;function i(e){var n=t(e);e.children().forEach(function(e){var t=e.component.data;if(!t.source&&t.calculate){r.extend(n||{},t.calculate);delete t.calculate}});return n}e.parseLayer=i;function a(e){return r.vals(e.calculate).reduce(function(e,t){e.push(r.extend({type:"formula"},t));return e},[])}e.assemble=a})(i=t.formula||(t.formula={}))},pEEJ:function(e,t,n){var r=n("sV93"),i=n("lnKO"),a=n("zLl/"),o=n("WFOa"),s=n("ZyfV"),u=n("kC7m");function l(e){s.call(this);this._loader=new a(e)}l.RETINA=true;var f=s.prototype;var c=l.prototype=Object.create(f);c.constructor=l;c.initialize=function(e,t,n,i){this._canvas=o.instance(t,n);if(e){r.clear(e,0).appendChild(this._canvas);this._canvas.setAttribute("class","marks")}return f.initialize.call(this,e,t,n,i)};c.resize=function(e,t,n){f.resize.call(this,e,t,n);o.resize(this._canvas,this._width,this._height,this._padding,l.RETINA);return this};c.canvas=function(){return this._canvas};c.context=function(){return this._canvas?this._canvas.getContext("2d"):null};c.pendingImages=function(){return this._loader.pending()};function h(e,t){if(!t)return null;var n=new i,r,a,o,s,l;for(r=0,a=t.length;r<a;++r){o=t[r];s=o.mark;l=s.group;o=u[s.marktype].nested?s:o;n.union(d(o.bounds,l));if(o["bounds:prev"]){n.union(d(o["bounds:prev"],l))}}n.round();e.beginPath();e.rect(n.x1,n.y1,n.width(),n.height());e.clip();return n}function d(e,t){if(t==null)return e;var n=e.clone();for(;t!=null;t=t.mark.group){n.translate(t.x||0,t.y||0)}return n}c.render=function(e,t){var n=this.context(),r=this._padding,i=this._width+r.left+r.right,a=this._height+r.top+r.bottom,o;this._scene=e;n.save();o=h(n,t);this.clear(-r.left,-r.top,i,a);this.draw(n,e,o);n.restore();this._scene=null;return this};c.draw=function(e,t,n){var r=u[t.marktype];r.draw.call(this,e,t,n)};c.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r);if(this._bgcolor!=null){i.fillStyle=this._bgcolor;i.fillRect(e,t,n,r)}};c.loadImage=function(e){var t=this,n=this._scene;return this._loader.loadImage(e,function(){t.renderAsync(n)})};c.renderAsync=function(e){var t=this;if(t._async_id){clearTimeout(t._async_id)}t._async_id=setTimeout(function(){t.render(e);delete t._async_id},10)};e.exports=l},pKLr:function(e,t,n){var r=n("Za4h"),i=n("Hqva"),a=i.Tuple,o=i.ChangeSet,s=n("J731"),u=n("4JPs");function l(e){u.prototype.init.call(this,e);this._prev=null;this._interactive=false;this._setup=true;this._nodes=[];this._links=[];this._layout=r.layout.force();u.addParameters(this,{size:{type:"array<value>",default:n("MRce").size},bound:{type:"value",default:true},links:{type:"data"},linkStrength:{type:"value",default:1},linkDistance:{type:"value",default:20},charge:{type:"value",default:-30},chargeDistance:{type:"value",default:Infinity},friction:{type:"value",default:.9},theta:{type:"value",default:.8},gravity:{type:"value",default:.1},alpha:{type:"value",default:.1},iterations:{type:"value",default:500},interactive:{type:"value",default:this._interactive},active:{type:"value",default:this._prev},fixed:{type:"data"}});this._output={x:"layout_x",y:"layout_y"};return this.mutates(true)}var f=l.prototype=Object.create(u.prototype);f.constructor=l;f.transform=function(e,t){s.debug(e,["force"]);t=t-(e.signals.active?1:0);var n=this.param("interactive"),r=this.param("links").source,i=r.last(),o=this.param("active"),u=this._output,l=this._layout,f=this._nodes,c=this._links;if(i.stamp<e.stamp)i=null;this.configure(e,i,n,t);if(!n){var h=this.param("iterations");for(var d=0;d<h;++d)l.tick();l.stop()}this.update(o);if(t||o!==this._prev&&o&&o.update){l.alpha(this.param("alpha"))}if(o!==this._prev){this._prev=o}if(e.rem.length){l.nodes(this._nodes=a.idFilter(f,e.rem))}if(i&&i.rem.length){l.links(this._links=a.idFilter(c,i.rem))}e.fields[u.x]=1;e.fields[u.y]=1;return e};f.configure=function(e,t,n,r){var i=this._layout,a=this._setup||e.add.length||t&&t.add.length||n!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if(a||r){i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction"))}if(!a)return;this._setup=false;this._interactive=n;var s=this,u=this._graph,l=this._nodes,f=this._links,c,h;for(c=e.add,h=0;h<c.length;++h){l.push({tuple:c[h]})}if(t)for(c=t.add,h=0;h<c.length;++h){f.push({tuple:c[h],source:l[c[h].source],target:l[c[h].target]})}var d=!n?null:function(){u.propagate(o.create(null,true),s)};i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(l).links(f).on("tick",d).start().alpha(this.param("alpha"))};f.update=function(e){var t=this._output,n=this.param("bound"),r=this.param("fixed"),i=this.param("size"),o=this._nodes,s={},u,l,f,c,h,d;if(r&&r.source){r=r.source.values();for(l=0,f=r.length;l<f;++l){s[r[l].id]=1}}for(l=0;l<o.length;++l){f=o[l];c=f.tuple;u=c._id;if(e&&e.id===u){f.fixed=1;if(e.update){f.x=f.px=e.x;f.y=f.py=e.y}}else{f.fixed=s[u]||0}h=n?Math.max(0,Math.min(f.x,i[0])):f.x;d=n?Math.max(0,Math.min(f.y,i[1])):f.y;a.set(c,t.x,h);a.set(c,t.y,d)}};e.exports=l;l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Force transform",description:"Performs force-directed layout for network data.",type:"object",properties:{type:{enum:["force"]},size:{description:"The dimensions [width, height] of this force layout.",oneOf:[{type:"array",minItems:2,maxItems:2,items:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}],default:[500,500]},links:{type:"string",description:"The name of the link (edge) data set."},linkDistance:{description:"Determines the length of edges, in pixels.",oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],default:20},linkStrength:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"Determines the tension of edges (the spring constant).",default:1},charge:{oneOf:[{type:"number"},{type:"string"},{$ref:"#/refs/signal"}],description:"The strength of the charge each node exerts.",default:-30},chargeDistance:{oneOf:[{type:"number"},{$ref:"#/refs/signal"}],description:"The maximum distance over which charge forces are applied.",default:Infinity},iterations:{description:"The number of iterations to run the force directed layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:500},friction:{description:"The strength of the friction force used to stabilize the layout.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.9},theta:{description:"The theta parameter for the Barnes-Hut algorithm, which is used to compute charge forces between nodes.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.8},gravity:{description:"The strength of the pseudo-gravity force that pulls nodes towards the center of the layout area.",oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},alpha:{description:'A "temperature" parameter that determines how much node positions are adjusted at each step.',oneOf:[{type:"number"},{$ref:"#/refs/signal"}],default:.1},interactive:{description:"Enables an interactive force-directed layout.",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},active:{description:"A signal representing the active node.",$ref:"#/refs/signal"},fixed:{description:"The name of a datasource containing the IDs of nodes with fixed positions.",type:"string"},output:{type:"object",description:"Rename the output data fields",properties:{x:{type:"string",default:"layout_x"},y:{type:"string",default:"layout_y"}},additionalProperties:false}},additionalProperties:false,required:["type","links"]}},pYy3:function(e,t,n){var r=n("zF6n");var i=n("SAbC");function a(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return i.dsv(t.delimiter).parse(e)}a.delimiter=function(e){var t={delimiter:e};return function(e,n){return a(e,n?r.extend(n,t):t)}};e.exports=a},pfe9:function(e,t,n){e.exports={parse:n("eJnU"),render:n("bSC/")}},prMK:function(e,t,n){var r=n("zF6n"),i=n("mgrV"),a=1e-15;function o(e){if(!e){throw Error("Missing binning options.")}var t=e.maxbins||15,n=e.base||10,r=Math.log(n),i=e.div||[5,2],a=e.min,o=e.max,f=o-a,c,h,d,p,g,m,v;if(e.step){c=e.step}else if(e.steps){c=e.steps[Math.min(e.steps.length-1,s(e.steps,f/t,0,e.steps.length))]}else{h=Math.ceil(Math.log(t)/r);d=e.minstep||0;c=Math.max(d,Math.pow(n,Math.round(Math.log(f)/r)-h));while(Math.ceil(f/c)>t){c*=n}for(m=0;m<i.length;++m){g=c/i[m];if(g>=d&&f/g<=t)c=g}}g=Math.log(c);p=g>=0?0:~~(-g/r)+1;v=Math.pow(n,-p-1);a=Math.min(a,Math.floor(a/c+v)*c);o=Math.ceil(o/c)*c;return{start:a,stop:o,step:c,unit:{precision:p},value:u,index:l}}function s(e,t,n,i){while(n<i){var a=n+i>>>1;if(r.cmp(e[a],t)<0){n=a+1}else{i=a}}return n}function u(e){return this.step*Math.floor(e/this.step+a)}function l(e){return Math.floor((e-this.start)/this.step+a)}function f(e){return this.unit.date(u.call(this,e))}function c(e){return l.call(this,this.unit.unit(e))}o.date=function(e){if(!e){throw Error("Missing date binning options.")}var t=e.utc?i.utc:i,n=e.min,r=e.max,a=e.maxbins||20,s=e.minbins||4,u=+r-+n,l=e.unit?t[e.unit]:t.find(u,s,a),h=o({min:l.min!=null?l.min:l.unit(n),max:l.max!=null?l.max:l.unit(r),maxbins:a,minstep:l.minstep,steps:l.step});h.unit=l;h.index=c;if(!e.raw)h.value=f;return h};e.exports=o},pyUU:function(e,t,n){"use strict";var r=n("P/aK");var i=n("QSMf");var a=n("o+e1");var o=n("j8cM");var s=n("ZAUf");function u(e,t,n){return s.extend(["filled","opacity","orient","align"].reduce(function(u,l){var f=n.mark[l];switch(l){case"filled":if(f===undefined){u[l]=e!==o.POINT&&e!==o.LINE&&e!==o.RULE}break;case"opacity":if(f===undefined){if(s.contains([o.POINT,o.TICK,o.CIRCLE,o.SQUARE],e)){if(!i.isAggregate(t)||i.has(t,r.DETAIL)){u[l]=.7}}if(e===o.AREA){u[l]=.7}}break;case"orient":var c=a.isMeasure(t.x)||a.isMeasure(t.x2);var h=a.isMeasure(t.y)||a.isMeasure(t.y2);if(c&&!h){if(e===o.TICK){u[l]="vertical"}else{u[l]="horizontal"}}else if(!c&&h){if(e===o.TICK){u[l]="horizontal"}else{u[l]="vertical"}}break;case"align":if(f===undefined){u[l]=i.has(t,r.X)?"center":"right"}}return u},{}),n.mark)}t.initMarkConfig=u},qmQ9:function(e,t,n){var r=n("prMK"),i=n("YsQl"),a=n("ggRp"),o=n("zF6n"),s=n("uHQN");var u={integer:1,number:1,date:1};function l(e,t,n){n=h(e,t,n);var r=c(n);return!r?n.accessor||o.identity:o.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor)}function f(e,t,n){n=h(e,t,n);var r=c(n);return r?d(e,n.accessor,r):p(e,n.accessor,n&&n.sort)}function c(e){var t=e.type,n=null;if(t==null||u[t]){if(t==="integer"&&e.minstep==null)e.minstep=1;n=t==="date"?r.date(e):r(e)}return n}function h(){var e=arguments,t=0,n=o.isArray(e[t])?e[t++]:null,r=o.isFunction(e[t])||o.isString(e[t])?o.$(e[t++]):null,i=o.extend({},e[t]);if(n){i.type=i.type||a(n,r);if(u[i.type]){var l=s.extent(n,r);i=o.extend({min:l[0],max:l[1]},i)}}if(r){i.accessor=r}return i}function d(e,t,n){var r=i.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}});for(var a=0,s,u;a<e.length;++a){s=t?t(e[a]):e[a];if(o.isValid(s)){u=n.index(s);if(u<0||u>=r.length||!isFinite(u))continue;r[u].count+=1}}r.bins=n;return r}function p(e,t,n){var r=s.unique(e,t),i=s.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(o.comparator(n?"-count":"+value"))}e.exports={$bin:l,histogram:f}},qnrb:function(e,t,n){var r=n("gWW/");function i(e,t,n){if(!t.items||!t.items.length)return;var i=t.items,a,o,s,u,l,f;for(var c=0,h=i.length;c<h;++c){a=i[c];if(n&&!n.intersects(a.bounds))continue;o=a.opacity==null?1:a.opacity;if(o===0)continue;s=a.x||0;u=a.y||0;l=a.x2!=null?a.x2:s;f=a.y2!=null?a.y2:u;if(a.stroke&&r.stroke(e,a,o)){e.beginPath();e.moveTo(s,u);e.lineTo(l,f);e.stroke()}}}function a(e,t){var n=t.x||0,r=t.y||0,i=t.x2!=null?t.x2:n,a=t.y2!=null?t.y2:r,o=t.strokeWidth,s=t.strokeCap;e.lineWidth=o!=null?o:1;e.lineCap=s!=null?s:"butt";e.beginPath();e.moveTo(n,r);e.lineTo(i,a)}function o(e,t,n,r){if(!e.isPointInStroke)return false;a(e,t);return e.isPointInStroke(n,r)}e.exports={draw:i,pick:r.pick(o)}},r7he:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("Hqva"),o=a.Node,s=a.Tuple,u=a.Dependencies;var l={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"};var f=[];function c(e,t,n,r){var i=true,a=e.length,o,s,u,l;for(o=n.length-1;o>=0;--o){for(s=0;s<a;++s){u=e[s];l=t&&u(t)||t;if(u(n[o])!==l){i=false;break}}if(i)r.push.apply(r,n.splice(o,1));i=true}}function h(e,t,n){var r=s.ingest(t);e.add.push(r);n._data.push(r)}function d(e,t,n){var a=t.signal?r.field(t.signal):null,d=a?a[0]:null,p=t.predicate?e.predicate(t.predicate.name||t.predicate):null,g=t.test?e.expr(t.test):null,m=p===null&&g===null,v=t.type===l.CLEAR,y=r.array(t.field||"data"),_=y.map(r.accessor),x=y.map(r.mutator),b=new o(e).router(v);b.evaluate=function(o){var b,M;if(p!==null){b=e.values(u.DATA,p.data||f);M=e.values(u.SIGNALS,p.signals||f);m=p.call(p,{},b,M,e._predicates)}if(g!==null){M=e.values(u.SIGNALS,g.globals||f);m=g.fn()}i.debug(o,[t.type+"ing",m]);if(!m||!v&&!o.signals[d])return o;var k=a?e.signalRef(t.signal):null,w=e.data(n.name),S=null,E=[],A=[],T=0,O;if(r.isObject(k)){O=k;if(!t.field){y=r.keys(O);_=y.map(r.accessor);x=y.map(r.mutator)}}else{O={};x.forEach(function(e){e(O,k)})}if(t.type===l.INSERT){h(o,O,w)}else if(t.type===l.REMOVE){c(_,k,o.mod,o.rem);c(_,k,o.add,A);c(_,k,w._data,A)}else if(t.type===l.UPSERT){o.mod.forEach(function(e){var t=_.every(function(t){return t(e)===t(O)});if(t)T=(r.extend(e,O),T+1)});if(T===0)h(o,O,w)}else if(t.type===l.TOGGLE){c(_,k,o.mod,A);o.rem.push.apply(o.rem,A);c(_,k,o.add,E);if(E.length||A.length){w._data=w._data.filter(function(e){return A.indexOf(e)<0&&E.indexOf(e)<0})}else{o.add.push(S=s.ingest(O));w._data.push(S)}}else if(t.type===l.CLEAR){o.rem.push.apply(o.rem,o.mod.splice(0));o.add.splice(0);w._data.splice(0)}y.forEach(function(e){o.fields[e]=1});return o};if(d)b.dependency(u.SIGNALS,d);if(p){b.dependency(u.DATA,p.data);b.dependency(u.SIGNALS,p.signals)}if(g){b.dependency(u.SIGNALS,g.globals);b.dependency(u.DATA,g.dataSources)}return b}e.exports=d;d.schema={defs:{modify:{type:"array",items:{type:"object",oneOf:[{properties:{type:{enum:[l.INSERT,l.REMOVE,l.UPSERT,l.TOGGLE]},signal:{type:"string"},field:{type:"string"}},required:["type","signal"]},{properties:{type:{enum:[l.CLEAR]},predicate:{type:"string"}},required:["type","predicate"]},{properties:{type:{enum:[l.CLEAR]},test:{type:"string"}},required:["type","test"]}]}}}}},rCVn:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs");function o(e){a.prototype.init.call(this,e);a.addParameters(this,{sourceX:{type:"field",default:"_source.layout_x"},sourceY:{type:"field",default:"_source.layout_y"},targetX:{type:"field",default:"_target.layout_x"},targetY:{type:"field",default:"_target.layout_y"},tension:{type:"value",default:.2},shape:{type:"value",default:"line"}});this._output={path:"layout_path"};return this.mutates(true)}var s=o.prototype=Object.create(a.prototype);s.constructor=o;function u(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function l(e,t,n,r,i){var a=n-e,o=r-t,s=i*(a+o),u=i*(o-a);return"M"+e+","+t+"C"+(e+s)+","+(t+u)+" "+(n+u)+","+(r-s)+" "+n+","+r}function f(e,t,n,r){return"M"+e+","+t+"V"+r+"H"+n}function c(e,t,n,r){return"M"+e+","+t+"H"+n+"V"+r}function h(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*s+"L"+r*o+","+r*s}function d(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function p(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}function g(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*a+"C"+u*i+","+u*a+" "+u*o+","+u*s+" "+r*o+","+r*s}var m={line:u,curve:l,cornerX:f,cornerY:c,cornerR:h,diagonalX:d,diagonalY:p,diagonalR:g};s.transform=function(e){i.debug(e,["linkpath"]);var t=this._output,n=m[this.param("shape")]||m.line,a=this.param("sourceX").accessor,o=this.param("sourceY").accessor,s=this.param("targetX").accessor,u=this.param("targetY").accessor,l=this.param("tension");function f(e){var i=n(a(e),o(e),s(e),u(e),l);r.set(e,t.path,i)}e.add.forEach(f);if(this.reevaluate(e)){e.mod.forEach(f);e.rem.forEach(f)}e.fields[t.path]=1;return e};e.exports=o;o.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"LinkPath transform",description:"Computes a path definition for connecting nodes within a node-link network or tree diagram.",type:"object",properties:{type:{enum:["linkpath"]},sourceX:{description:"The data field that references the source x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_source"},sourceY:{description:"The data field that references the source y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_source"},targetX:{description:"The data field that references the target x-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_target"},targetY:{description:"The data field that references the target y-coordinate for this link.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}],default:"_target"},tension:{description:'A tension parameter for the "tightness" of "curve"-shaped links.',oneOf:[{type:"number",minimum:0,maximum:1},{$ref:"#/refs/signal"}],default:.2},shape:{description:"The path shape to use",oneOf:[{enum:["line","curve","cornerX","cornerY","cornerR","diagonalX","diagonalY","diagonalR"]},{$ref:"#/refs/signal"}],default:"line"},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},rKP5:function(e,t,n){"use strict";var r=n("P/aK");var i=n("o+e1");var a=n("MtYt");var o;(function(e){function t(){return"symbol"}e.markType=t;function n(e,t){var n={};var i=e.config();n.x=o(e.encoding().x,e.scaleName(r.X),i);n.y=s(e.encoding().y,e.scaleName(r.Y),i);n.size=u(e.encoding().size,e.scaleName(r.SIZE),e.scale(r.SIZE),i);n.shape=l(e.encoding().shape,e.scaleName(r.SHAPE),e.scale(r.SHAPE),i,t);a.applyColorAndOpacity(n,e);return n}e.properties=n;function o(e,t,n){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{value:n.scale.bandSize/2}}function s(e,t,n){if(e){if(e.field){return{scale:t,field:i.field(e,{binSuffix:"_mid"})}}}return{value:n.scale.bandSize/2}}function u(e,t,n,r){if(e){if(e.field){return{scale:t,field:i.field(e,{scaleType:n.type})}}else if(e.value!==undefined){return{value:e.value}}}return{value:r.mark.size}}function l(e,t,n,r,a){if(a){return{value:a}}else if(e){if(e.field){return{scale:t,field:i.field(e,{scaleType:n.type})}}else if(e.value){return{value:e.value}}}return{value:r.mark.shape}}})(o=t.point||(t.point={}));var s;(function(e){function t(){return"symbol"}e.markType=t;function n(e){return o.properties(e,"circle")}e.properties=n;function r(e){return undefined}e.labels=r})(s=t.circle||(t.circle={}));var u;(function(e){function t(){return"symbol"}e.markType=t;function n(e){return o.properties(e,"square")}e.properties=n;function r(e){return undefined}e.labels=r})(u=t.square||(t.square={}))},rVSZ:function(e,t,n){var r=n("Za4h"),i=n("YzNj").util.mutator;e.exports={init:function(e,t,n){return a(t,n),o(e,t)},bind:function(e,t){e.dom.forEach(function(e){e.__vega__=t});t.onSignal(e.dom[0].name,function(t,n){e.set(n)})}};function a(e,t){var n=t.signals||(t.signals=[]);for(var r=0;r<n.length;++r){if(n[r].name===e.signal)break}if(r===n.length){n.push({name:e.signal,init:e.value})}(e.rewrite||[]).forEach(function(n){i(n)(t,{signal:e.signal})})}function o(e,t){var n=e.append("div").attr("class","vega-param");n.append("span").attr("class","vega-param-name").text(t.name||t.signal);var r=s;switch(t.type){case"checkbox":r=u;break;case"select":r=l;break;case"radio":r=f;break;case"range":r=c;break}return r(n,t)}function s(e,t){var n=e.append("input").on("input",h);for(var r in t){if(r==="signal"||r==="rewrite")continue;n.attr(r,t[r])}n.attr("name",t.signal);var i=n.node();return{dom:[i],set:function(e){i.value=e}}}function u(e,t){var n=e.append("input").on("change",function(){h.call(this,this.checked)}).attr("type","checkbox").attr("name",t.signal).attr("checked",t.value||null).node();return{dom:[n],set:function(e){n.checked=!!e||null}}}function l(e,t){var n=e.append("select").attr("name",t.signal).on("change",function(){h.call(this,this.options[this.selectedIndex].__data__)});n.selectAll("option").data(t.options).enter().append("option").attr("value",vg.util.identity).attr("selected",function(e){return e===t.value||null}).text(vg.util.identity);var r=n.node();return{dom:[r],set:function(e){var n=t.options.indexOf(e);r.selectedIndex=n}}}function f(e,t){var n=e.append("span").attr("class","vega-param-radio");var r=t.options.map(function(e){var r="vega-option-"+t.signal+"-"+e;var i=n.append("input").datum(e).on("change",h).attr("id",r).attr("type","radio").attr("name",t.signal).attr("value",e).attr("checked",e===t.value||null);n.append("label").attr("for",r).text(e);return i.node()});return{dom:r,set:function(e){for(var t=0;t<r.length;++t){if(r[t].value===e){r[t].checked=true}}}}}function c(e,t){var n=t.value!==undefined?t.value:(+t.max+ +t.min)/2;var r=e.append("input").on("input",function(){i.text(this.value);h.call(this,+this.value)}).attr("type","range").attr("name",t.signal).attr("value",n).attr("min",t.min).attr("max",t.max).attr("step",t.step||vg.util.bins({min:t.min,max:t.max,maxbins:100}).step);var i=e.append("label").attr("class","vega-range").text(n);var a=r.node();return{dom:[a],set:function(e){a.value=e;i.text(e)}}}function h(e){if(e===undefined)e=this.__data__||r.event.target.value;this.__vega__.signal(this.name,e).update()}},rfWk:function(e,t,n){var r=n("3Scv"),i=n("zhsD"),a=i.symbolTypes,o=i.textAlign,s=i.path;function u(e){return l(e.x||0,e.y||0)}function l(e,t){return"translate("+e+","+t+")"}e.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",u(t));e("d",s.arc(t))}},area:{tag:"path",type:"area",nest:true,attr:function(e,t){var n=t.mark.items;if(n.length)e("d",s.area(n))}},group:{tag:"g",type:"group",attr:function(e,t,n){var r=null,i,a;e("transform",u(t));if(t.clip){i=n._defs;r=t.clip_id||(t.clip_id="clip"+i.clip_id++);a=i.clipping[r]||(i.clipping[r]={id:r});a.width=t.width||0;a.height=t.height||0}e("clip-path",r?"url(#"+r+")":null)},background:function(e,t){e("class","background");e("width",t.width||0);e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,n){var r=t.x||0,i=t.y||0,a=t.width||0,o=t.height||0,s=n.imageURL(t.url);r=r-(t.align==="center"?a/2:t.align==="right"?a:0);i=i-(t.baseline==="middle"?o/2:t.baseline==="bottom"?o:0);e("href",s,"http://www.w3.org/1999/xlink","xlink:href");e("transform",l(r,i));e("width",a);e("height",o)}},line:{tag:"path",type:"line",nest:true,attr:function(e,t){var n=t.mark.items;if(n.length)e("d",s.line(n))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",u(t));e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:false,attr:function(e,t){e("transform",u(t));e("width",t.width||0);e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",u(t));e("x2",t.x2!=null?t.x2-(t.x||0):0);e("y2",t.y2!=null?t.y2-(t.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(e,t){var n=!t.shape||a[t.shape]?s.symbol(t):s.resize(t.shape,t.size);e("transform",u(t));e("d",n)}},text:{tag:"text",type:"text",nest:false,attr:function(e,t){var n=t.dx||0,i=(t.dy||0)+r.offset(t),a=t.x||0,s=t.y||0,u=t.angle||0,f=t.radius||0,c;if(f){c=(t.theta||0)-Math.PI/2;a+=f*Math.cos(c);s+=f*Math.sin(c)}e("text-anchor",o[t.align]||"start");if(u){c=l(a,s)+" rotate("+u+")";if(n||i)c+=" "+l(n,i)}else{c=l(a+n,s+i)}e("transform",c)}}}},rnWk:function(e,t,n){var r=n("zicW"),i=n("Hqva"),a=n("LHV8"),o=i.Node,s=n("J731"),u=a.bound,l=a.Bounds,f=n("XVii");function c(e,t){this._mark=t;return o.prototype.init.call(this,e).router(true).reflows(true).mutates(true)}var h=c.prototype=new o;h.evaluate=function(e){s.debug(e,["bounds",this._mark.marktype]);var t=this._mark,n=t.marktype,a=n==="group",o=t.items,c=r.array(t.def.legends).length>0,h=t.bounds,d=!h||e.rem.length,p,g,m,v,y,_;if(n==="line"||n==="area"){u.mark(t,null,a&&!c)}else{e.add.forEach(function(e){u.item(e);d=d||h&&!h.encloses(e.bounds)});e.mod.forEach(function(e){d=d||h&&h.alignsWith(e.bounds);u.item(e)});if(d){h=t.bounds&&t.bounds.clear()||(t.bounds=new l);for(p=0,g=o.length;p<g;++p)h.union(o[p].bounds)}}if(a&&c){for(p=0,g=o.length;p<g;++p){y=o[p];y._legendPositions=null;for(m=0,v=y.legendItems.length;m<v;++m){_=y.legendItems[m];f.update(this._graph,e.trans,"legendPosition",_.items,e.dirty);u.mark(_,null,false)}}u.mark(t,null,true)}return i.ChangeSet.create(e,true)};e.exports=c},sV93:function(e,t){function n(e,t,n){return n?e.createElementNS(n,t):e.createElement(t)}function r(e){if(!e)return;var t=e.parentNode;if(t){t.removeChild(e);if(!t.childNodes||!t.childNodes.length)r(t)}}e.exports={find:function(e,t){t=t.toLowerCase();for(var n=0,r=e.childNodes.length;n<r;++n){if(e.childNodes[n].tagName.toLowerCase()===t){return e.childNodes[n]}}},child:function(e,t,r,i,a,o){var s,u;s=u=e.childNodes[t];if(!s||o||s.tagName.toLowerCase()!==r.toLowerCase()||a&&s.getAttribute("class")!=a){s=n(e.ownerDocument,r,i);e.insertBefore(s,u||null);if(a)s.setAttribute("class",a)}return s},clear:function(e,t){var n=e.childNodes.length;while(n>t){e.removeChild(e.childNodes[--n])}return e},remove:r,cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,n){var r="<"+e,i,a;if(t){for(i in t){a=t[i];if(a!=null){r+=" "+i+'="'+a+'"'}}}if(n)r+=" "+n;return r+">"},closeTag:function(e){return"</"+e+">"}}},snBf:function(e,t,n){var r=n("Za4h"),i=n("zicW"),a=n("Hqva").Tuple,o=n("J731"),s=n("ct8e"),u=n("4JPs");function l(e){u.prototype.init.call(this,e);u.addParameters(this,s.Parameters);u.addParameters(this,{field:{type:"field",default:null}});this._output={path:"layout_path"};return this.mutates(true)}var f=l.prototype=Object.create(u.prototype);f.constructor=l;f.transform=function(e){o.debug(e,["geopath"]);var t=this._output,n=this.param("field").accessor||i.identity,u=s.d3Projection.call(this),l=r.geo.path().projection(u);function f(e){a.set(e,t.path,l(n(e)))}e.add.forEach(f);if(this.reevaluate(e)){e.mod.forEach(f);e.rem.forEach(f)}e.fields[t.path]=1;return e};e.exports=l;l.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"GeoPath transform",description:"Creates paths for geographic regions, such as countries, states and counties.",type:"object",properties:i.extend({type:{enum:["geopath"]},field:{description:"The data field containing GeoJSON Feature data.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},output:{type:"object",description:"Rename the output data fields",properties:{path:{type:"string",default:"layout_path"}},additionalProperties:false}},s.baseSchema),required:["type"],additionalProperties:false}},t3C9:function(e,t,n){"use strict";var r=n("ZAUf");var i={nominal:false,ordinal:false,quantitative:true,temporal:true};var a;(function(e){function t(e){var t=e.transform().filterNull;return e.reduce(function(e,n){if(t||t===undefined&&n.field&&n.field!=="*"&&i[n.type]){e[n.field]=true}else{e[n.field]=false}return e},{})}e.parseUnit=t;function n(e){var n=t(e);var i=e.child().component.data;if(!i.source){r.extend(n,i.nullFilter);delete i.nullFilter}return n}e.parseFacet=n;function a(e){var n=t(e);e.children().forEach(function(t){var i=t.component.data;if(e.compatibleSource(t)&&!r.differ(i.nullFilter,n)){r.extend(n,i.nullFilter);delete i.nullFilter}});return n}e.parseLayer=a;function o(e){var t=r.keys(e.nullFilter).filter(function(t){return e.nullFilter[t]});return t.length>0?[{type:"filter",test:t.map(function(e){return"(datum."+e+"!==null"+" && !isNaN(datum."+e+"))"}).join(" && ")}]:[]}e.assemble=o})(a=t.nullFilter||(t.nullFilter={}))},tGq9:function(e,t,n){var r=n("zF6n"),i=n("2I0S"),a=n("/2vj");function o(){this._cells={};this._aggr=[];this._stream=false}var s=o.Flags={ADD_CELL:1,MOD_CELL:2};var u=o.prototype;u.stream=function(e){if(e==null)return this._stream;this._stream=!!e;this._aggr=[];return this};u.key=function(e){if(e==null)return this._key;this._key=r.$(e);return this};u.groupby=function(e){this._dims=r.array(e).map(function(e,t){e=r.isString(e)?{name:e,get:r.$(e)}:r.isFunction(e)?{name:r.name(e)||e.name||"_"+t,get:e}:e.name&&r.isFunction(e.get)?e:null;if(e==null)throw"Invalid groupby argument: "+e;return e});return this.clear()};u.summarize=function(e){e=l(e);this._count=true;var t=this._aggr=[],n,a,o,s,u,f,c;for(o=0;o<e.length;++o){for(s=0,n=[],a=e[o];s<a.ops.length;++s){u=a.ops[s];if(u!=="count")this._count=false;f=a.as&&a.as[s]||u+(a.name==="*"?"":"_"+a.name);n.push(i[u](f))}c=a.get&&r.$(a.get)||(a.name==="*"?r.identity:r.$(a.name));t.push({name:a.name,measures:i.create(n,this._stream,c,this._assign)})}return this.clear()};u.count=function(){return this.summarize({"*":"count"})};u._assign=function(e,t,n){e[t]=n};function l(e){if(r.isArray(e)){return e}if(e==null){return[]}var t=[],n,i;for(n in e){i=r.array(e[n]);t.push({name:n,ops:i})}return t}u.clear=function(){return this._cells={},this};u._cellkey=function(e){var t=this._dims,n=t.length,r,i=String(t[0].get(e));for(r=1;r<n;++r){i+="|"+t[r].get(e)}return i};u._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))};u._newcell=function(e,t){var n={num:0,tuple:this._newtuple(e,t),flag:s.ADD_CELL,aggs:{}};var r=this._aggr,i;for(i=0;i<r.length;++i){n.aggs[r[i].name]=new r[i].measures(n,n.tuple)}if(n.collect){n.data=new a(this._key)}return n};u._newtuple=function(e){var t=this._dims,n={},r,i;for(r=0,i=t.length;r<i;++r){n[t[r].name]=t[r].get(e)}return this._ingest(n)};u._ingest=r.identity;u._add=function(e){var t=this._cell(e),n=this._aggr,r;t.num+=1;if(!this._count){if(t.collect)t.data.add(e);for(r=0;r<n.length;++r){t.aggs[n[r].name].add(e)}}t.flag|=s.MOD_CELL;if(this._on_add)this._on_add(e,t)};u._rem=function(e){var t=this._cell(e),n=this._aggr,r;t.num-=1;if(!this._count){if(t.collect)t.data.rem(e);for(r=0;r<n.length;++r){t.aggs[n[r].name].rem(e)}}t.flag|=s.MOD_CELL;if(this._on_rem)this._on_rem(e,t)};u._mod=function(e,t){var n=this._cell(t),i=this._cell(e),a=this._aggr,o;if(n!==i){n.num-=1;i.num+=1;if(n.collect)n.data.rem(t);if(i.collect)i.data.add(e)}else if(n.collect&&!r.isObject(e)){n.data.rem(t);n.data.add(e)}for(o=0;o<a.length;++o){n.aggs[a[o].name].rem(t);i.aggs[a[o].name].add(e)}n.flag|=s.MOD_CELL;i.flag|=s.MOD_CELL;if(this._on_mod)this._on_mod(e,t,n,i)};u._markMod=function(e){var t=this._cell(e);t.flag|=s.MOD_CELL};u.result=function(){var e=[],t=this._aggr,n,r,i;for(i in this._cells){n=this._cells[i];if(n.num>0){if(n.collect){n.data.values()}for(r=0;r<t.length;++r){n.aggs[t[r].name].set()}e.push(n.tuple)}else{delete this._cells[i]}n.flag=0}this._rems=false;return e};u.changes=function(e){var t=e||{add:[],rem:[],mod:[]},n=this._aggr,r,i,a,o;for(o in this._cells){r=this._cells[o];i=r.flag;if(r.collect){r.data.values()}for(a=0;a<n.length;++a){r.aggs[n[a].name].set()}if(r.num<=0){t.rem.push(r.tuple);delete this._cells[o];if(this._on_drop)this._on_drop(r)}else{if(this._on_keep)this._on_keep(r);if(i&s.ADD_CELL){t.add.push(r.tuple)}else if(i&s.MOD_CELL){t.mod.push(r.tuple)}}r.flag=0}this._rems=false;return t};u.execute=function(e){return this.clear().insert(e).result()};u.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t){this._add(e[t])}return this};u.remove=function(e){if(!this._stream){throw"Aggregator not configured for streaming removes."+" Call stream(true) prior to calling summarize."}for(var t=0;t<e.length;++t){this._rem(e[t])}this._rems=true;return this};u._consolidate=function(){if(!this._rems)return;for(var e in this._cells){if(this._cells[e].collect){this._cells[e].data.values()}}this._rems=false};e.exports=o},uHQN:function(e,t,n){var r=n("zF6n");var i=n("ggRp");var a=n("YsQl");var o=e.exports;o.unique=function(e,t,n){t=r.$(t);n=n||[];var i={},a,o,s;for(o=0,s=e.length;o<s;++o){a=t?t(e[o]):e[o];if(a in i)continue;i[a]=1;n.push(a)}return n};o.count=function(e){return e&&e.length||0};o.count.valid=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;i<a;++i){n=t?t(e[i]):e[i];if(r.isValid(n))o+=1}return o};o.count.missing=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;i<a;++i){n=t?t(e[i]):e[i];if(n==null)o+=1}return o};o.count.distinct=function(e,t){t=r.$(t);var n={},i,a,o,s=0;for(a=0,o=e.length;a<o;++a){i=t?t(e[a]):e[a];if(i in n)continue;n[i]=1;s+=1}return s};o.count.map=function(e,t){t=r.$(t);var n={},i,a,o;for(a=0,o=e.length;a<o;++a){i=t?t(e[a]):e[a];n[i]=i in n?n[i]+1:1}return n};o.median=function(e,t){if(t)e=e.map(r.$(t));e=e.filter(r.isValid).sort(r.cmp);return o.quantile(e,.5)};o.quartile=function(e,t){if(t)e=e.map(r.$(t));e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]};o.quantile=function(e,t,n){if(n===undefined){n=t;t=r.identity}t=r.$(t);var i=(e.length-1)*n+1,a=Math.floor(i),o=+t(e[a-1]),s=i-a;return s?o+s*(t(e[a])-o):o};o.sum=function(e,t){t=r.$(t);for(var n=0,i=0,a=e.length,o;i<a;++i){o=t?t(e[i]):e[i];if(r.isValid(o))n+=o}return n};o.mean=function(e,t){t=r.$(t);var n=0,i,a,o,s,u;for(a=0,s=0,o=e.length;a<o;++a){u=t?t(e[a]):e[a];if(r.isValid(u)){i=u-n;n=n+i/++s}}return n};o.mean.geometric=function(e,t){t=r.$(t);var n=1,i,a,o,s;for(s=0,i=0,a=e.length;s<a;++s){o=t?t(e[s]):e[s];if(r.isValid(o)){if(o<=0){throw Error("Geometric mean only defined for positive values.")}n*=o;++i}}n=i>0?Math.pow(n,1/i):0;return n};o.mean.harmonic=function(e,t){t=r.$(t);var n=0,i,a,o,s;for(s=0,i=0,a=e.length;s<a;++s){o=t?t(e[s]):e[s];if(r.isValid(o)){n+=1/o;++i}}return i/n};o.variance=function(e,t){t=r.$(t);if(!r.isArray(e)||e.length<2)return 0;var n=0,i=0,a,o,s,u;for(o=0,s=0;o<e.length;++o){u=t?t(e[o]):e[o];if(r.isValid(u)){a=u-n;n=n+a/++s;i=i+a*(u-n)}}i=i/(s-1);return i};o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))};o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),i=o.stdev(e,t);return i===0?0:(n-r)/i};o.min=function(e,t){return o.extent(e,t)[0]};o.max=function(e,t){return o.extent(e,t)[1]};o.extent=function(e,t){t=r.$(t);var n,i,a,o,s=e.length;for(o=0;o<s;++o){a=t?t(e[o]):e[o];if(r.isValid(a)){n=i=a;break}}for(;o<s;++o){a=t?t(e[o]):e[o];if(r.isValid(a)){if(a<n)n=a;if(a>i)i=a}}return[n,i]};o.extent.index=function(e,t){t=r.$(t);var n=-1,i=-1,a,o,s,u,l=e.length;for(u=0;u<l;++u){s=t?t(e[u]):e[u];if(r.isValid(s)){a=o=s;n=i=u;break}}for(;u<l;++u){s=t?t(e[u]):e[u];if(r.isValid(s)){if(s<a){a=s;n=u}if(s>o){o=s;i=u}}}return[n,i]};o.dot=function(e,t,n){var i=0,a,o;if(!n){if(e.length!==t.length){throw Error("Array lengths must match.")}for(a=0;a<e.length;++a){o=e[a]*t[a];if(o===o)i+=o}}else{t=r.$(t);n=r.$(n);for(a=0;a<e.length;++a){o=t(e[a])*n(e[a]);if(o===o)i+=o}}return i};o.dist=function(e,t,n,i){var a=r.isFunction(n)||r.isString(n),o=e,s=a?e:t,u=a?i:n,l=u===2||u==null,f=e.length,c=0,h,d;if(a){t=r.$(t);n=r.$(n)}for(d=0;d<f;++d){h=a?t(o[d])-n(s[d]):o[d]-s[d];c+=l?h*h:Math.pow(Math.abs(h),u)}return l?Math.sqrt(c):Math.pow(c,1/u)};o.cohensd=function(e,t,n){var i=n?e.map(r.$(t)):e,a=n?e.map(r.$(n)):t,s=o.mean(i),u=o.mean(a),l=o.count.valid(i),f=o.count.valid(a);if(l+f-2<=0){return 0}var c=o.variance(i),h=o.variance(a),d=Math.sqrt(((l-1)*c+(f-1)*h)/(l+f-2));return d===0?0:(s-u)/d};o.covariance=function(e,t,n){var i=n?e.map(r.$(t)):e,a=n?e.map(r.$(n)):t,s=i.length,u=o.mean(i),l=o.mean(a),f=0,c=0,h,d,p,g,m;if(s!==a.length){throw Error("Input lengths must match.")}for(h=0;h<s;++h){d=i[h];g=r.isValid(d);p=a[h];m=r.isValid(p);if(g&&m){f+=(d-u)*(p-l);++c}else if(g||m){throw Error("Valid values must align.")}}return f/(c-1)};o.rank=function(e,t){t=r.$(t)||r.identity;var n=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val"));var i=e.length,a=Array(i),o=-1,s={},u,l,f;for(u=0;u<i;++u){l=n[u].val;if(o<0&&s===l){o=u-1}else if(o>-1&&s!==l){f=1+(u-1+o)/2;for(;o<u;++o)a[n[o].idx]=f;o=-1}a[n[u].idx]=u+1;s=l}if(o>-1){f=1+(i-1+o)/2;for(;o<i;++o)a[n[o].idx]=f}return a};o.cor=function(e,t,n){var i=n;n=i?e.map(r.$(n)):t;t=i?e.map(r.$(t)):e;var a=o.dot(t,n),s=o.mean(t),u=o.mean(n),l=o.stdev(t),f=o.stdev(n),c=e.length;return(a-c*s*u)/((c-1)*l*f)};o.cor.rank=function(e,t,n){var r=n?o.rank(e,t):o.rank(e),i=n?o.rank(e,n):o.rank(t),a=e.length,s,u,l;for(s=0,u=0;s<a;++s){l=r[s]-i[s];u+=l*l}return 1-6*u/(a*(a*a-1))};o.cor.dist=function(e,t,n){var i=n?e.map(r.$(t)):e,a=n?e.map(r.$(n)):t;var s=o.dist.mat(i),u=o.dist.mat(a),l=s.length,f,c,h,d;for(f=0,c=0,h=0,d=0;f<l;++f){c+=s[f]*s[f];h+=u[f]*u[f];d+=s[f]*u[f]}return Math.sqrt(d/Math.sqrt(c*h))};o.linearRegression=function(e,t,n){var i=n?e.map(r.$(t)):e,a=n?e.map(r.$(n)):t,s=i.length,u=o.covariance(i,a),l=o.stdev(i),f=o.stdev(a),c=u/(l*l),h=o.mean(a)-c*o.mean(i),d={slope:c,intercept:h,R:u/(l*f),rss:0},p,g;for(g=0;g<s;++g){if(r.isValid(i[g])&&r.isValid(a[g])){p=c*i[g]+h-a[g];d.rss+=p*p}}return d};o.bootstrap={};o.bootstrap.ci=function(e,t,n,i,s){var u,l,f,c,h,d,p;if(r.isFunction(t)||r.isString(t)){u=e.map(r.$(t));l=n;f=i;c=s}else{u=e;l=t;f=n;c=i}l=l?+l:1e3;f=f||.05;h=a.random.bootstrap(u,c);for(p=0,d=Array(l);p<l;++p){d[p]=o.mean(h.samples(u.length))}d.sort(r.numcmp);return[o.quantile(d,f/2),o.quantile(d,1-f/2)]};o.z={};o.z.ci=function(e,t,n){var i=e,s=t;if(r.isFunction(t)||r.isString(t)){i=e.map(r.$(t));s=n}s=s||.05;var u=s===.05?1.96:a.random.normal(0,1).icdf(1-s/2),l=o.mean(i),f=o.stdev(i)/Math.sqrt(o.count.valid(i));return[l-u*f,l+u*f]};o.z.test=function(e,t,n,i){if(r.isFunction(n)||r.isString(n)){return(i&&i.paired?u:l)(i,e,t,n)}else if(r.isArray(t)){return(n&&n.paired?u:l)(n,e,t)}else if(r.isFunction(t)||r.isString(t)){return s(n,e,t)}else{return s(t,e)}};function s(e,t,n){var r=e&&e.nullh||0,i=a.random.normal(0,1),s=o.mean(t,n),u=o.stdev(t,n)/Math.sqrt(o.count.valid(t,n));if(u===0){return s-r===0?1:0}var l=(s-r)/u;return 2*i.cdf(-Math.abs(l))}function u(e,t,n,i){var a=i?t.map(r.$(n)):t,s=i?t.map(r.$(i)):n,u=o.count(a),l=o.count(s),f=Array(),c;if(u!==l){throw Error("Array lengths must match.")}for(c=0;c<u;++c){if(r.isValid(a[c])&&r.isValid(s[c])){f.push(a[c]-s[c])}}return o.z.test(f,e&&e.nullh||0)}function l(e,t,n,i){var s=i?t.map(r.$(n)):t,u=i?t.map(r.$(i)):n,l=o.count.valid(s),f=o.count.valid(u),c=a.random.normal(0,1),h=o.mean(s)-o.mean(u)-(e&&e.nullh||0),d=Math.sqrt(o.variance(s)/l+o.variance(u)/f);if(d===0){return h===0?1:0}var p=h/d;return 2*c.cdf(-Math.abs(p))}o.dist.mat=function(e){var t=e.length,n=t*t,r=Array(n),i=a.zeros(t),o=0,s,u,l;for(u=0;u<t;++u){r[u*t+u]=0;for(l=u+1;l<t;++l){r[u*t+l]=s=Math.abs(e[u]-e[l]);r[l*t+u]=s;i[u]+=s;i[l]+=s}}for(u=0;u<t;++u){o+=i[u];i[u]/=t}o/=n;for(u=0;u<t;++u){for(l=u;l<t;++l){r[u*t+l]+=o-i[u]-i[l];r[l*t+u]=r[u*t+l]}}return r};o.entropy=function(e,t){t=r.$(t);var n,i,a=0,o=0,s=e.length;for(n=0;n<s;++n){a+=t?t(e[n]):e[n]}if(a===0)return 0;for(n=0;n<s;++n){i=(t?t(e[n]):e[n])/a;if(i)o+=i*Math.log(i)}return-o/Math.LN2};o.mutual=function(e,t,n,i){var a=i?e.map(r.$(t)):e,o=i?e.map(r.$(n)):t,s=i?e.map(r.$(i)):n;var u={},l={},f=s.length,c=0,h=0,d=0,p,g,m;for(m=0;m<f;++m){u[a[m]]=0;l[o[m]]=0}for(m=0;m<f;++m){u[a[m]]+=s[m];l[o[m]]+=s[m];c+=s[m]}g=1/(c*Math.LN2);for(m=0;m<f;++m){if(s[m]===0)continue;p=c*s[m]/(u[a[m]]*l[o[m]]);h+=s[m]*g*Math.log(p);d+=s[m]*g*Math.log(s[m]/c)}return[h,1+h/d]};o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]};o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]};o.profile=function(e,t){var n=0,a=0,s=0,u=0,l=null,f=null,c=0,h=[],d={},p,g,m,v,y;for(m=0;m<e.length;++m){v=t?t(e[m]):e[m];d[v]=v in d?d[v]+1:(u+=1,1);if(v==null){++s}else if(r.isValid(v)){y=typeof v==="string"?v.length:v;if(l===null||y<l)l=y;if(f===null||y>f)f=y;p=y-n;n=n+p/++a;c=c+p*(y-n);h.push(y)}}c=c/(a-1);g=Math.sqrt(c);h.sort(r.cmp);return{type:i(e,t),unique:d,count:e.length,valid:a,missing:s,distinct:u,min:l,max:f,mean:n,stdev:g,median:v=o.quantile(h,.5),q1:o.quantile(h,.25),q3:o.quantile(h,.75),modeskew:g===0?0:(n-v)/g}};o.summary=function(e,t){t=t||r.keys(e[0]);var n=t.map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=true,n}},v0Fq:function(e,t,n){var r=n("zicW"),i={};r.extend(i,n("hv1v"));e.exports=r.extend(i,r)},v4pi:function(e,t,n){var r=n("CXWl");function i(e,t,n,i){(t||[]).forEach(function(t,o){n[o]=n[o]||r(e);a(t,o,n[o],i)})}function a(e,t,n,r){n.size(e.size?r.scale(e.size):null);n.shape(e.shape?r.scale(e.shape):null);n.fill(e.fill?r.scale(e.fill):null);n.stroke(e.stroke?r.scale(e.stroke):null);n.opacity(e.opacity?r.scale(e.opacity):null);if(e.orient)n.orient(e.orient);if(e.offset!=null)n.offset(e.offset);n.title(e.title||null);n.values(e.values||null);n.format(e.format!==undefined?e.format:null);n.formatType(e.formatType||null);var i=e.properties;n.titleProperties(i&&i.title||{});n.labelProperties(i&&i.labels||{});n.legendProperties(i&&i.legend||{});n.symbolProperties(i&&i.symbols||{});n.gradientProperties(i&&i.gradient||{})}e.exports=i;i.schema={defs:{legend:{type:"object",properties:{size:{type:"string"},shape:{type:"string"},fill:{type:"string"},stroke:{type:"string"},opacity:{type:"string"},orient:{enum:["left","right"],default:"right"},offset:{type:"number"},title:{type:"string"},values:{type:"array"},format:{type:"string"},formatType:{enum:["time","utc","string","number"]},properties:{type:"object",properties:{title:{$ref:"#/defs/propset"},labels:{$ref:"#/defs/propset"},legend:{$ref:"#/defs/propset"},symbols:{$ref:"#/defs/propset"},gradient:{$ref:"#/defs/propset"}},additionalProperties:false}},additionalProperties:false,anyOf:[{required:["size"]},{required:["shape"]},{required:["fill"]},{required:["stroke"]},{required:["opacity"]}]}}}},vA75:function(e,t,n){"use strict"},vY52:function(e,t,n){"use strict";var r=n("P/aK");var i=n("WJ2w");var a=n("ZAUf");var o;(function(e){function t(e){var t={};if(e.has(r.COLOR)&&e.fieldDef(r.COLOR).type===i.ORDINAL){t[e.field(r.COLOR)]=[{type:"sort",by:e.field(r.COLOR)},{type:"rank",field:e.field(r.COLOR),output:{rank:e.field(r.COLOR,{prefn:"rank_"})}}]}return t}e.parseUnit=t;function n(e){var t=e.child().component.data;if(!t.source){var n=t.colorRank;delete t.colorRank;return n}return{}}e.parseFacet=n;function o(e){var t={};e.children().forEach(function(e){var n=e.component.data;if(!n.source){a.extend(t,n.colorRank);delete n.colorRank}});return t}e.parseLayer=o;function s(e){return a.flatten(a.vals(e.colorRank))}e.assemble=s})(o=t.colorRank||(t.colorRank={}))},wKIX:function(e,t,n){"use strict";var r=n("ZAUf");var i=n("P/aK");var a=n("z5TJ");function o(e){if(!e){return undefined}if(a.containsTimeUnit(e,a.TimeUnit.SECONDS)){return"second"}if(a.containsTimeUnit(e,a.TimeUnit.MINUTES)){return"minute"}if(a.containsTimeUnit(e,a.TimeUnit.HOURS)){return"hour"}if(a.containsTimeUnit(e,a.TimeUnit.DAY)||a.containsTimeUnit(e,a.TimeUnit.DATE)){return"day"}if(a.containsTimeUnit(e,a.TimeUnit.MONTH)){return"month"}if(a.containsTimeUnit(e,a.TimeUnit.YEAR)){return"year"}return undefined}t.smallestUnit=o;function s(e,t,n){if(n===void 0){n=false}var r="datetime(";function i(e,r){if(r===void 0){r=true}if(n){return t+(r?", ":"")}else{var i="";if(e==="quarter"){i="floor(month("+t+")"+"/3)*3"}else{i=e+"("+t+")"}return i+(r?", ":"")}}if(a.containsTimeUnit(e,a.TimeUnit.YEAR)){r+=i("year")}else{r+="2006, "}if(a.containsTimeUnit(e,a.TimeUnit.MONTH)){r+=i("month")}else if(a.containsTimeUnit(e,a.TimeUnit.QUARTER)){r+=i("quarter")}else{r+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.DAY)){r+=i("day",false)+"+1, "}else if(a.containsTimeUnit(e,a.TimeUnit.DATE)){r+=i("date")}else{r+="1, "}if(a.containsTimeUnit(e,a.TimeUnit.HOURS)){r+=i("hours")}else{r+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.MINUTES)){r+=i("minutes")}else{r+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.SECONDS)){r+=i("seconds")}else{r+="0, "}if(a.containsTimeUnit(e,a.TimeUnit.MILLISECONDS)){r+=i("milliseconds",false)}else{r+="0"}return r+")"}t.parseExpression=s;function u(e,t){if(r.contains([i.ROW,i.COLUMN,i.SHAPE,i.COLOR],t)){return null}switch(e){case a.TimeUnit.SECONDS:return r.range(0,60);case a.TimeUnit.MINUTES:return r.range(0,60);case a.TimeUnit.HOURS:return r.range(0,24);case a.TimeUnit.DAY:return r.range(0,7);case a.TimeUnit.DATE:return r.range(1,32);case a.TimeUnit.MONTH:return r.range(0,12);case a.TimeUnit.QUARTER:return[0,3,6,9]}return null}t.rawDomain=u},"wLy+":function(e,t,n){var r=n("zicW"),i=n("Hqva").Tuple,a=n("J731"),o=n("4JPs"),s=n("acp7");function u(e){s.prototype.init.call(this,e);o.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value",default:"zero"}});this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"};return this.mutates(true)}var l=u.prototype=Object.create(s.prototype);l.constructor=u;l.batchTransform=function(e,t){a.debug(e,["stacking"]);var n=this.param("groupby").accessor,o=r.comparator(this.param("sortby").field),s=this.param("field").accessor,u=this.param("offset"),l=this._output;var c=f(t,n,o,s);for(var h=0,d=c.max;h<c.length;++h){var p=c[h],g=p.sum,m=u==="center"?(d-g)/2:0,v=u==="normalize"?1/g:1,y,_,x,b=m,M=0;for(y=0;y<p.length;++y){_=p[y];x=b;M+=s(_);b=v*M+m;i.set(_,l.start,x);i.set(_,l.end,b);i.set(_,l.mid,.5*(x+b))}}e.fields[l.start]=1;e.fields[l.end]=1;e.fields[l.mid]=1;return e};function f(e,t,n,r){var i=[],a=function(e){return e(u)},o,s,u,l,f,c,h;if(t==null){i.push(e.slice())}else{for(o={},s=0;s<e.length;++s){u=e[s];l=t.map(a);f=o[l]||(i.push(o[l]=[]),o[l]);f.push(u)}}for(l=0,h=0;l<i.length;++l){f=i[l];for(s=0,c=0;s<f.length;++s){c+=r(f[s])}f.sum=c;if(c>h)h=c;if(n!=null)f.sort(n)}i.max=h;return i}e.exports=u;u.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Stack transform",description:"Computes layout values for stacked graphs, as in stacked bar charts or stream graphs.",type:"object",properties:{type:{enum:["stack"]},groupby:{description:"A list of fields to split the data into groups (stacks).",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},sortby:{description:"A list of fields to determine the sort order of stacks.",oneOf:[{type:"array",items:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}]}},{$ref:"#/refs/signal"}]},field:{description:"The data field that determines the thickness/height of stacks.",oneOf:[{type:"string"},{$ref:"#/refs/signal"}]},offset:{description:"The baseline offset",oneOf:[{enum:["zero","center","normalize"]},{$ref:"#/refs/signal"}],default:"zero"},output:{type:"object",description:"Rename the output data fields",properties:{start:{type:"string",default:"layout_start"},end:{type:"string",default:"layout_end"},mid:{type:"string",default:"layout_mid"}},additionalProperties:false}},additionalProperties:false,required:["type","groupby","field"]}},wWYS:function(e,t,n){"use strict";t.axis=n("cihr");t.aggregate=n("h/tW");t.bin=n("FmT5");t.channel=n("P/aK");t.compile=n("z/Ym").compile;t.config=n("Py5Z");t.data=n("x6Fv");t.encoding=n("QSMf");t.facet=n("vA75");t.fieldDef=n("o+e1");t.legend=n("ZE31");t.mark=n("j8cM");t.scale=n("Fw/k");t.shorthand=n("/7Ur");t.sort=n("yLwJ");t.spec=n("F9eC");t.stack=n("f2i1");t.timeUnit=n("z5TJ");t.transform=n("iIpz");t.type=n("WJ2w");t.util=n("ZAUf");t.validate=n("Utn/");t.version="__VERSION__"},x6Fv:function(e,t,n){"use strict";var r=n("WJ2w");(function(e){e[e["JSON"]="json"]="JSON";e[e["CSV"]="csv"]="CSV";e[e["TSV"]="tsv"]="TSV";e[e["TOPOJSON"]="topojson"]="TOPOJSON"})(t.DataFormatType||(t.DataFormatType={}));var i=t.DataFormatType;(function(e){e[e["SOURCE"]="source"]="SOURCE";e[e["SUMMARY"]="summary"]="SUMMARY";e[e["STACKED_SCALE"]="stacked_scale"]="STACKED_SCALE";e[e["LAYOUT"]="layout"]="LAYOUT"})(t.DataTable||(t.DataTable={}));var a=t.DataTable;t.SUMMARY=a.SUMMARY;t.SOURCE=a.SOURCE;t.STACKED_SCALE=a.STACKED_SCALE;t.LAYOUT=a.LAYOUT;t.types={boolean:r.Type.NOMINAL,number:r.Type.QUANTITATIVE,integer:r.Type.QUANTITATIVE,date:r.Type.TEMPORAL,string:r.Type.NOMINAL}},"xZ2+":function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("ekYZ"),o=n("B1p+"),s=n("gtuQ"),u=n("3FFs");function l(e,t,n){this._graph=e;this._name=t;this._data=[];this._source=null;this._facet=n;this._input=a.create();this._output=null;this._indexes={};this._indexFields=[];this._inputNode=null;this._outputNode=null;this._pipeline=null;this._collector=null;this._mutates=false}var f=l.prototype;f.name=function(e){if(!arguments.length)return this._name;return this._name=e,this};f.source=function(e){if(!arguments.length)return this._source;return this._source=this._graph.data(e)};f.insert=function(e){this._input.add=this._input.add.concat(e.map(s.ingest));return this};f.remove=function(e){var t=this._data.filter(e);this._input.rem=this._input.rem.concat(t);return this};f.update=function(e,t,n){var r=this._input.mod,i=s.idMap(r);this._input.fields[t]=1;this._data.filter(e).forEach(function(e){var a=e[t],o=n(e);if(a!==o){s.set(e,t,o);if(i[e._id]!==1){r.push(e);i[e._id]=1}}});return this};f.values=function(e){if(!arguments.length)return this._collector.data();this._input.rem=this._data.slice();if(e){this.insert(e)}return this};f.mutates=function(e){if(!arguments.length)return this._mutates;this._mutates=this._mutates||e;return this};f.last=function(){return this._output};f.fire=function(e){if(e)this._input=e;this._graph.propagate(this._input,this._pipeline[0]);return this};f.pipeline=function(e){if(!arguments.length)return this._pipeline;var t=this._graph,n;e.unshift(this._inputNode=c(this));n=t.preprocess(e);if(n.router){e.push(n.collector=new o(t))}e.push(this._outputNode=h(this));this._collector=n.collector;this._mutates=!!n.mutates;t.connect(this._pipeline=e);return this};f.synchronize=function(){this._graph.synchronize(this._pipeline);return this};f.getIndex=function(e){var t=this.values(),n=this._indexes,i=this._indexFields,a=r.$(e),o,u,l,f;if(!n[e]){n[e]=o={};i.push(e);for(u=0,l=t.length;u<l;++u){f=a(t[u]);o[f]=(o[f]||0)+1;s.prev_init(t[u])}}return n[e]};f.listener=function(){return d(this).addListener(this._inputNode)};f.addListener=function(e){if(e instanceof l){this._collector.addListener(e.listener())}else{this._outputNode.addListener(e)}return this};f.removeListener=function(e){this._outputNode.removeListener(e)};f.listeners=function(e){return(e?this._collector:this._outputNode).listeners()};function c(e){var t=new u(e._graph).router(true).collector(true);t.data=function(){return e._data};t.evaluate=function(t){i.debug(t,["input",e._name]);var n=e._input,r=a.create(t),o;for(o in n.fields){r.fields[o]=1}if(n.rem.length){e._data=s.idFilter(e._data,n.rem)}if(n.add.length){e._data=e._data.concat(n.add)}if(n.sort){e._data.sort(n.sort)}if(t.reflow){n.mod=n.mod.concat(s.idFilter(e._data,n.add,n.mod,n.rem))}e._input=a.create();r.add=n.add;r.mod=n.mod;r.rem=n.rem;r.facet=e._facet;return r};return t}function h(e){var t=new u(e._graph).router(true).reflows(true).collector(true);function n(t){var n=e._indexFields,i,a,o,u,l,f;for(i=0;i<n.length;++i){u=n[i];l=e._indexes[u];o=r.$(u);for(a=0;a<t.add.length;++a){f=o(t.add[a]);s.prev_init(t.add[a]);l[f]=(l[f]||0)+1}for(a=0;a<t.rem.length;++a){f=o(t.rem[a]);l[f]=(l[f]||0)-1}for(a=0;a<t.mod.length;++a){f=o(t.mod[a]._prev);l[f]=(l[f]||0)-1;f=o(t.mod[a]);l[f]=(l[f]||0)+1}}}t.data=function(){return e._collector?e._collector.data():e._data};t.evaluate=function(t){i.debug(t,["output",e._name]);n(t);var r=a.create(t,true);if(e._facet){e._facet.values=e.values();t.facet=null}e._output=t;r.data[e._name]=1;return r};return t}function d(e){var t=new u(e._graph).router(true);t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=a.create(t);r.add=t.add.map(function(e){return n[e._id]=s.derive(e)});r.mod=t.mod.map(function(e){return s.rederive(e,n[e._id])});r.rem=t.rem.map(function(e){var t=n[e._id];return n[e._id]=null,t});return e._input=r}else{return e._input=t}};return t}e.exports=l},yLCL:function(e,t,n){var r=n("Hqva").Tuple,i=n("J731"),a=n("4JPs"),o=n("acp7");function s(e){o.prototype.init.call(this,e);a.addParameters(this,{field:{type:"field",default:null},normalize:{type:"value",default:false}});this._output={rank:"rank"};return this.mutates(true)}var u=s.prototype=Object.create(o.prototype);u.constructor=s;u.batchTransform=function(e,t){i.debug(e,["rank"]);var n=this._output.rank,a=this.param("normalize"),o=this.param("field").accessor,s={},u,l=t.length,f,c,h;if(o){for(u=0,f=0;u<l;++u){c=t[u];s[h=o(c)]=s[h]||(s[h]=++f)}}for(u=0;u<l&&(c=t[u]);++u){if(o&&(h=o(c))){r.set(c,n,a?s[h]/f:s[h])}else{r.set(c,n,a?(u+1)/l:u+1)}}e.fields[n]=1;return e};e.exports=s;s.schema={$schema:"http://json-schema.org/draft-04/schema#",title:"Rank transform",description:"Computes ascending rank scores for data tuples.",type:"object",properties:{type:{enum:["rank"]},field:{oneOf:[{type:"string"},{$ref:"#/refs/signal"}],description:"A key field to used to rank tuples. "+"If undefined, tuples will be ranked in their observed order."},normalize:{description:"If true, values of the output field will lie in the range [0, 1].",oneOf:[{type:"boolean"},{$ref:"#/refs/signal"}],default:false},output:{type:"object",description:"Rename the output data fields",properties:{rank:{type:"string",default:"rank"}},additionalProperties:false}},additionalProperties:false,required:["type"]}},yLwJ:function(e,t,n){"use strict";(function(e){e[e["ASCENDING"]="ascending"]="ASCENDING";e[e["DESCENDING"]="descending"]="DESCENDING";e[e["NONE"]="none"]="NONE"})(t.SortOrder||(t.SortOrder={}));var r=t.SortOrder},yQql:function(e,t,n){var r=n("zF6n"),i=n("GXhC");var a={formats:[],format_map:{},truncate:r.truncate,pad:r.pad,day:i.day,month:i.month,quarter:i.quarter,utcQuarter:i.utcQuarter};function o(e){var t=s(e,"d");t="var __t; return "+t+";";return new Function("d",t).bind(a)}o.source=s;o.context=a;o.format=m;e.exports=o;o.clearFormatCache=function(){a.formats=[];a.format_map={}};o.property=function(e,t){var n=r.field(t).map(r.str).join("][");return e+"["+n+"]"};function s(e,t,n){t=t||"obj";var r=0;var i="'";var a=l;e.replace(a,function(a,o,s){i+=e.slice(r,s).replace(d,p);r=s+a.length;if(o){i+="'\n+((__t=("+u(o,t,n)+"))==null?'':__t)+\n'"}return a});return i+"'"}function u(e,t,n){var i=e.match(f);var a=i.shift().trim();var s=true;function u(e){e=e||"";if(s){s=false;d="String("+d+")"+e}else{d+=e}return d}function l(){return"(typeof "+d+'==="number"?new Date('+d+"):"+d+")"}function h(e){var t=v[0];if(t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'){t=t.slice(1,-1)}else{throw Error("Format pattern must be quoted: "+t)}_=g(t,e);s=false;var n=e==="number"?d:l();d="this.formats["+_+"]("+n+")"}if(n)n[a]=1;var d=o.property(t,a);for(var p=0;p<i.length;++p){var m=i[p],v=null,y,_,x;if((y=m.indexOf(":"))>0){m=m.slice(0,y);v=i[p].slice(y+1).match(c).map(function(e){return e.trim()})}m=m.trim();switch(m){case"length":u(".length");break;case"lower":u(".toLowerCase()");break;case"upper":u(".toUpperCase()");break;case"lower-locale":u(".toLocaleLowerCase()");break;case"upper-locale":u(".toLocaleUpperCase()");break;case"trim":u(".trim()");break;case"left":_=r.number(v[0]);u(".slice(0,"+_+")");break;case"right":_=r.number(v[0]);u(".slice(-"+_+")");break;case"mid":_=r.number(v[0]);x=_+r.number(v[1]);u(".slice(+"+_+","+x+")");break;case"slice":_=r.number(v[0]);u(".slice("+_+(v.length>1?","+r.number(v[1]):"")+")");break;case"truncate":_=r.number(v[0]);x=v[1];x=x!=="left"&&x!=="middle"&&x!=="center"?"right":x;d="this.truncate("+u()+","+_+",'"+x+"')";break;case"pad":_=r.number(v[0]);x=v[1];x=x!=="left"&&x!=="middle"&&x!=="center"?"right":x;d="this.pad("+u()+","+_+",'"+x+"')";break;case"number":h("number");break;case"time":h("time");break;case"time-utc":h("utc");break;case"month":d="this.month("+d+")";break;case"month-abbrev":d="this.month("+d+",true)";break;case"day":d="this.day("+d+")";break;case"day-abbrev":d="this.day("+d+",true)";break;case"quarter":d="this.quarter("+d+")";break;case"quarter-utc":d="this.utcQuarter("+d+")";break;default:throw Error("Unrecognized template filter: "+m)}}return d}var l=/\{\{(.+?)\}\}|$/g,f=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,c=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var d=/\\|'|\r|\n|\u2028|\u2029/g;function p(e){return"\\"+h[e]}function g(e,t){var n=t+":"+e;if(a.format_map[n]==null){var r=i[t](e);var o=a.formats.length;a.formats.push(r);a.format_map[n]=o;return o}return a.format_map[n]}function m(e,t){return a.formats[g(e,t)]}},yaQe:function(e,t,n){var r=n("zicW");var i={"=":l,"==":l,"!=":l,">":l,">=":l,"<":l,"<=":l,and:f,"&&":f,or:f,"||":f,in:c};var a=function(){return 0};a.invert=a;function o(e,t){(t||[]).forEach(function(t){var n=i[t.type](e,t);var o=Function("args","db","signals","predicates",n.code);o.root=function(){return e.scene().items[0]};o.nullScale=a;o.isFunction=r.isFunction;o.signals=n.signals;o.data=n.data;e.predicate(t.name,o)});return t}function s(e,t){var n=r.field(e),i="signals["+n.map(r.str).join("][")+"]";t[n[0]]=1;return i}function u(e,t){var n=[],i=[],a={},o={};function u(e){a[e]=1}function l(e){o[e]=1}r.array(t).forEach(function(t,o){var f="o"+o,c="";if(t.value!==undefined){c=r.str(t.value)}else if(t.arg){c="args["+r.str(t.arg)+"]"}else if(t.signal){c=s(t.signal,a)}else if(t.predicate){var h=t.predicate,d=h&&(h.name||h),p=e.predicate(d),g="predicates["+r.str(d)+"]";p.signals.forEach(u);p.data.forEach(l);if(r.isObject(h)){r.keys(h).forEach(function(e){if(e==="name")return;var t=h[e];c+="args["+r.str(e)+"] = ";if(t.signal){c+=s(t.signal,a)}else if(t.arg){c+="args["+r.str(t.arg)+"]"}c+=", "})}c+=g+".call("+g+", args, db, signals, predicates)"}n.push(f);i.push(f+"=("+c+")")});return{code:"var "+n.join(", ")+";\n"+i.join(";\n")+";\n",signals:r.keys(a),data:r.keys(o)}}function l(e,t){var n=u(e,t.operands);if(t.type==="=")t.type="==";n.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\n"+"o1 = o1 instanceof Date ? o1.getTime() : o1;\n";return{code:n.code+"return "+["o0","o1"].join(t.type)+";",signals:n.signals,data:n.data}}function f(e,t){var n=u(e,t.operands),r=[],i=0,a=t.operands.length;while(r.push("o"+i++)<a);if(t.type==="and")t.type="&&";else if(t.type==="or")t.type="||";return{code:n.code+"return "+r.join(t.type)+";",signals:n.signals,data:n.data}}function c(e,t){var n=[t.item],i="";if(t.range)n.push.apply(n,t.range);if(t.scale){i=h(t.scale,n)}var a=u(e,n);i=a.code+i+"\n  var ordSet = null;\n";if(t.data){var o=r.field(t.field).map(r.str);i+="var where = function(d) { return d["+o.join("][")+"] == o0 };\n";i+="return db["+r.str(t.data)+"].filter(where).length > 0;"}else if(t.range){if(t.scale){i+="if (scale.length == 2) {\n"+"  ordSet = scale(o1, o2);\n"+"} else {\n"+"  o1 = scale(o1);\no2 = scale(o2);\n"+"}"}i+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n"+"  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;"}return{code:i,signals:a.signals,data:a.data.concat(t.data?[t.data]:[])}}function h(e,t){var n="var scale = ",i=t.length;if(r.isString(e)){t.push({value:e});n+="this.root().scale(o"+i+")"}else if(e.arg){t.push(e);n+="o"+i}else if(e.name){t.push(r.isString(e.name)?{value:e.name}:e.name);n+="(this.isFunction(o"+i+") ? o"+i+" : ";if(e.scope){t.push(e.scope);n+="((o"+(i+1)+".scale || this.root().scale)(o"+i+") || this.nullScale)"}else{n+="this.root().scale(o"+i+")"}n+=")"}if(e.invert===true){n+=".invert"}return n+";\n"}e.exports=o;o.schema={refs:{operand:{type:"object",oneOf:[{properties:{value:{}},required:["value"]},{properties:{arg:{type:"string"}},required:["arg"]},{$ref:"#/refs/signal"},{properties:{predicate:{oneOf:[{type:"string"},{type:"object",properties:{name:{type:"string"}},required:["name"]}]}},required:["predicate"]}]}},defs:{predicate:{type:"object",oneOf:[{properties:{name:{type:"string"},type:{enum:["==","!=",">","<",">=","<="]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2,maxItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{enum:["and","&&","or","||"]},operands:{type:"array",items:{$ref:"#/refs/operand"},minItems:2}},required:["name","type","operands"]},{properties:{name:{type:"string"},type:{enum:["in"]},item:{$ref:"#/refs/operand"}},oneOf:[{properties:{range:{type:"array",items:{$ref:"#/refs/operand"},minItems:2},scale:{$ref:"#/refs/scopedScale"}},required:["range"]},{properties:{data:{type:"string"},field:{type:"string"}},required:["data","field"]}],required:["name","type","item"]}]}}}},ybCx:function(e,t,n){var r=n("zicW"),i=n("J731"),a=n("YvtE"),o=n("PwiD"),s=n("+5nH");function u(e){var t=arguments.length,u=2,l=arguments[t-1],f=new o,c=s.factory,h;if(t>u&&r.isFunction(arguments[t-u])){c=arguments[t-u];++u}if(t>u&&r.isObject(arguments[t-u])){f.config(arguments[t-u])}h=f.config();if(r.isObject(e)){p(e)}else if(r.isString(e)){var d=r.extend({url:e},h.load);r.json(d,function(e,t){if(e)m("SPECIFICATION LOAD FAILED: "+e);else p(t)})}else{m("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}function p(e){try{e=r.duplicate(e);var t=n("UaGl"),i=a(e,h,"width",500),o=a(e,h,"height",500),s=t.padding(a(e,h,"padding")),u=a(e,h,"background");f.signal("width",i);f.signal("height",o);f.signal("padding",s);g(e);f.defs({width:i,height:o,padding:s,viewport:e.viewport||null,background:t.background(u),signals:t.signals(f,e.signals),predicates:t.predicates(f,e.predicates),marks:t.marks(f,e,i,o),data:t.data(f,e.data,m)})}catch(e){m(e)}}function g(e){var t=e.signals||(e.signals=[]),n;t.some(function(e){return e.name==="cursor"?(n=e,true):false});if(!n)t.push(n={name:"cursor",streams:[]});n.init=n.init||{};n.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function m(e){var t;if(e){i.error(e)}else{t=c(f.buildIndexes())}if(l){if(l.length>1)l(e,t);else if(!e)l(t);l=null}}}e.exports=u;u.schema={defs:{spec:{title:"Vega visualization specification",type:"object",allOf:[{$ref:"#/defs/container"},{properties:{width:{type:"number"},height:{type:"number"},viewport:{type:"array",items:{type:"number"},maxItems:2},background:{$ref:"#/defs/background"},padding:{$ref:"#/defs/padding"},signals:{type:"array",items:{$ref:"#/defs/signal"}},predicates:{type:"array",items:{$ref:"#/defs/predicate"}},data:{type:"array",items:{$ref:"#/defs/data"}}}}]}}}},yixx:function(e,t,n){"use strict";var r=n("Fw/k");var i=n("ZAUf");var a;(function(e){function t(e){return e.channels().reduce(function(t,n){var i=e.scale(n);if(!e.field(n)||!i){return t}t[e.field(n)]=i.type===r.ScaleType.LOG;return t},{})}e.parseUnit=t;function n(e){var t=e.child().component.data;if(!t.source){var n=t.nonPositiveFilter;delete t.nonPositiveFilter;return n}return{}}e.parseFacet=n;function a(e){var t={};e.children().forEach(function(n){var r=n.component.data;if(e.compatibleSource(n)&&!i.differ(r.nonPositiveFilter,t)){i.extend(t,r.nonPositiveFilter);delete r.nonPositiveFilter}});return t}e.parseLayer=a;function o(e){return i.keys(e.nonPositiveFilter).filter(function(t){return e.nonPositiveFilter[t]}).map(function(e){return{type:"filter",test:"datum."+e+" > 0"}})}e.assemble=o})(a=t.nonPositiveFilter||(t.nonPositiveFilter={}))},yszh:function(e,t,n){var r=n("sV93"),i=n("VeBo");function a(){i.call(this)}var o=i.prototype;var s=a.prototype=Object.create(o);s.constructor=a;s.initialize=function(e,t,n){this._svg=r.find(e,"svg");return o.initialize.call(this,e,t,n)};s.svg=function(){return this._svg};s.listener=function(e){var t=this;return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type;i=Array.isArray(i)?i[0]:i;e.call(t._obj,n,i)}};s.on=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers,a={type:e,handler:t,listener:this.listener(t)};(i[n]||(i[n]=[])).push(a);r.addEventListener(n,a.listener);return this};s.off=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers[n],a;if(!i)return;for(a=i.length;--a>=0;){if(i[a].type===e&&!t||i[a].handler===t){r.removeEventListener(n,i[a].listener);i.splice(a,1)}}return this};e.exports=a},"z/Ym":function(e,t,n){"use strict";var r=n("x6Fv");var i=n("F9eC");var a=n("ZAUf");var o=n("MtYt");function s(e){var t=i.normalize(e);var n=o.buildModel(t,null,"");n.parse();return u(n)}t.compile=s;function u(e){var t=e.config();var n=a.extend({width:1,height:1,padding:"auto"},t.viewport?{viewport:t.viewport}:{},t.background?{background:t.background}:{},{data:[].concat(e.assembleData([]),e.assembleLayout([])),marks:[l(e)]});return{spec:n}}function l(e){var t=a.extend({name:e.name("root"),type:"group"},e.description()?{description:e.description()}:{},{from:{data:r.LAYOUT},properties:{update:a.extend({width:{field:"width"},height:{field:"height"}},e.assembleParentGroupProperties(e.config().cell))}});return a.extend(t,e.assembleGroup())}t.assembleRootGroup=l},z5TJ:function(e,t,n){"use strict";(function(e){e[e["YEAR"]="year"]="YEAR";e[e["MONTH"]="month"]="MONTH";e[e["DAY"]="day"]="DAY";e[e["DATE"]="date"]="DATE";e[e["HOURS"]="hours"]="HOURS";e[e["MINUTES"]="minutes"]="MINUTES";e[e["SECONDS"]="seconds"]="SECONDS";e[e["MILLISECONDS"]="milliseconds"]="MILLISECONDS";e[e["YEARMONTH"]="yearmonth"]="YEARMONTH";e[e["YEARMONTHDAY"]="yearmonthday"]="YEARMONTHDAY";e[e["YEARMONTHDATE"]="yearmonthdate"]="YEARMONTHDATE";e[e["YEARDAY"]="yearday"]="YEARDAY";e[e["YEARDATE"]="yeardate"]="YEARDATE";e[e["YEARMONTHDAYHOURS"]="yearmonthdayhours"]="YEARMONTHDAYHOURS";e[e["YEARMONTHDAYHOURSMINUTES"]="yearmonthdayhoursminutes"]="YEARMONTHDAYHOURSMINUTES";e[e["YEARMONTHDAYHOURSMINUTESSECONDS"]="yearmonthdayhoursminutesseconds"]="YEARMONTHDAYHOURSMINUTESSECONDS";e[e["HOURSMINUTES"]="hoursminutes"]="HOURSMINUTES";e[e["HOURSMINUTESSECONDS"]="hoursminutesseconds"]="HOURSMINUTESSECONDS";e[e["MINUTESSECONDS"]="minutesseconds"]="MINUTESSECONDS";e[e["SECONDSMILLISECONDS"]="secondsmilliseconds"]="SECONDSMILLISECONDS";e[e["QUARTER"]="quarter"]="QUARTER";e[e["YEARQUARTER"]="yearquarter"]="YEARQUARTER";e[e["QUARTERMONTH"]="quartermonth"]="QUARTERMONTH";e[e["YEARQUARTERMONTH"]="yearquartermonth"]="YEARQUARTERMONTH"})(t.TimeUnit||(t.TimeUnit={}));var r=t.TimeUnit;t.TIMEUNITS=[r.YEAR,r.MONTH,r.DAY,r.DATE,r.HOURS,r.MINUTES,r.SECONDS,r.MILLISECONDS,r.YEARMONTH,r.YEARMONTHDAY,r.YEARMONTHDATE,r.YEARDAY,r.YEARDATE,r.YEARMONTHDAYHOURS,r.YEARMONTHDAYHOURSMINUTES,r.YEARMONTHDAYHOURSMINUTESSECONDS,r.HOURSMINUTES,r.HOURSMINUTESSECONDS,r.MINUTESSECONDS,r.SECONDSMILLISECONDS,r.QUARTER,r.YEARQUARTER,r.QUARTERMONTH,r.YEARQUARTERMONTH];function i(e,t,n){if(!e){return undefined}var i=[];if(a(e,r.YEAR)){i.push(n?"%y":"%Y")}if(a(e,r.QUARTER)){i.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'")}if(a(e,r.MONTH)){i.push(n?"%b":"%B")}if(a(e,r.DAY)){i.push(n?"%a":"%A")}else if(a(e,r.DATE)){i.push("%d")}var o=[];if(a(e,r.HOURS)){o.push("%H")}if(a(e,r.MINUTES)){o.push("%M")}if(a(e,r.SECONDS)){o.push("%S")}if(a(e,r.MILLISECONDS)){o.push("%L")}var s=[];if(i.length>0){s.push(i.join("-"))}if(o.length>0){s.push(o.join(":"))}if(s.length>0){var u="{{"+t+" | time:'"+s.join(" ")+"'}}";return u.replace(new RegExp("{{"+t+" \\| time:''}}","g"),"")}else{return undefined}}t.template=i;function a(e,t){var n=e.toString();var r=t.toString();return n.indexOf(r)>-1}t.containsTimeUnit=a},zF6n:function(e,t,n){(function(t){var n=e.exports;var r="__name__";n.namedfunc=function(e,t){return t[r]=e,t};n.name=function(e){return e==null?null:e[r]};n.identity=function(e){return e};n.true=n.namedfunc("true",function(){return true});n.false=n.namedfunc("false",function(){return false});n.duplicate=function(e){return JSON.parse(JSON.stringify(e))};n.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};n.extend=function(e){for(var t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t){e[n]=t[n]}}return e};n.length=function(e){return e!=null&&e.length!=null?e.length:null};n.keys=function(e){var t=[],n;for(n in e)t.push(n);return t};n.vals=function(e){var t=[],n;for(n in e)t.push(e[n]);return t};n.toMap=function(e,t){return(t=n.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})};n.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;r<t;++r){n+="|"+String(e[r])}return n};var i=Object.prototype.toString;n.isObject=function(e){return e===Object(e)};n.isFunction=function(e){return i.call(e)==="[object Function]"};n.isString=function(e){return typeof value==="string"||i.call(e)==="[object String]"};n.isArray=Array.isArray||function(e){return i.call(e)==="[object Array]"};n.isNumber=function(e){return typeof e==="number"||i.call(e)==="[object Number]"};n.isBoolean=function(e){return e===true||e===false||i.call(e)=="[object Boolean]"};n.isDate=function(e){return i.call(e)==="[object Date]"};n.isValid=function(e){return e!=null&&e===e};n.isBuffer=typeof t==="function"&&t.isBuffer||n.false;n.number=function(e){return e==null||e===""?null:+e};n.boolean=function(e){return e==null||e===""?null:e==="false"?false:!!e};n.date=function(e,t){var n=t?t:Date;return e==null||e===""?null:n.parse(e)};n.array=function(e){return e!=null?n.isArray(e)?e:[e]:[]};n.str=function(e){return n.isArray(e)?"["+e.map(n.str)+"]":n.isObject(e)||n.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var a=/\[(.*?)\]|[^.\[]+/g;n.field=function(e){return String(e).match(a).map(function(e){return e[0]!=="["?e:e[1]!=="'"&&e[1]!=='"'?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})};n.accessor=function(e){return e==null||n.isFunction(e)?e:n.namedfunc(e,Function("x","return x["+n.field(e).map(n.str).join("][")+"];"))};n.$=n.accessor;n.mutator=function(e){var t;return n.isString(e)&&(t=n.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}};n.$func=function(e,t){return function(r){r=n.$(r)||n.identity;var i=e+(n.name(r)?"_"+n.name(r):"");return n.namedfunc(i,function(e){return t(r(e))})}};n.$valid=n.$func("valid",n.isValid);n.$length=n.$func("length",n.length);n.$in=function(e,t){e=n.$(e);var r=n.isArray(t)?n.toMap(t):t;return function(t){return!!r[e(t)]}};n.comparator=function(e){var t=[];if(e===undefined)e=[];e=n.array(e).map(function(e){var r=1;if(e[0]==="-"){r=-1;e=e.slice(1)}else if(e[0]==="+"){r=+1;e=e.slice(1)}t.push(r);return n.accessor(e)});return function(r,i){var a,o,s,u;for(a=0,o=e.length;a<o;++a){s=e[a];u=n.cmp(s(r),s(i));if(u)return u*t[a]}return 0}};n.cmp=function(e,t){return(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0};n.numcmp=function(e,t){return e-t};n.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});e.sort(function(e,i){var a=t(e),o=t(i);return a<o?-1:a>o?1:r[n(e)]-r[n(i)]});return e};n.permute=function(e){var t=e.length,n,r;while(t){r=Math.floor(Math.random()*t--);n=e[t];e[t]=e[r];e[r]=n}};n.pad=function(e,t,n,r){r=r||" ";var i=t-e.length;if(i<=0)return e;switch(n){case"left":return o(i,r)+e;case"middle":case"center":return o(Math.floor(i/2),r)+e+o(Math.ceil(i/2),r);default:return e+o(i,r)}};function o(e,t){var n="",r;for(r=0;r<e;++r)n+=t;return n}n.truncate=function(e,t,n,r,i){var a=e.length;if(a<=t)return e;i=i!==undefined?String(i):"…";var o=Math.max(0,t-i.length);switch(n){case"left":return i+(r?s(e,o,1):e.slice(a-o));case"middle":case"center":var u=Math.ceil(o/2),l=Math.floor(o/2);return(r?s(e,u):e.slice(0,u))+i+(r?s(e,l,1):e.slice(a-l));default:return(r?s(e,o):e.slice(0,o))+i}};function s(e,t,n){var r=0,i=e.split(u);if(n){e=(i=i.reverse()).filter(function(e){r+=e.length;return r<=t}).reverse()}else{e=i.filter(function(e){r+=e.length;return r<=t})}return e.length?e.join("").trim():i[0].slice(0,t)}var u=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(t,n("EuP9").Buffer)},"zLl/":function(e,t,n){var r=n("5AQc");function i(e){this._pending=0;this._config=e||i.Config}i.Config=null;var a=i.prototype;a.pending=function(){return this._pending};a.params=function(e){var t={url:e},n;for(n in this._config){t[n]=this._config[n]}return t};a.imageURL=function(e){return r.sanitizeUrl(this.params(e))};function o(e,t){var n=r.sanitizeUrl(this.params(e));if(!n){if(t)t(e,null);return null}var i=this,a=new Image;i._pending+=1;a.onload=function(){i._pending-=1;a.loaded=true;if(t)t(null,a)};a.src=n;return a}function s(e,t){var i=this,a=new(n(7).Image);i._pending+=1;r(this.params(e),function(e,n){i._pending-=1;if(e){if(t)t(e,null);return null}a.src=n;a.loaded=true;if(t)t(null,a)});return a}a.loadImage=function(e,t){return r.useXHR?o.call(this,e,t):s.call(this,e,t)};e.exports=i},zPnY:function(e,t,n){var r=n("gWW/"),i=n("eJnU"),a=n("bSC/");var o=Math.sqrt(3),s=Math.tan(30*Math.PI/180);function u(e,t){var n=t.size!=null?t.size:100,r=t.x,u=t.y,f,c,h,d;e.beginPath();if(t.shape==null||t.shape==="circle"){f=Math.sqrt(n/Math.PI);e.arc(r,u,f,0,2*Math.PI,0);e.closePath();return}switch(t.shape){case"cross":f=Math.sqrt(n/5)/2;c=3*f;e.moveTo(r-c,u-f);e.lineTo(r-f,u-f);e.lineTo(r-f,u-c);e.lineTo(r+f,u-c);e.lineTo(r+f,u-f);e.lineTo(r+c,u-f);e.lineTo(r+c,u+f);e.lineTo(r+f,u+f);e.lineTo(r+f,u+c);e.lineTo(r-f,u+c);e.lineTo(r-f,u+f);e.lineTo(r-c,u+f);break;case"diamond":d=Math.sqrt(n/(2*s));h=d*s;e.moveTo(r,u-d);e.lineTo(r+h,u);e.lineTo(r,u+d);e.lineTo(r-h,u);break;case"square":c=Math.sqrt(n);f=c/2;e.rect(r-f,u-f,c,c);break;case"triangle-down":h=Math.sqrt(n/o);d=h*o/2;e.moveTo(r,u+d);e.lineTo(r+h,u-d);e.lineTo(r-h,u-d);break;case"triangle-up":h=Math.sqrt(n/o);d=h*o/2;e.moveTo(r,u-d);e.lineTo(r+h,u+d);e.lineTo(r-h,u+d);break;default:var p=l(i(t.shape),n);a(e,p,r,u)}e.closePath()}function l(e,t){var n=Math.sqrt(t),r,i,a,o,s;for(r=0,i=e.length;r<i;++r){for(s=e[r],a=1,o=s.length;a<o;++a){s[a]*=n}}return e}e.exports={draw:r.drawAll(u),pick:r.pickPath(u)}},zYzi:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n];function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)};var i=n("h/tW");var a=n("P/aK");var o=n("Py5Z");var s=n("x6Fv");var u=n("QSMf");var l=n("o+e1");var f=n("j8cM");var c=n("Fw/k");var h=n("WJ2w");var d=n("ZAUf");var p=n("HeGT");var g=n("MtYt");var m=n("pyUU");var v=n("V22v");var y=n("jxr4");var _=n("YBv9");var x=n("jGoH");var b=n("0ZZw");var M=n("TLMq");var k=n("f2i1");var w=function(e){r(t,e);function t(t,n,r){e.call(this,t,n,r);var i=this._mark=t.mark;var a=this._encoding=this._initEncoding(i,t.encoding||{});var o=this._config=this._initConfig(t.config,n,i,a);this._scale=this._initScale(i,a,o);this._axis=this._initAxis(a,o);this._legend=this._initLegend(a,o);this._stack=k.stack(i,a,o)}t.prototype._initEncoding=function(e,t){t=d.duplicate(t);u.forEach(t,function(t,n){if(!a.supportMark(n,e)){console.warn(n,"dropped as it is incompatible with",e);delete t.field;return}if(t.type){t.type=h.getFullName(t.type)}if((n===a.PATH||n===a.ORDER)&&!t.aggregate&&t.type===h.QUANTITATIVE){t.aggregate=i.AggregateOp.MIN}});return t};t.prototype._initConfig=function(e,t,n,r){var i=d.mergeDeep(d.duplicate(o.defaultConfig),t?t.config():{},e);i.mark=m.initMarkConfig(n,r,i);return i};t.prototype._initScale=function(e,t,n){return a.UNIT_SCALE_CHANNELS.reduce(function(r,i){if(u.has(t,i)||i===a.X&&u.has(t,a.X2)||i===a.Y&&u.has(t,a.Y2)){var o=t[i];var s=(o||{}).scale||{};var l=M.scaleType(s,o,i,e);r[i]=d.extend({type:l,round:n.scale.round,padding:n.scale.padding,useRawDomain:n.scale.useRawDomain,bandSize:i===a.X&&l===c.ScaleType.ORDINAL&&e===f.TEXT?n.scale.textBandWidth:n.scale.bandSize},s)}return r},{})};t.prototype._initAxis=function(e,t){return[a.X,a.Y].reduce(function(n,r){if(u.has(e,r)||r===a.X&&u.has(e,a.X2)||r===a.Y&&u.has(e,a.Y2)){var i=(e[r]||{}).axis;if(i!==false){n[r]=d.extend({},t.axis,i===true?{}:i||{})}}return n},{})};t.prototype._initLegend=function(e,t){return a.NONSPATIAL_SCALE_CHANNELS.reduce(function(n,r){if(u.has(e,r)){var i=e[r].legend;if(i!==false){n[r]=d.extend({},t.legend,i===true?{}:i||{})}}return n},{})};t.prototype.parseData=function(){this.component.data=v.parseUnitData(this)};t.prototype.parseSelectionData=function(){};t.prototype.parseLayoutData=function(){this.component.layout=_.parseUnitLayout(this)};t.prototype.parseScale=function(){this.component.scale=M.parseScaleComponent(this)};t.prototype.parseMark=function(){this.component.mark=b.parseMark(this)};t.prototype.parseAxis=function(){this.component.axis=p.parseAxisComponent(this,[a.X,a.Y])};t.prototype.parseAxisGroup=function(){return null};t.prototype.parseGridGroup=function(){return null};t.prototype.parseLegend=function(){this.component.legend=y.parseLegendComponent(this)};t.prototype.assembleData=function(e){return v.assembleData(this,e)};t.prototype.assembleLayout=function(e){return _.assembleLayout(this,e)};t.prototype.assembleMarks=function(){return this.component.mark};t.prototype.assembleParentGroupProperties=function(e){return g.applyConfig({},e,g.FILL_STROKE_CONFIG.concat(["clip"]))};t.prototype.channels=function(){return a.UNIT_CHANNELS};t.prototype.mapping=function(){return this.encoding()};t.prototype.stack=function(){return this._stack};t.prototype.toSpec=function(e,t){var n=d.duplicate(this._encoding);var r;r={mark:this._mark,encoding:n};if(!e){r.config=d.duplicate(this._config)}if(!t){r.data=d.duplicate(this._data)}return r};t.prototype.mark=function(){return this._mark};t.prototype.has=function(e){return u.has(this._encoding,e)};t.prototype.encoding=function(){return this._encoding};t.prototype.fieldDef=function(e){return this._encoding[e]||{}};t.prototype.field=function(e,t){if(t===void 0){t={}}var n=this.fieldDef(e);if(n.bin){t=d.extend({binSuffix:this.scale(e).type===c.ScaleType.ORDINAL?"_range":"_start"},t)}return l.field(n,t)};t.prototype.dataTable=function(){return this.dataName(u.isAggregate(this._encoding)?s.SUMMARY:s.SOURCE)};t.prototype.isUnit=function(){return true};return t}(x.Model);t.UnitModel=w},zhsD:function(e,t,n){var r=n("zicW"),i=n("Za4h").svg,a=n("eJnU");function o(e){return e.x||0}function s(e){return e.y||0}function u(e){return(e.x||0)+(e.width||0)}function l(e){return(e.y||0)+(e.height||0)}function f(e){return e.size==null?100:e.size}function c(e){return e.shape||"circle"}var h=i.area().x(o).y1(s).y0(l),d=i.area().y(s).x1(o).x0(u),p=i.line().x(o).y(s);e.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:i.arc(),symbol:i.symbol().type(c).size(f),area:function(e){var t=e[0];return(t.orient==="horizontal"?d:h).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return p.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},resize:function(e,t){var n=a(e),r="",i,o,s,u,l,f,c;t=Math.sqrt(t);for(u=0,l=n.length;u<l;++u){for(i=n[u],f=0,c=i.length;f<c;++f){if(i[f]==="Z")break;if((o=+i[f])===o){s=e.indexOf(o);r+=e.substring(0,s)+o*t;e=e.substring(s+(o+"").length)}}}return r+"Z"}},symbolTypes:r.toMap(i.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}},zicW:function(e,t,n){var r=n("zF6n");var i={version:n("NdEd").version,load:n("5AQc"),read:n("YGNx"),type:n("ggRp"),Aggregator:n("tGq9"),groupby:n("lkhv"),bins:n("prMK"),$bin:n("qmQ9").$bin,histogram:n("qmQ9").histogram,format:n("GXhC"),template:n("yQql"),time:n("mgrV")};r.extend(i,r);r.extend(i,n("3bKu"));r.extend(i,n("YsQl"));r.extend(i,n("uHQN"));r.extend(i,n("gjoU"));r.extend(i.format,n("nXcD"));i.print={table:i.format.table,summary:i.format.summary};e.exports=i}});
//# sourceMappingURL=0.f30e390d494625aeb321.js.map